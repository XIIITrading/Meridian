const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CMyFGii6.js","./DOFFjK0_.js","./entry.DDfSYhWa.css","./qgYlKlk5.js","./Cb5B9eG-.js","./C_qz9woQ.js","./DA4KItu_.js","./CV-2bRRD.js","./TimeSelector.DAR2lbHN.css","./D8wgK-Ih.js","./HdsRe6lq.js","./index.N-A1gxk9.css","./DzBSAsxR.js","./FilterInput.7KjqjE1F.css","./DGuB8RA-.js","./4fFkR2QG.js","./Pagination.XVPzwtel.css","./D2QgEzTv.js","./SJHyi9T4.js","./DG2ZEhLK.js","./CAfhvBOi.js","./BYGCxle3.js","./DcFNOSET.js","./boyBAVNN.js","./4PLl4EP6.js","./Bgc5K1P7.js","./DEAKw9Pl.js","./CHgOe2F-.js","./CYkscC4Z.js","./ps5He39s.js","./Cl-qOJW6.js","./BcKPINb2.js","./VirtualCell.6f0pX0MN.css"])))=>i.map(i=>d[i]);
import{e as se,G as a,fT as le,dJ as ie,gk as re,r as p,kO as ue,kP as me,kr as pe,gb as ce,em as ve,ko as de,j7 as fe,Y as M,j3 as _e,j8 as Ie,gD as ye,iC as Ce,gE as we,gB as xe,mm as be,as as je,km as ge,n as C,aQ as z,g as ke,i_ as Ee,kQ as D,bz as Oe,I as E,o as w,w as K,a as N,ag as B,L as t,c as Te,K as O,a3 as Re,N as S,b as he,M as Ae,aS as $,bw as Le,hU as Pe,aW as F,_ as Ve}from"./DOFFjK0_.js";import{_ as Ue}from"./31oN5MbZ.js";import{a as Me}from"./4PLl4EP6.js";import{u as ze}from"./CMyFGii6.js";import{u as De}from"./CV-2bRRD.js";import"./Byuk3M83.js";import"./SJHyi9T4.js";import"./D2QgEzTv.js";import"./DcFNOSET.js";import"./boyBAVNN.js";import"./qgYlKlk5.js";import"./Cb5B9eG-.js";import"./C_qz9woQ.js";import"./DA4KItu_.js";import"./D8wgK-Ih.js";import"./HdsRe6lq.js";import"./DzBSAsxR.js";import"./DGuB8RA-.js";import"./4fFkR2QG.js";import"./DG2ZEhLK.js";import"./CAfhvBOi.js";import"./BYGCxle3.js";import"./Bgc5K1P7.js";import"./DEAKw9Pl.js";import"./CHgOe2F-.js";import"./CYkscC4Z.js";import"./ps5He39s.js";import"./Cl-qOJW6.js";import"./BcKPINb2.js";const Ke=$(()=>F(()=>import("./CMyFGii6.js").then(s=>s.U),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]),import.meta.url).then(s=>s.default||s)),Ne=$(()=>F(()=>import("./CMyFGii6.js").then(s=>s.b),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]),import.meta.url).then(s=>s.default||s)),Be={class:"chips flex items-center flex-1 max-w-[calc(100%_-_16px)] min-h-[28px]"},Se=se({__name:"OneToOne",async setup(s){let T,R;const r=a(le),G=a(re,ie()),l=a(ue,p(null)),Q=a(me),_=a(pe),J=a(ce,p(!1)),h=a(ve,p(!1)),W=a(de,p(!1)),A=a(fe,!1),x=a(Ie,M(_e)),L=a(ye,p(!1)),Y=a(Ce,M({})),c=a(we,null),v=a(xe,null),d=a(be,null),{isUIAllowed:q}=je(),o=p(!1),f=p(!1),{state:b,isNew:j,removeLTARRef:X}=Me(),{relatedTableMeta:Z,loadRelatedTableMeta:H,relatedTableDisplayValueProp:g,relatedTableDisplayValuePropId:P,unlink:ee}=ze(r,Q,j,G.trigger);[T,R]=ge(()=>H()),await T,R();const I=C(()=>!J.value&&q("dataEdit")&&!W.value||h.value),te=C(()=>l!=null&&l.value?"maximize":"plus"),i=C(()=>{var e;if(l!=null&&l.value)return l==null?void 0:l.value;if(j.value){const n=r==null?void 0:r.value.title,u=(e=b==null?void 0:b.value)==null?void 0:e[n];return Array.isArray(u)?u[0]:u}return null}),V=async e=>{j.value?await X(e,r==null?void 0:r.value):await ee(e)};De(_,e=>{switch(e.key){case"Enter":o.value=!0,e.stopPropagation();break}});const U=C(()=>{var e,n;return(n=(e=Z.value)==null?void 0:e.columns)==null?void 0:n.find(u=>u.title===g.value)});z(o,()=>{f.value=o.value}),z(f,e=>{e||(o.value=!1)},{flush:"post"});function y(e){e.type!=="click"||!I.value||(L.value||h.value||_.value)&&(o.value=!0)}const k=e=>{if(!(!(e instanceof KeyboardEvent)||!e.target||Le(e)||!I.value)&&Pe(e))return o.value?o.value=!1:o.value=!0,!0};return ke(()=>{d==null||d.on(y),v==null||v.on(y),c==null||c.on(k),!(!I.value||!A||!x||L.value)&&Ee(()=>{k(Y.event)||(D(".unlink-icon",x)?V(i.value):(D(".nc-canvas-table-editable-cell-wrapper .nc-plus.nc-action-icon",x),o.value=!0))})}),Oe(()=>{d==null||d.off(y),v==null||v.off(y),c==null||c.off(k)}),(e,n)=>{const u=Ue,ne=Ae,oe=Ke,ae=Ne;return w(),E(ae,{"is-open":f.value,"onUpdate:isOpen":n[5]||(n[5]=m=>f.value=m)},{overlay:K(()=>[o.value?(w(),E(oe,{key:0,modelValue:o.value,"onUpdate:modelValue":n[3]||(n[3]=m=>o.value=m),column:t(U),"hide-back-btn":"",onEscape:n[4]||(n[4]=m=>f.value=!1)},null,8,["modelValue","column"])):O("",!0)]),default:K(()=>[N("div",{class:B(["nc-cell-field flex w-full chips-wrapper items-center min-h-6.5 relative",{active:t(_)}])},[N("div",Be,[t(i)&&(t(g)||t(P))?(w(),E(u,{key:0,item:t(i),value:!Array.isArray(t(i))&&typeof t(i)=="object"?t(i)[t(g)]??t(i)[t(P)]:t(i),column:t(U),"show-unlink-button":!0,onUnlink:n[0]||(n[0]=m=>V(t(i)))},null,8,["item","value","column"])):O("",!0)]),t(I)?(w(),Te("div",{key:0,class:"flex justify-end group gap-1 min-h-4 items-center",tabindex:"0",onKeydown:n[2]||(n[2]=Re(S(m=>o.value=!0,["stop"]),["enter"]))},[he(ne,{icon:t(te),class:B(["!text-md select-none text-gray-700 nc-action-icon nc-plus invisible group-hover:visible group-focus:visible",{"!visible !text-gray-600":t(A)&&t(_)}]),onClick:n[1]||(n[1]=S(m=>o.value=!0,["stop"]))},null,8,["icon","class"])],32)):O("",!0)],2)]),_:1},8,["is-open"])}}}),yt=Object.assign(Ve(Se,[["__scopeId","data-v-c38089f3"]]),{__name:"VirtualCellOneToOne"});export{yt as default};
