import{e as st,a8 as lt,am as pt,G as mt,r as Y,aM as gt,av as G,T as dt,aQ as ct,n as E,h7 as ut,c as m,o as r,a as i,K as g,b as A,w as p,L as t,cn as O,ag as L,I as u,an as v,ap as yt,t as s,d as R,aj as d,M as ft,iW as V,aq as U,aG as wt,P as Z,_ as vt}from"./DOFFjK0_.js";import{_ as ht}from"./D_wq2ltS.js";import{_ as xt}from"./9aYOtC5C.js";import{c as _t}from"./CiBV2ZED.js";import{r as D}from"./CJtI8BMq.js";import{b as bt}from"./0c4tmWST.js";import{S as kt}from"./CYkscC4Z.js";import"./DDEVLD8O.js";import"./ZNRZafJ9.js";import"./BhfICdUA.js";import"./NRjd0XWG.js";import"./RfUK_fd6.js";import"./DG2ZEhLK.js";import"./SJHyi9T4.js";import"./BYGCxle3.js";import"./D2QgEzTv.js";import"./BNo10Mdm.js";import"./hehmy6V1.js";import"./BvG7Iv4q.js";import"./CyXz1Zkk.js";import"./CPChVVVr.js";import"./D4c215jk.js";import"./B3Wp9c04.js";import"./CFXGfO_A.js";import"./VKUQM8lk.js";import"./YaKnxhzO.js";import"./BqWeTF94.js";import"./-rIuSlCu.js";import"./BrfakvRE.js";import"./sgaWLnOz.js";import"./CQugZrqw.js";import"./C6nWwNvX.js";import"./BpgQOThx.js";import"./DmoodaOn.js";import"./Bo7kLdUR.js";import"./4PLl4EP6.js";import"./DcFNOSET.js";import"./boyBAVNN.js";import"./B3tDgntu.js";import"./Db9kSA7A.js";import"./D1gZ4Fpg.js";import"./C1uRXLg7.js";import"./DGuB8RA-.js";import"./DunK-51v.js";import"./ps5He39s.js";import"./CHgOe2F-.js";import"./MSgi_m6o.js";import"./JKos0pQW.js";import"./BdLxRlCP.js";import"./CNJqPN7Y.js";import"./AxsiR11P.js";import"./C9H3ht2d.js";import"./CkXo2doe.js";import"./CV-2bRRD.js";import"./Czlq_f4Y.js";import"./Cgx2iu1G.js";import"./DiUleKVo.js";import"./JUJEmhCv.js";import"./Bgc5K1P7.js";import"./lL-0_K96.js";import"./BClTqpVB.js";import"./CtJu2gHc.js";import"./MNXVOE4I.js";import"./CMyFGii6.js";import"./qgYlKlk5.js";import"./Cb5B9eG-.js";import"./C_qz9woQ.js";import"./DA4KItu_.js";import"./D8wgK-Ih.js";import"./HdsRe6lq.js";import"./DzBSAsxR.js";import"./4fFkR2QG.js";import"./CAfhvBOi.js";import"./DEAKw9Pl.js";import"./BcKPINb2.js";import"./D0vnHTOx.js";import"./BRTCxTHu.js";import"./SpSJ8E4d.js";import"./Dh5zKH8k.js";import"./B4YnCsMc.js";import"./6zXueAcs.js";import"./Byuk3M83.js";import"./D-8_fbld.js";import"./DminWhpq.js";import"./Cl-qOJW6.js";const $t={class:"sticky flex items-center bg-gray-50 left-0"},At={class:"flex relative justify-between gap-2 w-full"},Ot={key:0,class:"nc-pagination-skeleton flex justify-center item-center min-h-10 min-w-16 w-16"},St={"data-testid":"grid-pagination",class:"text-gray-500 text-ellipsis overflow-hidden pl-1 truncate nc-grid-row-count caption text-xs text-nowrap"},jt={"data-testid":"grid-pagination",class:"text-gray-500 text-ellipsis overflow-hidden pl-1 truncate nc-grid-row-count caption text-xs text-nowrap"},Bt={style:{direction:"rtl"},class:"flex gap-2 text-nowrap truncate overflow-hidden items-center"},Ct={class:"text-gray-600 text-[12px] font-semibold"},Kt={class:"text-gray-500 text-[12px] leading-4"},zt={class:"flex gap-2 text-nowrap overflow-hidden items-center"},Lt={class:"text-[12px] leading-4"},Rt={class:"text-[12px] font-semibold"},Vt={class:"flex !w-full text-[13px] text-gray-800 items-center justify-between"},Dt={class:"flex gap-2 truncate text-nowrap overflow-hidden items-center"},It={class:"text-gray-500 text-[12px] leading-4"},Nt={class:"text-gray-600 font-semibold text-[12px]"},Ft={class:"flex gap-2 text-nowrap overflow-hidden items-center"},Tt={class:"text-[12px] leading-4"},Mt={class:"font-semibold text-[12px]"},Pt={class:"flex !w-full text-[13px] text-gray-800 items-center justify-between"},Gt={key:0,class:"absolute h-9 bg-white border-l-1 border-gray-200 px-1 flex items-center right-0"},Et=st({__name:"PaginationV2",props:{scrollLeft:{},paginationData:{},changePage:{type:Function},showSizeChanger:{type:Boolean},customLabel:{},totalRows:{},depth:{},disablePagination:{type:Boolean}},emits:["update:paginationData"],setup(tt,{emit:et}){const b=tt,ot=et,{isViewDataLoading:rt,isPaginationLoading:I}=lt(pt()),h=mt(gt,Y(!1)),{changePage:w,customLabel:S}=b,at=G(b,"showSizeChanger"),c=dt(b,"paginationData",ot),N=G(b,"disablePagination"),{updateAggregate:W,getAggregations:q,visibleFieldsComputed:it,displayFieldComputed:a}=bt(),F=G(b,"scrollLeft"),T=Y();ct(F,e=>{T.value&&(T.value.scrollLeft=e)},{immediate:!0});const x=E(()=>{var e;return((e=c.value)==null?void 0:e.totalRows)??1/0}),k=E({get:()=>{var e;return((e=c==null?void 0:c.value)==null?void 0:e.page)??1},set:async e=>{if(!N.value){I.value=!0;try{await(w==null?void 0:w(e)),I.value=!1}catch(l){if(ut.isCancel(l))return;I.value=!1}}}}),M=E({get:()=>{var e;return((e=c.value)==null?void 0:e.pageSize)??25},set:e=>{var l,B;if(c.value){if((l=c.value)!=null&&l.pageSize&&((B=c.value)==null?void 0:B.pageSize)===e)return;c.value.pageSize=e,c.value.totalRows&&k.value*e<c.value.totalRows?w==null||w(k.value):w==null||w(1)}}}),j=(e,l=!1)=>{if(l||(F.value??0)<30)switch(e){case 3:return 26;case 2:return 17;case 1:return 8;default:return 0}return 0};return(e,l)=>{var X;const B=kt,C=yt,K=ft,Q=ht,H=xt,J=wt,nt=_t;return r(),m("div",{ref_key:"containerElement",ref:T,class:"bg-gray-50 w-full pr-1 border-t-1 border-gray-200 overflow-x-hidden no-scrollbar flex h-9"},[i("div",$t,[A(J,{disabled:[t(d).SpecificDBType,t(d).ForeignKey,t(d).Button].includes((X=t(a).column)==null?void 0:X.uidt)||t(h),"overlay-class-name":"max-h-96 relative scroll-container nc-scrollbar-md overflow-auto"},{overlay:p(()=>{var o;return[t(a).field&&((o=t(a).column)!=null&&o.id)?(r(),u(H,{key:0,variant:"small"},{default:p(()=>[(r(!0),m(v,null,U(t(q)(t(a).column),(y,n)=>(r(),u(Q,{key:n,onClick:f=>t(W)(t(a).column.id,y)},{default:p(()=>{var f;return[i("div",Vt,[R(s(e.$t(`aggregation_type.${y}`))+" ",1),((f=t(a).field)==null?void 0:f.aggregation)===y?(r(),u(K,{key:0,class:"text-brand-500",icon:"check"})):g("",!0)])]}),_:2},1032,["onClick"]))),128))]),_:1})):g("",!0)]}),default:p(()=>{var o,y,n,f,$,_,z,P;return[t(a).field&&((o=t(a).column)!=null&&o.id)?(r(),m("div",{key:0,class:L(["flex items-center overflow-x-hidden hover:bg-gray-100 text-gray-500 justify-end transition-all transition-linear px-3 py-2",{"cursor-pointer":!t(h)}]),style:O({"min-width":(y=t(a))==null?void 0:y.width,"max-width":(n=t(a))==null?void 0:n.width,width:(f=t(a))==null?void 0:f.width,"margin-left":`${j(e.depth??0)}px`})},[i("div",At,[t(N)?+e.totalRows>=0?(r(),u(C,{key:1,class:"flex sticky items-center h-full"},{title:p(()=>[R(s(e.totalRows)+" "+s(e.totalRows!==1?e.$t("objects.records"):e.$t("objects.record")),1)]),default:p(()=>[i("span",jt,s(Intl.NumberFormat("en",{notation:"compact"}).format(e.totalRows))+" "+s(e.totalRows!==1?e.$t("objects.records"):e.$t("objects.record")),1)]),_:1})):g("",!0):(r(),m(v,{key:0},[t(rt)?(r(),m("div",Ot,[A(B,{active:!0,title:!0,paragraph:!1,class:"w-16 max-w-16"})])):(r(),u(C,{key:1,class:"flex sticky items-center h-full"},{title:p(()=>[R(s(t(x))+" "+s(t(S)?t(S):t(x)!==1?e.$t("objects.records"):e.$t("objects.record")),1)]),default:p(()=>[i("span",St,s(Intl.NumberFormat("en",{notation:"compact"}).format(t(x)))+" "+s(t(S)?t(S):t(x)!==1?e.$t("objects.records"):e.$t("objects.record")),1)]),_:1}))],64)),[t(d).SpecificDBType,t(d).ForeignKey,t(d).Button].includes(($=t(a).column)==null?void 0:$.uidt)?g("",!0):(r(),m(v,{key:2},[!((_=t(a).field)!=null&&_.aggregation)||((z=t(a).field)==null?void 0:z.aggregation)==="none"?(r(),m("div",{key:0,class:L([{"group-hover:opacity-100":!t(h)},"text-gray-500 opacity-0 transition"])},[A(K,{class:"text-gray-500",icon:"arrowDown"}),l[2]||(l[2]=i("span",{class:"text-[10px] font-semibold"}," Summary ",-1))],2)):t(a).value!==void 0?(r(),u(C,{key:1,style:O({maxWidth:`${(P=t(a))==null?void 0:P.width}`})},{title:p(()=>[i("div",zt,[i("span",Lt,s(e.$t(`aggregation.${t(a).field.aggregation}`)),1),i("span",Rt,s(("formatAggregation"in e?e.formatAggregation:t(V))(t(a).field.aggregation,t(a).value,t(a).column)),1)])]),default:p(()=>[i("div",Bt,[i("span",Ct,s(("formatAggregation"in e?e.formatAggregation:t(V))(t(a).field.aggregation,t(a).value,t(a).column)),1),i("span",Kt,s(e.$t(`aggregation.${t(a).field.aggregation}`)),1)])]),_:1},8,["style"])):g("",!0)],64))])],6)):g("",!0)]}),_:1},8,["disabled"])]),(r(!0),m(v,null,U(t(it),({field:o,width:y,column:n,value:f},$)=>(r(),m(v,{key:$},[$===0&&t(F)>30?(r(),m("div",{key:0,style:O(`width: ${j(e.depth??0,!0)}px;min-width: ${j(e.depth??0,!0)}px;max-width: ${j(e.depth??0,!0)}px`)},null,4)):g("",!0),o&&(n!=null&&n.id)?(r(),u(J,{key:1,disabled:[t(d).SpecificDBType,t(d).ForeignKey,t(d).Button].includes(n==null?void 0:n.uidt)||t(h),"overlay-class-name":"max-h-96 relative scroll-container nc-scrollbar-md overflow-auto"},{overlay:p(()=>[A(H,{variant:"small"},{default:p(()=>[(r(!0),m(v,null,U(t(q)(n),(_,z)=>(r(),u(Q,{key:z,onClick:P=>t(W)(n.id,_)},{default:p(()=>[i("div",Pt,[R(s(e.$t(`aggregation_type.${_}`))+" ",1),(o==null?void 0:o.aggregation)===_?(r(),u(K,{key:0,class:"text-brand-500",icon:"check"})):g("",!0)])]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),default:p(()=>[i("div",{class:L(["flex items-center overflow-hidden justify-end group hover:bg-gray-100 text-gray-500 transition-all transition-linear px-3 py-2",{"cursor-pointer":!t(h)}]),style:O({"min-width":y,"max-width":y,width:y})},[[t(d).SpecificDBType,t(d).ForeignKey,t(d).Button].includes(n==null?void 0:n.uidt)?g("",!0):(r(),m(v,{key:0},[(o==null?void 0:o.aggregation)==="none"||(o==null?void 0:o.aggregation)===null?(r(),m("div",{key:0,class:L([{"group-hover:opacity-100":!t(h)},"text-gray-500 opacity-0 transition"])},[A(K,{class:"text-gray-500",icon:"arrowDown"}),l[3]||(l[3]=i("span",{class:"text-[10px] font-semibold"}," Summary ",-1))],2)):f!==void 0?(r(),u(C,{key:1,style:O({maxWidth:`${o==null?void 0:o.width}px`})},{title:p(()=>[i("div",Ft,[i("span",Tt,s(e.$t(`aggregation.${o.aggregation}`).replace("Percent ","")),1),i("span",Mt,s(("formatAggregation"in e?e.formatAggregation:t(V))(o.aggregation,f,n)),1)])]),default:p(()=>[i("div",Dt,[i("span",It,s(e.$t(`aggregation.${o.aggregation}`).replace("Percent ","")),1),i("span",Nt,s(("formatAggregation"in e?e.formatAggregation:t(V))(o.aggregation,f,n)),1)])]),_:2},1032,["style"])):g("",!0)],64))],6)]),_:2},1032,["disabled"])):g("",!0)],64))),128)),l[4]||(l[4]=i("div",{class:"!pl-8 pr-60 !w-8 h-1"},"‎",-1)),t(N)?g("",!0):(r(),m("div",Gt,[t(x)!==1/0?(r(),u(nt,{key:0,current:t(k),"onUpdate:current":l[0]||(l[0]=o=>Z(k)?k.value=o:null),"page-size":t(M),"onUpdate:pageSize":l[1]||(l[1]=o=>Z(M)?M.value=o:null),"show-size-changer":t(at),class:"xs:mr-2",total:+t(x),"entity-name":"grid","prev-page-tooltip":`${("renderAltOrOptlKey"in e?e.renderAltOrOptlKey:t(D))()}+←`,"next-page-tooltip":`${("renderAltOrOptlKey"in e?e.renderAltOrOptlKey:t(D))()}+→`,"first-page-tooltip":`${("renderAltOrOptlKey"in e?e.renderAltOrOptlKey:t(D))()}+↓`,"last-page-tooltip":`${("renderAltOrOptlKey"in e?e.renderAltOrOptlKey:t(D))()}+↑`},null,8,["current","page-size","show-size-changer","total","prev-page-tooltip","next-page-tooltip","first-page-tooltip","last-page-tooltip"])):g("",!0)]))],512)}}}),ko=Object.assign(vt(Et,[["__scopeId","data-v-d2d2f04c"]]),{__name:"SmartsheetGridPaginationV2"});export{ko as default};
