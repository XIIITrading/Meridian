import{e as E,b5 as M,km as U,aX as d,r as y,cd as G,em as H,mw as q,mx as z,Y as J,aQ as K,c as f,o as l,b as t,w as n,I as k,K as m,L as e,bG as Q,cb as T,ag as X,P as A,a as w,d as g,M as O,t as c,X as Y,a0 as Z,d1 as W,by as ee,O as se,bH as ae,dJ as te,fQ as oe,aZ as ne,_ as re}from"./DOFFjK0_.js";import{_ as le}from"./BjAHF2Hs.js";import{u as ie}from"./CgBhsNh5.js";import{a as de}from"./CAfhvBOi.js";import{a as me}from"./DG2ZEhLK.js";import"./BUvWXnXR.js";import"./SJHyi9T4.js";import"./BYGCxle3.js";import"./DcFNOSET.js";import"./boyBAVNN.js";import"./D2QgEzTv.js";import"./4PLl4EP6.js";const ce=""+new URL("form.DESRCJtL.png",import.meta.url).href,ue={class:"flex flex-col gap-5"},_e={class:"flex flex-row items-center gap-x-2 text-base font-weight-700 text-gray-800"},pe={key:0,class:"mb-2 text-sm text-red-500"},fe={class:"flex flex-row justify-end gap-x-2"},we={key:2,alt:"view image",src:ce,class:"fixed inset-0 w-full h-full"},ge=E({__name:"[viewId]",async setup(ve){let v,b;ie("nc-left-sidebar",{hasSidebar:!1});const I=M(),{loadSharedView:u,sharedView:C,sharedViewMeta:_,meta:x,notFound:p,password:S,passwordDlg:o,passwordError:h}=de(I.params.viewId);[v,b]=U(()=>u()),await v,b(),p.value||(d(oe,te()),d(ne,x),d(G,y(!0)),d(H,y(!0)),me(C,x,!0),q(_.value.rtl?"rtl":"ltr"),_.value.language&&z(_.value.language));const r=J({password:""});K(()=>r.password,()=>{S.value=r.password});const P=s=>{var a;return s&&((a=s==null?void 0:s.focus)==null?void 0:a.call(s))};return(s,a)=>{const V=Q,$=le,N=O,F=W,R=Z,j=Y,D=se,L=T,B=ae;return l(),f("div",null,[t(B,null,{default:n(()=>[!e(o)&&!e(p)?(l(),k(V,{key:0})):m("",!0),e(p)?(l(),k($,{key:1})):m("",!0),t(L,{visible:e(o),"onUpdate:visible":a[1]||(a[1]=i=>A(o)?o.value=i:null),class:X({active:e(o)}),closable:!1,width:"min(100%, 450px)",centered:"",footer:null,"mask-closable":!1,"wrap-class-name":"nc-modal-shared-form-password-dlg","mask-style":{backgroundColor:"rgba(255, 255, 255, 0.64)",backdropFilter:"blur(8px)"},onClose:a[2]||(a[2]=i=>o.value=!1)},{default:n(()=>[w("div",ue,[w("div",_e,[t(N,{icon:"ncKey",class:"!text-base w-5 h-5"}),g(" "+c(s.$t("msg.thisSharedViewIsProtected")),1)]),t(j,{model:e(r),onFinish:e(u)},{default:n(()=>[t(R,{name:"password",rules:[{required:!0,message:s.$t("msg.error.signUpRules.passwdRequired")}],class:"!mb-0"},{default:n(()=>[t(F,{ref:P,value:e(r).password,"onUpdate:value":a[0]||(a[0]=i=>e(r).password=i),class:"!rounded-lg !text-small","hide-details":"",placeholder:s.$t("msg.enterPassword")},null,8,["value","placeholder"]),t(ee,{name:"layout"},{default:n(()=>[e(h)?(l(),f("div",pe,c(e(h)),1)):m("",!0)]),_:1})]),_:1},8,["rules"])]),_:1},8,["model","onFinish"]),w("div",fe,[t(D,{disabled:!e(r).password,type:"primary",size:"small","html-type":"submit",class:"!px-2","data-testid":"nc-shared-view-password-submit-btn",onClick:e(u)},{loading:n(()=>[g(c(s.$t("msg.verifyingPassword")),1)]),default:n(()=>[g(c(s.$t("objects.view"))+" ",1)]),_:1},8,["disabled","onClick"])])])]),_:1},8,["visible","class"]),e(o)?(l(),f("img",we)):m("",!0)]),_:1})])}}}),Fe=re(ge,[["__scopeId","data-v-05f370a3"]]);export{Fe as default};
