import{_ as lt}from"./Bx9ACB-J.js";import{e as Ne,f as ct,a8 as H,al as Be,a7 as rt,c3 as it,r as B,fr as dt,n as Ie,fd as ut,cm as z,bv as pt,g as Re,ab as J,c as m,o as i,a as n,b as l,d as u,t as c,ar as _t,L as s,aV as mt,P as ne,w as r,M as Ue,ad as yt,K as w,ag as b,I as v,an as Z,aq as Te,cn as Oe,ap as ft,eZ as L,c4 as vt,ah as gt,N as bt,aG as ht,O as wt,mv as xt,c7 as Se,cr as Ae,aA as kt,af as $t,aJ as Dt,f7 as Ct,eU as Ee,bd as It,Q as Tt,a3 as Ot,a4 as St,a5 as At,_ as oe,as as Me,eo as Et,aQ as Mt,fm as Nt,bW as Bt,dD as Rt,dk as Ut,dj as zt}from"./DOFFjK0_.js";import Lt from"./Co1c6GHq.js";import{_ as jt,a as Gt}from"./BJ_KO_Ot.js";import{_ as Kt}from"./CQugZrqw.js";import{u as Wt,_ as Pt,b as Ft}from"./CFXGfO_A.js";import{_ as Vt}from"./D_wq2ltS.js";import{_ as Yt}from"./9aYOtC5C.js";import{_ as Qt}from"./4fFkR2QG.js";import{_ as qt}from"./VKUQM8lk.js";import Jt from"./DiUleKVo.js";import{a as ae}from"./Ck0WYZ6p.js";import{r as X}from"./CJtI8BMq.js";import{u as Zt}from"./CtJu2gHc.js";import{S as Xt}from"./ps5He39s.js";import{u as Ht}from"./C9H3ht2d.js";import"./BjlRxDgN.js";import"./boyBAVNN.js";import"./CFDwQBzt.js";import"./G4Pt-Lbf.js";import"./Bo7kLdUR.js";import"./DeaWGTJr.js";import"./Db9kSA7A.js";import"./D1f5NZz7.js";import"./CyXz1Zkk.js";import"./SJHyi9T4.js";import"./JUJEmhCv.js";import"./BrfakvRE.js";import"./CHgOe2F-.js";const es={class:"h-full flex flex-col gap-6 nc-workspace-connections nc-content-max-w mx-auto"},ts={class:"flex flex-col justify-between gap-2 mx-1"},ss={class:"text-sm font-normal text-gray-600"},as={target:"_blank",href:"https://nocodb.com/docs/product-docs/integrations/actions-on-connection",rel:"noopener noreferrer"},ns={class:"flex items-center gap-3"},os={class:"table-container relative flex-1"},ls={class:"!sticky top-0 z-5 w-full"},cs={class:"flex items-center gap-3"},rs={class:"flex items-center gap-3"},is={class:"flex items-center gap-3"},ds={class:"flex items-center gap-3"},us={class:"cell-actions"},ps={key:0,class:"h-full max-h-[calc(100%_-_55px)] w-full"},_s=["onClick"],ms={class:"cell-title"},ys={key:0},fs={class:"cell-type"},vs={class:"cell-created-date"},gs={class:"cell-added-by"},bs={key:0,class:"flex items-center gap-3"},hs={class:"h-8 w-8 grid place-items-center"},ws={key:0,class:"w-full flex gap-3 items-center"},xs={class:"flex-1 flex flex-col max-w-[calc(100%_-_44px)]"},ks={class:"w-full flex gap-3"},$s={key:1,class:"w-full truncate text-gray-500"},Ds={class:"cell-usage"},Cs={class:"justify-end"},Is={class:"flex items-center justify-center absolute left-0 top-0 w-full h-full z-10 pb-10 pointer-events-none"},Ts={class:"flex flex-col justify-center items-center gap-2"},Os={class:"text-center"},Ss={key:0,class:"flex-none integration-table-empty flex items-center justify-center py-8 px-6 h-full max-h-[calc(100%_-_94px)]"},As={key:0,class:"px-2 py-6 text-gray-500 flex flex-col items-center gap-6 text-center"},Es={key:1,class:"flex-none text-center flex flex-col items-center gap-3"},Ms={class:"flex justify-between items-center w-full px-6"},Ns={class:"text-gray-500 text-xs"},Bs={class:"rounded-lg overflow-hidden"},Rs={class:"rounded-lg overflow-hidden mt-2"},Us={key:1,class:"w-full flex flex-col text-gray-800"},zs={class:"flex flex-row items-center py-2 px-3.25 bg-gray-50 rounded-lg text-gray-700 mb-4"},Ls={class:"text-ellipsis overflow-hidden select-none w-full pl-3",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},js={key:0,class:"flex flex-col pb-2 text-small leading-[18px] text-gray-500"},Gs={class:"!list-disc ml-6 mb-0"},Ks={class:"flex items-center gap-1"},Ws={class:"flex items-center"},Ps={class:"flex gap-4"},Fs={class:"flex flex-col gap-3"},Vs={class:"flex"},Ys={class:"!m-0 text-base font-weight-700 flex-1"},Qs={class:"text-sm text-gray-700"},qs=Ne({__name:"ConnectionsTab",setup(le){const{integrations:C,isLoadingIntegrations:I,deleteConfirmText:j,integrationPaginationData:f,successConfirmModal:O,searchQuery:R,loadDynamicIntegrations:ee,loadIntegrations:G,deleteIntegration:F,editIntegration:E,duplicateIntegration:te,getIntegration:M,setDefaultIntegration:p}=Wt(),{$api:S,$e:se}=ct(),{allCollaborators:V}=H(Be()),{bases:K}=H(rt()),{isFeatureEnabled:Y}=it(),N=B(!1),x=B(null),U=B(!1),A=B(),W=B(),d=B({}),ce=B([]),{width:ze}=dt(W),h=Ie(()=>{var t;const e=new Map;return(t=ce.value)==null||t.forEach(o=>{o!=null&&o.id&&e.set(o.id,o)}),e}),k=Ie(()=>(C.value||[]).filter(e=>ut.Sync!==e.type).sort((e,t)=>{var o,y,_,$;if(d.value.title){if(e.title&&t.title)return d.value.title==="asc"?e.title<t.title?-1:1:e.title>t.title?-1:1}else if(d.value.sub_type){if(e.sub_type&&t.sub_type)return d.value.sub_type==="asc"?e.sub_type<t.sub_type?-1:1:e.sub_type>t.sub_type?-1:1}else if(d.value.created_at){if(e!=null&&e.created_at&&(t!=null&&t.created_at))return d.value.created_at==="asc"?z(e.created_at).local().diff(z(t.created_at).local()):z(t.created_at).local().diff(z(e.created_at).local())}else if(d.value.created_by){if(e.created_by&&t.created_by&&h.value.get(e.created_by)&&h.value.get(t.created_by))return d.value.created_by==="asc"?((o=h.value.get(e.created_by))==null?void 0:o.email)<((y=h.value.get(t.created_by))==null?void 0:y.email)?-1:1:((_=h.value.get(e.created_by))==null?void 0:_.email)>(($=h.value.get(t.created_by))==null?void 0:$.email)?-1:1}else if(d.value.source_count&&e.source_count!==void 0&&t.source_count!==void 0)return d.value.source_count==="asc"?e.source_count-t.source_count:t.source_count-e.source_count;return 0}));async function Q(e=f.value.page,t=f.value.pageSize,o=!0){try{o&&(f.value.page=1),await G(null,void 0,o?1:e,t)}catch{}}const Le=async e=>{f.value.page=e,await Q(void 0,void 0,!1)},{onLeft:je,onRight:Ge,onUp:Ke,onDown:We}=Zt({paginationDataRef:f,changePage:Le,isViewDataLoading:I}),Pe=async e=>{U.value=!0,se("c:integration:delete"),j.value=null,N.value=!0,x.value=e;const t=await M(e,{includeSources:!0});x.value.sources=(t==null?void 0:t.sources)||[],U.value=!1},re=e=>{!Y(Se.DATA_REFLECTION)&&e.sub_type===L.NOCODB||E(e)},Fe=async()=>{var t;if(await F(x.value,!0))for(const o of((t=x.value)==null?void 0:t.sources)||[]){if(!o.base_id||!o.id||o.base_id&&!K.value.get(o.base_id))continue;const y=K.value.get(o.base_id);Array.isArray(y==null?void 0:y.sources)&&K.value.set(o.base_id,{...y||{},sources:[...y.sources.filter(_=>_.id!==o.id)]})}},Ve=async()=>{try{const e=await S.orgUsers.list();if(!(e!=null&&e.list))return;ce.value=e.list}catch(e){St.error(await At(e))}},P=e=>{var t,o,y;(t=C.value)!=null&&t.length&&(((o=d.value)==null?void 0:o[e])==="asc"?d.value={[e]:"desc"}:((y=d.value)==null?void 0:y[e])==="desc"?d.value={[e]:void 0}:d.value={[e]:"asc"})},Ye=mt(()=>{Q()},250),T=e=>{var t;return e?!((t=h.value.get(e))!=null&&t.email):!1},ie=e=>{var t,o,y,_,$;return((t=h.value.get(e))==null?void 0:t.display_name)||(($=(o=h.value.get(e))==null?void 0:o.email)==null?void 0:$.slice(0,(_=(y=h.value.get(e))==null?void 0:y.email)==null?void 0:_.indexOf("@")))};return pt(A,"scroll",()=>{var o,y,_,$;const e=(o=A.value)==null?void 0:o.querySelector("th.cell-title"),t=(y=A.value)==null?void 0:y.querySelector("th.cell-type");!(e!=null&&e.getBoundingClientRect().right)||!(t!=null&&t.getBoundingClientRect().left)||((t==null?void 0:t.getBoundingClientRect().left)<(e==null?void 0:e.getBoundingClientRect().right)?(_=A.value)==null||_.classList.add("sticky-shadow"):($=A.value)==null||$.classList.remove("sticky-shadow"))}),Re(async()=>{await ee(),await Promise.allSettled([!C.value.length&&G(),Ve()])}),J("ArrowLeft",je),J("ArrowRight",Ge),J("ArrowUp",Ke),J("ArrowDown",We),(e,t)=>{var _e,me,ye,fe,ve,ge,be,he,we,xe,ke,$e,De,Ce;const o=Ue,y=_t,_=ft,$=Kt,de=Pt,Qe=vt,ue=wt,q=Vt,qe=kt,Je=Yt,Ze=ht,Xe=Dt,He=Ee,et=Qt,pe=Xt,tt=It,st=qt,at=Jt,nt=Tt;return i(),m("div",es,[n("div",ts,[n("div",ss,[n("div",null,[u(c(e.$t("msg.manageConnections"))+" ",1),n("a",as,c(e.$t("msg.learnMore")),1)])]),n("div",ns,[l(y,{value:s(R),"onUpdate:value":t[0]||(t[0]=a=>ne(R)?R.value=a:null),type:"text",class:"nc-search-integration-input !min-w-[300px] !max-w-[400px] nc-input-sm flex-none",placeholder:`${e.$t("general.search")} ${e.$t("general.connections").toLowerCase()}`,"allow-clear":"",onInput:s(Ye)},{prefix:r(()=>[l(o,{icon:"search",class:"mr-2 h-4 w-4 text-gray-500"})]),_:1},8,["value","placeholder","onInput"])])]),n("div",os,[n("div",{ref_key:"tableWrapper",ref:A,class:b(["nc-workspace-integration-table relative nc-scrollbar-thin !overflow-auto max-h-[calc(100%_-_40px)]",{"h-full":(_e=s(k))==null?void 0:_e.length}])},[n("table",ls,[n("thead",null,[n("tr",null,[n("th",{class:b(["cell-title !hover:bg-gray-100 select-none cursor-pointer",{"cursor-not-allowed":!((me=s(k))!=null&&me.length),"!text-gray-700":s(d).title}]),onClick:t[1]||(t[1]=a=>P("title"))},[n("div",{ref_key:"titleHeaderCellRef",ref:W,class:"flex items-center gap-3"},[n("div",null,c(e.$t("general.name")),1),s(d).title?(i(),v(o,{key:0,icon:"chevronDown",class:b(["flex-none",{"transform rotate-180":((ye=s(d))==null?void 0:ye.title)==="asc"}])},null,8,["class"])):(i(),v(o,{key:1,icon:"chevronUpDown",class:"flex-none"}))],512)],2),n("th",{class:b(["cell-type !hover:bg-gray-100 select-none cursor-pointer",{"cursor-not-allowed":!((fe=s(k))!=null&&fe.length),"!text-gray-700":s(d).sub_type}]),onClick:t[2]||(t[2]=a=>P("sub_type"))},[n("div",cs,[n("div",null,c(e.$t("general.type")),1),s(d).sub_type?(i(),v(o,{key:0,icon:"chevronDown",class:b(["flex-none",{"transform rotate-180":s(d).sub_type==="asc"}])},null,8,["class"])):(i(),v(o,{key:1,icon:"chevronUpDown",class:"flex-none"}))])],2),n("th",{class:b(["cell-created-date !hover:bg-gray-100 select-none cursor-pointer",{"cursor-not-allowed":!((ve=s(k))!=null&&ve.length),"!text-gray-700":s(d).created_at}]),onClick:t[3]||(t[3]=a=>P("created_at"))},[n("div",rs,[n("div",null,c(e.$t("labels.dateAdded")),1),s(d).created_at?(i(),v(o,{key:0,icon:"chevronDown",class:b(["flex-none",{"transform rotate-180":s(d).created_at==="asc"}])},null,8,["class"])):(i(),v(o,{key:1,icon:"chevronUpDown",class:"flex-none"}))])],2),n("th",{class:b(["cell-added-by !hover:bg-gray-100 select-none cursor-pointer",{"cursor-not-allowed":!((ge=s(k))!=null&&ge.length),"!text-gray-700":s(d).created_by}]),onClick:t[4]||(t[4]=a=>P("created_by"))},[n("div",is,[n("div",null,c(e.$t("labels.addedBy")),1),s(d).created_by?(i(),v(o,{key:0,icon:"chevronDown",class:b(["flex-none",{"transform rotate-180":s(d).created_by==="asc"}])},null,8,["class"])):(i(),v(o,{key:1,icon:"chevronUpDown",class:"flex-none"}))])],2),n("th",{class:b(["cell-usage !hover:bg-gray-100 select-none cursor-pointer",{"cursor-not-allowed":!((be=s(k))!=null&&be.length)}]),onClick:t[5]||(t[5]=a=>P("source_count"))},[n("div",ds,[n("div",null,c(e.$t("general.usage")),1),(he=s(d))!=null&&he.source_count?(i(),v(o,{key:0,icon:"chevronDown",class:b(["flex-none",{"transform rotate-180":((we=s(d))==null?void 0:we.source_count)==="asc"}])},null,8,["class"])):(i(),v(o,{key:1,icon:"chevronUpDown",class:"flex-none"}))])],2),n("th",us,[n("div",null,c(e.$t("labels.actions")),1)])])])]),(xe=s(k))!=null&&xe.length?(i(),m("table",ps,[n("tbody",null,[(i(!0),m(Z,null,Te(s(k),a=>(i(),m("tr",{key:a.id,onClick:g=>re(a)},[n("td",ms,[n("div",{class:"gap-3",style:Oe({maxWidth:`${s(ze)}px`})},[l(_,{placement:"bottom",class:"truncate","show-on-truncate-only":""},{title:r(()=>[u(c(a.title),1)]),default:r(()=>[u(" "+c(a.title),1)]),_:2},1024),a.is_private?(i(),m("span",ys,[l($,{border:!1,class:"text-primary !h-4.5 bg-brand-50 text-xs"},{default:r(()=>[u(c(e.$t("general.private")),1)]),_:1})])):w("",!0)],4)]),n("td",fs,[n("div",null,[l(_,{placement:"bottom",class:"h-8 w-8 flex-none flex items-center justify-center children:flex-none"},{title:r(()=>{var g;return[u(c(((g=("clientTypesMap"in e?e.clientTypesMap:s(ae))[a==null?void 0:a.sub_type])==null?void 0:g.text)||(a==null?void 0:a.sub_type)),1)]}),default:r(()=>[l(de,{type:a.sub_type,size:a.sub_type===("SyncDataType"in e?e.SyncDataType:s(L)).NOCODB?"xxl":"lg"},null,8,["type","size"])]),_:2},1024)])]),n("td",vs,[n("div",null,[l(_,{placement:"bottom","show-on-truncate-only":""},{title:r(()=>[u(c(s(z)(a.created_at).local().format("DD MMM YYYY")),1)]),default:r(()=>[u(" "+c(s(z)(a.created_at).local().format("DD MMM YYYY")),1)]),_:2},1024)])]),n("td",gs,[n("div",null,[a.sub_type===("SyncDataType"in e?e.SyncDataType:s(L)).NOCODB?(i(),m("div",bs,[n("div",hs,[l(o,{icon:"nocodb1"})]),t[15]||(t[15]=n("div",{class:"text-sm !leading-5 capitalize font-semibold truncate"},"NocoDB Cloud",-1))])):(i(),v(_,{key:1,disabled:!T(a.created_by),class:"w-full"},{title:r(()=>[u(c(`User not part of this ${("isEeUI"in e?e.isEeUI:s(gt))?"workspace":"organisation"} anymore`),1)]),default:r(()=>{var g;return[a.created_by&&((g=s(h).get(a.created_by))!=null&&g.email)?(i(),m("div",ws,[l(Qe,{user:s(h).get(a.created_by),size:"base",class:b(["flex-none",{"!grayscale":T(a.created_by)}]),style:Oe(T(a.created_by)?{filter:"grayscale(100%) brightness(115%)"}:{})},null,8,["user","class","style"]),n("div",xs,[n("div",ks,[l(_,{class:b(["text-sm !leading-5 capitalize font-semibold truncate",{"text-gray-800":!T(a.created_by),"text-gray-500":T(a.created_by)}]),disabled:T(a.created_by),"show-on-truncate-only":"",placement:"bottom"},{title:r(()=>[u(c(ie(a.created_by)),1)]),default:r(()=>[u(" "+c(ie(a.created_by)),1)]),_:2},1032,["class","disabled"])]),l(_,{class:b(["text-xs !leading-4 truncate",{"text-gray-600":!T(a.created_by),"text-gray-500":T(a.created_by)}]),disabled:T(a.created_by),"show-on-truncate-only":"",placement:"bottom"},{title:r(()=>{var D;return[u(c((D=s(h).get(a.created_by))==null?void 0:D.email),1)]}),default:r(()=>{var D;return[u(" "+c((D=s(h).get(a.created_by))==null?void 0:D.email),1)]}),_:2},1032,["class","disabled"])])])):(i(),m("div",$s,c(a.created_by),1))]}),_:2},1032,["disabled"]))])]),n("td",Ds,[n("div",null,c((a==null?void 0:a.source_count)??0),1)]),n("td",{class:"cell-actions",onClick:t[6]||(t[6]=bt(()=>{},["stop"]))},[n("div",Cs,[l(Ze,{placement:"bottomRight"},{overlay:r(()=>[l(Je,{variant:"small"},{default:r(()=>[a.type&&s(xt)(a.type)&&!a.is_default?(i(),v(q,{key:0,onClick:g=>s(p)(a)},{default:r(()=>[l(o,{class:"text-current opacity-80",icon:"star"}),t[16]||(t[16]=n("span",null,"Set as default",-1))]),_:2,__:[16]},1032,["onClick"])):w("",!0),l(q,{disabled:!s(Y)(("FEATURE_FLAG"in e?e.FEATURE_FLAG:s(Se)).DATA_REFLECTION)&&a.sub_type===("SyncDataType"in e?e.SyncDataType:s(L)).NOCODB,onClick:g=>re(a)},{default:r(()=>[l(o,{class:"text-current opacity-80",icon:"edit"}),n("span",null,c(e.$t("general.edit")),1)]),_:2},1032,["disabled","onClick"]),l(_,{disabled:(a==null?void 0:a.sub_type)!==("ClientType"in e?e.ClientType:s(Ae)).SQLITE},{title:r(()=>{var g;return[u(" Not allowed for type "+c(a.sub_type&&("clientTypesMap"in e?e.clientTypesMap:s(ae))[a.sub_type]?(g=("clientTypesMap"in e?e.clientTypesMap:s(ae))[a.sub_type])==null?void 0:g.text:a.sub_type),1)]}),default:r(()=>[l(q,{disabled:(a==null?void 0:a.sub_type)===("ClientType"in e?e.ClientType:s(Ae)).SQLITE||(a==null?void 0:a.sub_type)===("SyncDataType"in e?e.SyncDataType:s(L)).NOCODB,onClick:g=>s(te)(a)},{default:r(()=>[l(o,{class:"text-current opacity-80",icon:"duplicate"}),n("span",null,c(e.$t("general.duplicate")),1)]),_:2},1032,["disabled","onClick"])]),_:2},1032,["disabled"]),(a==null?void 0:a.sub_type)!==("SyncDataType"in e?e.SyncDataType:s(L)).NOCODB?(i(),m(Z,{key:1},[l(qe),l(q,{class:"!text-red-500 !hover:bg-red-50",onClick:g=>Pe(a)},{default:r(()=>[l(o,{icon:"delete"}),u(" "+c(e.$t("general.delete")),1)]),_:2},1032,["onClick"])],64)):w("",!0)]),_:2},1024)]),default:r(()=>[l(ue,{size:"small",type:"secondary"},{default:r(()=>[l(o,{icon:"threeDotVertical"})]),_:1})]),_:2},1024)])])],8,_s))),128))])])):w("",!0)],2),yt(n("div",Is,[n("div",Ts,[l(Xe,{size:"xlarge"}),n("span",Os,c(e.$t("general.loading")),1)])],512),[[$t,s(I)]]),!s(I)&&(!((ke=s(C))!=null&&ke.length)||!s(k).length)?(i(),m("div",Ss,[($e=s(C))!=null&&$e.length&&!s(k).length?(i(),m("div",As,[t[17]||(t[17]=n("img",{src:Ct,class:"!w-[164px] flex-none",alt:"No search results found"},null,-1)),u(" "+c(e.$t("title.noResultsMatchedYourSearch")),1)])):(i(),m("div",Es,[l(He,{image:("Empty"in e?e.Empty:s(Ee)).PRESENTED_IMAGE_SIMPLE,description:e.$t("labels.noData"),class:"!my-0"},null,8,["image","description"])]))])):w("",!0),s(f).totalRows?(i(),m("div",{key:1,class:b(["flex flex-row justify-center items-center bg-gray-50 min-h-10",{"pointer-events-none":s(I)}])},[n("div",Ms,[t[18]||(t[18]=n("div",null," ",-1)),l(et,{current:s(f).page,"onUpdate:current":[t[7]||(t[7]=a=>s(f).page=a),t[9]||(t[9]=a=>Q(void 0,void 0,!1))],"page-size":s(f).pageSize,"onUpdate:pageSize":[t[8]||(t[8]=a=>s(f).pageSize=a),t[10]||(t[10]=a=>Q(s(f).page,a,!1))],total:+s(f).totalRows,"show-size-changer":"","use-stored-page-size":!1,"prev-page-tooltip":`${("renderAltOrOptlKey"in e?e.renderAltOrOptlKey:s(X))()}+←`,"next-page-tooltip":`${("renderAltOrOptlKey"in e?e.renderAltOrOptlKey:s(X))()}+→`,"first-page-tooltip":`${("renderAltOrOptlKey"in e?e.renderAltOrOptlKey:s(X))()}+↓`,"last-page-tooltip":`${("renderAltOrOptlKey"in e?e.renderAltOrOptlKey:s(X))()}+↑`},null,8,["current","page-size","total","prev-page-tooltip","next-page-tooltip","first-page-tooltip","last-page-tooltip"]),n("div",Ns,c(s(f).totalRows)+" "+c(s(f).totalRows===1?"record":"records"),1)])],2)):w("",!0)]),l(at,{visible:s(N),"onUpdate:visible":t[11]||(t[11]=a=>ne(N)?N.value=a:null),"entity-name":e.$t("general.connection"),"on-delete":Fe,"delete-label":e.$t("general.delete"),"show-default-delete-msg":!s(U)&&!((Ce=(De=s(x))==null?void 0:De.sources)!=null&&Ce.length)},{"entity-preview":r(()=>{var a,g;return[s(U)?(i(),m(Z,{key:0},[n("div",Bs,[l(pe,{active:"",class:"h-9 !rounded-md !w-full"})]),n("div",Rs,[l(pe,{active:"",class:"h-9 !rounded-md !w-full"})])],64)):s(x)?(i(),m("div",Us,[n("div",zs,[l(de,{type:s(x).sub_type},null,8,["type"]),n("div",Ls,c(s(x).title),1)]),(g=(a=s(x))==null?void 0:a.sources)!=null&&g.length?(i(),m("div",js,[t[21]||(t[21]=n("div",{class:"mb-1"},"Following external data sources using this connection will also be removed",-1)),n("ul",Gs,[(i(!0),m(Z,null,Te(s(x).sources,(D,ot)=>(i(),m("li",{key:ot,class:"marker:text-gray-500 !marker:flex !marker:items-center !!marker:-mt-1"},[n("div",Ks,[n("div",Ws,[t[19]||(t[19]=u("   ")),l(tt,{type:"database",class:"!grayscale min-w-5 flex-none -ml-1",style:{filter:"grayscale(100%) brightness(115%)"}})]),l(_,{class:"!truncate !max-w-[45%] flex-none","show-on-truncate-only":""},{title:r(()=>[u(c(D.project_title),1)]),default:r(()=>[u(" "+c(D.project_title),1)]),_:2},1024),t[20]||(t[20]=u(" > ")),l(st,{class:"!grayscale min-w-4 flex-none",style:{filter:"grayscale(100%) brightness(115%)"}}),l(_,{class:"truncate !max-w-[45%] capitalize","show-on-truncate-only":""},{title:r(()=>[u(c(D.alias),1)]),default:r(()=>[u(" "+c(D.alias),1)]),_:2},1024)])]))),128))]),t[22]||(t[22]=n("div",{class:"mt-2"},"Do you want to proceed anyway?",-1))])):w("",!0)])):w("",!0)]}),_:1},8,["visible","entity-name","delete-label","show-default-delete-msg"]),l(nt,{visible:s(O).isOpen,"onUpdate:visible":t[13]||(t[13]=a=>s(O).isOpen=a),centered:"",size:"small",onKeydown:t[14]||(t[14]=Ot(a=>s(O).isOpen=!1,["esc"]))},{default:r(()=>[n("div",Ps,[n("div",null,[l(o,{icon:"circleCheckSolid",class:"flex-none !text-green-700 mt-0.5 !h-6 !w-6"})]),n("div",Fs,[n("div",Vs,[n("h3",Ys,c(s(O).title),1),l(ue,{size:"xsmall",type:"text",onClick:t[12]||(t[12]=a=>s(O).isOpen=!1)},{default:r(()=>[l(o,{icon:"close",class:"text-gray-600"})]),_:1})]),n("div",Qs,c(s(O).description),1),t[23]||(t[23]=n("a",{target:"_blank",href:"https://nocodb.com/docs/product-docs/data-sources/connect-to-data-source",rel:"noopener noreferrer"}," Learn more ",-1))])])]),_:1},8,["visible"])])}}}),Js=Object.assign(oe(qs,[["__scopeId","data-v-10eeddb2"]]),{__name:"WorkspaceIntegrationsConnectionsTab"}),Zs={key:0,class:"flex w-full flex-col nc-workspace-integrations"},Xs={class:"flex gap-2 items-center min-w-0 p-2 h-[var(--topbar-height)] border-b-1 border-gray-200"},Hs={class:"flex-1 nc-breadcrumb nc-no-negative-margin pl-1"},ea={class:"nc-breadcrumb-item capitalize"},ta={class:"nc-breadcrumb-item active"},sa={class:"tab-title","data-testid":"nc-workspace-settings-tab-integrations"},aa={class:"h-[calc(100vh-92px)]"},na={class:"tab-title","data-testid":"nc-workspace-settings-tab-integrations"},oa={class:"h-[calc(100vh-92px)] p-6"},la=Ne({__name:"view",setup(le){const{isUIAllowed:C}=Me(),{hideSidebar:I,isNewSidebarEnabled:j}=H(Ht()),f=Be(),{loadRoles:O}=Me(),{activeWorkspace:R}=H(f),{loadCollaborators:ee}=f,{isFromIntegrationPage:G,integrationPaginationData:F,activeViewTab:E,loadIntegrations:te}=Ft(),M=Et(async()=>{var p;return await O(void 0,{},(p=R.value)==null?void 0:p.id),R.value});return Mt(()=>{var p;return(p=M.value)==null?void 0:p.title},p=>{if(!p)return;const S=p.charAt(0).toUpperCase()+p.slice(1);Nt(S)},{immediate:!0}),Re(()=>{j.value&&(I.value=!0),G.value=!0,Bt(()=>{var p;return(p=M.value)==null?void 0:p.id}).toMatch(p=>!!p).then(async()=>{await Promise.all([ee({includeDeleted:!0},M.value.id),te()])})}),Rt(()=>{G.value=!1,I.value=!1}),(p,S)=>{var W;const se=lt,V=Ue,K=Lt,Y=jt,N=Ut,x=Js,U=zt,A=Gt;return s(M)?(i(),m("div",Zs,[n("div",Xs,[s(j)?w("",!0):(i(),v(se,{key:0})),n("div",Hs,[n("div",ea,c((W=s(M))==null?void 0:W.title),1),l(V,{icon:"ncSlash1",class:"nc-breadcrumb-divider"}),n("h1",ta,c(p.$t("general.integrations")),1)]),s(j)?w("",!0):(i(),v(K,{key:1}))]),l(U,{"active-key":s(E),"onUpdate:activeKey":S[0]||(S[0]=d=>ne(E)?E.value=d:null)},{leftExtra:r(()=>S[1]||(S[1]=[n("div",{class:"w-3"},null,-1)])),default:r(()=>[s(C)("workspaceIntegrations")?(i(),v(N,{key:"integrations",class:"w-full"},{tab:r(()=>[n("div",sa,[l(V,{icon:"integration"}),u(" "+c(p.$t("general.integrations")),1)])]),default:r(()=>[n("div",aa,[l(Y,{"show-filter":""})])]),_:1})):w("",!0),s(C)("workspaceIntegrations")?(i(),v(N,{key:"connections",class:"w-full"},{tab:r(()=>{var d;return[n("div",na,[l(V,{icon:"gitCommit"}),u(" "+c(p.$t("general.connections"))+" ",1),(d=s(F))!=null&&d.totalRows?(i(),m("div",{key:0,class:b(["tab-info flex-none",{"bg-primary-selected":s(E)==="connections","bg-gray-50":s(E)!=="connections"}])},c(s(F).totalRows),3)):w("",!0)])]}),default:r(()=>[n("div",oa,[l(x)])]),_:1})):w("",!0)]),_:1},8,["active-key"]),l(A)])):w("",!0)}}}),ca=Object.assign(oe(la,[["__scopeId","data-v-ef698ff8"]]),{__name:"WorkspaceIntegrationsView"}),ra={};function ia(le,C){const I=ca;return i(),v(I)}const La=oe(ra,[["render",ia]]);export{La as default};
