const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./OzSIs_lp.js","./DOFFjK0_.js","./entry.DDfSYhWa.css","./FormulaWrapperCell.COMg0Mv4.css","./Carmk4wF.js","./DkUkBUc0.js"])))=>i.map(i=>d[i]);
import{e as $,aX as J,r as u,oj as K,G as r,fT as Q,kO as X,V as Z,J as q,n as c,g8 as L,g9 as Y,ga as ee,ko as te,gD as ne,im as F,jf as ae,jd as oe,I as d,c as p,L as e,o,aS as k,fF as se,fG as le,b as O,ag as j,w as m,a as D,t as f,bQ as ie,K as x,cn as re,O as ce,N as pe,aT as ue,b9 as de,d as me,ap as _e,aW as b}from"./DOFFjK0_.js";import{u as fe}from"./6zXueAcs.js";import{u as ye}from"./YRJcuhQv.js";import"./SJHyi9T4.js";import"./CV-2bRRD.js";const ve=k(()=>b(()=>import("./OzSIs_lp.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(s=>s.default||s)),ge=k(()=>b(()=>import("./Carmk4wF.js"),__vite__mapDeps([4,1,2]),import.meta.url).then(s=>s.default||s)),he=k(()=>b(()=>import("./DkUkBUc0.js"),__vite__mapDeps([5,1,2]),import.meta.url).then(s=>s.default||s)),xe={class:"font-bold"},ke=["innerHTML"],be={key:2,class:"text-left text-wrap mt-2 text-[#e65100] text-xs"},we={key:3,class:"text-left text-wrap mt-2 text-[#e65100] text-xs"},Ie=$({__name:"Formula",setup(s){J(K,u(!0));const n=r(Q),l=r(X),{isPg:z}=Z(),{showNull:S}=q(),y=c(()=>z(n.value.source_id)?L(Y(l==null?void 0:l.value)):L(l==null?void 0:l.value)),w=c(()=>ee(y.value)),I=r(te,u(!1)),v=r(ne,u(!1)),N=c(()=>{var t,a;return((a=(t=n.value.colOptions)==null?void 0:t.parsed_tree)==null?void 0:a.dataType)===F.NUMERIC}),{open:W}=fe(),g=c(()=>{var t,a,i,_;return I.value?!1:!((a=(t=n.value.colOptions)==null?void 0:t.parsed_tree)!=null&&a.dataType)||((_=(i=n.value.colOptions)==null?void 0:i.parsed_tree)==null?void 0:_.dataType)===F.STRING}),h=t=>{if(!g.value)return;if(t.target.tagName==="A"){t.stopPropagation();return}W({column:n.value,vModel:y.value})},{showEditNonEditableFieldWarning:M,showClearNonEditableFieldWarning:R,activateShowEditNonEditableFieldWarning:T}=ye({onEnter:t=>{g.value&&h(t)}}),C=r(ae,u(void 0)),E=r(oe,u(!1)),U=c(()=>{var t,a,i;if((t=n.value.meta)!=null&&t.display_type)return{...n.value,uidt:(a=n.value.meta)==null?void 0:a.display_type,...(i=n.value.meta)==null?void 0:i.display_column_meta}}),V=c(()=>{var t;return!!((t=n.value.meta)!=null&&t.display_type)});return(t,a)=>{const i=ve,_=ge,A=ie,B=he,G=ce,P=_e;return e(V)?(o(),d(i,{key:0,column:e(U)},null,8,["column"])):e(S)&&(("ncIsNull"in t?t.ncIsNull:e(se))(e(l))||("ncIsUndefined"in t?t.ncIsUndefined:e(le))(e(l)))?(o(),p("div",{key:1,class:j(["nc-cell w-full h-full relative nc-display-value-cell",{"text-right":e(N)&&e(E)&&!e(v)}])},[O(_)],2)):(o(),p("div",{key:2,class:j(["w-full",{"text-right":e(N)&&e(E)&&!e(v)}])},[e(n)&&e(n).colOptions&&e(n).colOptions.error?(o(),d(A,{key:0,placement:"bottom",class:"text-orange-700"},{title:m(()=>[D("span",xe,f(e(n).colOptions.error),1)]),default:m(()=>[a[1]||(a[1]=D("span",null,"ERR!",-1))]),_:1,__:[1]})):(o(),p("div",{key:1,class:"nc-cell-field group py-1",onDblclick:a[0]||(a[0]=(...H)=>e(T)&&e(T)(...H))},[e(w)?(o(),p("div",{key:0,style:re({display:"-webkit-box","max-width":"100%","-webkit-line-clamp":e(C)||1,"-webkit-box-orient":"vertical",overflow:"hidden","word-break":"break-all"}),onClick:h,innerHTML:e(w)},null,12,ke)):(o(),d(B,{key:1,value:e(y),lines:e(C)},null,8,["value","lines"])),!e(I)&&e(M)?(o(),p("div",be,f(t.$t("msg.info.computedFieldEditWarning")),1)):x("",!0),e(R)?(o(),p("div",we,f(t.$t("msg.info.computedFieldDeleteWarning")),1)):x("",!0),e(g)?(o(),d(P,{key:4,placement:"bottom",class:"nc-action-icon hidden group-hover:block absolute right-4 top-1"},{title:m(()=>[me(f(e(v)?t.$t("title.expand"):t.$t("tooltip.expandShiftSpace")),1)]),default:m(()=>[O(G,{type:"secondary",size:"xsmall",class:"nc-textarea-expand !p-0 !w-5 !h-5 !min-w-[fit-content]",onClick:pe(h,["stop"])},{default:m(()=>[(o(),d(ue(("iconMap"in t?t.iconMap:e(de)).maximize),{class:"transform !group-hover:text-grey-800 text-gray-700 w-3 h-3"}))]),_:1})]),_:1})):x("",!0)],32))],2))}}}),Fe=Object.assign(Ie,{__name:"VirtualCellFormula"});export{Fe as default};
