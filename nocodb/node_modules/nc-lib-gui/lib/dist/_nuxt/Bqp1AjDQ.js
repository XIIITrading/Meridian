import{e as O,a8 as S,V as T,G as g,r as p,aY as $,cd as D,aM as E,as as L,f as U,W as A,ac as G,I as d,o as r,w as _,a as n,ad as P,O as z,L as s,aT as f,b9 as b,K as x,N as F,c as q,t as y,an as J,aq as K,ag as W,b as Y,d as Q,M as X,P as Z,eJ as ee,a4 as se,a5 as oe,_ as te}from"./DOFFjK0_.js";import{_ as ae}from"./0vrXc9P0.js";import{u as ne}from"./BfzMHcOa.js";import"./MNXVOE4I.js";const ie={class:"flex items-center gap-0.5"},re={class:"w-full bg-white shadow-lg p-1.5 menu-filter-dropdown border-1 border-gray-200 rounded-lg overflow-hidden min-w-[160px]","data-testid":"nc-height-menu"},le={class:"text-xs text-gray-500 px-3 pt-2 pb-1 select-none"},ce=["onClick"],de={class:"flex items-center gap-2"},he=O({__name:"RowHeight",setup(ue){const C=[{icon:"heightShort",heightClass:"short"},{icon:"heightMedium",heightClass:"medium"},{icon:"heightTall",heightClass:"tall"},{icon:"heightExtra",heightClass:"extra"}],{isSharedBase:k}=S(T()),o=g($,p()),M=g(D,p(!1)),l=g(E,p(!1)),{isUIAllowed:I}=L(),{$api:R}=U(),{addUndo:V,defineViewScope:j}=A(),i=p(!1),w=async(e,t=!1)=>{var h;if(!l.value&&(h=o.value)!=null&&h.id){if(e===o.value.view.row_height)return;t||V({redo:{fn:a=>w(a,!0),args:[e]},undo:{fn:a=>w(a,!0),args:[o.value.view.row_height||0]},scope:j({view:o.value})});try{!M.value&&!k.value&&I("viewCreateOrEdit")&&await R.dbView.gridUpdate(o.value.id,{row_height:e}),o.value.view.row_height=e,i.value=!1}catch(a){se.error(await oe(a)||"There was an error while updating view!")}}};return ne(i),(e,t)=>{const h=z,a=X,B=ae,H=ee,N=G("e");return r(),d(H,{visible:s(i),"onUpdate:visible":t[2]||(t[2]=c=>Z(i)?i.value=c:null),"offset-y":"",class:"",trigger:["click"],"overlay-class-name":"nc-dropdown-height-menu"},{overlay:_(()=>[n("div",re,[n("div",{class:"flex flex-col w-full text-sm",onClick:t[0]||(t[0]=F(()=>{},["stop"]))},[n("div",le,y(e.$t("objects.rowHeight")),1),(r(),q(J,null,K(C,(c,u)=>{var v,m;return n("div",{key:u,class:W(["nc-row-height-option",{"hover:bg-gray-100 cursor-pointer":!s(l),"cursor-not-allowed":s(l)}]),onClick:pe=>w(u)},[n("div",de,[Y(a,{icon:c.icon,class:"nc-row-height-icon"},null,8,["icon"]),Q(" "+y(e.$t(`objects.heightClass.${c.heightClass}`)),1)]),(u===0?!((v=s(o))==null?void 0:v.view).row_height:((m=s(o))==null?void 0:m.view).row_height===u)?(r(),d(f(("iconMap"in e?e.iconMap:s(b)).check),{key:0,class:"text-primary w-4 h-4"})):x("",!0)],10,ce)}),64))]),s(l)?(r(),d(B,{key:0,class:"-mx-1.5 -mb-1.5",onOnOpen:t[1]||(t[1]=c=>i.value=!1)})):x("",!0)])]),default:_(()=>[n("div",null,[P((r(),d(h,{class:"nc-height-menu-btn nc-toolbar-btn !border-0 !h-7 !px-1.5 !min-w-7",size:"small",type:"secondary","show-as-disabled":s(l)},{default:_(()=>[n("div",ie,[(r(),d(f(("iconMap"in e?e.iconMap:s(b)).rowHeight),{class:"!h-3.75 !w-3.75"}))])]),_:1},8,["show-as-disabled"])),[[N,["c:row-height"]]])])]),_:1},8,["visible"])}}}),me=Object.assign(te(he,[["__scopeId","data-v-0667cf61"]]),{__name:"SmartsheetToolbarRowHeight"});export{me as default};
