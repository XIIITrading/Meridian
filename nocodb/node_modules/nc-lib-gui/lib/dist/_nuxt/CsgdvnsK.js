const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./2EkCyFsn.js","./SpSJ8E4d.js","./DOFFjK0_.js","./entry.DDfSYhWa.css","./Bkjj2Bb5.js","./Bvj7PEZG.js","./ItemLabel.C-YUMXAb.css","./D_wq2ltS.js","./Item.C85DUSg3.css","./C44sDnaa.js","./KFthsW2H.js","./Db9kSA7A.js","./Bo7kLdUR.js","./lL-0_K96.js","./JVTgKN82.js","./HdsRe6lq.js","./QuickImport.wmSgoVtM.css"])))=>i.map(i=>d[i]);
import{e as se,R as ut,f as me,T as Le,am as Ae,W as pt,r as U,X as je,Y as mt,n as P,Z as _t,$ as vt,I as V,o as s,w as i,a as _,b as n,L as e,a0 as ft,a1 as Te,a2 as wt,a3 as yt,N as bt,O as Ge,d as L,t as m,aI as Je,P as ue,Q as qe,a4 as F,a5 as te,_ as _e,aa as Ke,a6 as Ce,c as w,K as A,ao as Qe,c4 as gt,a8 as pe,V as Xe,g as kt,a7 as $t,aP as C,bk as Ee,ag as q,M as Ue,ad as Y,cc as ht,an as z,aq as Se,G as Ye,aY as Vt,b7 as He,aT as Ze,aO as Tt,aS as re,bc as xe,bb as X,aW as ce,ap as et,as as Et,cd as St,a9 as xt,J as Lt,ce as ze,b9 as Fe,bA as At,ac as Ct,aA as Ut,aH as ee,af as It,aJ as Pt,cf as Ot,cg as Rt,ah as Be,ch as Mt,aK as Dt,ax as We}from"./DOFFjK0_.js";import Nt from"./DiUleKVo.js";import jt from"./MNXVOE4I.js";import{u as zt}from"./SJHyi9T4.js";import{u as Ft}from"./CNPqpuqR.js";import{_ as Bt}from"./BRTCxTHu.js";import{_ as Wt}from"./D_wq2ltS.js";import{_ as Gt}from"./Bvj7PEZG.js";import{_ as Jt}from"./DGuB8RA-.js";import{_ as qt}from"./BNo10Mdm.js";import{_ as Kt}from"./-rIuSlCu.js";import{_ as Qt}from"./9aYOtC5C.js";const Xt={class:"flex flex-row items-center gap-x-2"},Yt={class:"text-gray-900 font-semibold"},Ht={class:"mt-1"},Zt={class:"flex flex-row justify-end gap-x-2 mt-5"},es=se({__name:"DescriptionUpdate",props:{modelValue:{type:Boolean},view:{},sourceId:{}},emits:["update:modelValue","updated"],setup(l,{emit:g}){const r=ut(l,["view"]),p=g,{$e:k,$api:S}=me(),o=Le(r,"modelValue",p),{loadViews:x}=Ae(),{addUndo:$,defineProjectScope:I}=pt(),a=U(),v=U(!1),O=je.useForm,y=mt({description:""}),K=P(()=>({description:[{validator:(f,d)=>new Promise((u,T)=>{u()})}]})),{validateInfos:G}=O(y,K);_t(()=>{var f;(f=l.view)!=null&&f.description&&(y.description=`${l.view.description}`),vt(()=>{var u;const d=(u=a.value)==null?void 0:u.$el;d&&(d.setSelectionRange(0,y.description.length),d.focus())})},{flush:"post"});const E=async(f=!1)=>{if(l.view){y.description&&(y.description=y.description.trim()),v.value=!0;try{await S.dbView.update(l.view.id,{description:y.description}),o.value=!1,f||$({redo:{fn:d=>{y.description=d,E(!0,!0)},args:[y.description]},undo:{fn:d=>{y.description=d,E(!0,!0)},args:[l.view.description]},scope:I({view:l.view})}),await x({tableId:l.view.fk_model_id,ignoreLoading:!0,force:!0}),k("a:view:description:update"),o.value=!1}catch(d){F.error(await te(d))}v.value=!1}};return(f,d)=>{const u=Je,T=wt,c=ft,b=je,R=Ge,M=qe;return s(),V(M,{visible:e(o),"onUpdate:visible":d[4]||(d[4]=D=>ue(o)?o.value=D:null),size:"small","show-separator":!1},{header:i(()=>{var D;return[_("div",Xt,[n(u,{meta:f.view,class:"mt-0.5 !text-2xl"},null,8,["meta"]),_("span",Yt,m((D=f.view)==null?void 0:D.title),1)])]}),default:i(()=>{var D,B,N,ie;return[_("div",Ht,[n(b,{layout:"vertical",model:e(y),name:"create-new-table-form"},{default:i(()=>[n(c,Te({label:f.$t("labels.description")},e(G).description),{default:i(()=>[n(T,{ref_key:"inputEl",ref:a,value:e(y).description,"onUpdate:value":d[0]||(d[0]=ae=>e(y).description=ae),class:"nc-input-sm !py-2 nc-text-area !text-gray-800 nc-input-shadow","hide-details":"",size:"small",placeholder:f.$t("msg.info.enterTableDescription"),onKeydown:d[1]||(d[1]=yt(bt(()=>E(),["exact"]),["enter"]))},null,8,["value","placeholder"])]),_:1},16,["label"])]),_:1},8,["model"]),_("div",Zt,[n(R,{type:"secondary",size:"small",onClick:d[2]||(d[2]=ae=>o.value=!1)},{default:i(()=>[L(m(f.$t("general.cancel")),1)]),_:1}),n(R,{key:"submit",type:"primary",size:"small",disabled:((B=(D=e(G))==null?void 0:D.description)==null?void 0:B.validateStatus)==="error"||((N=e(y).description)==null?void 0:N.trim())===((ie=f.view)==null?void 0:ie.description),loading:e(v),onClick:d[3]||(d[3]=()=>E())},{default:i(()=>[L(m(f.$t("general.save")),1)]),_:1},8,["disabled","loading"])])])]}),_:1},8,["visible"])}}}),la=Object.assign(_e(es,[["__scopeId","data-v-1669df64"]]),{__name:"DlgViewDescriptionUpdate"}),ts={key:0,class:"flex flex-row items-center py-2 px-3 bg-gray-50 rounded-lg text-gray-700"},ss={class:"capitalize text-ellipsis overflow-hidden select-none w-full pl-3",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},as={key:0},ns={key:1},os=se({__name:"Delete",props:{modelValue:{type:Boolean},view:{}},emits:["update:modelValue","deleted"],setup(l,{emit:g}){const r=l,p=g,{refreshCommandPalette:k}=Ke(),{view:S}=r,o=Le(r,"modelValue",p),{api:x}=Ce(),{$e:$}=me();async function I(){if(r.view)try{await x.dbView.delete(r.view.id),o.value=!1,p("deleted"),$("a:view:delete",{view:r.view.type})}catch(a){F.error(await te(a))}finally{k()}}return(a,v)=>{const O=Je,y=Nt;return s(),V(y,{visible:e(o),"onUpdate:visible":v[0]||(v[0]=K=>ue(o)?o.value=K:null),"entity-name":a.$t("objects.view"),"on-delete":I},{"entity-preview":i(()=>[e(S)?(s(),w("div",ts,[n(O,{meta:r.view,class:"nc-view-icon w-4 min-h-4"},null,8,["meta"]),_("div",ss,[e(S).is_default?(s(),w("span",as,m(a.$t("labels.defaultView")),1)):(s(),w("span",ns,m(e(S).title),1))])])):A("",!0)]),_:1},8,["visible","entity-name"])}}}),ia=Object.assign(os,{__name:"DlgViewDelete"}),ls={class:"flex flex-row items-center gap-x-3 h-12.5 p-2"},is={class:"flex flex-col justify-center flex-grow"},rs={class:"flex flex-col"},cs={class:"capitalize font-semibold text-nc-content-gray"},ds={class:"text-xs text-nc-content-gray-subtle2"},us=se({__name:"UserItem",props:{user:{}},setup(l){const g=P(()=>{var r,p,k,S,o,x;return(p=(r=l.user)==null?void 0:r.display_name)!=null&&p.trim()?(S=(k=l.user)==null?void 0:k.display_name)==null?void 0:S.trim():(x=(o=l.user)==null?void 0:o.email)==null?void 0:x.split("@")[0]});return(r,p)=>{const k=gt;return s(),w("div",ls,[n(k,{size:"base",user:r.user},null,8,["user"]),_("div",is,[_("div",rs,[_("span",cs,m(e(g)),1),_("span",ds,m(r.user.email),1)])]),Qe(r.$slots,"append")])}}}),Ve=Object.assign(us,{__name:"DlgReAssignUserItem"}),[ps,ms]=zt(()=>{const{api:l}=Ce(),{base:g}=pe(Xe()),{$e:r}=me(),{formStatus:p,invitationUsersData:k}=pe(Ft()),S=U(1),o=U(10),x=U(""),$=U(null),I=U(null),a=U(0),v=U(!1),O=P(()=>!$.value||!I.value?[]:$.value.filter(E=>{var d;const f=(d=I.value)==null?void 0:d.find(u=>u.id===E.id);return f?E.roles!==f.roles:!1})),y=async(E=S.value,f=o.value)=>{var d,u;try{if(!((d=g.value)!=null&&d.id))return;const T=await l.auth.baseUserList((u=g.value)==null?void 0:u.id,{query:{limit:f,offset:(E-1)*f,query:x.value}});if(!T.users)return;const c=T.users.list.filter(b=>!b.roles);a.value=(T.users.pageInfo.totalRows??0)-Number(c==null?void 0:c.length),$.value?$.value=[...$.value,...T.users.list.filter(b=>b.roles)]:$.value=T.users.list.filter(b=>b.roles),I.value=JSON.parse(JSON.stringify($.value))}catch(T){F.error(await te(T))}};return{loadUsers:y,inviteUser:async E=>{var d;let f;p.value="base-collaborateSaving";try{if(!((d=g.value)!=null&&d.id))return;f=await l.auth.baseUserAdd(g.value.id,{...E,base_id:g.value.id,baseName:g.value.title}),k.value.invitationToken=f.invite_token,S.value=1,$.value=[],await y()}catch(u){F.error(await te(u)),p.value="collaborate";return}return p.value="base-collaborateSaved",r("a:user:add"),f},users:$,totalUsers:a,searchText:x,currentPage:S,currentLimit:o,editedUsers:O,updateEditedUsers:async E=>{var f,d;E=E||O.value,v.value=!0;try{await Promise.all(E.filter(u=>u.roles!=="No access").map(async u=>{var c;await l.auth.baseUserUpdate(g.value.id,u.id,{email:u.email,roles:u.roles,base_id:g.value.id,baseName:g.value.title});const T=(c=$.value)==null?void 0:c.find(b=>b.id===u.id);T&&(T.roles=u.roles)})),await Promise.all(E.filter(u=>u.roles==="No access").map(async u=>{await l.auth.baseUserRemove(g.value.id,u.id)})),$.value=((f=$.value)==null?void 0:f.filter(u=>u.roles!=="No access"))??[],a.value=((d=$.value)==null?void 0:d.length)??0,I.value=JSON.parse(JSON.stringify($.value))}catch(u){F.error(await te(u))}finally{v.value=!1}},isBatchUpdating:v}},"useManageUsers");function _s(){const l=ms();return l||ps()}const vs={class:"mb-5"},fs={class:"flex text-base font-bold mb-2 text-nc-content-gray-emphasis"},ws={class:"flex text-sm text-nc-content-gray-subtle"},ys={key:0,class:"mb-5"},bs={class:"mb-2 text-nc-content-gray"},gs={class:"mb-5"},ks={class:"mb-2 text-nc-content-gray"},$s={key:1,class:"flex flex-row items-center h-12.5 p-2 nc-list-user-item"},hs={key:2,class:"max-h-65 overflow-auto nc-scrollbar-thin"},Vs={key:3,class:"h-25 p-2 text-gray-400 text-sm flex items-center justify-center"},Ts={class:"flex justify-end"},Es={class:"flex gap-2"},Ss=se({__name:"index",props:{modelValue:{type:Boolean},view:{}},emits:["update:modelValue"],setup(l,{emit:g}){const r=l,p=g,{loadUsers:k,users:S}=_s(),o=Le(r,"modelValue",p);kt(async()=>{S.value||await k()});const x=$t(),$=Ae(),{basesUser:I}=pe(x),a=U(""),v=U(),O=U(!1),y=P(()=>{var c;return((c=r.view)==null?void 0:c.lock_type)===C.Personal}),K=P(()=>{var c;return r.view&&((c=I.value.get(r.view.base_id))==null?void 0:c.find(b=>b.id===r.view.owned_by))||{id:r.view.owned_by,display_name:"Unknown User"}}),G=P(()=>{let c=r.view.base_id?I.value.get(r.view.base_id)||[]:[];if(a.value){const b=a.value.toLowerCase();c=c.filter(R=>{var M;return((M=R.display_name)==null?void 0:M.toLowerCase().includes(b))||R.email.toLowerCase().includes(b)})}return c.filter(b=>{var M;const R=b.roles!==Ee.NO_ACCESS&&b.roles!==Ee.VIEWER;return y.value?b.id!==((M=K.value)==null?void 0:M.id)&&R:R})}),{api:E,isLoading:f}=Ce(),d=async()=>{try{if(!v.value)return;await E.dbView.update(r.view.id,{owned_by:v.value.id,...y.value?{}:{lock_type:C.Personal}}),o.value=!1,F.success(y.value?"View reassigned successfully":"View assigned as personal view successfully"),$.loadViews({ignoreLoading:!0,tableId:r.view.fk_model_id,force:!0}).catch(()=>{})}catch(c){await F.error(await te(c))}},u=c=>{v.value=c,O.value=!1},T=c=>{setTimeout(()=>c==null?void 0:c.focus(),100)};return(c,b)=>{const R=Ue,M=Ge,D=qe;return s(),V(D,{visible:e(o),"onUpdate:visible":b[3]||(b[3]=B=>ue(o)?o.value=B:null),"wrap-class-name":"nc-modal-re-assign",width:"448px"},{default:i(()=>{var B;return[_("div",vs,[_("div",fs,m(e(y)?c.$t("labels.reAssignThisView"):c.$t("labels.assignAsPersonalView")),1),_("div",ws,m(e(y)?c.$t("title.reAssignViewModalSubtitle"):c.$t("title.assignAsPersonalViewModalSubtitle")),1)]),e(y)?(s(),w("div",ys,[_("div",bs,m(c.$t("labels.currentOwner")),1),n(Ve,{user:e(K),class:"bg-nc-bg-gray-light rounded-lg px-4"},null,8,["user"])])):A("",!0),_("div",gs,[_("div",ks,m(e(y)?c.$t("labels.newOwner"):c.$t("labels.selectOwner")),1),_("div",{class:q(["rounded-lg border-1",{"shadow-sm":e(v)&&!e(O)}])},[e(v)&&!e(O)?(s(),V(Ve,{key:0,user:e(v),class:"cursor-pointer px-3",onClick:b[0]||(b[0]=N=>O.value=!0)},{append:i(()=>[n(R,{icon:"arrowDown",class:"text-gray-500"})]),_:1},8,["user"])):(s(),w("div",$s,[n(R,{icon:"search",class:"text-nc-content-gray-muted ml-3 flex-none"}),Y(_("input",{ref:T,"onUpdate:modelValue":b[1]||(b[1]=N=>ue(a)?a.value=N:null),placeholder:"Search User to assign...",class:"border-0 px-2 outline-none nc-search-input flex-1"},null,512),[[ht,e(a)]])])),!e(v)||e(O)?(s(),w("div",hs,[(s(!0),w(z,null,Se(e(G),N=>(s(),V(Ve,{key:N.id,class:q(["cursor-pointer hover:bg-gray-100 px-3 nc-list-user-item",{"bg-gray-100":e(v)===N}]),user:N,onClick:ie=>u(N)},null,8,["class","user","onClick"]))),128))])):A("",!0),(B=e(G))!=null&&B.length?A("",!0):(s(),w("div",Vs,m(c.$t("placeholder.noBaseUsersFound")),1))],2)]),_("div",Ts,[_("div",Es,[n(M,{size:"small",type:"secondary",onClick:b[2]||(b[2]=N=>o.value=!1)},{default:i(()=>[L(m(c.$t("labels.cancel")),1)]),_:1}),n(M,{size:"small",type:"primary",class:"nc-invite-btn",disabled:!e(v),loading:e(f),onClick:d},{default:i(()=>[L(m(c.$t("activity.assignView")),1)]),_:1},8,["disabled","loading"])])])]}),_:1},8,["visible"])}}}),xs=Object.assign(_e(Ss,[["__scopeId","data-v-c45fbc58"]]),{__name:"DlgReAssign"}),Ls=re(()=>ce(()=>import("./2EkCyFsn.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(l=>l.default||l)),As={class:"w-full flex flex-col gap-y-1"},Cs={class:"flex items-center gap-2 flex-grow"},Us={key:2},Is=se({__name:"LockType",props:{hideTick:{type:Boolean},type:{},disabled:{type:Boolean}},emits:["select","cancel"],setup(l,{emit:g}){const r=g,p=Tt,k=Ye(Vt),{getPlanTitle:S}=He();return(o,x)=>{var a;const $=Ue,I=Ls;return s(),w("div",{class:q(["nc-locked-menu-item w-full max-w-[312px]",{"!px-1":o.hideTick}]),onClick:x[0]||(x[0]=v=>r("select",o.type))},[_("div",{class:q(["w-full",{"show-tick":!o.hideTick}])},[_("div",As,[_("div",Cs,[(s(),V(Ze(e(p)[o.type].icon),{class:q(["flex-none w-6",{"!w-3 h-3":o.hideTick,"!w-4 h-4":!o.hideTick,"text-gray-400":o.disabled}])},null,8,["class"])),_("div",{class:q(["flex",{"!text-xs py-0.7":o.hideTick,"text-gray-400":o.disabled}])},m(o.$t(e(p)[o.type].title)),3),o.hideTick?A("",!0):(s(),w(z,{key:0},[x[1]||(x[1]=_("div",{class:"flex flex-grow"},null,-1)),((a=e(k))==null?void 0:a.lock_type)===o.type?(s(),V($,{key:0,icon:"circleCheckSolid",class:q(["h-4 w-4 flex-none",{"!text-brand-500":!o.disabled}])},null,8,["class"])):o.type===e(C).Personal?(s(),V(I,{key:1,feature:e(X).FEATURE_PERSONAL_VIEWS,content:o.$t("upgrade.upgradeToAccessPersonalViewSubtitle",{plan:e(S)(e(xe).PLUS)}),"on-click-callback":()=>r("cancel"),size:"xs"},null,8,["feature","content","on-click-callback"])):(s(),w("span",Us))],64))]),o.hideTick?A("",!0):(s(),w("div",{key:0,class:q(["nc-subtitle font-weight-400 max-w-120 !text-xs whitespace-normal ml-6 pr-6",{"text-gray-400":o.disabled,"text-nc-content-gray-subtle2":!o.disabled}])},m(o.$t(e(p)[o.type].subtitle)),3))])],2)],2)}}}),tt=Object.assign(_e(Is,[["__scopeId","data-v-1f40b5a7"]]),{__name:"SmartsheetToolbarLockType"}),Ps=Object.freeze(Object.defineProperty({__proto__:null,default:tt},Symbol.toStringTag,{value:"Module"})),Os=se({__name:"NotAllowedTooltip",props:{tooltipStyle:{},overlayInnerStyle:{},mouseLeaveDelay:{},placement:{},trigger:{},message:{},enabled:{type:Boolean}},setup(l){return(g,r)=>{const p=et;return s(),V(p,{disabled:!g.enabled,"tooltip-style":{"min-width":"max-content"},"overlay-inner-style":{"min-width":"max-content"},"mouse-leave-delay":.3,placement:"left",trigger:"hover"},{title:i(()=>[L(m("message"in g?g.message:e(F)),1)]),default:i(()=>[Qe(g.$slots,"default")]),_:3},8,["disabled"])}}}),Rs=Object.assign(Os,{__name:"SmartsheetToolbarNotAllowedTooltip"}),Ms=re(()=>ce(()=>import("./Bkjj2Bb5.js"),__vite__mapDeps([4,5,2,3,6,7,8]),import.meta.url).then(l=>l.default||l)),Ds=re(()=>ce(()=>Promise.resolve().then(()=>Ps),void 0,import.meta.url).then(l=>l.default||l)),Ns=re(()=>ce(()=>import("./2EkCyFsn.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(l=>l.default||l)),js=re(()=>ce(()=>import("./C44sDnaa.js").then(l=>l.Q),__vite__mapDeps([9,2,3,10,11,12,13,14,15,16]),import.meta.url).then(l=>l.default||l)),zs={class:"nc-base-menu-item group"},Fs={class:"nc-base-menu-item group nc-view-context-download-option"},Bs={class:"flex flex-row items-center gap-x-3"},Ws={class:"nc-base-menu-item flex !flex-shrink group !py-1 !px-1 rounded-md bg-brand-50"},Gs={class:"w-full flex flex-row items-center gap-x-3"},Js={class:"w-full flex flex-row items-center gap-x-3"},qs=se({inheritAttrs:!1,__name:"ViewActionMenu",props:{view:{},table:{},inSidebar:{type:Boolean,default:!1}},emits:["rename","closeModal","delete","descriptionUpdate"],setup(l,{emit:g}){const r=l,p=g,{isUIAllowed:k,isDataReadOnly:S}=Et(),o=Ye(St,U(!1)),{$api:x,$e:$}=me(),{t:I}=xt(),a=P(()=>r.view),v=P(()=>r.table),{loadViews:O,navigateToView:y,duplicateView:K}=Ae(),{user:G}=Lt(),{base:E}=pe(Xe()),{refreshCommandPalette:f}=Ke(),{showRecordPlanLimitExceededModal:d,getPlanTitle:u}=He(),T=P(()=>{var t;return((t=a.value)==null?void 0:t.lock_type)||C.Collaborative}),c=P(()=>{var t;return(t=v.value)==null?void 0:t.source_id}),b=()=>{p("rename")},R=()=>{p("descriptionUpdate")},M=[ze.CSV,ze.EXCEL],D={csv:{title:"CSV",icon:Fe.ncFileTypeCsvSmall},excel:{title:"Excel",icon:Fe.ncFileTypeExcel}},B=M.reduce((t,h)=>(t[h]=U(!1),t),{}),N=t=>{p("closeModal"),!d()&&(t.value=!0)},ie=t=>{const{close:h}=We(jt,{modelValue:U(!0),"onUpdate:modelValue":()=>{h()},changeType:t,view:a});p("closeModal")};async function ae(t){var h;if(a.value){if(((h=a.value)==null?void 0:h.lock_type)===t){F.success(`Already in ${t} view`),p("closeModal");return}if(t==="personal"&&a.value.is_default)return F.info(I("msg.toast.notAllowedToChangeDefaultView"));if(t===C.Locked||a.value.lock_type===C.Locked){ie(t);return}$(`a:${Dt[a.value.type]||"view"}:lockmenu`,{lockType:t,sidebar:r.inSidebar});try{a.value.lock_type=t,await x.dbView.update(a.value.id,{lock_type:t}),F.success(`Successfully Switched to ${t} view`)}catch(oe){F.error(await te(oe))}p("closeModal")}}const ve=U(!1);async function st(){ve.value=!0;const t=await K(a.value);f(),await O({force:!0,tableId:v.value.id}),t&&(y({view:t,tableId:v.value.id,baseId:E.value.id,hardReload:t.type===ee.FORM}),$("a:view:create",{view:t.type,sidebar:!0})),ve.value=!1,p("closeModal")}const at=async()=>{p("delete")},Ie=()=>{const{close:t}=We(xs,{modelValue:U(!0),"onUpdate:modelValue":()=>{t()},view:a});p("closeModal")},ne=P(()=>{var t,h,oe,H,W;return((t=a.value)==null?void 0:t.owned_by)===((h=G.value)==null?void 0:h.id)||!((oe=a.value)!=null&&oe.owned_by)&&(((H=G.value.base_roles)==null?void 0:H[Ee.OWNER])||((W=G.value.workspace_roles)==null?void 0:W[At.OWNER]))}),fe=P(()=>{var t;return(t=a.value)==null?void 0:t.is_default}),Pe=P(()=>{var t;return((t=a.value)==null?void 0:t.lock_type)===C.Personal}),we=P(()=>!!(fe.value||!ne.value)),nt=P(()=>{var t,h;return k("csvTableImport")&&!o.value&&!S.value&&((t=v.value)==null?void 0:t.type)!=="view"&&!((h=v.value)!=null&&h.synced)});return(t,h)=>{var De;const oe=Bt,H=Ut,W=Ue,j=Wt,Oe=et,ot=Pt,Re=Gt,lt=Jt,ye=qt,it=Ms,rt=Ds,be=tt,ge=Kt,ke=Rs,Me=Ns,ct=Qt,dt=js,le=Ct("e");return s(),w(z,null,[e(a)?(s(),V(ct,Te({key:0},t.$attrs,{"data-testid":`view-sidebar-view-actions-${e(a).alias||e(a).title}`,class:"!min-w-70","data-id":"toolbar-actions",variant:"small"}),{default:i(()=>{var Z,de;return[e(a)?(s(),V(oe,{key:0,id:e(a).id,tooltip:t.$t("labels.clickToCopyViewID"),label:t.$t("labels.viewIdColon",{viewId:(Z=e(a))==null?void 0:Z.id})},null,8,["id","tooltip","label"])):A("",!0),!((de=e(a))!=null&&de.is_default)&&e(k)("viewCreateOrEdit")?(s(),w(z,{key:1},[n(H),t.inSidebar?(s(),w(z,{key:0},[e(T)!==e(C).Locked?(s(),V(j,{key:0,onClick:b},{default:i(()=>[n(W,{icon:"rename",class:"opacity-80"}),L(" "+m(t.$t("general.renameEntity",{entity:e(a).type!==e(ee).FORM?t.$t("objects.view").toLowerCase():t.$t("objects.viewType.form").toLowerCase()})),1)]),_:1})):(s(),V(Oe,{key:1},{title:i(()=>[L(m(t.$t("msg.info.disabledAsViewLocked")),1)]),default:i(()=>[n(j,{disabled:""},{default:i(()=>[n(W,{icon:"rename",class:"opacity-80"}),L(" "+m(t.$t("general.renameEntity",{entity:e(a).type!==e(ee).FORM?t.$t("objects.view").toLowerCase():t.$t("objects.viewType.form").toLowerCase()})),1)]),_:1})]),_:1})),Y(n(j,{onClick:R},{default:i(()=>[n(W,{icon:"ncAlignLeft",class:"opacity-80"}),L(" "+m(t.$t("labels.editDescription")),1)]),_:1},512),[[It,e(T)!==e(C).Locked]])],64)):A("",!0),n(j,{onClick:st},{default:i(()=>[e(ve)?(s(),V(ot,{key:0,size:"regular"})):(s(),V(W,{key:1,class:"nc-view-copy-icon opacity-80",icon:"duplicate"})),L(" "+m(t.$t("general.duplicateEntity",{entity:e(a).type!==e(ee).FORM?t.$t("objects.view").toLowerCase():t.$t("objects.viewType.form").toLowerCase()})),1)]),_:1})],64)):A("",!0),e(a).type!==e(ee).FORM?(s(),w(z,{key:2},[n(H),e(nt)?(s(),V(ye,{key:"upload",variant:"small"},{title:i(()=>[Y((s(),w("div",zs,[n(W,{icon:"upload",class:"opacity-80"}),L(" "+m(t.$t("general.upload")),1)])),[[le,["c:navdraw:preview-as",{sidebar:r.inSidebar}]]])]),default:i(()=>[n(Re,null,{default:i(()=>[L(m(t.$t("activity.uploadData")),1)]),_:1}),(s(!0),w(z,null,Se(e(B),(Q,J)=>(s(),w(z,null,[e(k)(`${J}TableImport`)&&!e(o)?(s(),V(lt,{key:J,entity:e(Rt).TABLE,"entity-id":e(v).id,permission:e(Ot).TABLE_RECORD_ADD,placement:"right",description:t.$t("objects.permissions.uploadDataTooltip")},{default:i(({isAllowed:$e})=>[n(j,{disabled:!$e,onClick:he=>N(Q)},{default:i(()=>{var he,Ne;return[Y((s(),w("div",{class:q([{disabled:e(T)===e(C).Locked},"nc-base-menu-item"])},[(he=D[J])!=null&&he.icon?(s(),V(Ze(D[J].icon),{key:0,class:q({"opacity-80":$e,"!opacity-50":!$e})},null,8,["class"])):A("",!0),L(" "+m((Ne=D[J])==null?void 0:Ne.title),1)],2)),[[le,[`a:upload:${J}`,{sidebar:r.inSidebar}]]])]}),_:2},1032,["disabled","onClick"])]),_:2},1032,["entity","entity-id","permission","description"])):A("",!0)],64))),256))]),_:1})):A("",!0),n(ye,{key:"download",variant:"small"},{title:i(()=>[Y((s(),w("div",Fs,[n(W,{icon:"download",class:"opacity-80"}),L(" "+m(t.$t("general.download")),1)])),[[le,["c:download",{sidebar:r.inSidebar}]]])]),default:i(()=>[n(it)]),_:1})],64)):A("",!0),e(k)("viewCreateOrEdit")?(s(),w(z,{key:3},[n(H),n(ye,{key:"lock-type",variant:"small",disabled:!e(ne)&&!e(k)("reAssignViewOwner")&&e(Pe),class:"scrollbar-thin-dull max-h-90vh overflow-auto !py-0"},{title:i(()=>[Y((s(),w("div",Bs,[_("div",null,m(t.$t("labels.viewMode")),1),_("div",Ws,[n(rt,{type:e(T),class:"flex nc-view-actions-lock-type !text-brand-500 !flex-shrink !cursor-auto","hide-tick":""},null,8,["type"])]),h[3]||(h[3]=_("div",{class:"flex flex-grow"},null,-1))])),[[le,["c:navdraw:preview-as",{sidebar:r.inSidebar}]]])]),default:i(()=>[n(Re,null,{default:i(()=>[L(m(t.$t("labels.viewMode")),1)]),_:1}),n(j,{class:"!mx-1 !py-2 !rounded-md nc-view-action-lock-subaction max-w-[100px]","data-testid":"nc-view-action-lock-subaction-Collaborative",disabled:!e(k)("fieldAdd"),onClick:h[0]||(h[0]=Q=>ae(e(C).Collaborative))},{default:i(()=>[n(be,{type:e(C).Collaborative,disabled:!e(k)("fieldAdd")},null,8,["type","disabled"])]),_:1},8,["disabled"]),("isEeUI"in t?t.isEeUI:e(Be))?(s(),V(ke,{key:0,enabled:e(we),message:e(fe)?"Default view can't be made personal":"Only view owner can change to personal view"},{default:i(()=>[n(ge,{feature:e(X).FEATURE_PERSONAL_VIEWS},{default:i(({click:Q})=>[n(j,{"data-testid":"nc-view-action-lock-subaction-Personal",disabled:e(we),class:"!mx-1 !py-2 !rounded-md nc-view-action-lock-subaction max-w-[100px] children:w-full children:children:w-full group",onClick:J=>Q(e(X).FEATURE_PERSONAL_VIEWS,()=>ae(e(C).Personal))},{default:i(()=>[n(be,{type:e(C).Personal,disabled:e(we),onCancel:h[1]||(h[1]=J=>p("closeModal"))},null,8,["type","disabled"])]),_:2},1032,["disabled","onClick"])]),_:1},8,["feature"])]),_:1},8,["enabled","message"])):A("",!0),n(j,{"data-testid":"nc-view-action-lock-subaction-Locked",class:"!mx-1 !py-2 !rounded-md nc-view-action-lock-subaction",disabled:!e(k)("fieldAdd"),onClick:h[2]||(h[2]=Q=>ae(e(C).Locked))},{default:i(()=>[n(be,{type:e(C).Locked,disabled:!e(k)("fieldAdd")},null,8,["type","disabled"])]),_:1},8,["disabled"])]),_:1},8,["disabled"]),("isEeUI"in t?t.isEeUI:e(Be))&&!e(fe)?(s(),w(z,{key:0},[e(Pe)?(s(),V(ke,{key:0,enabled:!(e(ne)||e(k)("reAssignViewOwner")),message:"Only owner or creator can re-assign"},{default:i(()=>[n(ge,{feature:e(X).FEATURE_PERSONAL_VIEWS},{default:i(({click:Q})=>[n(j,{"inner-class":"w-full",disabled:!(e(ne)||e(k)("reAssignViewOwner")),onClick:J=>Q(e(X).FEATURE_PERSONAL_VIEWS,()=>Ie())},{default:i(()=>[Y((s(),w("div",Gs,[_("div",null,m(t.$t("labels.reAssignView")),1),h[4]||(h[4]=_("div",{class:"flex-1 w-full"},null,-1)),n(Me,{feature:e(X).FEATURE_PERSONAL_VIEWS,"limit-or-feature":"to access re-assign personal view feature.",content:t.$t("upgrade.upgradeToAccessReassignViewSubtitle",{plan:e(u)(e(xe).PLUS)}),"on-click-callback":()=>p("closeModal"),size:"xs"},null,8,["feature","content","on-click-callback"])])),[[le,["c:navdraw:reassign-personal-view",{sidebar:r.inSidebar}]]])]),_:2},1032,["disabled","onClick"])]),_:1},8,["feature"])]),_:1},8,["enabled"])):(s(),V(ke,{key:1,enabled:!e(ne),message:"Only view owner can assign as personal view"},{default:i(()=>[n(ge,{feature:e(X).FEATURE_PERSONAL_VIEWS},{default:i(({click:Q})=>[n(j,{"inner-class":"w-full",disabled:!e(ne),onClick:J=>Q(e(X).FEATURE_PERSONAL_VIEWS,()=>Ie())},{default:i(()=>[Y((s(),w("div",Js,[_("div",null,m(t.$t("labels.assignAsPersonalView")),1),h[5]||(h[5]=_("div",{class:"flex-1 w-full"},null,-1)),n(Me,{feature:e(X).FEATURE_PERSONAL_VIEWS,"limit-or-feature":"to access assign as personal view feature.",content:t.$t("upgrade.upgradeToAccessAssignAsPersonalViewSubtitle",{plan:e(u)(e(xe).PLUS)}),"on-click-callback":()=>p("closeModal"),size:"xs"},null,8,["feature","content","on-click-callback"])])),[[le,["c:navdraw:assign-personal-view",{sidebar:r.inSidebar}]]])]),_:2},1032,["disabled","onClick"])]),_:1},8,["feature"])]),_:1},8,["enabled"]))],64)):A("",!0)],64)):A("",!0),!e(a).is_default&&e(k)("viewCreateOrEdit")?(s(),w(z,{key:4},[n(H),e(T)===e(C).Locked?(s(),V(Oe,{key:0},{title:i(()=>[L(m(t.$t("msg.info.disabledAsViewLocked")),1)]),default:i(()=>[n(j,{class:"!cursor-not-allowed !text-gray-400",disabled:""},{default:i(()=>[n(W,{class:"nc-view-delete-icon opacity-80",icon:"delete"}),L(" "+m(t.$t("general.deleteEntity",{entity:e(a).type!==e(ee).FORM?t.$t("objects.view").toLowerCase():t.$t("objects.viewType.form").toLowerCase()})),1)]),_:1})]),_:1})):(s(),V(j,{key:1,class:"!hover:bg-red-50 !text-red-500",onClick:at},{default:i(()=>[n(W,{class:"nc-view-delete-icon opacity-80",icon:"delete"}),L(" "+m(t.$t("general.deleteEntity",{entity:e(a).type!==e(ee).FORM?t.$t("objects.view").toLowerCase():t.$t("objects.viewType.form").toLowerCase()})),1)]),_:1}))],64)):A("",!0)]}),_:1},16,["data-testid"])):(s(),w("span",Mt(Te({key:1},t.$attrs)),null,16)),(De=e(v))!=null&&De.base_id&&e(c)?(s(),w(z,{key:2},Se(M,Z=>n(dt,{key:Z,modelValue:e(B)[Z].value,"onUpdate:modelValue":de=>e(B)[Z].value=de,"import-data-only":!0,"import-type":Z,"base-id":e(v).base_id,"source-id":e(c)},null,8,["modelValue","onUpdate:modelValue","import-type","base-id","source-id"])),64)):A("",!0)],64)}}}),ra=Object.assign(_e(qs,[["__scopeId","data-v-594025f4"]]),{__name:"SmartsheetToolbarViewActionMenu"});export{ra as _,ia as a,la as b};
