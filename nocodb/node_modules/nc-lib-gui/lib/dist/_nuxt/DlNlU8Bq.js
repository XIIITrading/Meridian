import{e as D,J,a8 as P,n as U,r as u,as as q,aQ as $,g as K,ac as Q,c as m,o as c,a as l,b as o,aG as W,L as e,P as F,w as i,ag as N,c4 as H,ad as T,K as X,t as d,aA as Y,I as g,d as Z,M,aJ as ee,_ as te,N as se,y as ne}from"./DOFFjK0_.js";import{_ as oe}from"./D_wq2ltS.js";import{_ as ae}from"./C6nWwNvX.js";import{_ as ce}from"./9aYOtC5C.js";import{u as re}from"./hayhBYSD.js";import{u as ie}from"./C9H3ht2d.js";import{u as le}from"./DoZsC7ga.js";const _e={class:"flex flex-col border-gray-200 gap-y-1"},ue={class:"flex items-center justify-between"},de={class:"flex flex-col justify-center py-1 px-3 gap-x-2 text-gray-700 rounded-lg min-h-8 text-small leading-[18px]","data-testid":"nc-sidebar-userinfo"},me={key:0,class:"capitalize text-nc-content-gray font-bold"},pe={class:"flex gap-2 items-center"},fe={class:"menu-btn"},xe=D({__name:"UserInfo",setup(v){const{user:t,signOut:p}=J();re();const{leftSidebarState:f}=P(ie()),b=le(),r=U(()=>{var a,n;return(n=(a=t.value)==null?void 0:a.display_name)==null?void 0:n.trim()}),s=u(!1),h=u(!1),x=u(!1),{isUIAllowed:G}=q(),j=async()=>{var a;x.value=!0;try{const n=!!((a=t==null?void 0:t.value)!=null&&a.sso_client_id);await p({redirectToSignin:!0,signinUrl:n?"/sso":"/signin"})}catch(n){console.error(n)}finally{x.value=!1}};$(s,()=>{h.value&&(h.value=!1)}),$(f,()=>{f.value==="peekCloseEnd"&&(s.value=!1)});const A=u(!1);K(()=>{A.value=!0});const O=U(()=>G("superAdminSetup")?"/account/setup":"/account/profile");return(a,n)=>{const B=H,L=Y,y=M,w=oe,R=ae,V=ee,z=ce,E=W,k=Q("e");return c(),m("div",_e,[l("div",ue,[o(E,{visible:e(s),"onUpdate:visible":n[0]||(n[0]=_=>F(s)?s.value=_:null),placement:"topLeft","overlay-class-name":"!min-w-64"},{overlay:i(()=>[o(z,{"data-testid":"nc-sidebar-userinfo",variant:"small"},{default:i(()=>{var _,I,S,C;return[l("div",de,[(_=e(r))!=null&&_.trim()?(c(),m("div",me,d(e(r)),1)):X("",!0),l("div",{class:N({"text-xs text-nc-content-gray-muted":(I=e(r))==null?void 0:I.trim(),"text-nc-content-gray font-semibold":!((S=e(r))!=null&&S.trim())})},d((C=e(t))==null?void 0:C.email),3)]),o(L),T((c(),g(R,{class:"!no-underline",to:e(O),onClick:e(b).handleReset},{default:i(()=>[o(w,null,{default:i(()=>[o(y,{icon:"ncSettings",class:"menu-icon"}),Z(" "+d(a.$t("title.accountSettings")),1)]),_:1})]),_:1},8,["to","onClick"])),[[k,["c:user:settings"]]]),o(w,{"data-testid":"nc-sidebar-user-logout",onClick:j},{default:i(()=>[T((c(),m("div",pe,[e(x)?(c(),g(V,{key:0,class:"!ml-0.5 !mr-0.5 !max-h-4.5 !-mt-0.5"})):(c(),g(y,{key:1,icon:"signout",class:"menu-icon"})),l("span",fe,d(a.$t("general.logout")),1)])),[[k,["c:user:logout"]]])]),_:1})]}),_:1})]),default:i(()=>[l("div",{class:N(["nc-user-icon-wrapper border-1 w-8 h-8 flex-none rounded-full overflow-hidden transition-all duration-300 cursor-pointer",{"border-nc-gray-medium":!e(s),"active border-primary shadow-selected":e(s)}]),"data-testid":"nc-sidebar-userinfo"},[o(B,{user:e(t),size:"medium",class:"!w-full !h-full !min-w-full cursor-pointer"},null,8,["user"])],2)]),_:1},8,["visible"])])])}}}),ge=Object.assign(te(xe,[["__scopeId","data-v-1500c5d9"]]),{__name:"DashboardTopbarUserInfo"}),ve={class:"flex items-center justify-between w-full border-b-1 border-nc-gray-medium py-2 px-4 h-[56px]"},be=D({__name:"index",props:{workspaceId:{}},setup(v){const t=v,p=()=>{t.workspaceId&&ne(`/${t.workspaceId}/settings`)};return(f,b)=>{const r=M,s=ge;return c(),m("div",ve,[o(r,{icon:"nocodbSquarePuck",class:"w-8 h-8 cursor-pointer",onClick:se(p,["stop"])}),o(s)])}}}),Ue=Object.assign(be,{__name:"DashboardTopbar"});export{Ue as _};
