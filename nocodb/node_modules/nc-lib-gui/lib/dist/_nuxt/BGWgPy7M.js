const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CiBV2ZED.js","./DOFFjK0_.js","./entry.DDfSYhWa.css","./DDEVLD8O.js","./ZNRZafJ9.js","./BhfICdUA.js","./NRjd0XWG.js","./RfUK_fd6.js","./DG2ZEhLK.js","./SJHyi9T4.js","./BYGCxle3.js","./D2QgEzTv.js","./SelectOptions.DqNkMQ-A.css","./BNo10Mdm.js","./index.C8L8AhJa.css","./hehmy6V1.js","./BvG7Iv4q.js","./CyXz1Zkk.js","./CPChVVVr.js","./D4c215jk.js","./B3Wp9c04.js","./CFXGfO_A.js","./VKUQM8lk.js","./YaKnxhzO.js","./BqWeTF94.js","./-rIuSlCu.js","./BrfakvRE.js","./sgaWLnOz.js","./D_wq2ltS.js","./Item.C85DUSg3.css","./9aYOtC5C.js","./index.CotXCNy2.css","./CQugZrqw.js","./index._6B72PDH.css","./C6nWwNvX.js","./BpgQOThx.js","./CYkscC4Z.js","./CHgOe2F-.js","./ps5He39s.js","./DEAKw9Pl.js","./Cl-qOJW6.js","./DmoodaOn.js","./Bo7kLdUR.js","./4PLl4EP6.js","./DcFNOSET.js","./boyBAVNN.js","./B3tDgntu.js","./Db9kSA7A.js","./EditOrAddProvider.C2farLzy.css"])))=>i.map(i=>d[i]);
import{e as nl,fj as al,fk as Ol,f as il,a9 as dl,S as rl,G as Q,r as b,aZ as ul,aY as cl,av as Ml,n as R,aQ as Be,a_ as vl,aC as pl,aD as Qe,gx as Nl,I as _,o,aG as ml,w as i,ao as Rl,a as f,N as $,b as v,c as g,L as l,ar as fl,P as me,aT as J,b9 as fe,t as y,O as _l,by as jl,aq as Je,j as bl,d as T,ap as wl,bY as Dl,an as Me,f$ as gl,g0 as yl,f_ as hl,aj as Ve,gR as El,a4 as Ue,_ as kl,gd as Tl,fQ as Vl,J as Bl,as as Ul,aM as Gl,cd as zl,gb as Pl,gi as Yl,W as Kl,fS as sl,aH as m,jh as qe,b0 as He,g2 as ql,ac as Hl,ag as U,ad as ol,K as C,M as Ql,ez as Jl,eO as Wl,aJ as Zl,ae as Xl,f7 as et,aS as lt,a5 as tt,aW as at}from"./DOFFjK0_.js";import{_ as st}from"./D_wq2ltS.js";import{_ as ot}from"./9aYOtC5C.js";import{_ as nt}from"./0vrXc9P0.js";import{D as it}from"./BhfICdUA.js";import{u as dt}from"./B3Wp9c04.js";import{u as rt}from"./DG2ZEhLK.js";import"./MNXVOE4I.js";import"./NRjd0XWG.js";import"./SJHyi9T4.js";const ut={class:"flex flex-col !rounded-t-lg overflow-hidden w-[256px]"},ct={class:"h-[44px] relative"},vt={key:1,class:"flex justify-between items-center pl-4 pr-3 py-1.5 absolute w-full overflow-auto",style:{"scrollbar-gutter":"stable"}},pt={class:"font-weight-600"},mt={class:"border-y-1 h-[310px] border-gray-200 py-1 nc-scrollbar-thin",style:{"scrollbar-gutter":"stable"}},ft=["data-testid","onClick"],_t={class:"flex flex-row items-center w-full cursor-pointer truncate ml-1 py-[2px] pr-2"},bt={class:"flex w-full p-1"},wt=nl({__name:"AddLookupsDropdown",props:al({column:{},value:{type:Boolean},disabled:{type:Boolean}},{isOpened:{type:Boolean,default:!1},isOpenedModifiers:{}}),emits:al(["created"],["update:isOpened"]),setup(le,{emit:s}){const te=le,ae=s,G=Ol(le,"isOpened"),{$api:Ne}=il(),{t:se}=dl(),{getMeta:w,metas:Ie}=rl(),z=Q(ul,b()),Le=Q(cl,b()),oe=Ml(te,"column"),_e=b(!1),O=b(""),re=b([]),P=b({}),ue=d=>bl(hl(d)?gl:yl,{columnMeta:d}),p=R(()=>{var d;return(d=oe.value.colOptions)==null?void 0:d.fk_related_model_id}),j=b(),V=R(()=>Object.values(P.value).filter(Boolean).length),be=R(()=>V.value>0),ne=async()=>{var d,h,Y,F,ie,ge,ye,k,de,W,Z,Re,Fe,he;if(be.value)try{_e.value=!0;const K=[],ke=((h=(d=z.value)==null?void 0:d.columns)==null?void 0:h.length)??0;for(const[D]of Object.entries(P.value).filter(([,I])=>I)){const I=Ie.value[(Y=j.value)==null?void 0:Y.id].columns.find(Se=>Se.id===D),je=re.value.findIndex(Se=>Se.id===D),q={uidt:Ve.Lookup,fk_lookup_column_id:D,fk_relation_column_id:oe.value.id,lookupTableTitle:(F=j.value)==null?void 0:F.title,lookupColumnTitle:(I==null?void 0:I.title)||I.column_name,table_name:(ie=z.value)==null?void 0:ie.table_name,title:`${I==null?void 0:I.title} from ${(ge=j.value)==null?void 0:ge.title}`,view_id:(ye=Le.value)==null?void 0:ye.id,order:ke+je,column_name:`${I==null?void 0:I.title} from (${(k=j.value)==null?void 0:k.title})`,column_order:{order:ke+je,view_id:(de=Le.value)==null?void 0:de.id}},ve=El({formState:q,metaColumns:(W=j.value)==null?void 0:W.columns,tableExplorerColumns:(Z=z.value)==null?void 0:Z.columns});K.push({op:"add",column:{...q,title:ve}})}await Ne.dbTableColumn.bulk((Re=z.value)==null?void 0:Re.id,{hash:(Fe=z.value)==null?void 0:Fe.columnsHash,ops:K}),await w((he=z==null?void 0:z.value)==null?void 0:he.id,!0),Ue.success(V.value>1?se("msg.success.nlookupFieldsCreatedSuccessfullyPlural",{n:V.value}):se("msg.success.nlookupFieldsCreatedSuccessfully",{n:V.value})),G.value=!1,P.value={},ae("created")}catch(K){console.error(K),Ue.error(se("msg.error.failedToCreateLookupFields"))}finally{_e.value=!1}};Be([j,O],async()=>{var d,h;if(j.value){const Y=((h=Ie.value[(d=j.value)==null?void 0:d.id])==null?void 0:h.columns)||[];re.value=Y.filter(F=>!pl(F)&&!Qe(F)&&vl([F==null?void 0:F.title],O.value))}});const we=Nl("refSearchField"),ce=b(!1);function Ge(){ce.value=!0,setTimeout(()=>{var d;(d=we.value)==null||d.focus()},500)}return Be(G,async d=>{d?(j.value=await w(p.value),ce.value=!1,O.value=""):P.value={}}),(d,h)=>{const Y=fl,F=_l,ie=wl,ge=Dl,ye=ml;return o(),_(ye,{visible:G.value,"onUpdate:visible":h[3]||(h[3]=k=>G.value=k),disabled:te.disabled,placement:"right","overlay-class-name":"!min-w-[256px]"},{overlay:i(()=>[f("div",ut,[f("div",{onClick:h[2]||(h[2]=$(()=>{},["stop"]))},[f("div",ct,[v(jl,{name:"slide-out",duration:{enter:500,leave:0}},{default:i(()=>[l(ce)?(o(),_(Y,{key:0,ref_key:"refSearchField",ref:we,value:l(O),"onUpdate:value":h[0]||(h[0]=k=>me(O)?O.value=k:null),bordered:!1,class:"w-full !shadow-none !py-3 a-input-without-effect absolute !bg-transparent",placeholder:"Search field to add as lookup"},{prefix:i(()=>[(o(),_(J(("iconMap"in d?d.iconMap:l(fe)).search),{class:"w-3.5 text-gray-500 h-3.5 mr-1 ml-1"}))]),_:1},8,["value"])):(o(),g("div",vt,[f("div",pt,y(l(se)("general.add"))+" "+y(l(se)("datatype.Lookup"))+" "+y(l(se)("objects.fields")),1),v(F,{type:"text",size:"small",onClick:h[1]||(h[1]=k=>Ge())},{default:i(()=>[(o(),_(J(("iconMap"in d?d.iconMap:l(fe)).search),{class:"w-4 h-4"}))]),_:1})]))]),_:1})]),f("div",mt,[(o(!0),g(Me,null,Je(l(re),k=>(o(),g("div",{key:k.id},[(o(),g("div",{key:k.id,"data-testid":`nc-lookup-add-menu-${k.title}`,class:"px-1 py-0.75 mx-1 flex flex-row items-center rounded-md hover:bg-gray-100",onClick:$(de=>l(P)[k.id]=!l(P)[k.id],["stop"])},[f("div",_t,[(o(),_(J(ue(k)),{class:"!w-3.5 !h-3.5 !text-gray-500"})),v(ie,{class:"flex-1 pl-1 pr-2 truncate","show-on-truncate-only":""},{title:i(()=>[T(y(k.title),1)]),default:i(()=>[T(y(k.title),1)]),_:2},1024),v(ge,{checked:l(P)[k.id],"onUpdate:checked":de=>l(P)[k.id]=de,size:"default"},null,8,["checked","onUpdate:checked"])]),h[4]||(h[4]=f("div",{class:"flex-1"},null,-1))],8,ft))]))),128))]),f("div",bt,[v(F,{loading:l(_e),size:"small",type:"text",class:"nc-add-lookup-button",disabled:!l(be),onClick:ne},{default:i(()=>[T(y(l(V)>1?d.$t("general.addLookupFieldPlural",{count:l(V)}):d.$t("general.addLookupField",{count:l(V)||""})),1)]),_:1},8,["loading","disabled"])])])])]),default:i(()=>[Rl(d.$slots,"default",{isOpened:G.value},void 0,!0)]),_:3},8,["visible","disabled"])}}}),gt=Object.assign(kl(wt,[["__scopeId","data-v-5d0da10b"]]),{__name:"SmartsheetToolbarAddLookupsDropdown"}),yt=lt(()=>at(()=>import("./CiBV2ZED.js").then(le=>le.E),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48]),import.meta.url).then(le=>le.default||le)),ht={class:"flex items-center gap-1"},kt={class:"flex items-center gap-2 min-h-5"},xt={key:2,class:"text-capitalize !text-small1 font-medium"},Ct={key:0,class:"bg-brand-50 text-brand-500 nc-toolbar-btn-chip"},At={key:0,class:"flex items-center gap-2 p-2 w-80 border-b-1 border-gray-100"},It={class:"pl-2 flex text-sm select-none text-gray-600"},Lt={class:"w-full flex gap-2 items-center justify-between max-w-[400px]"},Ft=["disabled"],St={class:"pl-2 flex items-center gap-2"},$t={class:"flex flex-col nc-scrollbar-thin max-h-[315px] min-h-[240px] p-2 overflow-y-auto border-t-1 border-nc-border-gray-medium",style:{"scrollbar-gutter":"stable !important"}},Ot={class:"nc-fields-list"},Mt={key:0,class:"px-2 py-6 text-gray-500 flex flex-col items-center gap-6 text-center"},Nt=["data-testid"],Rt=["onClick"],jt={key:0,class:"flex-1 flex ml-1 mr-3"},Dt={key:1,class:"flex-1 flex mr-3"},Et={class:"px-1 text-nc-content-gray-subtle2"},Tt={key:2,class:"flex mr-2"},Vt={key:0,class:"bg-primary w-1.25 h-1.25 rounded-full absolute top-0.25 right-0.5 border-1 border-white"},Bt={key:0,class:"bg-primary w-1.25 h-1.25 rounded-full absolute top-0.25 right-0.5 border-1 border-white"},Ut={key:0,class:"bg-primary w-1.25 h-1.25 rounded-full absolute top-0.25 right-0.5 border-1 border-white"},Gt=["onClick"],zt={key:1,class:"flex px-2 gap-1 py-2 border-t-1 justify-between border-nc-border-gray-medium"},Pt={class:"nc-edit-or-add-provider-wrapper"},Yt=nl({__name:"FieldsMenu",setup(le){const s=Q(cl,b()),te=Q(ul,b()),ae=Q(Tl,void 0),G=Q(Vl,void 0),{isMobileMode:Ne}=Bl(),{isUIAllowed:se}=Ul(),w=Q(Gl,b(!1)),Ie=Q(zl,b(!1)),z=Q(Pl,b(!1)),Le=Q(Yl,R(()=>!1)),{$api:oe,$e:_e}=il(),{t:O}=dl(),{metas:re,getMeta:P}=rl(),{showSystemFields:ue,fields:p,filteredFieldList:j,searchBasisIdMap:V,numberOfHiddenFields:be,filterQuery:ne,showAll:we,hideAll:ce,saveOrUpdate:Ge,metaColumnById:d,loadViewColumns:h,toggleFieldStyles:Y,toggleFieldVisibility:F,isLocalMode:ie}=dt(),{eventBus:ge,isDefaultView:ye,isSqlView:k}=rt(),de=R(()=>!z.value&&se("fieldAdd")&&!k.value),{addUndo:W,defineViewScope:Z}=Kl();ge.on(e=>{(e===sl.FIELD_RELOAD||e===sl.MAPPED_BY_COLUMN_CHANGE)&&h()});const Re=R(()=>{var t,n,u,r;if(((t=s.value)==null?void 0:t.type)!==m.GRID&&((n=s.value)==null?void 0:n.type)!==m.CALENDAR)return null;const e=(u=Object.values(d.value))==null?void 0:u.find(x=>x==null?void 0:x.pv);return(r=j.value)==null?void 0:r.find(x=>x.fk_column_id===(e==null?void 0:e.id))}),Fe=R(()=>j.value.filter(e=>{var t;return((t=s.value)==null?void 0:t.type)!==m.CALENDAR?e!==Re.value:!0})),he=async(e,t=!1)=>{try{if(!p.value||(t||W({undo:{fn:()=>{if(!p.value)return;const r=p.value[e.moved.newIndex];p.value[e.moved.newIndex]=p.value[e.moved.oldIndex],p.value[e.moved.oldIndex]=r,he({moved:{newIndex:e.moved.oldIndex,oldIndex:e.moved.newIndex}},!0)},args:[]},redo:{fn:()=>{if(!p.value)return;const r=p.value[e.moved.oldIndex];p.value[e.moved.oldIndex]=p.value[e.moved.newIndex],p.value[e.moved.newIndex]=r,he(e,!0)},args:[]},scope:Z({view:s.value})}),p.value.length<2))return;const n=p.value[e.moved.newIndex];if(!n)return;let u;if(e.moved.newIndex===0)u=p.value[1].order/2;else if(e.moved.newIndex===p.value.length-1)u=p.value[p.value.length-2].order+1e3;else{const r=p.value[e.moved.newIndex-1],x=p.value[e.moved.newIndex+1];u=(r.order+x.order)/2}n.order=u,await Ge(n,e.moved.newIndex,!0,!!ye.value),await h(),G.trigger(),_e("a:fields:reorder")}catch(n){Ue.error(await tt(n))}},K=b([]),ke=async e=>{var t,n,u,r,x,E,c,S,H,L,B,M,pe;(((t=s.value)==null?void 0:t.type)===m.GALLERY||((n=s.value)==null?void 0:n.type)===m.KANBAN||((u=s.value)==null?void 0:u.type)===m.CALENDAR)&&((r=s.value)!=null&&r.id)&&((x=s.value)!=null&&x.view)&&(((E=s.value)==null?void 0:E.type)===m.GALLERY?(await oe.dbView.galleryUpdate((c=s.value)==null?void 0:c.id,{fk_cover_image_col_id:e}),s.value.view.fk_cover_image_col_id=e):((S=s.value)==null?void 0:S.type)===m.KANBAN?(await oe.dbView.kanbanUpdate((H=s.value)==null?void 0:H.id,{fk_cover_image_col_id:e}),s.value.view.fk_cover_image_col_id=e):((L=s.value)==null?void 0:L.type)===m.CALENDAR&&(await oe.dbView.calendarUpdate((B=s.value)==null?void 0:B.id,{fk_cover_image_col_id:e}),s.value.view.fk_cover_image_col_id=e),await(ae==null?void 0:ae.trigger()),e&&!((pe=(M=p.value)==null?void 0:M.find(Ce=>Ce.fk_column_id===e))!=null&&pe.show)&&await(G==null?void 0:G.trigger({shouldShowLoading:!1})))},D=R({get:()=>{var t,n,u,r,x;const e=(((t=s.value)==null?void 0:t.type)===m.GALLERY||((n=s.value)==null?void 0:n.type)===m.KANBAN)&&((u=s.value)!=null&&u.view)?((r=s.value)==null?void 0:r.view).fk_cover_image_col_id:void 0;return(x=K.value)!=null&&x.find(E=>E.value===e)?e:e===null?null:void 0},set:async e=>{e!==D.value&&(W({undo:{fn:await ke,args:[D.value]},redo:{fn:await ke,args:[e]},scope:Z({view:s.value})}),await ke(e))}}),I=async e=>{var t,n,u,r,x,E,c,S,H,L,B;if(!(![m.GALLERY,m.KANBAN].includes((t=s.value)==null?void 0:t.type)||!((n=s.value)!=null&&n.id)||!((u=s.value)!=null&&u.view))){if(((r=s.value)==null?void 0:r.type)===m.GALLERY){const M={...He((E=(x=s.value)==null?void 0:x.view)==null?void 0:E.meta),fk_cover_image_object_fit:e};await oe.dbView.galleryUpdate((c=s.value)==null?void 0:c.id,{meta:M}),s.value.view.meta=M}else if(((S=s.value)==null?void 0:S.type)===m.KANBAN){const M={...He((L=(H=s.value)==null?void 0:H.view)==null?void 0:L.meta),fk_cover_image_object_fit:e};await oe.dbView.kanbanUpdate((B=s.value)==null?void 0:B.id,{meta:M}),s.value.view.meta=M}await(ae==null?void 0:ae.trigger())}},je=[{value:qe.FIT,label:O("labels.fitImage")},{value:qe.COVER,label:O("labels.coverImageArea")}],q=b({isOpen:!1,isSaving:null}),ve=R({get:()=>{var e,t,n,u,r;return[m.GALLERY,m.KANBAN].includes((e=s.value)==null?void 0:e.type)&&((t=s.value)!=null&&t.view)?((r=He((u=(n=s.value)==null?void 0:n.view)==null?void 0:u.meta))==null?void 0:r.fk_cover_image_object_fit)||qe.FIT:void 0},set:async e=>{e!==ve.value&&(q.value.isSaving=e,W({undo:{fn:I,args:[ve.value]},redo:{fn:I,args:[e]},scope:Z({view:s.value})}),await I(e)),q.value.isSaving=null,q.value.isOpen=!1}}),Se=async()=>{W({undo:{fn:async()=>{await ce()},args:[]},redo:{fn:async()=>{await we()},args:[]},scope:Z({view:s.value})}),await we()},xl=async()=>{W({undo:{fn:async()=>{await we()},args:[]},redo:{fn:async()=>{await ce()},args:[]},scope:Z({view:s.value})}),await ce()},Cl=R(()=>{var e;return((e=p.value)==null?void 0:e.filter(t=>{var n,u,r;return!(!t.initialShow&&ie.value||(u=(n=d==null?void 0:d.value)==null?void 0:n[t.fk_column_id])!=null&&u.pv||!ue.value&&pl((r=d==null?void 0:d.value)==null?void 0:r[t.fk_column_id]))}))||[]}),De=b(!1),Al=R(()=>{var e;return!vl((e=p.value)==null?void 0:e.map(t=>t.title),ne.value)||w.value}),ze=R({get:()=>{var e;return(e=Cl.value)==null?void 0:e.every(t=>t==null?void 0:t.show)},set:async e=>{De.value=!0;try{e?await Se():await xl()}finally{De.value=!1}}}),We=e=>bl(hl(e)?gl:yl,{columnMeta:e}),xe=b(!1),Pe=R({get:()=>ue.value,set:e=>{W({undo:{fn:t=>{ue.value=!t},args:[e]},redo:{fn:t=>{ue.value=t},args:[e]},scope:Z({view:s.value})}),ue.value=e}}),Ye=b(!1),Ze=b();Be(xe,e=>{e&&(ne.value="",setTimeout(()=>{var t;(t=Ze.value)==null||t.focus()},100))}),Be(p,async e=>{var E;if(!e||Ie.value||![m.GALLERY,m.KANBAN].includes((E=s.value)==null?void 0:E.type))return;const t=e.filter(c=>c.fk_column_id&&d.value[c.fk_column_id].uidt===Ve.Attachment).map(c=>({value:c.fk_column_id,label:c.title}))??[];K.value=[{value:null,label:O("labels.noImage")},...t];const n=e.filter(c=>c.fk_column_id&&d.value[c.fk_column_id].uidt===Ve.Lookup).map(c=>d.value[c.fk_column_id]),u=new Set,r=async(c,S,H)=>{var B,M,pe,Ce,Te,$e,N;const L=H||(B=te.value)!=null&&B.id?(Ce=(pe=re.value[H||((M=te.value)==null?void 0:M.id)])==null?void 0:pe.columns)==null?void 0:Ce.find(A=>{var a;return A.id===((a=S==null?void 0:S.colOptions)==null?void 0:a.fk_relation_column_id)}):void 0;if((Te=L==null?void 0:L.colOptions)!=null&&Te.fk_related_model_id){await P(L.colOptions.fk_related_model_id);const A=(N=($e=re.value[L.colOptions.fk_related_model_id])==null?void 0:$e.columns)==null?void 0:N.find(a=>{var ee;return a.id===((ee=S==null?void 0:S.colOptions)==null?void 0:ee.fk_lookup_column_id)});A&&ql(A)?u.add(c.id):A&&(A==null?void 0:A.uidt)===Ve.Lookup&&await r(c,A,L.colOptions.fk_related_model_id)}};await Promise.allSettled(n.map(c=>r(c,c)));const x=n.filter(c=>u.has(c==null?void 0:c.id)).map(c=>({value:c.id,label:c.title}));K.value=[...K.value,...x]},{immediate:!0});const X=b(!1),Xe=b(0),el=b(0);function Il(){setTimeout(()=>{var e;(e=document.querySelector(".nc-fields-menu-item:last-child"))==null||e.scrollIntoView({behavior:"smooth"})},500)}const Ee=e=>{var t,n;return e.fk_column_id?!!(de.value&&!ie.value&&Qe((n=(t=te.value)==null?void 0:t.columnsById)==null?void 0:n[e.fk_column_id])):!1};function ll(e){Ee(e)||w.value||(e.show=!e.show,F(e.show,e))}function Ll(e){var t,n;Qe((n=(t=te.value)==null?void 0:t.columnsById)==null?void 0:n[e.fk_column_id])&&(e.show=!e.show,F(e.show,e))}function Fl(){Ue.success(O("msg.toast.createField")),X.value=!1,Il()}const Ke=b(),Sl=e=>{!e&&X.value&&(xe.value=!0)},$l=()=>{var e;X.value=!0,Ke.value&&!((e=Ke.value)!=null&&e.shouldKeepModalOpen())&&(X.value=!1)};return(e,t)=>{const n=Ql,u=_l,r=wl,x=Wl,E=Jl,c=Zl,S=st,H=ot,L=ml,B=Xl,M=fl,pe=gt,Ce=yt,Te=nt,$e=Hl("e");return o(),_(L,{visible:l(xe),"onUpdate:visible":t[23]||(t[23]=N=>me(xe)?xe.value=N:null),trigger:["click"],class:"!xs:hidden","overlay-class-name":"nc-dropdown-fields-menu nc-toolbar-dropdown overflow-hidden","auto-close":l(Xe)===0,onVisibleChange:Sl},{overlay:i(()=>{var N,A;return[f("div",{class:"bg-white w-[320px] rounded-lg nc-table-toolbar-menu","data-testid":"nc-fields-menu",onClick:t[22]||(t[22]=$(()=>{},["stop"]))},[!l(Ie)&&(((N=l(s))==null?void 0:N.type)===l(m).GALLERY||((A=l(s))==null?void 0:A.type)===l(m).KANBAN)?(o(),g("div",At,[f("div",It,y(e.$t("labels.coverImageField")),1),f("div",{class:U(["flex-1 nc-dropdown-cover-image-wrapper flex items-stretch border-1 border-gray-200 rounded-lg transition-all duration-0.3s max-w-[206px]",{"nc-disabled":l(w)}])},[v(E,{value:l(D),"onUpdate:value":t[0]||(t[0]=a=>me(D)?D.value=a:null),class:"flex-1 max-w-[calc(100%_-_33px)]","dropdown-class-name":"nc-dropdown-cover-image !rounded-lg",bordered:!1,disabled:l(w),onClick:t[1]||(t[1]=$(()=>{},["stop"]))},{suffixIcon:i(()=>[v(n,{class:"text-gray-700",icon:"arrowDown"})]),default:i(()=>[(o(!0),g(Me,null,Je(l(K),a=>(o(),_(x,{key:a.value,value:a.value},{default:i(()=>[f("div",Lt,[f("div",{class:U(["flex-1 flex items-center gap-1",{"max-w-[calc(100%_-_20px)]":l(D)===a.value,"max-w-full":l(D)!==a.value}])},[a.value?(o(),_(J(We(l(d)[a.value])),{key:0,class:"!w-3.5 !h-3.5 !text-gray-700 !ml-0"})):C("",!0),v(r,{class:"flex-1 max-w-[calc(100%_-_20px)] truncate","show-on-truncate-only":""},{title:i(()=>[T(y(a.label),1)]),default:i(()=>[T(y(a.label),1)]),_:2},1024)],2),l(D)===a.value?(o(),_(n,{key:0,id:"nc-selected-item-icon",icon:"check",class:"flex-none text-primary w-4 h-4"})):C("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"]),l(ve)?(o(),_(L,{key:0,visible:l(q).isOpen,"onUpdate:visible":t[2]||(t[2]=a=>l(q).isOpen=a),disabled:l(w),placement:"bottomRight"},{overlay:i(()=>[v(H,{class:"nc-cover-image-object-fit-dropdown-menu min-w-[168px]"},{default:i(()=>[(o(),g(Me,null,Je(je,a=>v(S,{key:a.value,class:"!children:w-full",onClick:$(ee=>ve.value=a.value,["stop"])},{default:i(()=>[f("span",null,y(a.label),1),a.value===l(q).isSaving?(o(),_(c,{key:0,size:"regular",class:"flex-none"})):a.value===l(ve)?(o(),_(n,{key:1,icon:"check",class:"flex-none text-primary w-4 h-4"})):C("",!0)]),_:2},1032,["onClick"])),64))]),_:1})]),default:i(()=>[f("button",{class:"flex items-center px-2 border-l-1 border-gray-200 disabled:cursor-not-allowed disabled:opacity-80",disabled:l(w)},[v(n,{icon:"settings",class:U(["h-4 w-4",{"!text-brand-500":l(q).isOpen}])},null,8,["class"])],8,Ft)]),_:1},8,["visible","disabled"])):C("",!0)],2)])):C("",!0),f("div",{class:"py-2",onClick:t[5]||(t[5]=$(()=>{},["stop"]))},[v(M,{ref_key:"fieldsMenuSearchRef",ref:Ze,value:l(ne),"onUpdate:value":t[4]||(t[4]=a=>me(ne)?ne.value=a:null),placeholder:e.$t("placeholder.searchFields"),class:"nc-toolbar-dropdown-search-field-input !border-none !shadow-none !h-8"},{prefix:i(()=>[v(n,{icon:"search",class:"nc-search-icon h-3.5 w-3.5 mr-1 ml-2"})]),suffix:i(()=>[f("div",St,[v(B,{checked:l(ze),"onUpdate:checked":t[3]||(t[3]=a=>me(ze)?ze.value=a:null),disabled:l(Al),loading:l(De),size:"xsmall",class:"!mr-1 nc-fields-toggle-show-all-fields"},null,8,["checked","disabled","loading"])])]),_:1},8,["value","placeholder"])]),f("div",$t,[f("div",Ot,[l(Fe).length?C("",!0):(o(),g("div",Mt,[t[24]||(t[24]=f("img",{src:et,class:"!w-[164px] flex-none",alt:"No search results found"},null,-1)),T(" "+y(e.$t("title.noResultsMatchedYourSearch")),1)])),v(l(it),{modelValue:l(p),"onUpdate:modelValue":t[11]||(t[11]=a=>me(p)?p.value=a:null),"item-key":"id","ghost-class":"nc-fields-menu-items-ghost",disabled:l(w),onChange:t[12]||(t[12]=a=>he(a)),onStart:t[13]||(t[13]=a=>Ye.value=!0),onEnd:t[14]||(t[14]=a=>Ye.value=!1)},{item:i(({element:a})=>{var ee,tl;return[l(Fe).includes(a)?(o(),g("div",{key:a.id,"data-testid":`nc-fields-menu-${a.title}`,class:U(["nc-fields-menu-item pl-2 flex flex-row items-center rounded-md",{"hover:bg-gray-100":!l(w)}]),onClick:t[10]||(t[10]=$(()=>{},["stop"]))},[(o(),_(J(("iconMap"in e?e.iconMap:l(fe)).drag),{class:U(["!h-3.75 text-gray-600 mr-1",{"cursor-not-allowed":l(w),"cursor-move":!l(w)}])},null,8,["class"])),l(re)?(o(),_(pe,{key:l(el),column:(tl=(ee=l(te))==null?void 0:ee.columnsById)==null?void 0:tl[a.fk_column_id],disabled:!Ee(a),onCreated:t[8]||(t[8]=Oe=>el.value++),"onUpdate:isOpened":t[9]||(t[9]=Oe=>Xe.value+=Oe===!0?1:-1)},{default:i(({isOpened:Oe})=>[ol((o(),g("div",{class:U(["flex flex-row items-center w-full truncate ml-1 py-[5px] pr-2",{"cursor-pointer":!l(w),"is-opened-add-lookup":Oe}]),onClick:Ae=>ll(a)},[(o(),_(J(We(l(d)[a.fk_column_id])),{class:"!w-3.5 !h-3.5 !text-gray-600",onClick:t[6]||(t[6]=$(()=>{},["stop"]))})),v(r,{class:U(["pl-1 truncate",{"mr-3 flex-1":!Ee(a)&&!l(V)[a.fk_column_id]}]),"show-on-truncate-only":"",disabled:l(Ye)},{title:i(()=>[T(y(a.title),1)]),default:i(()=>[T(y(a.title),1)]),_:2},1032,["class","disabled"]),l(V)[a.fk_column_id]?(o(),g("div",jt,[v(r,{title:l(V)[a.fk_column_id],class:"flex cursor-help"},{default:i(()=>[v(n,{icon:"info",class:"h-3.5 w-3.5 opacity-80 text-nc-content-gray-muted"})]),_:2},1032,["title"])])):C("",!0),Ee(a)?(o(),g("div",Dt,[v(r,{disabled:Oe},{title:i(()=>[T(y(e.$t("tooltip.addLookupFields")),1)]),default:i(()=>[f("div",Et,[v(n,{icon:"chevronRight",class:"flex-none !w-3.5 !h-3.5"})])]),_:2},1032,["disabled"])])):C("",!0),l(s).type===l(m).CALENDAR?(o(),g("div",Tt,[v(u,{class:U([{"!text-primary !bg-brand-50 hover:!bg-brand-100 active:!bg-brand-200":a.bold,"!rounded-r-none":a.italic},"!w-5 !h-5 hover:!bg-gray-200 active:!bg-gray-300 relative"]),size:"xsmall",type:"text",disabled:l(w),onClick:$(Ae=>l(Y)(a,"bold",!a.bold),["stop"])},{default:i(()=>[(o(),_(J(("iconMap"in e?e.iconMap:l(fe)).bold),{class:"!w-3.5 !h-3.5"})),a.bold?(o(),g("div",Vt)):C("",!0)]),_:2},1032,["class","disabled","onClick"]),v(u,{class:U([{"!text-primary !bg-brand-50 hover:!bg-brand-100 active:!bg-brand-200":a.italic,"!rounded-l-none":a.bold,"!rounded-r-none":a.underline},"!w-5 !h-5 hover:!bg-gray-200 active:!bg-gray-300 relative"]),size:"xsmall",type:"text",disabled:l(w),onClick:$(Ae=>l(Y)(a,"italic",!a.italic),["stop"])},{default:i(()=>[(o(),_(J(("iconMap"in e?e.iconMap:l(fe)).italic),{class:"!w-3.5 !h-3.5"})),a.italic?(o(),g("div",Bt)):C("",!0)]),_:2},1032,["class","disabled","onClick"]),v(u,{class:U([{"!text-primary !bg-brand-50 hover:!bg-brand-100 active:!bg-brand-200":a.underline,"!rounded-l-none":a.italic},"!w-5 !h-5 hover:!bg-gray-200 active:!bg-gray-300 relative"]),size:"xsmall",type:"text",disabled:l(w),onClick:$(Ae=>l(Y)(a,"underline",!a.underline),["stop"])},{default:i(()=>[(o(),_(J(("iconMap"in e?e.iconMap:l(fe)).underline),{class:"!w-3.5 !h-3.5"})),a.underline?(o(),g("div",Ut)):C("",!0)]),_:2},1032,["class","disabled","onClick"])])):C("",!0),f("span",{class:"flex children:flex-none",onClick:$(Ae=>ll(a),["stop"])},[v(B,{checked:a.show,disabled:a.isViewEssentialField||l(w)||l(De),size:"xxsmall",onChange:t[7]||(t[7]=Ae=>l(_e)("a:fields:show-hide")),onClick:Ae=>Ll(a)},null,8,["checked","disabled","onClick"])],8,Gt)],10,Rt)),[[$e,["a:fields:show-hide"]]])]),_:2},1032,["column","disabled"])):C("",!0),t[25]||(t[25]=f("div",{class:"flex-1"},null,-1))],10,Nt)):C("",!0)]}),_:1},8,["modelValue","disabled"])])]),!l(ie)&&!l(ne)?(o(),g("div",zt,[v(u,{class:"nc-fields-show-system-fields !px-2 !font-semibold",size:"small",type:"text",disabled:l(w),onClick:t[15]||(t[15]=a=>Pe.value=!l(Pe))},{default:i(()=>[v(n,{icon:l(Pe)?"eyeSlash":"eye",class:"!w-4 !h-4 mr-2"},null,8,["icon"]),f("span",null,y(e.$t("title.systemFields")),1)]),_:1},8,["disabled"]),l(de)?(o(),_(L,{key:0,visible:l(X),"onUpdate:visible":t[20]||(t[20]=a=>me(X)?X.value=a:null),trigger:["click"],"overlay-class-name":"nc-dropdown-add-column !bg-transparent !border-none !shadow-none",placement:"right",onVisibleChange:$l},{overlay:i(()=>[f("div",Pt,[l(X)?(o(),_(Ce,{key:0,ref_key:"editOrAddProviderRef",ref:Ke,onSubmit:t[16]||(t[16]=a=>Fl()),onCancel:t[17]||(t[17]=a=>X.value=!1),onClick:t[18]||(t[18]=$(()=>{},["stop"])),onKeydown:t[19]||(t[19]=$(()=>{},["stop"]))},null,512)):C("",!0)])]),default:i(()=>[v(u,{class:"nc-fields-add-new-field !font-semibold !px-2",size:"small",type:"text"},{default:i(()=>[v(n,{icon:"ncPlus",class:"!w-4 !h-4 mr-1"}),f("span",null,y(l(O)("general.new"))+" "+y(l(O)("objects.field")),1)]),_:1})]),_:1},8,["visible"])):C("",!0)])):C("",!0),l(w)?(o(),_(Te,{key:2,onOnOpen:t[21]||(t[21]=a=>xe.value=!1)})):C("",!0)])]}),default:i(()=>[v(r,{disabled:!l(Ne)&&!l(Le),class:U({"nc-active-btn":l(be)})},{title:i(()=>{var N,A;return[T(y(((N=l(s))==null?void 0:N.type)===l(m).KANBAN||((A=l(s))==null?void 0:A.type)===l(m).GALLERY?e.$t("title.editCards"):e.$t("objects.fields")),1)]}),default:i(()=>[ol((o(),_(u,{class:"nc-fields-menu-btn nc-toolbar-btn !h-7 !border-0",size:"small",type:"secondary","show-as-disabled":l(w)},{default:i(()=>{var N,A,a,ee;return[f("div",ht,[f("div",kt,[((N=l(s))==null?void 0:N.type)===l(m).KANBAN||((A=l(s))==null?void 0:A.type)===l(m).GALLERY?(o(),_(n,{key:0,class:"h-4 w-4",icon:"creditCard"})):(o(),_(J(("iconMap"in e?e.iconMap:l(fe)).fields),{key:1,class:"h-4 w-4"})),!l(Ne)&&!l(Le)?(o(),g("span",xt,[((a=l(s))==null?void 0:a.type)===l(m).KANBAN||((ee=l(s))==null?void 0:ee.type)===l(m).GALLERY?(o(),g(Me,{key:0},[T(y(e.$t("title.editCards")),1)],64)):(o(),g(Me,{key:1},[T(y(e.$t("objects.fields")),1)],64))])):C("",!0)]),l(be)?(o(),g("span",Ct,y(l(be)),1)):C("",!0)])]}),_:1},8,["show-as-disabled"])),[[$e,["c:fields"]]])]),_:1},8,["disabled","class"])]),_:1},8,["visible","auto-close"])}}}),ta=Object.assign(kl(Yt,[["__scopeId","data-v-84545d6e"]]),{__name:"SmartsheetToolbarFieldsMenu"});export{ta as default};
