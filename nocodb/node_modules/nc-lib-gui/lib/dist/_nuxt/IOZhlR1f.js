import{_ as G}from"./IRrJR195.js";import{_ as J}from"./EgJz-9W8.js";import{e as K,T as Q,km as R,fz as l,n as b,c as r,o as i,b as p,a as t,w as k,L as o,t as c,an as S,aq as A,I as U,d as C,O as W,bn as X,M as Z,aA as ee,cm as te,_ as oe}from"./DOFFjK0_.js";import{u as se,b as ae}from"./BJ_KO_Ot.js";import{a as ne,A as f}from"./RToaOcBI.js";import"./BjlRxDgN.js";import"./boyBAVNN.js";import"./CFDwQBzt.js";import"./Ck0WYZ6p.js";import"./G4Pt-Lbf.js";import"./CFXGfO_A.js";import"./VKUQM8lk.js";import"./SJHyi9T4.js";import"./Bo7kLdUR.js";import"./DeaWGTJr.js";import"./Db9kSA7A.js";import"./CQugZrqw.js";import"./D1f5NZz7.js";import"./CyXz1Zkk.js";const le={class:"flex flex-col h-full h-[calc(100vh_-_40px)]","data-testid":"nc-setup-config"},ie={class:"flex gap-3 items-center"},ce={"data-rec":"true"},re={class:"h-full flex h-[calc(100%_-_48px)]"},pe={class:"nc-config-left-panel nc-scrollbar-thin relative h-full flex flex-col"},de={class:"w-full flex items-center gap-3 border-gray-200 py-6 px-6"},_e={class:"font-semibold text-base"},ue={class:"flex gap-2"},me={class:"h-[calc(100%_-_48px)] flex py-4 flex-col p-6 overflow-auto"},fe={key:0,class:"flex flex-row w-full justify-center items-center h-52"},he={key:1,class:"flex"},ge={class:"nc-config-right-panel"},ve={class:"flex-grow flex flex-col gap-3"},xe={class:"text-gray-500 text-capitalize"},ye=["href"],we={class:"text-gray-500 text-capitalize"},be={class:""},ke=K({__name:"Config",props:{id:{},modelValue:{type:Boolean}},emits:["saved","close","update:modelValue"],async setup(D,{emit:I}){let h,g;const v=D,B=Q(v,"modelValue",I),{readPluginDetails:T,activePluginFormData:u,activePlugin:n,isLoading:V,loadingAction:m,testSettings:$,saveSettings:L}=ne();[h,g]=R(()=>T(v.id)),await h,g();const M={Input:l.Input,Select:l.Select,Checkbox:l.Switch,LongText:l.Input,Password:l.Password},{formState:x,validate:y,validateInfos:N}=se({formSchema:[...n.value.formDetails.items.flatMap((e,s)=>[{type:M[e.type]||l.Input,label:e.label,placeholder:e.placeholder,model:e.key,required:e.required,helpText:e.help_text,width:"48",border:!1,showHintAsTooltip:!0},...s%2?[]:[{type:l.Space,width:"4"}]])],initialState:u}),O=async e=>{try{switch(e){case f.Save:await y(),u.value=x.value,await L(),B.value=!1;break;case f.Test:await y(),u.value=x.value,await $();break}}catch(s){console.log(s)}finally{m.value=null}},P=b(()=>Object.values(N||{}).every(e=>e.validateStatus!=="error")),F=b(()=>{var e,s,d,_;return[{title:"Application Setup",url:`https://nocodb.com/docs/product-docs/account-settings/oss-specific-details#configure-${(s=(e=n.value)==null?void 0:e.category)==null?void 0:s.toLowerCase()}`},...((_=(d=n.value)==null?void 0:d.formDetails)==null?void 0:_.docs)||[]]});return(e,s)=>{const d=G,_=J,z=W,H=X,j=ae,Y=Z,q=ee;return i(),r("div",le,[p(_,null,{title:k(()=>[t("div",ie,[p(d,{app:o(n),class:"h-8 w-8"},null,8,["app"]),t("span",ce,c(o(n).title),1)])]),_:1}),t("div",re,[t("div",pe,[t("div",de,[t("span",_e,c(e.$t("labels.configuration")),1),s[0]||(s[0]=t("div",{class:"flex-grow"},null,-1)),t("div",ue,[(i(!0),r(S,null,A(o(n).formDetails.actions,(a,E)=>{var w;return i(),U(z,{key:E,loading:o(m)===a.key,type:a.key===("Action"in e?e.Action:o(f)).Save?"primary":"default",size:"small",disabled:!!o(m)||!o(P),"data-testid":`nc-setup-config-action-${(w=a.key)==null?void 0:w.toLowerCase()}`,onClick:Ae=>O(a.key)},{default:k(()=>[C(c(a.label),1)]),_:2},1032,["loading","type","disabled","data-testid","onClick"])}),128))])]),t("div",me,[o(V)||!o(n)?(i(),r("div",fe,[p(H,{size:"large"})])):(i(),r("div",he,[p(j,{class:"w-229 px-2 mx-auto"})]))])]),t("div",ge,[t("div",ve,[t("div",xe,c(e.$t("labels.documentation")),1),(i(!0),r(S,null,A(o(F),a=>(i(),r("a",{key:a.title,href:a.url,target:"_blank",rel:"noopener noreferrer",class:"!no-underline !text-current flex gap-2 items-center"},[p(Y,{icon:"bookOpen",class:"text-gray-500"}),C(" "+c(a.title),1)],8,ye))),128)),p(q),t("div",we,c(e.$t("labels.modifiedOn")),1),t("div",be,c(o(te)(o(n).created_at).format("DD MMM YYYY HH:mm")),1)])])])])}}}),Ge=Object.assign(oe(ke,[["__scopeId","data-v-2bcd4558"]]),{__name:"AccountSetupConfig"});export{Ge as default};
