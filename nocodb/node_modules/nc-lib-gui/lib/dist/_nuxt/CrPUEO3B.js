const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DRQrXP7Q.js","./DOFFjK0_.js","./entry.DDfSYhWa.css","./D2QgEzTv.js","./PlainCell.CJha1QXQ.css","./BmeEgVC9.js","./DBe8bXbT.js","./RecordCard.pwDI-3DF.css","./0c4tmWST.js","./DG2ZEhLK.js","./SJHyi9T4.js","./4PLl4EP6.js","./DcFNOSET.js","./boyBAVNN.js","./D1gZ4Fpg.js","./Bo7kLdUR.js","./BYGCxle3.js","./B3Wp9c04.js","./C1uRXLg7.js","./DGuB8RA-.js","./D_wq2ltS.js","./Item.C85DUSg3.css","./9aYOtC5C.js","./index.CotXCNy2.css","./DunK-51v.js","./DivDataCell.D_9SDUsb.css","./ps5He39s.js","./CHgOe2F-.js","./MSgi_m6o.js","./JKos0pQW.js","./CQugZrqw.js","./index._6B72PDH.css","./BdLxRlCP.js","./YaKnxhzO.js","./Markdown.CUPXKfeQ.css","./CNJqPN7Y.js","./AxsiR11P.js","./C9H3ht2d.js","./Comments.BKDN6dt-.css","./CkXo2doe.js","./CV-2bRRD.js","./TimeSelector.DAR2lbHN.css","./Czlq_f4Y.js","./Cgx2iu1G.js","./C6nWwNvX.js","./Cell.Dgtcn0F2.css","./DiUleKVo.js","./JUJEmhCv.js","./Modal.CB1oWLel.css","./BrfakvRE.js","./CJtI8BMq.js","./Bgc5K1P7.js","./D4c215jk.js","./lL-0_K96.js","./BClTqpVB.js","./CYkscC4Z.js","./DEAKw9Pl.js","./Cl-qOJW6.js","./BNo10Mdm.js","./index.C8L8AhJa.css","./CtJu2gHc.js","./MNXVOE4I.js","./LockView.BWC8JyQk.css","./CMyFGii6.js","./qgYlKlk5.js","./Cb5B9eG-.js","./C_qz9woQ.js","./DA4KItu_.js","./D8wgK-Ih.js","./HdsRe6lq.js","./index.N-A1gxk9.css","./DzBSAsxR.js","./FilterInput.7KjqjE1F.css","./4fFkR2QG.js","./Pagination.XVPzwtel.css","./CAfhvBOi.js","./BcKPINb2.js","./VirtualCell.6f0pX0MN.css","./D0vnHTOx.js","./BRTCxTHu.js","./DDEVLD8O.js","./-rIuSlCu.js","./SpSJ8E4d.js","./Dh5zKH8k.js","./ColumnMenu.DQG9Y5_N.css","./CiBV2ZED.js","./ZNRZafJ9.js","./BhfICdUA.js","./NRjd0XWG.js","./RfUK_fd6.js","./SelectOptions.DqNkMQ-A.css","./hehmy6V1.js","./BvG7Iv4q.js","./CyXz1Zkk.js","./CPChVVVr.js","./CFXGfO_A.js","./VKUQM8lk.js","./BqWeTF94.js","./sgaWLnOz.js","./BpgQOThx.js","./DmoodaOn.js","./B3tDgntu.js","./Db9kSA7A.js","./EditOrAddProvider.C2farLzy.css","./B4YnCsMc.js","./6zXueAcs.js","./Byuk3M83.js","./D-8_fbld.js","./DminWhpq.js","./index.Bp-YHGEB.css"])))=>i.map(i=>d[i]);
import{e as W,G as j,r as k,aZ as Q,as as X,gl as ee,n as N,cm as i,o6 as T,c as R,L as _,o as w,b,w as V,N as U,aS as O,an as $,aq as te,I as oe,K as re,aW as A}from"./DOFFjK0_.js";import{i as ae,e as Y}from"./D2QgEzTv.js";import{U as ne}from"./CiBV2ZED.js";import{a as le}from"./6Zptevrc.js";import{u as ie}from"./B3Wp9c04.js";import"./DDEVLD8O.js";import"./ZNRZafJ9.js";import"./BhfICdUA.js";import"./NRjd0XWG.js";import"./RfUK_fd6.js";import"./DG2ZEhLK.js";import"./SJHyi9T4.js";import"./BYGCxle3.js";import"./BNo10Mdm.js";import"./hehmy6V1.js";import"./BvG7Iv4q.js";import"./CyXz1Zkk.js";import"./CPChVVVr.js";import"./D4c215jk.js";import"./CFXGfO_A.js";import"./VKUQM8lk.js";import"./YaKnxhzO.js";import"./BqWeTF94.js";import"./-rIuSlCu.js";import"./BrfakvRE.js";import"./sgaWLnOz.js";import"./D_wq2ltS.js";import"./9aYOtC5C.js";import"./CQugZrqw.js";import"./C6nWwNvX.js";import"./BpgQOThx.js";import"./CYkscC4Z.js";import"./CHgOe2F-.js";import"./ps5He39s.js";import"./DEAKw9Pl.js";import"./Cl-qOJW6.js";import"./DmoodaOn.js";import"./Bo7kLdUR.js";import"./4PLl4EP6.js";import"./DcFNOSET.js";import"./boyBAVNN.js";import"./B3tDgntu.js";import"./Db9kSA7A.js";import"./C1uRXLg7.js";const se=O(()=>A(()=>import("./DRQrXP7Q.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url).then(s=>s.default||s)),me=O(()=>A(()=>import("./BmeEgVC9.js"),__vite__mapDeps([5,1,2,6,7]),import.meta.url).then(s=>s.default||s)),de=O(()=>A(()=>import("./0c4tmWST.js").then(s=>s.R),__vite__mapDeps([8,1,2,9,10,11,3,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109]),import.meta.url).then(s=>s.default||s)),ce=["onClick","onMouseover"],ue=W({__name:"DateField",emits:["expandRecord","newRecord"],setup(s,{emit:Z}){const g=Z,S=j(Q,k()),L=k(),{isUIAllowed:P}=X(),{selectedDate:v,formattedData:f,formattedSideBarData:z,calendarRange:M,updateRowProperty:q,isSyncedFromColumn:G}=le(),J=j(ee,k()),{fields:B}=ie(),K=N(()=>B.value?new Map(B.value.map(o=>[o.fk_column_id,{underline:o.underline,bold:o.bold,italic:o.italic}])):new Map),x=o=>K.value.get(o.id),F=N(()=>{if(!M.value)return[];const o=[];return M.value.forEach(n=>{const c=n.fk_from_col,p=n.fk_to_col;if(c&&p){const d=f.value.filter(e=>{const t=i(e.row[c.title]),a=i(e.row[p.title]);return t.isSameOrBefore(a,"day")});for(const e of d){const t=i(e.row[c.title]),a=i(e.row[p.title]),u=e.rowMeta.id??T();let l="none";const m=r=>r.isSame(v.value,"day"),y=r=>r.isBefore(v.value,"day"),D=r=>r.isAfter(v.value,"day");m(t)&&m(a)?l="rounded":y(t)&&D(a)?l="none":m(t)&&D(a)?l="leftRounded":y(t)&&m(a)?l="rightRounded":l="none",o.push({...e,rowMeta:{...e.rowMeta,position:l,id:u,range:n}})}}else if(c)for(const d of f.value){const e=d.rowMeta.id??T();o.push({...d,rowMeta:{...d.rowMeta,id:e,range:n,position:"rounded"}})}}),o}),C=k(null),E=k(null),H=o=>{var c,p,d;if(!P("dataEdit"))return;o.preventDefault();const n=(c=o.dataTransfer)==null?void 0:c.getData("text/plain");if(n){const{record:e}=JSON.parse(n),t=(p=e.rowMeta.range)==null?void 0:p.fk_from_col,a=(d=e.rowMeta.range)==null?void 0:d.fk_to_col;if(!t)return;const u=i(v.value).startOf("day");let l;const m={...e,row:{...e.row,[t.title]:i(u).format("YYYY-MM-DD HH:mm:ssZ")}},y=[t.title];if(a){const r=e.row[t.title]?i(e.row[t.title]):null,h=e.row[a.title]?i(e.row[a.title]):null;r&&h?l=i(u).add(h.diff(r,"day"),"day"):r&&!h?l=i(u).endOf("day"):!r&&h?l=i(u).endOf("day"):l=u.clone(),m.row[a.title]=i(l).format("YYYY-MM-DD HH:mm:ssZ"),y.push(a.title)}if(!m)return;const D=Y(m.row,S.value.columns);C.value?f.value=f.value.map(r=>Y(r.row,S.value.columns)===D?m:r):(f.value=[...f.value,m],z.value=z.value.filter(r=>Y(r.row,S.value.columns)!==D)),C.value&&(C.value.style.boxShadow="none",C.value=null),q(m,y,!1),$e("c:calendar:day:drag-record")}},I=()=>{var n;if(!P("dataEdit")||!((n=M.value)!=null&&n.length)||G.value)return;const o={row:{[M.value[0].fk_from_col.title]:v.value.format("YYYY-MM-DD HH:mm:ssZ")}};g("newRecord",o)};return(o,n)=>{const c=se,p=me,d=de;return _(F).length?(w(),R("div",{key:0,ref_key:"container",ref:L,class:"w-full cursor-pointer relative overflow-y-auto nc-scrollbar-md","data-testid":"nc-calendar-day-view",onDblclick:I,onDrop:H},[b(_(ne),{height:"calc(100vh - 5rem)",list:_(F),options:{itemHeight:36}},{default:V(({data:e})=>[(w(),R("div",{key:e.rowMeta.id,class:"mt-2",style:{"line-height":"18px"},"data-testid":"nc-calendar-day-record-card",onMouseleave:n[0]||(n[0]=t=>E.value=null),onClick:U(t=>g("expandRecord",e),["prevent"]),onMouseover:t=>E.value=e.rowMeta.id},[b(d,{row:e},{default:V(()=>[b(p,{record:e,hover:_(E)===e.rowMeta.id,resize:!1,position:e.rowMeta.position,size:"small",onClick:U(t=>g("expandRecord",e),["prevent"])},{default:V(()=>[(w(!0),R($,null,te(_(J),(t,a)=>(w(),R($,{key:a},[("isRowEmpty"in o?o.isRowEmpty:_(ae))(e,t)?re("",!0):(w(),oe(c,{key:0,modelValue:e.row[t.title],"onUpdate:modelValue":u=>e.row[t.title]=u,class:"text-xs",bold:x(t).bold,column:t,italic:x(t).italic,underline:x(t).underline},null,8,["modelValue","onUpdate:modelValue","bold","column","italic","underline"]))],64))),128))]),_:2},1032,["record","hover","position","onClick"])]),_:2},1032,["row"])],40,ce))]),_:1},8,["list"])],544)):(w(),R("div",{key:1,ref_key:"container",ref:L,class:"w-full h-full cursor-pointer flex text-md font-bold text-gray-500 items-center justify-center",onDrop:H,onDblclick:I}," No records in this day ",544))}}}),at=Object.assign(ue,{__name:"SmartsheetCalendarDayViewDateField"});export{at as default};
