const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CMyFGii6.js","./DOFFjK0_.js","./entry.DDfSYhWa.css","./qgYlKlk5.js","./Cb5B9eG-.js","./C_qz9woQ.js","./DA4KItu_.js","./CV-2bRRD.js","./TimeSelector.DAR2lbHN.css","./D8wgK-Ih.js","./HdsRe6lq.js","./index.N-A1gxk9.css","./DzBSAsxR.js","./FilterInput.7KjqjE1F.css","./DGuB8RA-.js","./4fFkR2QG.js","./Pagination.XVPzwtel.css","./D2QgEzTv.js","./SJHyi9T4.js","./DG2ZEhLK.js","./CAfhvBOi.js","./BYGCxle3.js","./DcFNOSET.js","./boyBAVNN.js","./4PLl4EP6.js","./Bgc5K1P7.js","./DEAKw9Pl.js","./CHgOe2F-.js","./CYkscC4Z.js","./ps5He39s.js","./Cl-qOJW6.js","./BcKPINb2.js","./VirtualCell.6f0pX0MN.css"])))=>i.map(i=>d[i]);
import{e as le,G as a,fT as ie,dJ as re,gk as ue,r as u,kO as me,kP as pe,kr as ce,gb as fe,em as ve,ko as de,j7 as _e,Y as D,j3 as Ie,j8 as we,gD as Ce,gB as ye,mm as xe,iC as ge,gE as be,as as je,km as ke,n as k,aQ as E,g as Ee,i_ as Te,kQ as z,bz as Re,c as K,o as w,b as N,w as S,a as $,K as T,ag as R,L as t,I as F,a3 as Ve,N as G,M as he,aS as Q,bw as Ae,hU as Le,aW as J,_ as Pe}from"./DOFFjK0_.js";import{_ as Oe}from"./31oN5MbZ.js";import{a as Ue}from"./4PLl4EP6.js";import{u as Me}from"./CMyFGii6.js";import{u as Be}from"./CV-2bRRD.js";import"./Byuk3M83.js";import"./SJHyi9T4.js";import"./D2QgEzTv.js";import"./DcFNOSET.js";import"./boyBAVNN.js";import"./qgYlKlk5.js";import"./Cb5B9eG-.js";import"./C_qz9woQ.js";import"./DA4KItu_.js";import"./D8wgK-Ih.js";import"./HdsRe6lq.js";import"./DzBSAsxR.js";import"./DGuB8RA-.js";import"./4fFkR2QG.js";import"./DG2ZEhLK.js";import"./CAfhvBOi.js";import"./BYGCxle3.js";import"./Bgc5K1P7.js";import"./DEAKw9Pl.js";import"./CHgOe2F-.js";import"./CYkscC4Z.js";import"./ps5He39s.js";import"./Cl-qOJW6.js";import"./BcKPINb2.js";const De=Q(()=>J(()=>import("./CMyFGii6.js").then(s=>s.U),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]),import.meta.url).then(s=>s.default||s)),ze=Q(()=>J(()=>import("./CMyFGii6.js").then(s=>s.b),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]),import.meta.url).then(s=>s.default||s)),Ke={class:"nc-cell-field flex items-center w-full"},Ne=le({__name:"BelongsTo",async setup(s){let V,h;const i=a(ie),W=a(ue,re()),m=a(me,u(null)),Y=a(pe),d=a(ce),q=a(fe,u(!1)),A=a(ve,u(!1)),L=a(de,u(!1)),P=a(_e,!1),C=a(we,D(Ie)),O=a(Ce,u(!1)),p=a(ye,null),c=a(xe,null),X=a(ge,D({})),f=a(be,null),{isUIAllowed:Z}=je(),n=u(!1),v=u(!1),{state:y,isNew:x,removeLTARRef:H}=Ue(),{relatedTableMeta:ee,loadRelatedTableMeta:te,relatedTableDisplayValueProp:g,relatedTableDisplayValuePropId:U,unlink:ne}=Me(i,Y,x,W.trigger);[V,h]=ke(()=>te()),await V,h();const _=k(()=>!q.value&&Z("dataEdit")&&!L.value||A.value),l=k(()=>{var e;return m!=null&&m.value?m==null?void 0:m.value:x.value?(e=y==null?void 0:y.value)==null?void 0:e[i==null?void 0:i.value.title]:null}),M=async e=>{x.value?await H(e,i==null?void 0:i.value):await ne(e)};Be(d,e=>{switch(e.key){case"Enter":n.value=!0,e.stopPropagation();break}});const B=k(()=>{var e,o;return(o=(e=ee.value)==null?void 0:e.columns)==null?void 0:o.find(j=>j.title===g.value)});E(n,()=>{v.value=n.value}),E(v,e=>{e||(n.value=!1)},{flush:"post"}),E(l,e=>{e&&(v.value=!1)});function I(e){e.type!=="click"||!_.value||(O.value||A.value||d.value)&&(n.value=!0)}const b=e=>{if(!(!(e instanceof KeyboardEvent)||!e.target||Ae(e)||!_.value)&&Le(e))return n.value?n.value=!1:n.value=!0,!0};return Ee(()=>{c==null||c.on(I),p==null||p.on(I),f==null||f.on(b),!(!_.value||!P||O.value||!C)&&Te(()=>{b(X.event)||(z(".unlink-icon",C)?M(l.value):(z(".nc-canvas-table-editable-cell-wrapper .nc-plus.nc-action-icon",C),n.value=!0))})}),Re(()=>{c==null||c.off(I),p==null||p.off(I),f==null||f.off(b)}),(e,o)=>{const j=Oe,oe=he,ae=De,se=ze;return w(),K("div",{class:R(["flex w-full chips-wrapper items-center",{active:t(d)}])},[N(se,{"is-open":v.value,"onUpdate:isOpen":o[5]||(o[5]=r=>v.value=r)},{overlay:S(()=>[n.value?(w(),F(ae,{key:0,modelValue:n.value,"onUpdate:modelValue":o[3]||(o[3]=r=>n.value=r),column:t(B),"hide-back-btn":"",onEscape:o[4]||(o[4]=r=>v.value=!1)},null,8,["modelValue","column"])):T("",!0)]),default:S(()=>[$("div",Ke,[$("div",{class:R(["chips flex items-center flex-1 min-h-7",{"max-w-[calc(100%_-_16px)]":!t(L)}])},[t(l)&&(t(g)||t(U))?(w(),F(j,{key:0,item:t(l),value:!Array.isArray(t(l))&&typeof t(l)=="object"?t(l)[t(g)]??t(l)[t(U)]:t(l),column:t(B),"show-unlink-button":!0,onUnlink:o[0]||(o[0]=r=>M(t(l)))},null,8,["item","value","column"])):T("",!0)],2),t(_)?(w(),K("div",{key:0,class:"flex-none flex group items-center min-w-4",tabindex:"0",onKeydown:o[2]||(o[2]=Ve(G(r=>n.value=!0,["stop"]),["enter"]))},[N(oe,{icon:"plus",class:R(["flex-none select-none !text-md text-gray-700 nc-action-icon nc-plus invisible group-hover:visible group-focus:visible",{"!visible !text-gray-600":t(P)&&t(d)}]),onClick:o[1]||(o[1]=G(r=>n.value=!0,["stop"]))},null,8,["class"])],32)):T("",!0)])]),_:1},8,["is-open"])],2)}}}),It=Object.assign(Pe(Ne,[["__scopeId","data-v-f0506ea4"]]),{__name:"VirtualCellBelongsTo"});export{It as default};
