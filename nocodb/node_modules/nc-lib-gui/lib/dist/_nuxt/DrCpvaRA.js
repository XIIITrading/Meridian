const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DOFFjK0_.js","./entry.DDfSYhWa.css","./DQNBqaOg.js","./DiUleKVo.js","./JUJEmhCv.js","./Modal.CB1oWLel.css","./BrfakvRE.js","./CFDwQBzt.js","./Overlay.CpKx7Pnx.css","./Bo7kLdUR.js","./4PLl4EP6.js","./SJHyi9T4.js","./D2QgEzTv.js","./DcFNOSET.js","./boyBAVNN.js","./D1gZ4Fpg.js","./DG2ZEhLK.js","./C83syoBY.js","./CV-2bRRD.js","./TimeSelector.DAR2lbHN.css","./Carousel.ZTIVqvaJ.css","./DxYugzsH.js","./DEAKw9Pl.js","./CHgOe2F-.js","./Modal.4i6Tx6WU.css","./BYPw9ET5.js","./D_wq2ltS.js","./Item.C85DUSg3.css","./9aYOtC5C.js","./index.CotXCNy2.css","./AttachFile.D3qxYYb4.css"])))=>i.map(i=>d[i]);
import{cj as to,e as xn,a9 as Ea,r as F,Y as jt,ab as no,g as ba,I as ne,o as z,w as W,a as he,b as ie,t as be,X as ao,L as s,a0 as oo,ar as xa,O as Sn,d as Ue,P as lt,f as ro,as as lo,gj as io,b7 as so,fX as In,G as ae,gb as co,cd as uo,em as fo,aZ as Sa,fT as mo,kX as po,n as Mt,a8 as ho,V as vo,a6 as go,fo as _o,J as Ia,aQ as Ot,b0 as yo,a4 as Re,gZ as la,gn as ia,a5 as wo,ax as To,on as Ao,oo as Eo,op as bo,oq as xo,or as So,T as sa,c as Fe,K as ke,bY as Io,ag as ze,aS as bt,M as Ra,aT as it,N as st,ap as Ca,a3 as Gt,b9 as Tt,$ as Ro,aW as xt,b3 as Co,os as Oo,mC as Mo,gF as ko,fV as Do,gy as Lo,gD as No,kY as Po,jd as Fo,kU as zo,k9 as Uo,ko as $o,iC as Bo,j7 as jo,j3 as Ho,j8 as Go,gC as Vo,gE as Wo,fr as Yo,kr as ca,ot as qo,dw as ua,jf as Xo,i_ as Ko,kQ as Zo,bz as Jo,an as $t,aq as fa,cn as gn,g$ as ma,bw as Qo,hU as er}from"./DOFFjK0_.js";import{g as tr,i as Rn,j as nr,c as ar,b as or}from"./Bo7kLdUR.js";import{_ as rr}from"./JUJEmhCv.js";import{u as lr}from"./SJHyi9T4.js";import{u as ir}from"./DG2ZEhLK.js";import{a as Oa}from"./4PLl4EP6.js";import{e as pa}from"./D2QgEzTv.js";import{_ as sr}from"./CFDwQBzt.js";import{u as cr,_ as ur}from"./D1gZ4Fpg.js";import{S as fr}from"./C83syoBY.js";import{u as mr}from"./CV-2bRRD.js";/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */var _n,da;function ha(){if(da)return _n;da=1;const{entries:e,setPrototypeOf:n,isFrozen:a,getPrototypeOf:r,getOwnPropertyDescriptor:i}=Object;let{freeze:o,seal:c,create:p}=Object,{apply:d,construct:y}=typeof Reflect<"u"&&Reflect;o||(o=function(l){return l}),c||(c=function(l){return l}),d||(d=function(l,_,w){return l.apply(_,w)}),y||(y=function(l,_){return new l(..._)});const m=g(Array.prototype.forEach),M=g(Array.prototype.lastIndexOf),E=g(Array.prototype.pop),R=g(Array.prototype.push),j=g(Array.prototype.splice),C=g(String.prototype.toLowerCase),O=g(String.prototype.toString),K=g(String.prototype.match),Y=g(String.prototype.replace),H=g(String.prototype.indexOf),u=g(String.prototype.trim),I=g(Object.prototype.hasOwnProperty),P=g(RegExp.prototype.test),U=S(TypeError);function g(x){return function(l){l instanceof RegExp&&(l.lastIndex=0);for(var _=arguments.length,w=new Array(_>1?_-1:0),ue=1;ue<_;ue++)w[ue-1]=arguments[ue];return d(x,l,w)}}function S(x){return function(){for(var l=arguments.length,_=new Array(l),w=0;w<l;w++)_[w]=arguments[w];return y(x,_)}}function v(x,l){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:C;n&&n(x,null);let w=l.length;for(;w--;){let ue=l[w];if(typeof ue=="string"){const Ce=_(ue);Ce!==ue&&(a(l)||(l[w]=Ce),ue=Ce)}x[ue]=!0}return x}function pe(x){for(let l=0;l<x.length;l++)I(x,l)||(x[l]=null);return x}function $(x){const l=p(null);for(const[_,w]of e(x))I(x,_)&&(Array.isArray(w)?l[_]=pe(w):w&&typeof w=="object"&&w.constructor===Object?l[_]=$(w):l[_]=w);return l}function te(x,l){for(;x!==null;){const w=i(x,l);if(w){if(w.get)return g(w.get);if(typeof w.value=="function")return g(w.value)}x=r(x)}function _(){return null}return _}const J=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),D=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),se=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Z=o(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ce=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ge=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),we=o(["#text"]),de=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Le=o(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),fe=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),re=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ee=c(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ne=c(/<%[\w\W]*|[\w\W]*%>/gm),$e=c(/\$\{[\w\W]*/gm),Ye=c(/^data-[\-\w.\u00B7-\uFFFF]+$/),nt=c(/^aria-[\-\w]+$/),Be=c(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Qe=c(/^(?:\w+script|data):/i),qe=c(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),A=c(/^html$/i),L=c(/^[a-z][.\w]*(-[.\w]+)+$/i);var B=Object.freeze({__proto__:null,ARIA_ATTR:nt,ATTR_WHITESPACE:qe,CUSTOM_ELEMENT:L,DATA_ATTR:Ye,DOCTYPE_NAME:A,ERB_EXPR:Ne,IS_ALLOWED_URI:Be,IS_SCRIPT_OR_DATA:Qe,MUSTACHE_EXPR:ee,TMPLIT_EXPR:$e});const N={element:1,text:3,progressingInstruction:7,comment:8,document:9},V=function(){return typeof window>"u"?null:window},k=function(l,_){if(typeof l!="object"||typeof l.createPolicy!="function")return null;let w=null;const ue="data-tt-policy-suffix";_&&_.hasAttribute(ue)&&(w=_.getAttribute(ue));const Ce="dompurify"+(w?"#"+w:"");try{return l.createPolicy(Ce,{createHTML(Pe){return Pe},createScriptURL(Pe){return Pe}})}catch{return console.warn("TrustedTypes policy "+Ce+" could not be created."),null}},G=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function q(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:V();const l=b=>q(b);if(l.version="3.2.6",l.removed=[],!x||!x.document||x.document.nodeType!==N.document||!x.Element)return l.isSupported=!1,l;let{document:_}=x;const w=_,ue=w.currentScript,{DocumentFragment:Ce,HTMLTemplateElement:Pe,Node:h,Element:Q,NodeFilter:He,NamedNodeMap:Zt=x.NamedNodeMap||x.MozNamedAttrMap,HTMLFormElement:at,DOMParser:ct,trustedTypes:Ge}=x,ot=Q.prototype,Jt=te(ot,"cloneNode"),Qt=te(ot,"remove"),en=te(ot,"nextSibling"),tn=te(ot,"childNodes"),ut=te(ot,"parentNode");if(typeof Pe=="function"){const b=_.createElement("template");b.content&&b.content.ownerDocument&&(_=b.content.ownerDocument)}let Te,X="";const{implementation:Xe,createNodeIterator:ft,createDocumentFragment:$a,getElementsByTagName:Ba}=_,{importNode:ja}=w;let Oe=G();l.isSupported=typeof e=="function"&&typeof ut=="function"&&Xe&&Xe.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:nn,ERB_EXPR:an,TMPLIT_EXPR:on,DATA_ATTR:Ha,ARIA_ATTR:Ga,IS_SCRIPT_OR_DATA:Va,ATTR_WHITESPACE:Nn,CUSTOM_ELEMENT:Wa}=B;let{IS_ALLOWED_URI:Pn}=B,_e=null;const Fn=v({},[...J,...D,...se,...ce,...we]);let Ae=null;const zn=v({},[...de,...Le,...fe,...re]);let me=Object.seal(p(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),St=null,rn=null,Un=!0,ln=!0,$n=!1,Bn=!0,mt=!1,Dt=!0,rt=!1,sn=!1,cn=!1,pt=!1,Lt=!1,Nt=!1,jn=!0,Hn=!1;const Ya="user-content-";let un=!0,It=!1,dt={},ht=null;const Gn=v({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Vn=null;const Wn=v({},["audio","video","img","source","image","track"]);let fn=null;const Yn=v({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Pt="http://www.w3.org/1998/Math/MathML",Ft="http://www.w3.org/2000/svg",Ke="http://www.w3.org/1999/xhtml";let vt=Ke,mn=!1,pn=null;const qa=v({},[Pt,Ft,Ke],O);let zt=v({},["mi","mo","mn","ms","mtext"]),Ut=v({},["annotation-xml"]);const Xa=v({},["title","style","font","a","script"]);let Rt=null;const Ka=["application/xhtml+xml","text/html"],Za="text/html";let ye=null,gt=null;const Ja=_.createElement("form"),qn=function(t){return t instanceof RegExp||t instanceof Function},dn=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(gt&&gt===t)){if((!t||typeof t!="object")&&(t={}),t=$(t),Rt=Ka.indexOf(t.PARSER_MEDIA_TYPE)===-1?Za:t.PARSER_MEDIA_TYPE,ye=Rt==="application/xhtml+xml"?O:C,_e=I(t,"ALLOWED_TAGS")?v({},t.ALLOWED_TAGS,ye):Fn,Ae=I(t,"ALLOWED_ATTR")?v({},t.ALLOWED_ATTR,ye):zn,pn=I(t,"ALLOWED_NAMESPACES")?v({},t.ALLOWED_NAMESPACES,O):qa,fn=I(t,"ADD_URI_SAFE_ATTR")?v($(Yn),t.ADD_URI_SAFE_ATTR,ye):Yn,Vn=I(t,"ADD_DATA_URI_TAGS")?v($(Wn),t.ADD_DATA_URI_TAGS,ye):Wn,ht=I(t,"FORBID_CONTENTS")?v({},t.FORBID_CONTENTS,ye):Gn,St=I(t,"FORBID_TAGS")?v({},t.FORBID_TAGS,ye):$({}),rn=I(t,"FORBID_ATTR")?v({},t.FORBID_ATTR,ye):$({}),dt=I(t,"USE_PROFILES")?t.USE_PROFILES:!1,Un=t.ALLOW_ARIA_ATTR!==!1,ln=t.ALLOW_DATA_ATTR!==!1,$n=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Bn=t.ALLOW_SELF_CLOSE_IN_ATTR!==!1,mt=t.SAFE_FOR_TEMPLATES||!1,Dt=t.SAFE_FOR_XML!==!1,rt=t.WHOLE_DOCUMENT||!1,pt=t.RETURN_DOM||!1,Lt=t.RETURN_DOM_FRAGMENT||!1,Nt=t.RETURN_TRUSTED_TYPE||!1,cn=t.FORCE_BODY||!1,jn=t.SANITIZE_DOM!==!1,Hn=t.SANITIZE_NAMED_PROPS||!1,un=t.KEEP_CONTENT!==!1,It=t.IN_PLACE||!1,Pn=t.ALLOWED_URI_REGEXP||Be,vt=t.NAMESPACE||Ke,zt=t.MATHML_TEXT_INTEGRATION_POINTS||zt,Ut=t.HTML_INTEGRATION_POINTS||Ut,me=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&qn(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(me.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&qn(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(me.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(me.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),mt&&(ln=!1),Lt&&(pt=!0),dt&&(_e=v({},we),Ae=[],dt.html===!0&&(v(_e,J),v(Ae,de)),dt.svg===!0&&(v(_e,D),v(Ae,Le),v(Ae,re)),dt.svgFilters===!0&&(v(_e,se),v(Ae,Le),v(Ae,re)),dt.mathMl===!0&&(v(_e,ce),v(Ae,fe),v(Ae,re))),t.ADD_TAGS&&(_e===Fn&&(_e=$(_e)),v(_e,t.ADD_TAGS,ye)),t.ADD_ATTR&&(Ae===zn&&(Ae=$(Ae)),v(Ae,t.ADD_ATTR,ye)),t.ADD_URI_SAFE_ATTR&&v(fn,t.ADD_URI_SAFE_ATTR,ye),t.FORBID_CONTENTS&&(ht===Gn&&(ht=$(ht)),v(ht,t.FORBID_CONTENTS,ye)),un&&(_e["#text"]=!0),rt&&v(_e,["html","head","body"]),_e.table&&(v(_e,["tbody"]),delete St.tbody),t.TRUSTED_TYPES_POLICY){if(typeof t.TRUSTED_TYPES_POLICY.createHTML!="function")throw U('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof t.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw U('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Te=t.TRUSTED_TYPES_POLICY,X=Te.createHTML("")}else Te===void 0&&(Te=k(Ge,ue)),Te!==null&&typeof X=="string"&&(X=Te.createHTML(""));o&&o(t),gt=t}},Xn=v({},[...D,...se,...Z]),Kn=v({},[...ce,...ge]),Qa=function(t){let f=ut(t);(!f||!f.tagName)&&(f={namespaceURI:vt,tagName:"template"});const T=C(t.tagName),le=C(f.tagName);return pn[t.namespaceURI]?t.namespaceURI===Ft?f.namespaceURI===Ke?T==="svg":f.namespaceURI===Pt?T==="svg"&&(le==="annotation-xml"||zt[le]):!!Xn[T]:t.namespaceURI===Pt?f.namespaceURI===Ke?T==="math":f.namespaceURI===Ft?T==="math"&&Ut[le]:!!Kn[T]:t.namespaceURI===Ke?f.namespaceURI===Ft&&!Ut[le]||f.namespaceURI===Pt&&!zt[le]?!1:!Kn[T]&&(Xa[T]||!Xn[T]):!!(Rt==="application/xhtml+xml"&&pn[t.namespaceURI]):!1},Ve=function(t){R(l.removed,{element:t});try{ut(t).removeChild(t)}catch{Qt(t)}},_t=function(t,f){try{R(l.removed,{attribute:f.getAttributeNode(t),from:f})}catch{R(l.removed,{attribute:null,from:f})}if(f.removeAttribute(t),t==="is")if(pt||Lt)try{Ve(f)}catch{}else try{f.setAttribute(t,"")}catch{}},Zn=function(t){let f=null,T=null;if(cn)t="<remove></remove>"+t;else{const ve=K(t,/^[\r\n\t ]+/);T=ve&&ve[0]}Rt==="application/xhtml+xml"&&vt===Ke&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const le=Te?Te.createHTML(t):t;if(vt===Ke)try{f=new ct().parseFromString(le,Rt)}catch{}if(!f||!f.documentElement){f=Xe.createDocument(vt,"template",null);try{f.documentElement.innerHTML=mn?X:le}catch{}}const Se=f.body||f.documentElement;return t&&T&&Se.insertBefore(_.createTextNode(T),Se.childNodes[0]||null),vt===Ke?Ba.call(f,rt?"html":"body")[0]:rt?f.documentElement:Se},Jn=function(t){return ft.call(t.ownerDocument||t,t,He.SHOW_ELEMENT|He.SHOW_COMMENT|He.SHOW_TEXT|He.SHOW_PROCESSING_INSTRUCTION|He.SHOW_CDATA_SECTION,null)},hn=function(t){return t instanceof at&&(typeof t.nodeName!="string"||typeof t.textContent!="string"||typeof t.removeChild!="function"||!(t.attributes instanceof Zt)||typeof t.removeAttribute!="function"||typeof t.setAttribute!="function"||typeof t.namespaceURI!="string"||typeof t.insertBefore!="function"||typeof t.hasChildNodes!="function")},Qn=function(t){return typeof h=="function"&&t instanceof h};function Ze(b,t,f){m(b,T=>{T.call(l,t,f,gt)})}const ea=function(t){let f=null;if(Ze(Oe.beforeSanitizeElements,t,null),hn(t))return Ve(t),!0;const T=ye(t.nodeName);if(Ze(Oe.uponSanitizeElement,t,{tagName:T,allowedTags:_e}),Dt&&t.hasChildNodes()&&!Qn(t.firstElementChild)&&P(/<[/\w!]/g,t.innerHTML)&&P(/<[/\w!]/g,t.textContent)||t.nodeType===N.progressingInstruction||Dt&&t.nodeType===N.comment&&P(/<[/\w]/g,t.data))return Ve(t),!0;if(!_e[T]||St[T]){if(!St[T]&&na(T)&&(me.tagNameCheck instanceof RegExp&&P(me.tagNameCheck,T)||me.tagNameCheck instanceof Function&&me.tagNameCheck(T)))return!1;if(un&&!ht[T]){const le=ut(t)||t.parentNode,Se=tn(t)||t.childNodes;if(Se&&le){const ve=Se.length;for(let Me=ve-1;Me>=0;--Me){const Je=Jt(Se[Me],!0);Je.__removalCount=(t.__removalCount||0)+1,le.insertBefore(Je,en(t))}}}return Ve(t),!0}return t instanceof Q&&!Qa(t)||(T==="noscript"||T==="noembed"||T==="noframes")&&P(/<\/no(script|embed|frames)/i,t.innerHTML)?(Ve(t),!0):(mt&&t.nodeType===N.text&&(f=t.textContent,m([nn,an,on],le=>{f=Y(f,le," ")}),t.textContent!==f&&(R(l.removed,{element:t.cloneNode()}),t.textContent=f)),Ze(Oe.afterSanitizeElements,t,null),!1)},ta=function(t,f,T){if(jn&&(f==="id"||f==="name")&&(T in _||T in Ja))return!1;if(!(ln&&!rn[f]&&P(Ha,f))){if(!(Un&&P(Ga,f))){if(!Ae[f]||rn[f]){if(!(na(t)&&(me.tagNameCheck instanceof RegExp&&P(me.tagNameCheck,t)||me.tagNameCheck instanceof Function&&me.tagNameCheck(t))&&(me.attributeNameCheck instanceof RegExp&&P(me.attributeNameCheck,f)||me.attributeNameCheck instanceof Function&&me.attributeNameCheck(f))||f==="is"&&me.allowCustomizedBuiltInElements&&(me.tagNameCheck instanceof RegExp&&P(me.tagNameCheck,T)||me.tagNameCheck instanceof Function&&me.tagNameCheck(T))))return!1}else if(!fn[f]){if(!P(Pn,Y(T,Nn,""))){if(!((f==="src"||f==="xlink:href"||f==="href")&&t!=="script"&&H(T,"data:")===0&&Vn[t])){if(!($n&&!P(Va,Y(T,Nn,"")))){if(T)return!1}}}}}}return!0},na=function(t){return t!=="annotation-xml"&&K(t,Wa)},aa=function(t){Ze(Oe.beforeSanitizeAttributes,t,null);const{attributes:f}=t;if(!f||hn(t))return;const T={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ae,forceKeepAttr:void 0};let le=f.length;for(;le--;){const Se=f[le],{name:ve,namespaceURI:Me,value:Je}=Se,Ct=ye(ve),vn=Je;let Ie=ve==="value"?vn:u(vn);if(T.attrName=Ct,T.attrValue=Ie,T.keepAttr=!0,T.forceKeepAttr=void 0,Ze(Oe.uponSanitizeAttribute,t,T),Ie=T.attrValue,Hn&&(Ct==="id"||Ct==="name")&&(_t(ve,t),Ie=Ya+Ie),Dt&&P(/((--!?|])>)|<\/(style|title)/i,Ie)){_t(ve,t);continue}if(T.forceKeepAttr)continue;if(!T.keepAttr){_t(ve,t);continue}if(!Bn&&P(/\/>/i,Ie)){_t(ve,t);continue}mt&&m([nn,an,on],ra=>{Ie=Y(Ie,ra," ")});const oa=ye(t.nodeName);if(!ta(oa,Ct,Ie)){_t(ve,t);continue}if(Te&&typeof Ge=="object"&&typeof Ge.getAttributeType=="function"&&!Me)switch(Ge.getAttributeType(oa,Ct)){case"TrustedHTML":{Ie=Te.createHTML(Ie);break}case"TrustedScriptURL":{Ie=Te.createScriptURL(Ie);break}}if(Ie!==vn)try{Me?t.setAttributeNS(Me,ve,Ie):t.setAttribute(ve,Ie),hn(t)?Ve(t):E(l.removed)}catch{_t(ve,t)}}Ze(Oe.afterSanitizeAttributes,t,null)},eo=function b(t){let f=null;const T=Jn(t);for(Ze(Oe.beforeSanitizeShadowDOM,t,null);f=T.nextNode();)Ze(Oe.uponSanitizeShadowNode,f,null),ea(f),aa(f),f.content instanceof Ce&&b(f.content);Ze(Oe.afterSanitizeShadowDOM,t,null)};return l.sanitize=function(b){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=null,T=null,le=null,Se=null;if(mn=!b,mn&&(b="<!-->"),typeof b!="string"&&!Qn(b))if(typeof b.toString=="function"){if(b=b.toString(),typeof b!="string")throw U("dirty is not a string, aborting")}else throw U("toString is not a function");if(!l.isSupported)return b;if(sn||dn(t),l.removed=[],typeof b=="string"&&(It=!1),It){if(b.nodeName){const Je=ye(b.nodeName);if(!_e[Je]||St[Je])throw U("root node is forbidden and cannot be sanitized in-place")}}else if(b instanceof h)f=Zn("<!---->"),T=f.ownerDocument.importNode(b,!0),T.nodeType===N.element&&T.nodeName==="BODY"||T.nodeName==="HTML"?f=T:f.appendChild(T);else{if(!pt&&!mt&&!rt&&b.indexOf("<")===-1)return Te&&Nt?Te.createHTML(b):b;if(f=Zn(b),!f)return pt?null:Nt?X:""}f&&cn&&Ve(f.firstChild);const ve=Jn(It?b:f);for(;le=ve.nextNode();)ea(le),aa(le),le.content instanceof Ce&&eo(le.content);if(It)return b;if(pt){if(Lt)for(Se=$a.call(f.ownerDocument);f.firstChild;)Se.appendChild(f.firstChild);else Se=f;return(Ae.shadowroot||Ae.shadowrootmode)&&(Se=ja.call(w,Se,!0)),Se}let Me=rt?f.outerHTML:f.innerHTML;return rt&&_e["!doctype"]&&f.ownerDocument&&f.ownerDocument.doctype&&f.ownerDocument.doctype.name&&P(A,f.ownerDocument.doctype.name)&&(Me="<!DOCTYPE "+f.ownerDocument.doctype.name+`>
`+Me),mt&&m([nn,an,on],Je=>{Me=Y(Me,Je," ")}),Te&&Nt?Te.createHTML(Me):Me},l.setConfig=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};dn(b),sn=!0},l.clearConfig=function(){gt=null,sn=!1},l.isValidAttribute=function(b,t,f){gt||dn({});const T=ye(b),le=ye(t);return ta(T,le,f)},l.addHook=function(b,t){typeof t=="function"&&R(Oe[b],t)},l.removeHook=function(b,t){if(t!==void 0){const f=M(Oe[b],t);return f===-1?void 0:j(Oe[b],f,1)[0]}return E(Oe[b])},l.removeHooks=function(b){Oe[b]=[]},l.removeAllHooks=function(){Oe=G()},l}var je=q();return _n=je,_n}var yn,va;function pr(){return va||(va=1,yn=window.DOMPurify||(window.DOMPurify=ha().default||ha())),yn}var dr=pr();const hr=to(dr);var ga={},vr=function(e,n,a,r,i){var o=new Worker(ga[n]||(ga[n]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return o.onmessage=function(c){var p=c.data,d=p.$e$;if(d){var y=new Error(d[0]);y.code=d[1],y.stack=d[2],i(y,null)}else i(null,p)},o.postMessage(a,r),o},xe=Uint8Array,De=Uint16Array,qt=Int32Array,Xt=new xe([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Kt=new xe([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wn=new xe([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ma=function(e,n){for(var a=new De(31),r=0;r<31;++r)a[r]=n+=1<<e[r-1];for(var i=new qt(a[30]),r=1;r<30;++r)for(var o=a[r];o<a[r+1];++o)i[o]=o-a[r]<<5|r;return{b:a,r:i}},ka=Ma(Xt,2),gr=ka.b,Vt=ka.r;gr[28]=258,Vt[258]=28;var _r=Ma(Kt,0),Tn=_r.r,Wt=new De(32768);for(var oe=0;oe<32768;++oe){var et=(oe&43690)>>1|(oe&21845)<<1;et=(et&52428)>>2|(et&13107)<<2,et=(et&61680)>>4|(et&3855)<<4,Wt[oe]=((et&65280)>>8|(et&255)<<8)>>1}var At=function(e,n,a){for(var r=e.length,i=0,o=new De(n);i<r;++i)e[i]&&++o[e[i]-1];var c=new De(n);for(i=1;i<n;++i)c[i]=c[i-1]+o[i-1]<<1;var p;if(a){p=new De(1<<n);var d=15-n;for(i=0;i<r;++i)if(e[i])for(var y=i<<4|e[i],m=n-e[i],M=c[e[i]-1]++<<m,E=M|(1<<m)-1;M<=E;++M)p[Wt[M]>>d]=y}else for(p=new De(r),i=0;i<r;++i)e[i]&&(p[i]=Wt[c[e[i]-1]++]>>15-e[i]);return p},tt=new xe(288);for(var oe=0;oe<144;++oe)tt[oe]=8;for(var oe=144;oe<256;++oe)tt[oe]=9;for(var oe=256;oe<280;++oe)tt[oe]=7;for(var oe=280;oe<288;++oe)tt[oe]=8;var kt=new xe(32);for(var oe=0;oe<32;++oe)kt[oe]=5;var Da=At(tt,9,0),La=At(kt,5,0),Cn=function(e){return(e+7)/8|0},On=function(e,n,a){return(n==null||n<0)&&(n=0),(a==null||a>e.length)&&(a=e.length),new xe(e.subarray(n,a))},yr=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Et=function(e,n,a){var r=new Error(n||yr[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Et),!a)throw r;return r},We=function(e,n,a){a<<=n&7;var r=n/8|0;e[r]|=a,e[r+1]|=a>>8},yt=function(e,n,a){a<<=n&7;var r=n/8|0;e[r]|=a,e[r+1]|=a>>8,e[r+2]|=a>>16},Ht=function(e,n){for(var a=[],r=0;r<e.length;++r)e[r]&&a.push({s:r,f:e[r]});var i=a.length,o=a.slice();if(!i)return{t:kn,l:0};if(i==1){var c=new xe(a[0].s+1);return c[a[0].s]=1,{t:c,l:1}}a.sort(function(I,P){return I.f-P.f}),a.push({s:-1,f:25001});var p=a[0],d=a[1],y=0,m=1,M=2;for(a[0]={s:-1,f:p.f+d.f,l:p,r:d};m!=i-1;)p=a[a[y].f<a[M].f?y++:M++],d=a[y!=m&&a[y].f<a[M].f?y++:M++],a[m++]={s:-1,f:p.f+d.f,l:p,r:d};for(var E=o[0].s,r=1;r<i;++r)o[r].s>E&&(E=o[r].s);var R=new De(E+1),j=Yt(a[m-1],R,0);if(j>n){var r=0,C=0,O=j-n,K=1<<O;for(o.sort(function(P,U){return R[U.s]-R[P.s]||P.f-U.f});r<i;++r){var Y=o[r].s;if(R[Y]>n)C+=K-(1<<j-R[Y]),R[Y]=n;else break}for(C>>=O;C>0;){var H=o[r].s;R[H]<n?C-=1<<n-R[H]++-1:++r}for(;r>=0&&C;--r){var u=o[r].s;R[u]==n&&(--R[u],++C)}j=n}return{t:new xe(R),l:j}},Yt=function(e,n,a){return e.s==-1?Math.max(Yt(e.l,n,a+1),Yt(e.r,n,a+1)):n[e.s]=a},An=function(e){for(var n=e.length;n&&!e[--n];);for(var a=new De(++n),r=0,i=e[0],o=1,c=function(d){a[r++]=d},p=1;p<=n;++p)if(e[p]==i&&p!=n)++o;else{if(!i&&o>2){for(;o>138;o-=138)c(32754);o>2&&(c(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(c(i),--o;o>6;o-=6)c(8304);o>2&&(c(o-3<<5|8208),o=0)}for(;o--;)c(i);o=1,i=e[p]}return{c:a.subarray(0,r),n}},wt=function(e,n){for(var a=0,r=0;r<n.length;++r)a+=e[r]*n[r];return a},Mn=function(e,n,a){var r=a.length,i=Cn(n+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var o=0;o<r;++o)e[i+o+4]=a[o];return(i+4+r)*8},En=function(e,n,a,r,i,o,c,p,d,y,m){We(n,m++,a),++i[256];for(var M=Ht(i,15),E=M.t,R=M.l,j=Ht(o,15),C=j.t,O=j.l,K=An(E),Y=K.c,H=K.n,u=An(C),I=u.c,P=u.n,U=new De(19),g=0;g<Y.length;++g)++U[Y[g]&31];for(var g=0;g<I.length;++g)++U[I[g]&31];for(var S=Ht(U,7),v=S.t,pe=S.l,$=19;$>4&&!v[wn[$-1]];--$);var te=y+5<<3,J=wt(i,tt)+wt(o,kt)+c,D=wt(i,E)+wt(o,C)+c+14+3*$+wt(U,v)+2*U[16]+3*U[17]+7*U[18];if(d>=0&&te<=J&&te<=D)return Mn(n,m,e.subarray(d,d+y));var se,Z,ce,ge;if(We(n,m,1+(D<J)),m+=2,D<J){se=At(E,R,0),Z=E,ce=At(C,O,0),ge=C;var we=At(v,pe,0);We(n,m,H-257),We(n,m+5,P-1),We(n,m+10,$-4),m+=14;for(var g=0;g<$;++g)We(n,m+3*g,v[wn[g]]);m+=3*$;for(var de=[Y,I],Le=0;Le<2;++Le)for(var fe=de[Le],g=0;g<fe.length;++g){var re=fe[g]&31;We(n,m,we[re]),m+=v[re],re>15&&(We(n,m,fe[g]>>5&127),m+=fe[g]>>12)}}else se=Da,Z=tt,ce=La,ge=kt;for(var g=0;g<p;++g){var ee=r[g];if(ee>255){var re=ee>>18&31;yt(n,m,se[re+257]),m+=Z[re+257],re>7&&(We(n,m,ee>>23&31),m+=Xt[re]);var Ne=ee&31;yt(n,m,ce[Ne]),m+=ge[Ne],Ne>3&&(yt(n,m,ee>>5&8191),m+=Kt[Ne])}else yt(n,m,se[ee]),m+=Z[ee]}return yt(n,m,se[256]),m+Z[256]},Na=new qt([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),kn=new xe(0),Pa=function(e,n,a,r,i,o){var c=o.z||e.length,p=new xe(r+c+5*(1+Math.ceil(c/7e3))+i),d=p.subarray(r,p.length-i),y=o.l,m=(o.r||0)&7;if(n){m&&(d[0]=o.r>>3);for(var M=Na[n-1],E=M>>13,R=M&8191,j=(1<<a)-1,C=o.p||new De(32768),O=o.h||new De(j+1),K=Math.ceil(a/3),Y=2*K,H=function(L){return(e[L]^e[L+1]<<K^e[L+2]<<Y)&j},u=new qt(25e3),I=new De(288),P=new De(32),U=0,g=0,S=o.i||0,v=0,pe=o.w||0,$=0;S+2<c;++S){var te=H(S),J=S&32767,D=O[te];if(C[J]=D,O[te]=J,pe<=S){var se=c-S;if((U>7e3||v>24576)&&(se>423||!y)){m=En(e,d,0,u,I,P,g,v,$,S-$,m),v=U=g=0,$=S;for(var Z=0;Z<286;++Z)I[Z]=0;for(var Z=0;Z<30;++Z)P[Z]=0}var ce=2,ge=0,we=R,de=J-D&32767;if(se>2&&te==H(S-de))for(var Le=Math.min(E,se)-1,fe=Math.min(32767,S),re=Math.min(258,se);de<=fe&&--we&&J!=D;){if(e[S+ce]==e[S+ce-de]){for(var ee=0;ee<re&&e[S+ee]==e[S+ee-de];++ee);if(ee>ce){if(ce=ee,ge=de,ee>Le)break;for(var Ne=Math.min(de,ee-2),$e=0,Z=0;Z<Ne;++Z){var Ye=S-de+Z&32767,nt=C[Ye],Be=Ye-nt&32767;Be>$e&&($e=Be,D=Ye)}}}J=D,D=C[J],de+=J-D&32767}if(ge){u[v++]=268435456|Vt[ce]<<18|Tn[ge];var Qe=Vt[ce]&31,qe=Tn[ge]&31;g+=Xt[Qe]+Kt[qe],++I[257+Qe],++P[qe],pe=S+ce,++U}else u[v++]=e[S],++I[e[S]]}}for(S=Math.max(S,pe);S<c;++S)u[v++]=e[S],++I[e[S]];m=En(e,d,y,u,I,P,g,v,$,S-$,m),y||(o.r=m&7|d[m/8|0]<<3,m-=7,o.h=O,o.p=C,o.i=S,o.w=pe)}else{for(var S=o.w||0;S<c+y;S+=65535){var A=S+65535;A>=c&&(d[m/8|0]=y,A=c),m=Mn(d,m+1,e.subarray(S,A))}o.i=c}return On(p,0,r+Cn(m)+i)},wr=function(){for(var e=new Int32Array(256),n=0;n<256;++n){for(var a=n,r=9;--r;)a=(a&1&&-306674912)^a>>>1;e[n]=a}return e}(),Tr=function(){var e=-1;return{p:function(n){for(var a=e,r=0;r<n.length;++r)a=wr[a&255^n[r]]^a>>>8;e=a},d:function(){return~e}}},Fa=function(e,n,a,r,i){if(!i&&(i={l:1},n.dictionary)){var o=n.dictionary.subarray(-32768),c=new xe(o.length+e.length);c.set(o),c.set(e,o.length),e=c,i.w=o.length}return Pa(e,n.level==null?6:n.level,n.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+n.mem,a,r,i)},Dn=function(e,n){var a={};for(var r in e)a[r]=e[r];for(var r in n)a[r]=n[r];return a},_a=function(e,n,a){for(var r=e(),i=e.toString(),o=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/\s+/g,"").split(","),c=0;c<r.length;++c){var p=r[c],d=o[c];if(typeof p=="function"){n+=";"+d+"=";var y=p.toString();if(p.prototype)if(y.indexOf("[native code]")!=-1){var m=y.indexOf(" ",8)+1;n+=y.slice(m,y.indexOf("(",m))}else{n+=y;for(var M in p.prototype)n+=";"+d+".prototype."+M+"="+p.prototype[M].toString()}else n+=y}else a[d]=p}return n},Bt=[],Ar=function(e){var n=[];for(var a in e)e[a].buffer&&n.push((e[a]=new e[a].constructor(e[a])).buffer);return n},Er=function(e,n,a,r){if(!Bt[a]){for(var i="",o={},c=e.length-1,p=0;p<c;++p)i=_a(e[p],i,o);Bt[a]={c:_a(e[c],i,o),e:o}}var d=Dn({},Bt[a].e);return vr(Bt[a].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+n.toString()+"}",a,d,Ar(d),r)},br=function(){return[xe,De,qt,Xt,Kt,wn,Vt,Tn,Da,tt,La,kt,Wt,Na,kn,At,We,yt,Ht,Yt,An,wt,Mn,En,Cn,On,Pa,Fa,Ln,za]},za=function(e){return postMessage(e,[e.buffer])},xr=function(e,n,a,r,i,o){var c=Er(a,r,i,function(p,d){c.terminate(),o(p,d)});return c.postMessage([e,n],n.consume?[e.buffer]:[]),function(){c.terminate()}},Ee=function(e,n,a){for(;a;++n)e[n]=a,a>>>=8};function Sr(e,n,a){return a||(a=n,n={}),typeof a!="function"&&Et(7),xr(e,n,[br],function(r){return za(Ln(r.data[0],r.data[1]))},0,a)}function Ln(e,n){return Fa(e,n||{},0,0)}var Ua=function(e,n,a,r){for(var i in e){var o=e[i],c=n+i,p=r;Array.isArray(o)&&(p=Dn(r,o[1]),o=o[0]),o instanceof xe?a[c]=[o,p]:(a[c+="/"]=[new xe(0),p],Ua(o,c,a,r))}},ya=typeof TextEncoder<"u"&&new TextEncoder,Ir=typeof TextDecoder<"u"&&new TextDecoder,Rr=0;try{Ir.decode(kn,{stream:!0}),Rr=1}catch{}function wa(e,n){var a;if(ya)return ya.encode(e);for(var r=e.length,i=new xe(e.length+(e.length>>1)),o=0,c=function(y){i[o++]=y},a=0;a<r;++a){if(o+5>i.length){var p=new xe(o+8+(r-a<<1));p.set(i),i=p}var d=e.charCodeAt(a);d<128||n?c(d):d<2048?(c(192|d>>6),c(128|d&63)):d>55295&&d<57344?(d=65536+(d&1047552)|e.charCodeAt(++a)&1023,c(240|d>>18),c(128|d>>12&63),c(128|d>>6&63),c(128|d&63)):(c(224|d>>12),c(128|d>>6&63),c(128|d&63))}return On(i,0,o)}var bn=function(e){var n=0;if(e)for(var a in e){var r=e[a].length;r>65535&&Et(9),n+=r+4}return n},Ta=function(e,n,a,r,i,o,c,p){var d=r.length,y=a.extra,m=p&&p.length,M=bn(y);Ee(e,n,c!=null?33639248:67324752),n+=4,c!=null&&(e[n++]=20,e[n++]=a.os),e[n]=20,n+=2,e[n++]=a.flag<<1|(o<0&&8),e[n++]=i&&8,e[n++]=a.compression&255,e[n++]=a.compression>>8;var E=new Date(a.mtime==null?Date.now():a.mtime),R=E.getFullYear()-1980;if((R<0||R>119)&&Et(10),Ee(e,n,R<<25|E.getMonth()+1<<21|E.getDate()<<16|E.getHours()<<11|E.getMinutes()<<5|E.getSeconds()>>1),n+=4,o!=-1&&(Ee(e,n,a.crc),Ee(e,n+4,o<0?-o-2:o),Ee(e,n+8,a.size)),Ee(e,n+12,d),Ee(e,n+14,M),n+=16,c!=null&&(Ee(e,n,m),Ee(e,n+6,a.attrs),Ee(e,n+10,c),n+=14),e.set(r,n),n+=d,M)for(var j in y){var C=y[j],O=C.length;Ee(e,n,+j),Ee(e,n+2,O),e.set(C,n+4),n+=4+O}return m&&(e.set(p,n),n+=m),n},Cr=function(e,n,a,r,i){Ee(e,n,101010256),Ee(e,n+8,a),Ee(e,n+10,a),Ee(e,n+12,r),Ee(e,n+16,i)};function Or(e,n,a){a||(a=n,n={}),typeof a!="function"&&Et(7);var r={};Ua(e,"",r,n);var i=Object.keys(r),o=i.length,c=0,p=0,d=o,y=new Array(o),m=[],M=function(){for(var O=0;O<m.length;++O)m[O]()},E=function(O,K){Aa(function(){a(O,K)})};Aa(function(){E=a});var R=function(){var O=new xe(p+22),K=c,Y=p-c;p=0;for(var H=0;H<d;++H){var u=y[H];try{var I=u.c.length;Ta(O,p,u,u.f,u.u,I);var P=30+u.f.length+bn(u.extra),U=p+P;O.set(u.c,U),Ta(O,c,u,u.f,u.u,I,p,u.m),c+=16+P+(u.m?u.m.length:0),p=U+I}catch(g){return E(g,null)}}Cr(O,c,y.length,Y,K),E(null,O)};o||R();for(var j=function(O){var K=i[O],Y=r[K],H=Y[0],u=Y[1],I=Tr(),P=H.length;I.p(H);var U=wa(K),g=U.length,S=u.comment,v=S&&wa(S),pe=v&&v.length,$=bn(u.extra),te=u.level==0?0:8,J=function(D,se){if(D)M(),E(D,null);else{var Z=se.length;y[O]=Dn(u,{size:P,crc:I.d(),c:se,f:U,m:v,u:g!=K.length||v&&S.length!=pe,compression:te}),c+=30+g+$+Z,p+=76+2*(g+$)+(pe||0)+Z,--o||R()}};if(g>65535&&J(Et(11,0,1),null),!te)J(null,H);else if(P<16e4)try{J(null,Ln(H,u))}catch(D){J(D,null)}else m.push(Sr(H,u,J))},C=0;C<d;++C)j(C);return M}var Aa=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(e){e()};const Mr={class:"flex flex-col items-center justify-center h-full p-6"},kr={class:"text-lg font-semibold self-start mb-5"},Dr={class:"flex flex-row gap-x-2 mt-2.5 pt-2.5 justify-end"},Lr=xn({__name:"RenameFile",props:{title:{}},emits:["rename","cancel"],setup(e,{emit:n}){const a=e,r=n,{t:i}=Ea(),o=F(),c=F(!0),p=jt({title:a.title});function d(M){c.value=!1,r("rename",M)}const y={title:[{required:!0,message:i("labels.titleRequired")}]};function m(){c.value=!1,r("cancel")}return no("Escape",m),ba(()=>{o.value.select(),o.value.focus()}),(M,E)=>{const R=xa,j=oo,C=Sn,O=ao,K=rr;return z(),ne(K,{visible:s(c),"onUpdate:visible":E[2]||(E[2]=Y=>lt(c)?c.value=Y:null),class:"nc-attachment-rename-modal",size:"small"},{default:W(()=>[he("div",Mr,[he("div",kr,be(M.$t("title.renameFile")),1),ie(O,{class:"w-full h-full","no-style":"",model:s(p),onFinish:E[1]||(E[1]=Y=>d(s(p).title))},{default:W(()=>[ie(j,{class:"w-full !mb-0",name:"title",rules:y.title},{default:W(()=>[ie(R,{ref_key:"inputEl",ref:o,value:s(p).title,"onUpdate:value":E[0]||(E[0]=Y=>s(p).title=Y),class:"w-full nc-input-sm nc-input-shadow",placeholder:M.$t("general.rename")},null,8,["value","placeholder"])]),_:1},8,["rules"]),he("div",Dr,[ie(C,{key:"back","html-type":"back",size:"small",type:"secondary"},{default:W(()=>[Ue(be(M.$t("general.cancel")),1)]),_:1}),ie(C,{key:"submit","html-type":"submit",size:"small",type:"primary"},{default:W(()=>[Ue(be(M.$t("general.confirm")),1)]),_:1})])]),_:1},8,["model"])])]),_:1},8,["visible"])}}}),Nr=Object.assign(Lr,{__name:"CellAttachmentRenameFile"}),[Pr,Fr]=lr(e=>{const{$api:n}=ro(),{isUIAllowed:a}=lo(),r=n.instance.defaults.baseURL,{isSharedForm:i}=ir(),{row:o}=Oa(),{fetchSharedViewAttachment:c}=io(),{showStoragePlanLimitExceededModal:p,maxAttachmentsAllowedInCell:d,showUpgradeToAddMoreAttachmentsInCell:y}=so(),{batchUploadFiles:m}=In(),M=ae(co,F(!1)),{t:E}=Ea(),R=ae(uo,F(!1)),j=ae(fo,F(!1)),C=ae(Sa,F()),O=ae(mo,F()),K=ae(po,F(!1)),Y=Mt(()=>!R.value&&!M.value&&a("dataEdit")||i.value),H=F([]),u=F([]),I=F(!1),P=F(!1),U=F(),g=F(null),S=F(!1),{base:v}=ho(vo()),{api:pe,isLoading:$}=go(),{files:te,open:J}=_o({reset:!0}),D=F(!1),{appInfo:se}=Ia(),Z={...se.value.ee&&{maxNumberOfAttachments:d.value,maxAttachmentSize:Math.max(1,+se.value.ncAttachmentFieldSize||20)||20,supportedAttachmentMimeTypes:["*"]}},ce=async()=>{g.value||(g.value=await navigator.mediaDevices.getUserMedia({video:!0})),S.value=!0},ge=()=>{var A;(A=g.value)==null||A.getTracks().forEach(L=>L.stop()),g.value=null},we=Mt(()=>R.value&&j.value?H.value:u.value),de=F(Array.from({length:we.value.length},()=>!1));function Le(A){R.value?(H.value.splice(A,1),u.value.splice(A,1),de.value.splice(A,1),e(H.value)):(u.value.splice(A,1),de.value.splice(A,1),e(u.value))}async function fe(A,L){var G,q,je,x;if(!A.length&&!(L!=null&&L.length)||p())return;const B={...Z,...yo((G=O==null?void 0:O.value)==null?void 0:G.meta)},N=[],V=[],k=[];for(const l of A.length?A:L||[]){if(se.value.ee){if(y({totalAttachments:we.value.length+(A.length||(L==null?void 0:L.length)||0)}))return;if(l!=null&&l.size&&l.size>B.maxAttachmentSize){Re.error(`The size of ${(l==null?void 0:l.name)||(l==null?void 0:l.fileName)} exceeds the maximum file size ${tr(B.maxAttachmentSize)}.`);continue}if(!B.supportedAttachmentMimeTypes.includes("*")&&!B.supportedAttachmentMimeTypes.includes(l.type||l.mimetype)&&!B.supportedAttachmentMimeTypes.includes((q=(l==null?void 0:l.type)||l.mimetype)==null?void 0:q.split("/")[0])){Re.error(`${(l==null?void 0:l.name)||(l==null?void 0:l.fileName)} has the mime type ${(l==null?void 0:l.type)||(l==null?void 0:l.mimetype)} which is not allowed in this column.`);continue}}if(A.length)V.push(l);else{const _=la(l.fileName??"",[...u.value,...k].map(w=>(w==null?void 0:w.title)||(w==null?void 0:w.fileName)),(l==null?void 0:l.type)||(l==null?void 0:l.mimetype)||"");k.push({...l,fileName:_,title:_})}}if(V.length&&R.value&&j.value){const l=await Promise.all(Array.from(V).map(_=>new Promise(w=>{const ue={..._,file:_,title:_.name,mimetype:_.type};if(Rn(_.name,_.mimetype??_.type)){const Ce=new FileReader;Ce.onload=Pe=>{var h;ue.data=(h=Pe.target)==null?void 0:h.result,w(ue)},Ce.onerror=()=>{w(ue)},Ce.readAsDataURL(_)}else w(ue)})));return u.value=[...u.value,...l],e(u.value)}else if(R.value&&j.value)return u.value=[...u.value,...k],e(u.value);if(V.length)try{const l=await m(V,[ia,v.value.id,(je=C.value)==null?void 0:je.id,(x=O.value)==null?void 0:x.id].join("/"));for(const _ of l)N.push({..._,title:la(_==null?void 0:_.title,[...u.value,...N].map(w=>(w==null?void 0:w.title)||(w==null?void 0:w.fileName)),_==null?void 0:_.mimetype)})}catch(l){Re.error(await wo(l)||E("msg.error.internalError"))}else if(k.length){const l=await re(k);if(!l)return;N.push(...l)}N!=null&&N.length&&e([...u.value,...N])}async function re(A,L=!1){var N,V;const B=Array.isArray(A)?A:[A];try{return await pe.storage.uploadByUrl({path:[ia,v.value.id,(N=C.value)==null?void 0:N.id,(V=O.value)==null?void 0:V.id].join("/")},B)}catch(k){return console.log(k),L?"File couldn't be uploaded. Verify URL & try again.":(Re.error("File couldn't be uploaded. Verify URL & try again."),null)}}function ee(A,L){u.value[A].title=L,e(u.value)}async function Ne(A,L,B){return new Promise(N=>{D.value=!0;const{close:V}=To(Nr,{title:A.title,onRename:k=>{ee(L,k),V(),B&&(U.value={...A}),D.value=!1,N(!0)},onCancel:()=>{V(),D.value=!1,N(!0)}})})}async function $e(A,L,B){ee(A,L),B&&(U.value={...u.value[A]}),D.value=!1}async function Ye(A,L){var B,N,V;if(!M.value)if(A)await fe(A);else{L.preventDefault();const k=hr.sanitize(((B=L.dataTransfer)==null?void 0:B.getData("text/html"))??"")??"",G=nr(k)??"";if(!G){Re.error(E("msg.error.draggedContentIsNotTypeOfImage"));return}const q=await Qe(G);q!=null&&q.mimetype?await fe([],[{...q,url:G,fileName:`image.${(N=q==null?void 0:q.mimetype)==null?void 0:N.split("/")[1]}`,title:`image.${(V=q==null?void 0:q.mimetype)==null?void 0:V.split("/")[1]}`}]):Re.error(E("msg.error.fieldToParseImageData"))}}async function nt(){const A=de.value.map((G,q)=>G?we.value[q]:void 0).filter(Boolean);if(A.length===0)return;if(A.length===1)return Be(A[0]);if(!C.value||!O.value)return;const L=C.value.id,B=O.value.id,N=pa(s(o).row,C.value.columns);(!L||!B||!N)&&(console.error("Missing modelId, columnId or rowId"),Re.error("Failed to download file"));const V=[];for(const G of A){const q=G.url||G.path;if(!q){console.error("Missing src"),Re.error("Failed to download file");continue}const x=await(R.value?()=>c(B,N,q):()=>n.dbDataTableRow.attachmentDownload(L,B,N,{urlOrPath:q}))();if(!x){console.error("Invalid response"),Re.error("Failed to download file");continue}let l;if(x.path)l=await fetch(`${r}/${x.path}`);else if(x.url)l=await fetch(`${x.url}`);else{console.error("Invalid blob response"),Re.error("Failed to download file");continue}const _=await l.arrayBuffer(),w=G.title||q.split("/").pop()||"file";V.push({name:w,data:new Uint8Array(_)})}if(V.length===0){Re.error("No files to download");return}const k={};V.forEach(({name:G,data:q})=>{k[G]=q});try{const G=await new Promise((x,l)=>{Or(k,(_,w)=>{_?l(_):x(w)})}),q=new Blob([G],{type:"application/zip"}),je=URL.createObjectURL(q);try{window.open(je,"_self")}catch(x){console.error("Error opening blob window",x),Re.error("Failed to download file");return}finally{setTimeout(()=>URL.revokeObjectURL(je),1e3)}}catch(G){console.error("Error creating zip file",G),Re.error("Failed to create zip file")}}async function Be(A){if(!C.value||!O.value)return;const L=C.value.id,B=O.value.id,N=pa(s(o).row,C.value.columns),V=A.url||A.path;L&&B&&N&&V?await(R.value?()=>c(B,N,V):()=>n.dbDataTableRow.attachmentDownload(L,B,N,{urlOrPath:V}))().then(G=>{G!=null&&G.path?window.open(`${r}/${G.path}`,"_self"):G!=null&&G.url?window.open(G.url,"_self"):Re.error("Failed to download file")}):Re.error("Failed to download file")}async function Qe(A){var L;try{const B=await fetch(A);if(B.ok){if((L=B.headers.get("content-type"))!=null&&L.startsWith("image/"))return{mimetype:B.headers.get("content-type")||void 0,size:+(B.headers.get("content-length")||0)||void 0};if(A.slice(A.lastIndexOf(".")+1).toLowerCase().length)return{mimetype:`image/${A.slice(A.lastIndexOf(".")+1).toLowerCase()}`,size:+(B.headers.get("content-length")||0)||void 0}}}catch(B){console.log(B)}}const qe=A=>{switch(A){case"mdi-pdf-box":return So;case"mdi-file-word-outline":return xo;case"mdi-file-powerpoint-box":return bo;case"mdi-file-excel-outline":return Eo;default:return Ao}};return Ot(te,A=>A&&fe(A)),{attachments:u,visibleItems:we,isPublic:R,isForm:j,isReadonly:M,meta:C,column:O,editEnabled:K,isLoading:$,api:pe,open:()=>J(),onDrop:Ye,modalRendered:I,modalVisible:P,FileIcon:qe,removeFile:Le,renameFile:Ne,renameFileInline:$e,downloadAttachment:Be,updateModelValue:e,selectedFile:U,uploadViaUrl:re,selectedVisibleItems:de,storedFiles:H,bulkDownloadAttachments:nt,defaultAttachmentMeta:Z,startCamera:ce,stopCamera:ge,videoStream:g,permissionGranted:S,isRenameModalOpen:D,updateAttachmentTitle:ee,isEditAllowed:Y}},"useAttachmentCell"),zr=bt(()=>xt(()=>import("./DOFFjK0_.js").then(e=>e.oO),__vite__mapDeps([0,1]),import.meta.url).then(e=>e.default||e)),Ur={class:"nc-attachment-item group gap-1 flex border-1 rounded-md border-gray-200 flex-col relative"},$r=["title"],Br=xn({__name:"Card",props:{attachment:{},index:{},selected:{type:Boolean,default:!1},dragging:{type:Boolean,default:!1},allowRename:{type:Boolean,default:!1},allowDelete:{type:Boolean,default:!0},allowSelection:{type:Boolean,default:!1},previewClassOverride:{},renameInline:{type:Boolean,default:!0},confirmToDelete:{type:Boolean,default:!1}},emits:["clicked","update:selected","update:dragging","onDelete"],setup(e,{emit:n}){const a=e,r=n,i=sa(a,"selected",r),o=sa(a,"dragging",r),{getPossibleAttachmentSrc:c}=In(),{FileIcon:p,downloadAttachment:d,renameFileInline:y,renameFile:m,removeFile:M,isEditAllowed:E}=Fr(),R=F(!1),j=F(""),C=F(),O=()=>{if(!a.renameInline){m(a.attachment,a.index);return}R.value=!0,j.value=a.attachment.title,Ro(()=>{setTimeout(()=>{C.value.focus(),C.value.select()},100)})},K=()=>{j.value="",R.value=!1},Y=async()=>{if(R.value&&j.value)try{await y(a.index,j.value),K()}catch(u){throw Re.error("Error while renaming file"),u}},H=()=>{if(!a.confirmToDelete){M(a.index);return}r("onDelete")};return(u,I)=>{const P=Io,U=zr,g=Ra,S=Ca,v=xa,pe=Sn;return z(),Fe("div",Ur,[u.allowSelection?(z(),ne(P,{key:0,checked:s(i),"onUpdate:checked":I[0]||(I[0]=$=>lt(i)?i.value=$:null),class:ze(["nc-attachment-checkbox absolute top-2 left-2 group-hover:opacity-100 opacity-0 z-50",{"!opacity-100":s(i)}])},null,8,["checked","class"])):ke("",!0),he("div",{class:ze([{"cursor-move":s(o),"cursor-pointer":!s(o)},"nc-attachment h-full flex justify-center items-center overflow-hidden"]),onClick:I[1]||(I[1]=st($=>r("clicked"),["stop"]))},[("isImage"in u?u.isImage:s(Rn))(u.attachment.title,u.attachment.mimetype)?(z(),ne(U,{key:0,srcs:s(c)(u.attachment,"card_cover"),"object-fit":"contain",class:ze(["!w-full !m-0 rounded-t-[5px] justify-center",u.previewClassOverride?`${u.previewClassOverride}`:""])},null,8,["srcs","class"])):("isAudio"in u?u.isAudio:s(ar))(u.attachment.title,u.attachment.mimetype)?(z(),ne(g,{key:1,class:"text-white",icon:"ncFileTypeAudio",height:45,width:45})):("isVideo"in u?u.isVideo:s(or))(u.attachment.title,u.attachment.mimetype)?(z(),ne(g,{key:2,class:"text-white",icon:"ncFileTypeVideo",height:45,width:45})):u.attachment.icon?(z(),ne(it(s(p)(u.attachment.icon)),{key:3,height:45,width:45,class:"text-white"})):(z(),ne(g,{key:4,icon:"ncFileTypeUnknown",height:45,width:45,class:"text-white"}))],2),he("div",{class:"relative px-1 pb-1 items-center flex",title:u.attachment.title},[he("div",{class:ze(["flex w-full text-[12px] items-center text-gray-700 cursor-default h-5",{truncate:!s(R)}]),onDblclick:I[3]||(I[3]=st($=>u.allowRename&&s(E)&&O(),["stop"]))},[s(R)?(z(),ne(v,{key:1,ref_key:"inputBox",ref:C,value:s(j),"onUpdate:value":I[2]||(I[2]=$=>lt(j)?j.value=$:null),class:"!text-[12px] !h-5 !p-0 !px-0.5 !mr-1 !bg-transparent !rounded-md",type:"text",onKeydown:[Gt(Y,["enter"]),Gt(st(K,["stop"]),["escape"])],onBlur:st(K,["stop"])},null,8,["value","onKeydown"])):(z(),ne(S,{key:0,class:"truncate h-5 flex items-center","show-on-truncate-only":""},{title:W(()=>[Ue(be(u.attachment.title),1)]),default:W(()=>[Ue(be(u.attachment.title)+" ",1)]),_:1}))],34),he("div",{class:ze(["flex-none hide-ui transition-all transition-ease-in-out !h-5 gap-0.5 flex items-center bg-white",{"!h-auto !w-auto !overflow-visible !whitespace-normal":s(R)}])},[ie(S,{placement:"bottom"},{title:W(()=>[Ue(be(u.$t("title.downloadFile")),1)]),default:W(()=>[ie(pe,{class:"!p-0 !w-5 !h-5 !text-gray-500 !min-w-[fit-content]",size:"xsmall",type:"text",onClick:I[4]||(I[4]=$=>s(d)(u.attachment))},{default:W(()=>[(z(),ne(it(("iconMap"in u?u.iconMap:s(Tt)).download),{class:"!text-xs h-13px w-13px"}))]),_:1})]),_:1}),u.allowRename&&s(E)?(z(),ne(S,{key:0,placement:"bottom"},{title:W(()=>[Ue(be(u.$t("title.renameFile")),1)]),default:W(()=>[ie(pe,{size:"xsmall",class:"!p-0 nc-attachment-rename !h-5 !w-5 !text-gray-500 !min-w-[fit-content] gap-2",type:"text",onClick:O},{default:W(()=>[(z(),ne(it(("iconMap"in u?u.iconMap:s(Tt)).rename),{class:"text-xs h-13px w-13px"}))]),_:1})]),_:1})):ke("",!0),u.allowDelete&&s(E)?(z(),ne(S,{key:1,placement:"bottom"},{title:W(()=>[Ue(be(u.$t("title.removeFile")),1)]),default:W(()=>[ie(pe,{class:"!p-0 !h-5 !w-5 !text-red-500 nc-attachment-remove !min-w-[fit-content]",size:"xsmall",type:"text",onClick:H},{default:W(()=>[(z(),ne(it(("iconMap"in u?u.iconMap:s(Tt)).delete),{class:"text-xs h-13px w-13px"}))]),_:1})]),_:1})):ke("",!0)],2)],8,$r)])}}}),jr=Object.assign(Br,{__name:"CellAttachmentCard"}),Hr={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Gr(e,n){return z(),Fe("svg",Hr,n[0]||(n[0]=[he("path",{fill:"currentColor",d:"M19 19H8q-.825 0-1.412-.587T6 17V3q0-.825.588-1.412T8 1h7l6 6v10q0 .825-.587 1.413T19 19M14 8V3H8v14h11V8zM4 23q-.825 0-1.412-.587T2 21V7h2v14h11v2zM8 3v5zv14z"},null,-1)]))}const Vr=Co({name:"material-symbols-file-copy-outline",render:Gr});function Wr(e,n,a,r=!1){const i=F(!1);function o(y){y.stopImmediatePropagation(),y.preventDefault(),i.value=!0}async function c(y){y.stopImmediatePropagation(),y.preventDefault(),i.value=!1;const m=s(n);if(m.length<2)return;const{newIndex:M=0,oldIndex:E=0}=y;M!==E&&(m.splice(M,0,...m.splice(E,1)),a(m))}let p;const d=y=>{p=new fr(y,{handle:".nc-attachment",ghostClass:"ghost",animation:70,onStart:o,onEnd:c,revertOnSpill:!0})};return Oo(y=>{const m=s(e);y(()=>{m&&(p!=null&&p.el)&&p.destroy()}),m&&!s(r)&&d(m)}),{dragging:i,initSortable:d}}const Yr=bt(()=>xt(()=>import("./DQNBqaOg.js"),__vite__mapDeps([2,0,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]),import.meta.url).then(e=>e.default||e)),qr=bt(()=>xt(()=>import("./DiUleKVo.js"),__vite__mapDeps([3,0,1,4,5,6]),import.meta.url).then(e=>e.default||e)),Xr=bt(()=>xt(()=>import("./DOFFjK0_.js").then(e=>e.oO),__vite__mapDeps([0,1]),import.meta.url).then(e=>e.default||e)),Kr=bt(()=>xt(()=>import("./DxYugzsH.js"),__vite__mapDeps([21,0,1,16,11,22,23,9,4,5,10,12,13,14,7,8,15,17,18,19,24]),import.meta.url).then(e=>e.default||e)),Zr=bt(()=>xt(()=>import("./BYPw9ET5.js"),__vite__mapDeps([25,0,1,26,27,28,29,9,4,5,11,16,10,12,13,14,7,8,15,17,18,19,30]),import.meta.url).then(e=>e.default||e)),Jr={key:0,class:"form-attachment-cell"},Qr={key:2,class:"mb-2"},el={class:"flex"},tl={class:"flex items-center gap-1.5 justify-center"},nl={class:"flex flex-row items-center py-2.25 px-2.5 bg-gray-50 rounded-lg text-gray-700 mb-4"},al={class:"capitalize text-ellipsis overflow-hidden select-none w-full pl-1.75",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},ol=["data-row-height"],rl={"data-rec":"true"},ll={class:"flex items-center gap-1 justify-center"},il={class:"text-[11px]"},sl={class:"text-center w-full"},cl=["onClick"],ul=xn({__name:"index",props:{modelValue:{},rowIndex:{}},emits:["update:modelValue"],setup(e,{expose:n,emit:a}){const r=a,i=ae(Mo,F()),o=F(),c=F(),p=ae(ko,i.value),d=ae(Do,F(!1)),y=ae(Lo,F(!1)),m=ae(No,F(!1)),M=ae(Po,F(!1)),E=ae(Fo,F(!1)),R=ae(zo,F(!0)),j=ae(Uo,F(!1)),C=ae($o,F(!1)),O=ae(Bo,jt({})),K=ae(jo,!1),Y=ae(Go,jt(Ho)),H=ae(Vo,null),u=ae(Wo,null),{isMobileMode:I}=Ia(),{getPossibleAttachmentSrc:P}=In(),{isPublic:U,isForm:g,column:S,modalRendered:v,downloadAttachment:pe,renameFile:$,modalVisible:te,attachments:J,visibleItems:D,onDrop:se,isLoading:Z,selectedFile:ce,isReadonly:ge,storedFiles:we,removeFile:de,updateAttachmentTitle:Le,isEditAllowed:fe}=Pr(B),{dragging:re}=Wr(c,D,B,ge),ee=F(!1),{width:Ne}=Yo(c),$e=Mt(()=>Math.min(D.value.length,Math.floor((Ne.value+8)/132)*2)),Ye=Mt(()=>ee.value?D.value:D.value.slice(0,$e.value)),nt=ae(ca,F(!1)),{state:Be,row:Qe}=Oa(),qe=ae(Sa,F());!U.value&&!g.value&&qe.value&&cr(qe,Qe);const A=function(...h){s(re)||se.apply(this,h)},{isOverDropZone:L}=qo(p,A);Ot(()=>e.modelValue,async h=>{if(h)try{const Q=((typeof h=="string"?JSON.parse(h):h)||[]).filter(Boolean);U.value&&g.value?we.value=Q:J.value=Q}catch(Q){console.error(Q),U.value&&g.value?we.value=[]:J.value=[]}else U.value&&g.value?we.value=[]:J.value=[]},{immediate:!0});function B(h){r("update:modelValue",h)}ua("Escape",()=>{te.value=!1,L.value=!1}),Ot(()=>we.value.length||0,()=>{Be.value[S.value.title]=we.value});const N=F(!1);Ot(N,(h,Q)=>{Q&&!h&&(H==null||H.trigger())}),Ot(ce,(h,Q)=>{Q&&!h&&(H==null||H.trigger())});const V=h=>{h==null||h.stopPropagation(),N.value=!0};ua("Enter",()=>{!C.value&&K&&!m.value&&E.value&&(J.value.length?(v.value=!0,te.value=!0):fe.value&&(N.value=!0))}),mr(ae(ca,F(!1)),h=>{if(!K&&!te.value&&h.key==="Enter"&&!ge.value&&!ce.value){if(N.value)return;h.stopPropagation(),!I.value&&D.value.length?(v.value=!0,te.value=!0):V(h)}});const k=ae(Xo,F()),G=()=>{I.value||(v.value=!0,te.value=!0)},q=h=>{I.value&&!m.value||!I.value&&(d.value||y.value)&&!m.value||(ce.value=h)},je=h=>{M.value||(V(h),h.stopPropagation())},x=h=>{M.value&&(V(h),h.stopPropagation())},l=F(!1),_=jt({title:"",i:0});function w(h,Q){l.value=!0,_.i=Q,_.title=h}const ue=h=>{de(h),l.value=!1,_.i=0,_.title=""},Ce=Mt(()=>{if(g.value||m.value)return"small";switch(k.value){case 1:return"tiny";case 2:return"tiny";case 4:return"small";case 6:return"small";default:return"tiny"}});n({openFilePicker:V,downloadAttachment:pe,renameAttachment:$,removeAttachment:w,updateAttachmentTitle:Le,isEditAllowed:fe});const Pe=h=>{if(!(!(h instanceof KeyboardEvent)||!h.target||Qo(h)||!D.value.length)&&er(h))return te.value?(v.value=!1,te.value=!1):G(),!0};return ba(()=>{u==null||u.on(Pe),!C.value&&K&&!m.value&&E.value&&!j.value&&Ko(()=>{if(Pe(O.event))return;const h=[".view-attachments",".add-files",".nc-attachment",".empty-add-files"].map(He=>`.nc-canvas-table-editable-cell-wrapper ${He}`).join(", "),Q=Zo(h,Y);Q?Q.click():J.value.length?(v.value=!0,te.value=!0):fe.value&&(N.value=!0)})}),Jo(()=>{u==null||u.off(Pe)}),(h,Q)=>{const He=Yr,Zt=jr,at=Sn,ct=Ra,Ge=Ca,ot=qr,Jt=Vr,Qt=sr,en=Xr,tn=ur,ut=Kr,Te=Zr;return z(),Fe($t,null,[s(m)||s(g)?(z(),Fe("div",Jr,[s(ce)?(z(),ne(He,{key:0})):ke("",!0),s(D).length>0?(z(),Fe("div",{key:1,ref_key:"sortableRef",ref:c,class:"flex flex-wrap items-stretch mb-2 gap-2"},[(z(!0),Fe($t,null,fa(s(Ye),(X,Xe)=>(z(),ne(Zt,{key:`${X==null?void 0:X.title}-${Xe}`,dragging:s(re),"onUpdate:dragging":Q[0]||(Q[0]=ft=>lt(re)?re.value=ft:null),class:"nc-attachment-item group gap-2 flex border-1 rounded-md border-gray-200 flex-col relative w-[124px] overflow-hidden",attachment:X,index:Xe,"allow-selection":!1,"allow-rename":s(fe),"allow-delete":!s(ge),"preview-class-override":"!h-20","rename-inline":!1,"confirm-to-delete":!0,onClicked:ft=>q(X),onOnDelete:ft=>w(X.title,Xe)},null,8,["dragging","attachment","index","allow-rename","allow-delete","onClicked","onOnDelete"]))),128))],512)):ke("",!0),s(D).length>s($e)?(z(),Fe("div",Qr,[ie(at,{type:"text",size:"small",onClick:Q[1]||(Q[1]=X=>ee.value=!s(ee))},{default:W(()=>[Ue(be(s(ee)?`${h.$t("general.showLess")}`:`+ ${s(D).length-s($e)} ${h.$t("general.more").toLowerCase()}`),1)]),_:1})])):ke("",!0),he("div",el,[ie(Ge,{disabled:s(fe)||!s(R),title:h.$t("tooltip.sourceDataIsReadonly")},{default:W(()=>[ie(at,{"data-testid":"attachment-cell-file-picker-button",type:"secondary",size:"small",class:"mb-1",disabled:!s(fe),onClick:V},{default:W(()=>[he("div",tl,[ie(ct,{icon:"upload",class:"text-current opacity-80 h-4 w-4"}),he("span",null,be(h.$t("activity.uploadFiles")),1)])]),_:1},8,["disabled"])]),_:1},8,["disabled","title"])]),ie(ot,{visible:s(l),"onUpdate:visible":Q[2]||(Q[2]=X=>lt(l)?l.value=X:null),"entity-name":"File","on-delete":async()=>ue(s(_).i)},{"entity-preview":W(()=>[he("span",null,[he("div",nl,[ie(ct,{icon:"file",class:"nc-view-icon"}),he("div",al,be(s(_).title),1)])])]),_:1},8,["visible","on-delete"])])):(z(),Fe("div",{key:1,ref_key:"attachmentCellRef",ref:o,class:"nc-attachment-cell relative group color-transition","data-row-height":s(k)},[s(ce)?(z(),ne(He,{key:0})):ke("",!0),!s(ge)&&!s(re)&&s(p)?(z(),ne(Qt,{key:1,modelValue:s(L),"onUpdate:modelValue":Q[3]||(Q[3]=X=>lt(L)?L.value=X:null),inline:"",target:s(p),"data-rec":"true",class:"nc-attachment-cell-dropzone text-white text-lg bg-gray-600/75 flex text-sm items-center justify-center gap-2"},{default:W(()=>[ie(Jt),Ue(" "+be(h.$t("labels.dropHere")),1)]),_:1},8,["modelValue","target"])):ke("",!0),!s(ge)&&s(nt)&&!s(D).length?(z(),Fe("div",{key:2,class:ze([{"sm:mx-auto sm:px-4 xs:w-full xs:min-w-8":!s(D).length},"group cursor-pointer flex nc-upload-btn gap-1 items-center rounded border-none"]),tabindex:"0",onKeydown:[Gt(je,["enter"]),Gt(x,["space"])]},[s(Z)?(z(),ne(it(("iconMap"in h?h.iconMap:s(Tt)).reload),{key:0,class:ze({"animate-infinite animate-spin":s(Z)})},null,8,["class"])):ke("",!0),ie(Ge,{placement:"bottom",class:"w-full text-center"},{title:W(()=>[he("span",rl,be(h.$t("activity.attachmentDrop")),1)]),default:W(()=>[ie(at,{type:"secondary",size:"xs","data-testid":"attachment-cell-file-picker-button",class:"!px-2 !h-6 !min-w-[fit-content] empty-add-files",onClick:st(V,["stop"])},{default:W(()=>[he("div",ll,[ie(ct,{icon:"upload",class:"text-gray-500 text-[10px] h-3.5 w-3.5"}),he("span",il,be(h.$t("activity.addFiles")),1)])]),_:1})]),_:1})],34)):ke("",!0),s(D).length>0?(z(),Fe($t,{key:3},[he("div",{ref_key:"sortableRef",ref:c,class:ze([{"justify-center":!s(d)&&!s(y)},"nc-attachment-wrapper flex cursor-pointer w-full items-center flex-wrap gap-2 mt-0 items-start overflow-y-auto nc-scrollbar-thin"]),style:gn({height:`max(${!s(k)||s(k)===1?Number(("rowHeightInPx"in h?h.rowHeightInPx:s(ma))[1])-1:("rowHeightInPx"in h?h.rowHeightInPx:s(ma))[`${s(k)}`]-17}px, ${s(E)?22:32}px)`,paddingTop:!s(k)||s(k)===1?"4px":void 0,paddingBottom:!s(k)||s(k)===1?"4px":void 0})},[(z(!0),Fe($t,null,fa(s(D),(X,Xe)=>(z(),ne(Ge,{key:X.url||X.title,placement:"bottom",class:"nc-attachment-item"},{title:W(()=>[he("div",sl,be(X.title),1)]),default:W(()=>[he("div",{class:ze(["aspect-square",{"h-[24px]":!s(k)||s(k)===1,"h-[32px]":s(k)===2,"h-[64px]":s(k)===4||s(k)===6}])},[("isImage"in h?h.isImage:s(Rn))(X.title,X.mimetype??X.type)?(z(),ne(en,{key:0,alt:X.title||`#${Xe}`,"object-fit":"contain",class:"nc-attachment rounded-lg w-full h-full object-cover overflow-hidden",srcs:s(P)(X,s(Ce)),onClick:()=>q(X)},null,8,["alt","srcs","onClick"])):(z(),Fe("div",{key:1,class:"nc-attachment h-full w-full flex items-center justify-center",onClick:ft=>q(X)},[ie(tn,{item:X,class:"max-h-full max-w-full"},null,8,["item"])],8,cl))],2)]),_:2},1024))),128))],6),ie(Ge,{placement:"bottom",class:ze(["nc-action-icon !absolute hidden right-0 nc-text-area-expand-btn !group-hover:block z-3",{"top-0":s(E)&&!(!s(k)||s(k)===1),"top-1":!s(E)}]),style:gn(s(E)&&(!s(k)||s(k)===1)?{top:"50%",transform:"translateY(-50%)"}:void 0)},{title:W(()=>[Ue(be(s(m)?h.$t("activity.viewAttachment"):`${h.$t("activity.viewAttachment")} '${h.$t("tooltip.shiftSpace")}'`),1)]),default:W(()=>[ie(at,{type:"secondary",size:"xsmall","data-testid":"attachment-cell-file-picker-button",class:"!p-0 !w-5 !h-5 !min-w-[fit-content] view-attachments",onClick:st(G,["stop"])},{default:W(()=>[s(Z)?(z(),ne(it(("iconMap"in h?h.iconMap:s(Tt)).reload),{key:0,class:ze({"animate-infinite animate-spin":s(Z)})},null,8,["class"])):(z(),ne(it(("iconMap"in h?h.iconMap:s(Tt)).maximize),{key:1,class:"transform !group-hover:text-grey-800 text-gray-700 w-3 h-3"}))]),_:1})]),_:1},8,["class","style"]),s(fe)?(z(),ne(Ge,{key:0,placement:"bottom",class:ze(["nc-action-icon !absolute hidden left-0 nc-text-area-expand-btn !group-hover:block z-3",{"top-0":s(E)&&!(!s(k)||s(k)===1),"top-1":!s(E)}]),style:gn(s(E)&&(!s(k)||s(k)===1)?{top:"50%",transform:"translateY(-50%)"}:void 0)},{title:W(()=>[Ue(be(h.$t("activity.addFiles")),1)]),default:W(()=>[ie(at,{type:"secondary",size:"xsmall","data-testid":"attachment-cell-file-picker-button",class:"!p-0 !w-5 !h-5 !min-w-[fit-content] add-files",onClick:st(V,["stop"])},{default:W(()=>[ie(ct,{icon:"ncPaperclip",class:"w-3 !group-hover:text-grey-800 text-nc-content-gray-subtle"})]),_:1})]),_:1},8,["class","style"])):ke("",!0)],64)):ke("",!0),s(v)?(z(),ne(ut,{key:4})):ke("",!0)],8,ol)),s(N)?(z(),ne(Te,{key:2,value:s(N),"onUpdate:value":Q[4]||(Q[4]=X=>lt(N)?N.value=X:null)},null,8,["value"])):ke("",!0)],64)}}}),fl=Object.assign(ul,{__name:"CellAttachment"}),El=Object.freeze(Object.defineProperty({__proto__:null,default:fl},Symbol.toStringTag,{value:"Module"}));export{jr as _,Wr as a,El as i,Fr as u};
