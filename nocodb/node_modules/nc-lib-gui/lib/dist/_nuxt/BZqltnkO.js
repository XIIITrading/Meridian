import{e as I,fX as P,r as u,aQ as R,c as f,o as p,a as o,b as l,t as a,w as s,O as T,M as K,d as c,ap as S,K as $,a3 as q,L as t,P as D,ar as O,cn as E,an as G,aq as Q,I as X,aT as H,b9 as J,fq as W,$ as Y,_ as Z}from"./DOFFjK0_.js";import{_ as ee}from"./C6nWwNvX.js";import{u as te}from"./DrCpvaRA.js";import"./Bo7kLdUR.js";import"./JUJEmhCv.js";import"./SJHyi9T4.js";import"./DG2ZEhLK.js";import"./4PLl4EP6.js";import"./D2QgEzTv.js";import"./DcFNOSET.js";import"./boyBAVNN.js";import"./CFDwQBzt.js";import"./D1gZ4Fpg.js";import"./C83syoBY.js";import"./CV-2bRRD.js";const le={class:"py-2 px-2 h-full flex gap-2 flex-col"},se={class:"flex w-full bg-white border-b-1 py-1 justify-between"},ae={class:"font-semibold"},oe={class:"flex-grow bg-white"},ne={class:"text-gray-800 font-semibold"},ie={class:"flex bg-white gap-2"},re={key:0,class:"text-red-500 text-[13px]"},ce={class:"font-semibold capitalize sticky top-0 bg-white text-gray-800"},de={class:"flex w-full items-center gap-2"},ue={class:"flex gap-2 items-center justify-end"},pe=I({__name:"Url",emits:["update:visible"],setup(me,{emit:C}){const U=C,{openAttachment:V}=P(),{uploadViaUrl:z,updateModelValue:A,attachments:M}=te(),h=()=>{U("update:visible",!1)},x=u(null),i=u([]),N=async()=>{A([...M.value,...i.value]),h()},n=u(""),d=u(!1),F=e=>{i.value.splice(e,1)},r=u(!1),g=u(""),w=async()=>{if(!W(n.value)){r.value=!1;return}r.value=!0;try{d.value=!0;const e=await z({url:n.value},!0);typeof e!="string"&&(e!=null&&e.length)?(i.value=[...e,...i.value],n.value=""):(r.value=!1,g.value=e)}finally{d.value=!1}await Y(()=>{var e;(e=x.value)==null||e.focus()})};return R(n,()=>{r.value=!0}),(e,_)=>{const b=K,m=T,y=S,B=O,L=ee;return p(),f("div",le,[o("div",se,[o("h1",ae,a(e.$t("title.uploadViaUrl")),1),l(y,null,{title:s(()=>[c(a(e.$t("general.close")),1)]),default:s(()=>[l(m,{type:"secondary",class:"!border-0",size:"xsmall",onClick:h},{default:s(()=>[l(b,{icon:"close"})]),_:1})]),_:1})]),o("div",oe,[o("h1",ne,a(e.$t("labels.addFilesFromUrl")),1),o("div",ie,[l(B,{ref_key:"inputRef",ref:x,value:t(n),"onUpdate:value":_[0]||(_[0]=v=>D(n)?n.value=v:null),type:"url",disabled:t(d),class:"flex-grow",placeholder:"www.google.com/hello.png",onKeydown:q(w,["enter"])},null,8,["value","disabled"]),l(m,{disabled:!t(r),loading:t(d),size:"small",class:"!h-10 !px-4",onClick:w},{default:s(()=>[c(a(e.$t("general.upload")),1)]),_:1},8,["disabled","loading"])]),t(n).length>0&&!t(r)?(p(),f("span",re,a(t(g).length>0?t(g):e.$t("labels.enterValidUrl")),1)):$("",!0),t(i).length>0?(p(),f("div",{key:1,style:E(`height: ${t(r)?"230px":"208px"}`),class:"overflow-y-auto bg-white mt-1 !max-h-[250px]"},[o("h1",ce,a(e.$t("objects.files")),1),(p(!0),f(G,null,Q(t(i),(v,k)=>(p(),f("div",{key:k,class:"flex w-full items-center mt-2 h-10 px-2 py-1 border-1 rounded-md"},[o("div",de,[l(b,{icon:"file"}),c(" "+a(v.title)+" ",1),l(y,{class:"hover:underline"},{title:s(()=>[c(a(e.$t("labels.openFile")),1)]),default:s(()=>[l(L,{class:"flex items-center",target:"_blank",onClick:j=>t(V)(v)},{default:s(()=>[(p(),X(H(("iconMap"in e?e.iconMap:t(J)).externalLink),{class:"w-3.5 h-3.5 text-gray-500"}))]),_:2},1032,["onClick"])]),_:2},1024)]),_[1]||(_[1]=o("div",{class:"flex-grow-1"},null,-1)),l(y,null,{title:s(()=>[c(a(e.$t("title.removeFile")),1)]),default:s(()=>[l(m,{type:"text",size:"xsmall",onClick:j=>F(k)},{default:s(()=>[l(b,{icon:"close"})]),_:2},1032,["onClick"])]),_:2},1024)]))),128))],4)):$("",!0)]),o("div",ue,[l(m,{disabled:t(d),type:"secondary",size:"small",onClick:h},{default:s(()=>[c(a(e.$t("labels.cancel")),1)]),_:1},8,["disabled"]),l(m,{disabled:t(d)||t(i).length===0,size:"small",onClick:N},{default:s(()=>[c(a(e.$t("activity.addFiles")),1)]),_:1},8,["disabled"])])])}}}),Ae=Object.assign(Z(pe,[["__scopeId","data-v-95ae45e5"]]),{__name:"CellAttachmentUploadProvidersUrl"});export{Ae as default};
