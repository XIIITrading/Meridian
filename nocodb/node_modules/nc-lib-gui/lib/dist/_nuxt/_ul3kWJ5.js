const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DOFFjK0_.js","./entry.DDfSYhWa.css","./CMyFGii6.js","./qgYlKlk5.js","./Cb5B9eG-.js","./C_qz9woQ.js","./DA4KItu_.js","./CV-2bRRD.js","./TimeSelector.DAR2lbHN.css","./D8wgK-Ih.js","./HdsRe6lq.js","./index.N-A1gxk9.css","./DzBSAsxR.js","./FilterInput.7KjqjE1F.css","./DGuB8RA-.js","./4fFkR2QG.js","./Pagination.XVPzwtel.css","./D2QgEzTv.js","./SJHyi9T4.js","./DG2ZEhLK.js","./CAfhvBOi.js","./BYGCxle3.js","./DcFNOSET.js","./boyBAVNN.js","./4PLl4EP6.js","./Bgc5K1P7.js","./DEAKw9Pl.js","./CHgOe2F-.js","./CYkscC4Z.js","./ps5He39s.js","./Cl-qOJW6.js","./BcKPINb2.js","./VirtualCell.6f0pX0MN.css","./CkXo2doe.js","./Czlq_f4Y.js","./Cgx2iu1G.js","./C6nWwNvX.js","./Cell.Dgtcn0F2.css","./B2f1fstS.js","./VirtualCell.krPvGNjk.css","./CxSafZTa.js","./Cell.DrFrP4_9.css","./0c4tmWST.js","./D1gZ4Fpg.js","./Bo7kLdUR.js","./B3Wp9c04.js","./C1uRXLg7.js","./D_wq2ltS.js","./Item.C85DUSg3.css","./9aYOtC5C.js","./index.CotXCNy2.css","./DunK-51v.js","./DivDataCell.D_9SDUsb.css","./MSgi_m6o.js","./JKos0pQW.js","./CQugZrqw.js","./index._6B72PDH.css","./BdLxRlCP.js","./YaKnxhzO.js","./Markdown.CUPXKfeQ.css","./CNJqPN7Y.js","./AxsiR11P.js","./C9H3ht2d.js","./Comments.BKDN6dt-.css","./DiUleKVo.js","./JUJEmhCv.js","./Modal.CB1oWLel.css","./BrfakvRE.js","./CJtI8BMq.js","./D4c215jk.js","./lL-0_K96.js","./BClTqpVB.js","./BNo10Mdm.js","./index.C8L8AhJa.css","./CtJu2gHc.js","./MNXVOE4I.js","./LockView.BWC8JyQk.css","./D0vnHTOx.js","./BRTCxTHu.js","./DDEVLD8O.js","./-rIuSlCu.js","./SpSJ8E4d.js","./Dh5zKH8k.js","./ColumnMenu.DQG9Y5_N.css","./CiBV2ZED.js","./ZNRZafJ9.js","./BhfICdUA.js","./NRjd0XWG.js","./RfUK_fd6.js","./SelectOptions.DqNkMQ-A.css","./hehmy6V1.js","./BvG7Iv4q.js","./CyXz1Zkk.js","./CPChVVVr.js","./CFXGfO_A.js","./VKUQM8lk.js","./BqWeTF94.js","./sgaWLnOz.js","./BpgQOThx.js","./DmoodaOn.js","./B3tDgntu.js","./Db9kSA7A.js","./EditOrAddProvider.C2farLzy.css","./B4YnCsMc.js","./6zXueAcs.js","./Byuk3M83.js","./D-8_fbld.js","./DminWhpq.js","./index.Bp-YHGEB.css"])))=>i.map(i=>d[i]);
import{G as S,r as u,cd as rt,f as Tt,U as Vt,a8 as it,gj as At,n as v,e as Ft,aZ as Dt,aY as Mt,gd as jt,fQ as Lt,dJ as Pt,ge as Bt,gl as Nt,am as Ot,as as zt,b5 as Ht,fX as $t,u as Ut,b7 as Gt,aX as N,em as qt,fV as Wt,jd as Yt,je as Jt,jf as Kt,jg as Xt,b0 as Zt,jh as be,i as Qt,$ as eo,aj as Ze,Y as to,fv as oo,h6 as ao,aQ as Qe,aH as no,c6 as lo,ac as so,c as d,o as n,an as C,a as w,I as m,b as y,aG as ro,L as t,P as Ee,w as c,cn as Y,K as x,aq as re,aS as D,c$ as io,aw as uo,O as co,M as mo,ag as ie,hc as Ce,is as po,f_ as Se,d as ue,ad as et,aT as Te,b9 as Ve,t as Ae,aA as wo,cf as tt,cg as ot,fl as at,hf as nt,aW as M,gk as fo,_ as _o}from"./DOFFjK0_.js";import{_ as vo}from"./D_wq2ltS.js";import{_ as yo}from"./DGuB8RA-.js";import{_ as go}from"./9aYOtC5C.js";import{e as Fe,_ as ho}from"./DBe8bXbT.js";import{i as de,f as ce,e as Ro,c as xo}from"./D2QgEzTv.js";import{i as Io}from"./Bo7kLdUR.js";import{u as ko}from"./Bgc5K1P7.js";import{u as bo}from"./DG2ZEhLK.js";import{u as Eo}from"./DminWhpq.js";import{b as Co}from"./C1uRXLg7.js";import{_ as So}from"./B3tDgntu.js";import"./SJHyi9T4.js";import"./Dh5zKH8k.js";import"./B3Wp9c04.js";import"./D-8_fbld.js";import"./boyBAVNN.js";function To(s,p,h){const j=S(rt,u(!1)),{$api:L}=Tt(),me=Vt(),{activeTable:T}=it(me),{sharedView:O}=At(),K=v(()=>s.value||T.value),z=u(),{cachedRows:X,syncCount:pe,clearCache:H,deleteRow:we,loadData:Z,navigateToSiblingRow:P,totalRows:fe,fetchChunk:Q,chunkStates:_e,isFirstRow:ve,isLastRow:ee}=Eo({meta:K,viewMeta:p,callbacks:{getWhereFilter:async()=>(h==null?void 0:h.value)??""},where:h,isPublic:j});async function V(){var I,$;(I=p==null?void 0:p.value)!=null&&I.id&&(z.value=j.value?($=O.value)==null?void 0:$.view:await L.dbView.galleryRead(p.value.id))}return{cachedRows:X,deleteRow:we,loadData:Z,navigateToSiblingRow:P,loadGalleryData:V,viewData:z,totalRows:fe,clearCache:H,chunkStates:_e,syncCount:pe,fetchChunk:Q,isFirstRow:ve,isLastRow:ee}}const Vo=D(()=>M(()=>import("./DOFFjK0_.js").then(s=>s.oO),__vite__mapDeps([0,1]),import.meta.url).then(s=>s.default||s)),Ao=D(()=>M(()=>import("./CMyFGii6.js").then(s=>s.V),__vite__mapDeps([2,0,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]),import.meta.url).then(s=>s.default||s)),Fo=D(()=>M(()=>import("./CkXo2doe.js").then(s=>s.C),__vite__mapDeps([33,0,1,7,8,34,35,36,24,18,17,22,23,37]),import.meta.url).then(s=>s.default||s)),Do=D(()=>M(()=>import("./B2f1fstS.js"),__vite__mapDeps([38,0,1,21,39]),import.meta.url).then(s=>s.default||s)),Mo=D(()=>M(()=>import("./CxSafZTa.js"),__vite__mapDeps([40,0,1,21,41]),import.meta.url).then(s=>s.default||s)),jo=D(()=>M(()=>import("./0c4tmWST.js").then(s=>s.R),__vite__mapDeps([42,0,1,19,18,24,17,22,23,43,44,21,45,46,14,47,48,49,50,51,52,29,27,53,54,55,56,57,58,59,60,61,62,63,33,7,8,34,35,36,37,64,65,66,67,68,25,69,70,71,28,26,30,72,73,74,75,76,2,3,4,5,6,9,10,11,12,13,15,16,20,31,32,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108]),import.meta.url).then(s=>s.default||s)),Lo=D(()=>M(()=>import("./0c4tmWST.js").then(s=>s.i),__vite__mapDeps([42,0,1,19,18,24,17,22,23,43,44,21,45,46,14,47,48,49,50,51,52,29,27,53,54,55,56,57,58,59,60,61,62,63,33,7,8,34,35,36,37,64,65,66,67,68,25,69,70,71,28,26,30,72,73,74,75,76,2,3,4,5,6,9,10,11,12,13,15,16,20,31,32,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108]),import.meta.url).then(s=>s.default||s)),Po={class:"flex items-center gap-2"},Bo={class:"flex items-center gap-2"},No={class:"flex-1"},Oo={class:"nc-gallery-container grid gap-3 p-3"},zo=["data-card-id"],Ho={class:"z-10 arrow"},$o={class:"z-10 arrow"},Uo={key:1,class:"h-52 w-full !flex flex-row !border-b-1 !border-gray-200 items-center justify-center !bg-white"},Go={class:"flex-1 flex content-stretch gap-3 w-full"},qo=["onClick"],Wo={class:"flex flex-col rounded-lg w-full"},Yo={class:"flex flex-row w-full justify-start"},Jo={class:"nc-card-col-header w-full !children:text-gray-500"},Ko={key:0,class:"flex flex-row w-full text-gray-800 items-center justify-start min-h-7 py-1"},Xo={key:1,class:"flex flex-row w-full h-7 pl-1 items-center justify-start"},Zo={class:"sticky bottom-4 w-[fit-content]"},Qo={class:"flex items-center gap-2"},J=50,lt=100,st=30,ea=Ft({__name:"Gallery",setup(s){const p=S(Dt,u()),h=S(Mt,u()),j=S(jt),L=S(Lt),{withLoading:me}=ko(),T=S(Bt,Pt()),O=S(rt,u(!1)),K=S(Nt,u([])),{isViewDataLoading:z}=it(Ot()),{isSqlView:X,xWhere:pe,isExternalSource:H,isSyncedTable:we}=bo(),{isUIAllowed:Z}=zt(),P=Ht(),{getPossibleAttachmentSrc:fe}=$t(),Q=Ut(),{showRecordPlanLimitExceededModal:_e,blockExternalSourceRecordVisibility:ve,showAsBluredRecord:ee}=Gt(),V=u(!1),I=u(),$=u();N(qt,u(!1)),N(Wt,u(!0)),N(Yt,u(!1)),N(Jt,u(!1)),N(Kt,u(1)),N(fo,L);const{fetchChunk:ut,loadGalleryData:De,deleteRow:dt,syncCount:Me,navigateToSiblingRow:je,chunkStates:ye,cachedRows:ct,totalRows:Le,isFirstRow:Pe,isLastRow:Be,clearCache:Ne,viewData:te}=To(p,h,pe),U=v(()=>ve(H.value)?Math.min(200,Le.value):Le.value),Oe=v(()=>K.value.filter(e=>!Xt(e))),_=v(()=>{var e,o;return((o=(e=p.value)==null?void 0:e.columns)==null?void 0:o.find(r=>r.pv&&K.value.includes(r)))??null}),G=v(()=>{var e,o;return(e=p.value)!=null&&e.columnsById?p.value.columnsById[(o=te.value)==null?void 0:o.fk_cover_image_col_id]:{}}),mt=v(()=>{var o,r;const e=((r=Zt((o=te.value)==null?void 0:o.meta))==null?void 0:r.fk_cover_image_object_fit)||be.FIT;if(e===be.FIT)return"contain";if(e===be.COVER)return"cover"}),pt=v(()=>Z("dataEdit")),ze=u(!1),oe=v({get:()=>ze.value,set:e=>{pt.value&&(ze.value=e)}}),B=u(null),wt=(e,o)=>{X.value||(e.preventDefault(),o&&(B.value=o))},He=e=>{var o;if(!((o=G.value)!=null&&o.title)||!e.row[G.value.title])return[];try{const r=typeof e.row[G.value.title]=="string"?JSON.parse(e.row[G.value.title]):e.row[G.value.title];return Array.isArray(r)?r.flat().map(i=>typeof i=="string"?JSON.parse(i):i).filter(i=>i&&!Array.isArray(i)&&typeof i=="object"&&Object.keys(i).length):[]}catch{return[]}},ae=v({get(){return!!P.query.rowId},set(e){e||Q.push({query:{...P.query,rowId:void 0}})}}),ne=(e,o)=>{const r=Ro(e.row,p.value.columns);$.value=o,r&&!O.value?(I.value=void 0,Q.push({query:{...P.query,rowId:r}})):(I.value=e,V.value=!0)},$e=async(e,o)=>{const r=e.target;r.closest(".arrow")||r.closest(".slick-dots")||ne(o)},Ue=async()=>{var e;ne({row:{...xo((e=p.value)==null?void 0:e.columns)},oldRow:{},rowMeta:{new:!0}})},ft=(e,o)=>{Ce(e)&&o.stopPropagation()};T==null||T.on(Ue),Qt(()=>T.off(Ue));const ge=u(!1);j==null||j.on(async()=>{await De(),ge.value=!0,await eo(()=>{ge.value=!1})});const Ge={[Ze.LongText]:150,[Ze.Attachment]:56,default:44},q=u(),he=u(0),A=to({start:0,end:12}),{width:Re}=oo(q),W=v(()=>Re.value<=537?1:Math.floor((Re.value-537)/262)+2),F=v(()=>{var r;return 64+Oe.value.reduce((i,f)=>{const k=Ge[f.uidt]||Ge.default;return i+k+12},0)+((r=te.value)!=null&&r.fk_cover_image_col_id?208:0)+2}),xe=v(()=>{const{start:e,end:o}=A;return Array.from({length:Math.min(o,U.value)-e},(r,i)=>{const f=e+i;return ct.value.get(f)||{row:{},oldRow:{},rowMeta:{rowIndex:f,isLoading:!0}}})}),{isRowColouringEnabled:Ie}=Co(),qe=async()=>{const{start:e,end:o}=A,r=Math.floor(e/J),i=Math.floor((o-1)/J),f=new Set;for(let g=r;g<=i;g++)ye.value[g]||f.add(g);const k=i+1;o%J>J-st&&!ye.value[k]&&f.add(k);const b=r-1;b>=0&&e%J<st&&!ye.value[b]&&f.add(b),f.size>0&&await Promise.all([...f].map(g=>ut(g))),Ne(Math.max(0,e-lt),Math.min(U.value,o+lt))},_t=u(0),le=()=>{if(!q.value){setTimeout(le,50);return}const{clientHeight:e}=q.value,o=Math.floor(he.value/(F.value+12)),r=Math.ceil((e-12)/(F.value+12)),i=2,f=Math.max(0,o-i)*W.value,k=Math.min((o+r+i)*W.value,U.value);A.start=f,A.end=k;const b=Math.ceil(A.start/W.value)*(F.value+12);_t.value=b,qe()},se=v(()=>{const e=Math.ceil(U.value/W.value);return e*F.value+(e-1)*12});let ke=!1;ao(q,{onScroll:e=>{ke||(ke=!0,requestAnimationFrame(()=>{var o;he.value=((o=e.target)==null?void 0:o.scrollTop)||0,le(),ke=!1}))},throttle:200}),Qe(h,async e=>{z.value=!0;try{(e==null?void 0:e.type)===no.GALLERY&&(await De(),await Me(),A.end===0&&(A.end=Math.min(100,U.value)),await qe())}finally{z.value=!1}},{immediate:!0});const vt=v(()=>{const e=Math.floor(he.value/(F.value+12)),r=Math.max(0,e-2)*(F.value+12);return r>se.value?se.value-F.value:r}),{width:yt,height:gt}=lo();Qe([()=>yt.value,()=>gt.value,()=>W.value,()=>Re.value],()=>{le()},{immediate:!0}),L==null||L.on(me(async()=>{Ne(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),await Me(),le()}));const ht=()=>{_e()||T.trigger()};return(e,o)=>{var Xe;const r=vo,i=wo,f=yo,k=go,b=mo,g=co,Rt=Vo,xt=So,We=Ao,Ye=Fo,It=Do,kt=Mo,bt=io,Et=jo,Ct=ro,Je=Lo,Ke=so("e");return n(),d(C,null,[w("div",{ref_key:"scrollContainer",ref:q,"data-testid":"nc-gallery-wrapper",class:"flex flex-col w-full nc-gallery select-none relative nc-scrollbar-md bg-gray-50 h-[calc(100svh-93px)]"},[y(Ct,{visible:t(oe),"onUpdate:visible":o[3]||(o[3]=a=>Ee(oe)?oe.value=a:null),disabled:t(B)===null,trigger:t(X)?[]:["contextmenu"],"overlay-class-name":"nc-dropdown-grid-context-menu"},{overlay:c(()=>[y(k,{variant:"small",onClick:o[2]||(o[2]=a=>oe.value=!1)},{default:c(()=>{var a,R;return[t(B)?(n(),m(r,{key:0,onClick:o[0]||(o[0]=l=>ne(t(B).row))},{default:c(()=>[et((n(),d("div",Po,[(n(),m(Te(("iconMap"in e?e.iconMap:t(Ve)).maximize),{class:"flex"})),ue(" "+Ae(e.$t("activity.expandRecord")),1)])),[[Ke,["a:row:expand-record"]]])]),_:1})):x("",!0),y(i),((a=t(B))==null?void 0:a.index)!==void 0?(n(),m(f,{key:1,entity:t(ot).TABLE,"entity-id":(R=t(p))==null?void 0:R.id,permission:t(tt).TABLE_RECORD_DELETE,placement:"right"},{default:c(({isAllowed:l})=>[y(r,{class:ie({"!text-red-600 !hover:bg-red-50":l}),disabled:!l,onClick:o[1]||(o[1]=E=>t(dt)(t(B).index))},{default:c(()=>[et((n(),d("div",Bo,[(n(),m(Te(("iconMap"in e?e.iconMap:t(Ve)).delete),{class:"flex"})),ue(" "+Ae(e.$t("activity.deleteRow")),1)])),[[Ke,["a:row:delete"]]])]),_:2},1032,["class","disabled"])]),_:1},8,["entity","entity-id","permission"])):x("",!0)]}),_:1})]),default:c(()=>[w("div",No,[(n(),d("div",{key:t(se),class:"relative",style:Y({height:`${t(se)}px`})},[w("div",{style:Y({height:`${t(vt)}px`})},null,4),w("div",Oo,[(n(!0),d(C,null,re(t(xe),a=>(n(),d("div",{key:`record-${a.rowMeta.rowIndex}`,"data-card-id":`record-${a.rowMeta.rowIndex}`,style:Y({filter:t(ee)(t(H),a.rowMeta.rowIndex+1)&&!a.rowMeta.new?"blur(4px)":void 0,pointerEvents:t(ee)(t(H),a.rowMeta.rowIndex+1)&&!a.rowMeta.new?"none":"auto"})},[y(Et,{row:a},{default:c(()=>{var R;return[y(bt,{class:"!rounded-xl h-full border-gray-200 border-1 group overflow-hidden break-all max-w-[450px] cursor-pointer flex flex-col","body-style":{padding:"12px !important",flex:1,display:"flex"},"data-testid":`nc-gallery-card-${a.rowMeta.rowIndex}`,style:Y({...("extractRowBackgroundColorStyle"in e?e.extractRowBackgroundColorStyle:t(Fe))(a).rowBgColor,...("extractRowBackgroundColorStyle"in e?e.extractRowBackgroundColorStyle:t(Fe))(a).rowBorderColor}),onClick:l=>$e(l,a),onContextmenu:l=>wt(l,{row:a,index:a.rowMeta.rowIndex})},uo({default:c(()=>[w("div",Go,[t(Ie)?(n(),d("div",{key:0,class:"w-1 flex-none min-h-4 rounded-sm",style:Y(("extractRowBackgroundColorStyle"in e?e.extractRowBackgroundColorStyle:t(Fe))(a).rowLeftBorderColor)},null,4)):x("",!0),w("div",{class:ie(["flex-1 flex flex-col gap-3 !children:pointer-events-none",{"w-[calc(100%_-_16px)]":t(Ie),"w-full":!t(Ie)}])},[t(_)?(n(),d("h2",{key:0,class:ie(["nc-card-display-value-wrapper",{"!children:pointer-events-auto":("isButton"in e?e.isButton:t(Ce))(t(_))||("isRowEmpty"in e?e.isRowEmpty:t(de))(a,t(_))&&("isAllowToRenderRowEmptyField"in e?e.isAllowToRenderRowEmptyField:t(ce))(t(_))}])},[!("isRowEmpty"in e?e.isRowEmpty:t(de))(a,t(_))||("isAllowToRenderRowEmptyField"in e?e.isAllowToRenderRowEmptyField:t(ce))(t(_))||("isPercent"in e?e.isPercent:t(po))(t(_))?(n(),d(C,{key:0},[t(Se)(t(_))?(n(),m(We,{key:0,modelValue:a.row[t(_).title],"onUpdate:modelValue":l=>a.row[t(_).title]=l,class:"!text-brand-500",column:t(_),row:a},null,8,["modelValue","onUpdate:modelValue","column","row"])):(n(),m(Ye,{key:1,modelValue:a.row[t(_).title],"onUpdate:modelValue":l=>a.row[t(_).title]=l,class:"!text-brand-500",column:t(_),"edit-enabled":!1,"read-only":!0},null,8,["modelValue","onUpdate:modelValue","column"]))],64)):(n(),d(C,{key:1},[ue(" - ")],64))],2)):x("",!0),(n(!0),d(C,null,re(t(Oe),l=>(n(),d("div",{key:`record-${a.rowMeta.rowIndex}-${l.id}`,class:ie(["nc-card-col-wrapper",{"!children:pointer-events-auto":("isButton"in e?e.isButton:t(Ce))(l)||("isRowEmpty"in e?e.isRowEmpty:t(de))(a,l)&&("isAllowToRenderRowEmptyField"in e?e.isAllowToRenderRowEmptyField:t(ce))(l)}]),onClick:E=>ft(l,E)},[w("div",Wo,[w("div",Yo,[w("div",Jo,[t(Se)(l)?(n(),m(It,{key:0,column:l,"hide-menu":!0},null,8,["column"])):(n(),m(kt,{key:1,column:l,"hide-menu":!0},null,8,["column"]))])]),!("isRowEmpty"in e?e.isRowEmpty:t(de))(a,l)||("isAllowToRenderRowEmptyField"in e?e.isAllowToRenderRowEmptyField:t(ce))(l)?(n(),d("div",Ko,[t(Se)(l)?(n(),m(We,{key:0,modelValue:a.row[l.title],"onUpdate:modelValue":E=>a.row[l.title]=E,column:l,row:a,class:"!text-gray-800"},null,8,["modelValue","onUpdate:modelValue","column","row"])):(n(),m(Ye,{key:1,modelValue:a.row[l.title],"onUpdate:modelValue":E=>a.row[l.title]=E,column:l,"edit-enabled":!1,"read-only":!0,class:"!text-gray-800"},null,8,["modelValue","onUpdate:modelValue","column"]))])):(n(),d("div",Xo,"-"))])],10,qo))),128))],2)])]),_:2},[(R=t(te))!=null&&R.fk_cover_image_col_id?{name:"cover",fn:c(()=>[!t(ge)&&He(a).length?(n(),m(xt,{key:0,class:"gallery-carousel !border-b-1 !border-gray-200 min-h-52 !bg-white",arrows:""},{customPaging:c(()=>o[8]||(o[8]=[w("a",null,[w("div",null,[w("div")])],-1)])),prevArrow:c(()=>[w("div",Ho,[y(g,{type:"secondary",size:"xsmall",class:"!absolute !left-1.5 !bottom-[-90px] !opacity-0 !group-hover:opacity-100 !rounded-lg cursor-pointer"},{default:c(()=>[y(b,{icon:"arrowLeft",class:"text-gray-700 w-4 h-4"})]),_:1})])]),nextArrow:c(()=>[w("div",$o,[y(g,{type:"secondary",size:"xsmall",class:"!absolute !right-1.5 !bottom-[-90px] !opacity-0 !group-hover:opacity-100 !rounded-lg cursor-pointer"},{default:c(()=>[y(b,{icon:"arrowRight",class:"text-gray-700 w-4 h-4"})]),_:1})])]),default:c(()=>[(n(!0),d(C,null,re(He(a),(l,E)=>(n(),d(C,null,[("isImage"in e?e.isImage:t(Io))(l.title,l.mimetype??l.type)?(n(),m(Rt,{key:`carousel-${a.rowMeta.rowIndex}-${E}`,class:"h-52","image-class":"!w-full","object-fit":t(mt),srcs:t(fe)(l,"card_cover"),onClick:St=>$e(St,a)},null,8,["object-fit","srcs","onClick"])):x("",!0)],64))),256))]),_:2},1024)):(n(),d("div",Uo,o[9]||(o[9]=[w("img",{class:"object-contain w-[48px] h-[48px]",src:ho},null,-1)])))]),key:"0"}:void 0]),1032,["data-testid","style","onClick","onContextmenu"])]}),_:2},1032,["row"])],12,zo))),128)),t(xe).length<=4?(n(!0),d(C,{key:0},re(Array(8-t(xe).length),a=>(n(),d("div",{key:a,class:"nc-empty-card"}))),128)):x("",!0)])],4))])]),_:1},8,["visible","disabled","trigger"]),w("div",Zo,[t(Z)("dataInsert")&&!t(we)?(n(),m(f,{key:0,entity:t(ot).TABLE,"entity-id":(Xe=t(p))==null?void 0:Xe.id,permission:t(tt).TABLE_RECORD_ADD},{default:c(({isAllowed:a})=>[y(g,{size:"xs",type:"secondary",class:"ml-4",disabled:!a,onClick:ht},{default:c(()=>[w("div",Qo,[(n(),m(Te(("iconMap"in e?e.iconMap:t(Ve)).plus),{class:""})),ue(" "+Ae(e.$t("activity.newRecord")),1)])]),_:2},1032,["disabled"])]),_:1},8,["entity","entity-id","permission"])):x("",!0)])],512),(n(),m(at,null,{default:c(()=>[t(I)&&t(V)?(n(),m(Je,{key:0,modelValue:t(V),"onUpdate:modelValue":o[4]||(o[4]=a=>Ee(V)?V.value=a:null),row:t(I),"load-row":!t(O),"first-row":t(Pe),"last-row":t(Be),state:t($),meta:t(p),view:t(h)},null,8,["modelValue","row","load-row","first-row","last-row","state","meta","view"])):x("",!0)]),_:1})),(n(),m(at,null,{default:c(()=>{var a;return[t(ae)&&((a=t(p))!=null&&a.id)?(n(),m(Je,{key:0,modelValue:t(ae),"onUpdate:modelValue":o[5]||(o[5]=R=>Ee(ae)?ae.value=R:null),row:t(I)??{row:{},oldRow:{},rowMeta:{}},meta:t(p),"load-row":!t(O),"row-id":t(P).query.rowId,"first-row":t(Pe),"last-row":t(Be),view:t(h),"show-next-prev-icons":"","expand-form":ne,onNext:o[6]||(o[6]=R=>t(je)(("NavigateDir"in e?e.NavigateDir:t(nt)).NEXT)),onPrev:o[7]||(o[7]=R=>t(je)(("NavigateDir"in e?e.NavigateDir:t(nt)).PREV))},null,8,["modelValue","row","meta","load-row","row-id","first-row","last-row","view"])):x("",!0)]}),_:1}))],64)}}}),ya=Object.assign(_o(ea,[["__scopeId","data-v-a2587c0d"]]),{__name:"SmartsheetGallery"});export{ya as default};
