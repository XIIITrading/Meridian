const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Dl-U6wg9.js","./DOFFjK0_.js","./entry.DDfSYhWa.css","./AdvanceColorPicker.BPg1JaQv.css","./CkXo2doe.js","./CV-2bRRD.js","./TimeSelector.DAR2lbHN.css","./Czlq_f4Y.js","./Cgx2iu1G.js","./C6nWwNvX.js","./4PLl4EP6.js","./SJHyi9T4.js","./D2QgEzTv.js","./DcFNOSET.js","./boyBAVNN.js","./Cell.Dgtcn0F2.css","./0c4tmWST.js","./DG2ZEhLK.js","./D1gZ4Fpg.js","./Bo7kLdUR.js","./BYGCxle3.js","./B3Wp9c04.js","./C1uRXLg7.js","./DGuB8RA-.js","./D_wq2ltS.js","./Item.C85DUSg3.css","./9aYOtC5C.js","./index.CotXCNy2.css","./DunK-51v.js","./DivDataCell.D_9SDUsb.css","./ps5He39s.js","./CHgOe2F-.js","./MSgi_m6o.js","./JKos0pQW.js","./CQugZrqw.js","./index._6B72PDH.css","./BdLxRlCP.js","./YaKnxhzO.js","./Markdown.CUPXKfeQ.css","./CNJqPN7Y.js","./AxsiR11P.js","./C9H3ht2d.js","./Comments.BKDN6dt-.css","./DiUleKVo.js","./JUJEmhCv.js","./Modal.CB1oWLel.css","./BrfakvRE.js","./CJtI8BMq.js","./Bgc5K1P7.js","./D4c215jk.js","./lL-0_K96.js","./BClTqpVB.js","./CYkscC4Z.js","./DEAKw9Pl.js","./Cl-qOJW6.js","./BNo10Mdm.js","./index.C8L8AhJa.css","./CtJu2gHc.js","./MNXVOE4I.js","./LockView.BWC8JyQk.css","./CMyFGii6.js","./qgYlKlk5.js","./Cb5B9eG-.js","./C_qz9woQ.js","./DA4KItu_.js","./D8wgK-Ih.js","./HdsRe6lq.js","./index.N-A1gxk9.css","./DzBSAsxR.js","./FilterInput.7KjqjE1F.css","./4fFkR2QG.js","./Pagination.XVPzwtel.css","./CAfhvBOi.js","./BcKPINb2.js","./VirtualCell.6f0pX0MN.css","./D0vnHTOx.js","./BRTCxTHu.js","./DDEVLD8O.js","./-rIuSlCu.js","./SpSJ8E4d.js","./Dh5zKH8k.js","./ColumnMenu.DQG9Y5_N.css","./B4YnCsMc.js","./6zXueAcs.js","./Byuk3M83.js","./DmoodaOn.js","./D-8_fbld.js","./ZNRZafJ9.js","./BhfICdUA.js","./NRjd0XWG.js","./RfUK_fd6.js","./SelectOptions.DqNkMQ-A.css","./Db9kSA7A.js","./DminWhpq.js","./index.Bp-YHGEB.css","./2EkCyFsn.js","./BcG6Ieku.js","./D4XRfH0I.js","./FieldListAutoCompleteDropdown.DdXE7zlY.css","./0vrXc9P0.js","./ColumnFilter.C3qfKB4j.css","./B69fapgU.js","./Ctjf8h_Q.js","./BjlRxDgN.js","./Editor.C6FZ3q1a.css","./DhizJgOH.js","./Params.DMw5rYYq.css","./CiiU4J3J.js","./Headers.DsAFPHpL.css","./CWRHUTRI.js","./DRQrXP7Q.js","./PlainCell.CJha1QXQ.css","./B2f1fstS.js","./VirtualCell.krPvGNjk.css","./CxSafZTa.js","./Cell.DrFrP4_9.css","./gobHM9h5.js","./RichLongTextDefaultValue.4Q6T9GwP.css","./BmgElaBc.js","./CXk9dMSN.js","./hehmy6V1.js","./BvG7Iv4q.js","./CyXz1Zkk.js","./CPChVVVr.js","./DeaWGTJr.js","./BgWWyWb0.js"])))=>i.map(i=>d[i]);
var Ta=Object.defineProperty;var Ia=(s,$,p)=>$ in s?Ta(s,$,{enumerable:!0,configurable:!0,writable:!0,value:p}):s[$]=p;var un=(s,$,p)=>Ia(s,typeof $!="symbol"?$+"":$,p);import{_ as Ze,$ as nl,c as r,o as l,an as Y,aq as be,ag as ae,I as d,K as _,b as o,aT as _e,L as e,jM as Nl,w as n,d as E,t as v,ap as dt,N as he,e as Ue,T as qe,a,ao as Il,M as Ye,O as Pt,P as se,Q as gn,ak as Tt,r as U,as as jl,n as ee,a_ as Vl,j1 as Wt,jN as eo,g as $t,aj as B,a3 as xt,ar as Wl,f7 as to,j6 as Cl,jO as Tl,f as yl,G as It,aZ as Lt,jn as yn,b3 as nn,fE as Zl,fH as cn,jP as Wn,aV as zl,g7 as Sa,jQ as Aa,jR as Oa,bW as hn,aE as Al,cn as sl,b9 as Re,a0 as rt,a1 as st,aJ as bn,a2 as wn,jS as qn,jT as La,aW as Ne,a9 as Et,gY as Mt,f1 as ql,f2 as Gl,ez as At,eO as Ct,jU as xn,ae as Ft,i9 as Ea,jV as Dl,aQ as it,jW as il,aG as al,aS as Ve,jX as Ma,jo as lo,hH as Da,ah as Gt,jY as kn,jZ as Ua,j_ as Ra,i1 as Pa,j$ as Fa,a8 as Ut,V as Ol,S as ul,k0 as no,im as fl,k1 as Ba,j as ol,f_ as kt,f$ as hl,g0 as bl,dj as oo,dk as ao,bB as on,k2 as vn,k3 as so,k4 as io,bQ as ro,k5 as Na,k6 as Va,i as uo,k7 as za,bv as ja,k8 as Wa,al as $n,j2 as _n,h2 as co,aX as qt,k9 as qa,a4 as Rt,gu as Ga,b7 as an,aD as gl,fU as Yt,aC as Hl,bz as Cn,Z as Tn,bb as Xt,bc as In,ka as Ha,b0 as Jt,ih as Ka,av as Sn,a7 as po,am as en,kb as Ya,U as An,c3 as mo,kc as Gn,aH as Xa,ac as Kl,c7 as tn,eX as Ja,aw as _l,bd as Qa,ad as St,aI as Za,bk as Hn,bA as Kn,bf as fo,bY as sn,kd as es,ke as Fl,kf as ts,en as vo,kg as Yn,kh as ls,ki as ns,kj as os,J as Sl,kk as _o,bC as go,a6 as yo,dD as ho,eU as as,a5 as rl,c5 as ss,u as is,df as rs,X as ln,Y as us,d0 as jt,bl as cs,dw as ds,ch as Ul,fx as Rl,cc as bo,aA as ps,af as ms,f8 as fs,kl as vs,ik as mt,km as _s,kn as gs,gD as ys,jf as hs,em as On,ko as bs,kp as ws,gb as xs,fX as ks,g2 as Bl,jg as $s,h3 as Cs,c$ as Ts,by as wo,gR as Is,kq as Pl,kr as Ss,y as As,bs as Os,bX as xo,fs as Ls,W as Es,gy as Ms,fQ as Ds,g1 as Xn,ks as Us,kt as Rs,ku as Ps,jA as Fs,kv as Bs,kw as Ns,kx as dn,ky as pn,jG as Vs,js as Jn,jx as zs,jq as js,fZ as Ws,ax as qs,jC as Gs,fS as Hs}from"./DOFFjK0_.js";import{_ as Ks}from"./DDEVLD8O.js";import{c as _t,d as ko,_ as Ys,b as Xs}from"./ZNRZafJ9.js";import{a as Ln,_ as Js}from"./BNo10Mdm.js";import{L as Qs,_ as Zs,a as ei}from"./hehmy6V1.js";import{_ as En,R as Mn}from"./D4c215jk.js";import{u as $o}from"./B3Wp9c04.js";import{_ as ti}from"./CFXGfO_A.js";import{u as li,S as ni,P as oi,E as ai,t as si}from"./YaKnxhzO.js";import{s as ii}from"./BqWeTF94.js";import{e as Co,i as ri}from"./D2QgEzTv.js";import{_ as Dn}from"./-rIuSlCu.js";import{_ as Un}from"./BrfakvRE.js";import{_ as ui}from"./sgaWLnOz.js";import{_ as To}from"./D_wq2ltS.js";import{_ as Io}from"./9aYOtC5C.js";import{_ as So}from"./CQugZrqw.js";import{_ as ci}from"./C6nWwNvX.js";import{_ as Ao}from"./BpgQOThx.js";import{S as Oo}from"./CYkscC4Z.js";import{u as di}from"./DmoodaOn.js";import{i as pi}from"./Bo7kLdUR.js";import{u as mi}from"./4PLl4EP6.js";import{_ as fi}from"./B3tDgntu.js";import{C as vi,_ as _i}from"./Db9kSA7A.js";import{u as gi}from"./DG2ZEhLK.js";const yi={"Africa/Timbuktu":"Africa/Bamako","America/Argentina/ComodRivadavia":"America/Argentina/Catamarca","America/Atka":"America/Adak","America/Buenos_Aires":"America/Argentina/Buenos_Aires","America/Catamarca":"America/Argentina/Catamarca","America/Coral_Harbour":"America/Atikokan","America/Cordoba":"America/Argentina/Cordoba","America/Ensenada":"America/Tijuana","America/Fort_Wayne":"America/Indiana/Indianapolis","America/Indianapolis":"America/Indiana/Indianapolis","America/Jujuy":"America/Argentina/Jujuy","America/Knox_IN":"America/Indiana/Knox","America/Louisville":"America/Kentucky/Louisville","America/Mendoza":"America/Argentina/Mendoza","America/Montreal":"America/Toronto","America/Porto_Acre":"America/Rio_Branco","America/Rosario":"America/Argentina/Cordoba","America/Shiprock":"America/Denver","America/Virgin":"America/St_Thomas","Asia/Calcutta":"Asia/Kolkata","Asia/Chungking":"Asia/Chongqing","Asia/Dacca":"Asia/Dhaka","Asia/Istanbul":"Europe/Istanbul","Asia/Katmandu":"Asia/Kathmandu","Asia/Muscat":"Asia/Dubai","Asia/Saigon":"Asia/Ho_Chi_Minh","Asia/Tel_Aviv":"Asia/Jerusalem","Asia/Ujung_Pandang":"Asia/Makassar","Atlantic/Faeroe":"Atlantic/Faroe","Atlantic/Jan_Mayen":"Europe/Oslo","Australia/ACT":"Australia/Sydney","Australia/Canberra":"Australia/Sydney","Australia/LHI":"Australia/Lord_Howe","Australia/North":"Australia/Darwin","Australia/NSW":"Australia/Sydney","Australia/Queensland":"Australia/Brisbane","Australia/South":"Australia/Adelaide","Australia/Tasmania":"Australia/Hobart","Australia/Victoria":"Australia/Melbourne","Australia/West":"Australia/Perth","Australia/Yancowinna":"Australia/Broken_Hill","Brazil/Acre":"America/Rio_Branco","Brazil/DeNoronha":"America/Noronha","Brazil/East":"America/Sao_Paulo","Brazil/West":"America/Manaus","Canada/Atlantic":"America/Halifax","Canada/Central":"America/Winnipeg","Canada/Eastern":"America/Toronto","Canada/Mountain":"America/Edmonton","Canada/Newfoundland":"America/St_Johns","Canada/Pacific":"America/Vancouver","Canada/Saskatchewan":"America/Regina","Canada/Yukon":"America/Whitehorse","Chile/Continental":"America/Santiago","Chile/EasterIsland":"Pacific/Easter",Cuba:"America/Havana",Egypt:"Africa/Cairo",Eire:"Europe/Dublin","Etc/UCT":"Etc/UTC","Europe/Belfast":"Europe/London","Europe/Tiraspol":"Europe/Chisinau",GB:"Europe/London","GB-Eire":"Europe/London",Greenwich:"Etc/GMT",Hongkong:"Asia/Hong_Kong",Iceland:"Atlantic/Reykjavik","Indian/Antananarivo":"Indian/Mayotte","Indian/Chagos":"Indian/Maldives","Indian/Comoro":"Indian/Mayotte","Indian/Mahe":"Indian/Mauritius",Iran:"Asia/Tehran",Israel:"Asia/Jerusalem",Jamaica:"America/Jamaica",Japan:"Asia/Tokyo",Kwajalein:"Pacific/Kwajalein",Libya:"Africa/Tripoli","Mexico/BajaNorte":"America/Tijuana","Mexico/BajaSur":"America/Mazatlan","Mexico/General":"America/Mexico_City",NZ:"Pacific/Auckland","NZ-CHAT":"Pacific/Chatham",Navajo:"America/Denver",PRC:"Asia/Shanghai","Pacific/Johnston":"Pacific/Honolulu","Pacific/Midway":"Pacific/Pago_Pago","Pacific/Ponape":"Pacific/Pohnpei","Pacific/Samoa":"Pacific/Pago_Pago","Pacific/Truk":"Pacific/Chuuk","Pacific/Yap":"Pacific/Chuuk",Poland:"Europe/Warsaw",Portugal:"Europe/Lisbon",ROC:"Asia/Taipei",ROK:"Asia/Seoul",Singapore:"Asia/Singapore",Turkey:"Europe/Istanbul",UCT:"Etc/UTC","US/Alaska":"America/Anchorage","US/Aleutian":"America/Adak","US/Arizona":"America/Phoenix","US/Central":"America/Chicago","US/East-Indiana":"America/Indiana/Indianapolis","US/Eastern":"America/New_York","US/Hawaii":"Pacific/Honolulu","US/Indiana-Starke":"America/Indiana/Knox","US/Michigan":"America/Detroit","US/Mountain":"America/Denver","US/Pacific":"America/Los_Angeles","US/Samoa":"Pacific/Pago_Pago","W-SU":"Europe/Moscow",Zulu:"Etc/UTC"};function Qn(s,$){return s===$||s===yi[$]}const hi={props:{items:{type:Array,required:!0},command:{type:Function,required:!0}},data(){return{selectedIndex:0}},watch:{items(){this.selectedIndex=0},selectedIndex(){nl(()=>{this.scrollToSelected()})}},created(){},methods:{onKeyDown({event:s}){return s.key==="ArrowUp"?(this.upHandler(),!0):s.key==="ArrowDown"?(this.downHandler(),!0):s.key==="Enter"?(s.stopPropagation(),this.enterHandler(s),!0):s.key==="Tab"?(this.selectItem(this.selectedIndex),!0):(s.key==="}"&&setTimeout(()=>{this.selectItem(this.selectedIndex)},250),!1)},scrollToSelected(){const s=this.$el.querySelector(".is-selected");s&&s.scrollIntoView({block:"nearest"})},upHandler(){this.selectedIndex=(this.selectedIndex+this.items.length-1)%this.items.length},downHandler(){this.selectedIndex=(this.selectedIndex+1)%this.items.length},enterHandler(s){this.selectItem(this.selectedIndex,s)},selectItem(s,$){const p=this.items[s];p&&this.command({id:p.title})}}},bi=["onClick"],wi={key:1,class:"px-4"};function xi(s,$,p,D,t,i){const y=dt;return l(),r("div",{class:"w-64 bg-white scroll-smooth nc-mention-list nc-scrollbar-thin border-1 border-gray-200 rounded-lg max-h-64 !py-2 px-2 shadow-lg",onMousedown:$[0]||($[0]=he(()=>{},["stop"]))},[p.items.length?(l(!0),r(Y,{key:0},be(p.items,(u,h)=>(l(),r("div",{key:h,class:ae([{"is-selected":h===t.selectedIndex},"py-2 flex hover:bg-gray-100 rounded-md transition-all cursor-pointer items-center gap-2 text-gray-800 pl-4"]),onClick:x=>i.selectItem(h,x)},[u!=null&&u.uidt?(l(),d(_e(("getUIDTIcon"in s?s.getUIDTIcon:e(Nl))(u.uidt)),{key:0,class:"flex-none w-3.5 h-3.5"})):_("",!0),o(y,{class:"truncate","show-on-truncate-only":"","tooltip-style":{zIndex:"10000"}},{title:n(()=>[E(v((u==null?void 0:u.title)||""),1)]),default:n(()=>[E(" "+v((u==null?void 0:u.title)||""),1)]),_:2},1024)],10,bi))),128)):(l(),r("div",wi,"No field available"))],32)}const ki=Ze(hi,[["render",xi],["__scopeId","data-v-d01525a6"]]),$i={class:"flex item-center gap-2"},Ci={class:"flex flex-row gap-x-2 mt-2.5 pt-2.5 justify-end"},Ti=Ue({__name:"UpdateConfirm",props:{visible:{type:Boolean},saving:{type:Boolean}},emits:["submit","cancel","update:visible"],setup(s,{emit:$}){const p=s,D=$,t=qe(p,"visible",D);return(i,y)=>{const u=Ye,h=Pt,x=gn;return l(),d(x,{visible:e(t),"onUpdate:visible":y[3]||(y[3]=I=>se(t)?t.value=I:null),size:"small","show-separator":!1,centered:!1},{header:n(()=>y[4]||(y[4]=[a("div",{class:"flex flex-row items-center gap-x-2"},"Field Type Change",-1)])),default:n(()=>[a("div",{class:"flex flex-col",onClick:y[2]||(y[2]=he(()=>{},["stop"]))},[a("div",{class:ae(["text-gray-800",{"mb-3":i.$slots["entity-preview"]}])},[a("div",$i,[o(u,{id:"nc-selected-item-icon",icon:"alertTriangle",class:"h-10 w-10 text-yellow-500"}),y[5]||(y[5]=E(" This action cannot be undone. Converting data types may result in data loss. Proceed with caution! "))])],2),Il(i.$slots,"entity-preview"),a("div",Ci,[o(h,{size:"small",type:"secondary",onClick:y[0]||(y[0]=I=>t.value=!1)},{default:n(()=>[E(v(i.$t("general.cancel")),1)]),_:1}),o(h,{key:"submit",autofocus:"",size:"small",type:"primary","html-type":"submit",loading:i.saving,"data-testid":"nc-delete-modal-delete-btn",onClick:y[1]||(y[1]=I=>D("submit"))},{loading:n(()=>y[6]||(y[6]=[E(" Saving... ")])),default:n(()=>[y[7]||(y[7]=E(" Update "))]),_:1,__:[7]},8,["loading"])])])]),_:3},8,["visible"])}}}),Ii=Object.assign(Ti,{__name:"DlgColumnUpdateConfirm"}),Si=["onKeydown"],Ai={class:"nc-column-list-wrapper flex-col w-full max-h-[290px] nc-scrollbar-thin !overflow-y-auto px-2"},Oi={key:0,class:"px-2 py-6 text-gray-500 flex flex-col items-center gap-6"},Li=["data-testid","onClick"],Ei={class:"flex flex-1 gap-2 items-center"},Mi={key:0,class:"flex-1 flex"},Di={key:1,class:"!text-xs !text-gray-300"},Ui={key:2,class:"text-sm text-nc-content-purple-dark bg-purple-50 px-2 rounded-md"},Ri=Ue({__name:"UITypesOptionsWithSearch",props:{options:{},extraIcons:{}},emits:["selected"],setup(s,{emit:$}){const p=s,D=$,{options:t}=Tt(p),i=U(""),{isMetaReadOnly:y}=jl(),u=U({}),h=ee(()=>(u.value={},(t.value||[]).filter(O=>Vl([O.name,Wt[O.name]],i.value)?!0:Vl([...eo[O.name]||[]],i.value,k=>{k&&(u.value[O.name]=`Matched by keyword: ${k}`)})))),x=U(),I=U(-1),S=O=>y.value&&!Cl.includes(O),P=O=>{!O||S(O)||D("selected",O)},C=()=>{const O=document.querySelector(".nc-column-list-option-active");O&&setTimeout(()=>{O==null||O.scrollIntoView({behavior:"smooth",block:"center"})},50)},f=()=>{I.value=Math.min(I.value+1,h.value.length-1),C()},c=()=>{I.value=Math.max(I.value-1,0),C()},z=()=>{(h.value[I.value]||h.value[0])&&P(h.value[I.value].name)};$t(()=>{i.value="",I.value=t.value.findIndex(O=>O.name===B.SingleLineText)});const{isSystem:b}=_t();return(O,k)=>{const Z=Ye,K=Wl,j=dt,Q=Ks;return l(),r("div",{class:"flex-1 border-1 border-gray-200 rounded-lg flex flex-col pb-2","data-testid":"nc-column-uitypes-options-list-wrapper",onKeydown:[xt(he(f,["prevent"]),["arrow-down"]),xt(he(c,["prevent"]),["arrow-up"]),k[3]||(k[3]=xt(he(X=>P(e(h)[e(I)].name),["prevent"]),["enter"]))]},[a("div",{class:"w-full mb-2 !border-b-1",onClick:k[2]||(k[2]=he(()=>{},["stop"]))},[o(K,{ref_key:"inputRef",ref:x,value:e(i),"onUpdate:value":k[0]||(k[0]=X=>se(i)?i.value=X:null),placeholder:`${O.$t("general.search")} ${O.$t("labels.columnType").toLowerCase()}`,class:"nc-column-type-search-input nc-toolbar-dropdown-search-field-input !border-none !shadow-none !py-2 !rounded-t-lg",disabled:e(b),onKeydown:xt(he(z,["stop"]),["enter"]),onChange:k[1]||(k[1]=X=>I.value=0)},{prefix:n(()=>[o(Z,{icon:"search",class:"nc-search-icon h-4 w-4 mr-1"})]),_:1},8,["value","placeholder","disabled","onKeydown"])]),a("div",Ai,[e(h).length?_("",!0):(l(),r("div",Oi,[k[4]||(k[4]=a("img",{src:to,class:"!w-[164px] flex-none",alt:"No search results found"},null,-1)),E(" "+v(e(t).length?O.$t("title.noResultsMatchedYourSearch"):"The list is empty"),1)])),(l(!0),r(Y,null,be(e(h),(X,oe)=>(l(),d(Q,{key:oe,message:O.$t("tooltip.typeNotAllowed"),enabled:S(X.name)},{default:n(()=>[a("div",{class:ae(["flex w-full py-2 items-center justify-between px-2 rounded-md",[`nc-column-list-option-${oe}`,{"hover:bg-gray-100 cursor-pointer":!S(X.name),"bg-gray-100 nc-column-list-option-active":e(I)===oe&&!S(X.name),"!text-gray-400 cursor-not-allowed":S(X.name),"!text-nc-content-purple-dark":X.name==="AIButton"||X.name==="AIPrompt"}]]),"data-testid":X.name,onClick:W=>P(X.name)},[a("div",Ei,[(l(),d(_e(X.icon),{class:ae(["w-4 h-4",S(X.name)?"!text-gray-400":"text-gray-700"])},null,8,["class"])),a("div",{class:ae(["text-sm",{"flex-1":!e(u)[X.name]}])},v(e(Wt)[X.name]),3),e(u)[X.name]?(l(),r("div",Mi,[o(j,{title:e(u)[X.name],class:"flex cursor-help"},{default:n(()=>[o(Z,{icon:"info",class:"flex-none h-3.5 w-3.5 text-nc-content-gray-muted"})]),_:2},1032,["title"])])):_("",!0),X.deprecated?(l(),r("span",Di,"("+v(O.$t("general.deprecated"))+")",1)):_("",!0),X.isNew?(l(),r("span",Ui,v(O.$t("general.new")),1)):_("",!0)]),O.extraIcons&&O.extraIcons[X.name]?(l(),d(Z,{key:0,class:"!text-gray-500",icon:O.extraIcons[X.name]},null,8,["icon"])):_("",!0)],10,Li)]),_:2},1032,["message","enabled"]))),128))])],40,Si)}}}),Pi=Object.assign(Ri,{__name:"SmartsheetColumnUITypesOptionsWithSearch"}),Fi=Object.keys(Tl),Bi={base:"vs",inherit:!0,rules:[{token:"string",foreground:"#007b77",fontStyle:"bold"},{token:"keyword",foreground:"#00921d",fontStyle:"bold"},{token:"number",foreground:"#9c6200",fontStyle:"bold"},{token:"operator",foreground:"#000000"},{token:"identifier",foreground:"#8541f9",fontStyle:"bold"},{token:"delimiter.parenthesis",foreground:"#333333",fontStyle:"bold"},{token:"delimiter.brace",foreground:"#8541f9",fontStyle:"bold"},{token:"invalid",foreground:"#000000"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editorCursor.foreground":"#3366FF","editor.selectionBackground":"#3366FF50",focusBorder:"#ffffff"}},Ni=s=>(s=s.map(p=>`{${p}}`),{defaultToken:"invalid",keywords:Fi,identifiers:s,brackets:[{open:"(",close:")",token:"delimiter.parenthesis"},{open:"{",close:"}",token:"delimiter.brace"}],tokenizer:{root:[[/"/,{token:"string.quote",bracket:"@open",next:"@dblString"}],[/'/,{token:"string.quote",bracket:"@open",next:"@sglString"}],[new RegExp(`\\{(${s.map(p=>p.replace(/^\{([\s\S]+)\}$/,"$1").replace(/[.*+?^${}()|[\]\\-]/g,"\\$&")).join("|")})\\}`),{cases:{"@identifiers":"identifier","@default":"invalid"}}],[/[a-zA-Z_]\w*/,{cases:{"@keywords":"keyword","@default":"invalid"}}],[/\d+/,"number"],[/[-+/*=<>!]+/,"operator"],[/[{}()]/,"@brackets"],[/[ \t\r\n]+/,"white"]],dblString:[[/[^\\"]+/,"string"],[/\\./,"string.escape"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],sglString:[[/[^\\']+/,"string"],[/\\./,"string.escape"],[/'/,{token:"string.quote",bracket:"@close",next:"@pop"}]]}}),Vi={brackets:[["{","}"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},vl={name:"formula",theme:Bi,generateLanguageDefinition:Ni,languageConfiguration:Vi},zi=Object.keys(Tl);function Zn(s,$){let p=!1,D=!1,t=!1;for(let i=0;i<$;i++){const y=s[i];if(t){t=!1;continue}if(y==="\\"){t=!0;continue}y==="'"&&!D?p=!p:y==='"'&&!p&&(D=!D)}return D||p}class ji{constructor(){un(this,"trie");un(this,"suggestions");this.trie={},this.suggestions=[]}newNode(){return{value:[],isLeaf:!1,children:{}}}add($){Object.keys(this.trie).length===0&&(this.trie=this.newNode());let p=this.trie;for(const D of $.text.toLowerCase())D in p.children||(p.children[D]=this.newNode()),p=p.children[D];p.value=p.value||[],p.value.push($),p.isLeaf=!0}find($){Object.keys(this.trie).length===0&&(this.trie=this.newNode());let p=this.trie;for(const D of $)if(D in p.children)p=p.children[D];else return null;return p}traverse($){$.isLeaf&&this.suggestions.push(...$.value);for(const p in $.children)this.traverse($.children[p])}complete($,p=null){this.suggestions=[];const D=this.find($.toLowerCase());if(!D||Object.keys(D).length===0)return this.suggestions;this.suggestions.push(...D.value);const t=D.children;let i=0;for(const y in t)if(this.traverse(t[y]),i++,p&&i===p)break;return this.suggestions}}const Wi={class:"pr-3"},qi={class:"flex flex-row w-full justify-between pb-2 border-b-1"},Gi={class:"flex items-center gap-x-1 font-semibold text-lg text-gray-600"},Hi={class:"flex flex-col max-h-120 nc-scrollbar-thin pr-2"},Ki={class:"flex mt-3 text-[13px] leading-6"},Yi={class:"bg-white rounded-md py-1 text-[13px] mono-font leading-6 px-2 border-1"},Xi={class:"flex flex-row mt-3 mb-3 justify-end pr-3"},Ji=["href"],Qi={key:0,class:"w-full flex justify-end mt-2"},Zi={class:"flex gap-2 items-center"},er={key:0,class:"text-[13px] font-semibold"},tr={key:1,class:"text-[13px] font-semibold"},lr={key:1,class:"prompt-wrapper"},nr={class:"prompt-input-wrapper w-full flex"},or={class:"flex items-center gap-2 pl-3 pr-1 py-1"},ar={class:"flex items-center gap-2"},sr={key:0,class:"border-b-1 bg-gray-50 px-3 py-1 uppercase text-gray-600 text-xs font-semibold sticky top-0 z-10"},ir={key:0,class:"ml-5 text-gray-400 text-xs"},rr={key:0,class:"border-b-1 bg-gray-50 px-3 py-1 uppercase text-gray-600 text-xs font-semibold sticky top-0 z-10"},ur={class:"flex items-center gap-x-1 justify-between"},cr={class:"flex items-center gap-x-1 rounded-md px-1 h-5"},dr={class:"text-small leading-[18px] text-gray-800 font-weight-500"},pr=Ue({__name:"FormulaInputHelper",props:{error:{type:Boolean},value:{},label:{},editorHeight:{},suggestionHeight:{default:"large"},disableSuggestionHeaders:{type:Boolean,default:!1},disabledFormulas:{default:()=>[]}},emits:["update:value"],setup(s,{emit:$}){const p=s,D=$,{error:t,suggestionHeight:i,editorHeight:y}=Tt(p),u=qe(p,"value",D),{$e:h}=yl(),x=[B.QrCode,B.Barcode,B.Button],{sqlUi:I,column:S,fromTableExplorer:P,validateInfos:C}=_t(),{isAiModeFieldModal:f}=ko(),c=It(Lt,U()),z=ee(()=>{var H,le;return((le=(H=c==null?void 0:c.value)==null?void 0:H.columns)==null?void 0:le.filter(xe=>!(x.includes(xe.uidt)||yn(xe,c.value))))||[]}),b=U(),O=U(0),k=U(!0),Z=zi,K=["+","-","*","/",">","<","==","<=",">=","!=","&"],j=U(!1),Q=U([]),X=U([]),oe=U(""),W=U(0),Te={column:0,function:1,op:2},m=ee(()=>{const H=I.value.getUnsupportedFnList();return[...Z.map(le=>({text:`${le}()`,type:"function",description:Tl[le].description,syntax:Tl[le].syntax,examples:Tl[le].examples,docsUrl:Tl[le].docsUrl,unsupported:H.includes(le)})),...z.value.filter(le=>{var xe;return le.uidt===B.LinkToAnotherRecord&&le.system?!1:S?((xe=S.value)==null?void 0:xe.id)!==le.id:!0}).map(le=>({text:le.title,type:"column",icon:Nl(le.uidt)?nn(Nl(le.uidt)):void 0,uidt:le.uidt})),...K.map(le=>({text:le,type:"op"}))].sort((le,xe)=>le.unsupported&&!xe.unsupported?1:!le.unsupported&&xe.unsupported?-1:0).filter(le=>!p.disabledFormulas.includes(le.text))}),ge=U(m.value),ve=ee(()=>{const H=new ji;for(const le of m.value)H.add(le);return H}),$e=ee(()=>ge.value.filter(H=>H&&H.type!=="column")),pe=ee(()=>ge.value.filter(H=>H&&H.type==="column")),N=U();let A;function q(){const H=A.getModel(),le=A.getPosition();if(!H||!le)return null;const xe=H.getWordAtPosition(le);return xe==null?void 0:xe.word}const ye=zl(function(){ke()},250);$t(async()=>{if(N.value){const H=Zl.createModel(u.value,"formula");cn.register({id:vl.name}),Zl.defineTheme(vl.name,vl.theme),cn.setMonarchTokensProvider(vl.name,vl.generateLanguageDefinition(z.value.map(le=>le.title.replace(/@/g,"")))),cn.setLanguageConfiguration(vl.name,vl.languageConfiguration),Zl.addKeybindingRules([{keybinding:Wn.DownArrow,when:"editorTextFocus"},{keybinding:Wn.UpArrow,when:"editorTextFocus"}]),A=Zl.create(N.value,{model:H,contextmenu:!1,theme:"formula",selectOnLineNumbers:!1,language:"formula",roundedSelection:!1,scrollBeyondLastLine:!1,lineNumbers:"off",glyphMargin:!1,folding:!1,wordWrap:"on",wrappingStrategy:"advanced","bracketPairColorization.enabled":!1,padding:{top:8,bottom:8},lineDecorationsWidth:8,lineNumbersMinChars:0,renderLineHighlight:"none",renderIndentGuides:!1,scrollbar:{horizontal:"hidden"},tabSize:2,automaticLayout:!1,overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,matchBrackets:"never",minimap:{enabled:!1}}),A.layout({width:339,height:120}),A.onDidChangeModelContent(async()=>{u.value=A.getValue(),await ye()}),A.onDidChangeCursorPosition(()=>{const le=A.getPosition(),xe=A.getModel();if(!le||!xe)return;const Ee=xe.getValue(),ut=xe.getOffsetAt(le);Zn(Ee,ut)?(j.value=!1,ge.value=[]):ke();const ft=((De,je)=>{const lt=new RegExp(`\\b(?<!['"])(\\w+)\\s*\\(`,"g"),gt=[];let F=!1,ie="";const Ie=new Array(De.length).fill(!1);for(let G=0;G<De.length;G++)(De[G]==='"'||De[G]==="'")&&(G===0||De[G-1]!=="\\")&&(F?De[G]===ie&&(F=!1):(F=!0,De[G]&&(ie=De[G]))),Ie[G]=F;let w;for(;(w=lt.exec(De))!==null;){if(Ie[w.index])continue;if(w.index>je)break;const G={name:w[1],start:w.index,end:lt.lastIndex};let Ce=1,M=-1;for(let Se=lt.lastIndex;Se<De.length;Se++)if(!Ie[Se]){if(De[Se]==="(")Ce++;else if(De[Se]===")"&&(Ce--,Ce===0)){G.end=Se+1;break}M===-1&&["("].includes(De[Se])||M!==-1&&["("].includes(De[Se])?M=Se:M!==-1&&[")"].includes(De[Se])&&(M=-1),Se===De.length-1&&Ce>0&&(G.end=Se+1)}Ce>0&&je>=lt.lastIndex?(G.end=Math.max(G.end,De.length),gt.push(G)):G.start<=je&&G.end>=je&&gt.push(G)}const g=gt.filter(G=>G.start<=je&&G.end>=je);return g.length>0?g[g.length-1].name:null})(Ee,ut);b.value=m.value.find(De=>De.text===`${ft}()`)||void 0}),A.focus()}}),Sa(N,H=>{const le=H[0],{height:xe}=le.contentRect;A.layout({width:339,height:xe})});function fe(H,le,xe=!1){const Ee=H.getPosition();if(!Ee)return;const ut=new qn(Ee.lineNumber,Ee.column,Ee.lineNumber,Ee.column);if(H.executeEdits("",[{range:ut,text:le,forceMoveMarkers:!0}]),!xe){const tt=new La(Ee.lineNumber,Ee.column+le.length-1);H.setPosition(tt)}H.focus()}function Oe(H){var ft;const le=((ft=oe.value)==null?void 0:ft.length)||0;if(!(H!=null&&H.text))return;const xe=H.text,Ee=A.getPosition();if(!Ee)return;const ut=Math.max(1,Ee.column-le),tt=new qn(Ee.lineNumber,ut,Ee.lineNumber,Ee.column);A.executeEdits("",[{range:tt,text:"",forceMoveMarkers:!0}]),H.type==="function"?fe(A,xe):H.type==="column"?fe(A,`{${xe}}`,!0):fe(A,xe,!0),j.value=!1,oe.value="",H.type==="function"||H.type==="op"?ge.value=m.value.filter(De=>De.type==="column"):ge.value=m.value}function V(){var tt;const H=A==null?void 0:A.getPosition();if(!H||!A)return!1;const le=(tt=A.getModel())==null?void 0:tt.getLineContent(H.lineNumber);if(!le)return!1;const xe=le.substring(0,H.column-1),Ee=(xe.match(/\(/g)||[]).length,ut=(xe.match(/\)/g)||[]).length;return Ee>ut}const J=H=>{var le;return((le=b.value)==null?void 0:le.text)===H.text};function ke(){var ft,De;if(!A)return;const H=A.getModel(),le=A.getPosition();if(!H||!le)return;const xe=H.getValue(),Ee=H.getOffsetAt(le);if(xe.length===0&&((ft=C.formula_raw)==null?void 0:ft.validateStatus)==="error"&&(C.formula_raw.validateStatus="success",C.formula_raw.help=[]),Zn(xe,Ee)){j.value=!1,ge.value=[];return}O.value=V()?-1:1,W.value=0,ge.value=[];const tt=(q()??"").split(/\W+/);oe.value=tt.pop()||"",ge.value=(De=ve.value.complete(oe.value))==null?void 0:De.sort((je,lt)=>Te[je.type]-Te[lt.type]),V()?(ge.value=ge.value.sort((je,lt)=>je.type==="column"?-1:lt.type==="column"?1:0),W.value=0,O.value=-1):k.value||(k.value=!0),j.value=!!ge.value.length}function Pe(){if(ge.value&&W.value>-1&&W.value<ge.value.length)if(W.value<$e.value.length){if($e.value[W.value].unsupported)return;Oe($e.value[W.value])}else{const H=W.value-$e.value.length;Oe(pe.value[H])}W.value=0}function Le(){if(ge.value){if(W.value=--W.value>-1?W.value:ge.value.length-1,W.value<$e.value.length)b.value=$e.value[W.value];else{const H=W.value-$e.value.length;b.value=pe.value[H]}we()}}function Ge(){if(ge.value){if(W.value=++W.value%ge.value.length,W.value<$e.value.length)b.value=$e.value[W.value];else{const H=W.value-$e.value.length;b.value=pe.value[H]}we()}}function we(){nl(()=>{if(X.value[W.value])try{X.value[W.value].$el.scrollIntoView({block:"center"})}catch{}})}const He=U({top:"0px",left:"344px"});$t(()=>{Aa.plugins.register(Oa),hn(()=>N.value).toBeTruthy().then(()=>{setTimeout(()=>{var le;const H=(le=N.value)==null?void 0:le.getBoundingClientRect();H&&(He.value.top=`${H.top-75}px`,P!=null&&P.value||H.left>352?He.value.left=`${H.left-344}px`:He.value.left=`${H.right+8}px`)},250)})});const pt=H=>{switch(H.stopPropagation(),H.key){case"ArrowUp":{H.preventDefault(),Le();break}case"ArrowDown":{H.preventDefault(),Ge();break}case"Enter":{H.preventDefault(),Pe();break}}},{isAiFeaturesEnabled:ze,aiIntegrationAvailable:et,aiLoading:Xe,predictFormula:me,repairFormula:Je}=Al(),re=U("none"),R=U(""),Ke=U(""),te=U(null),ue=async()=>{var le;if(!((le=R.value)!=null&&le.trim()))return;te.value="promptAI",h("a:column:ai:formula:predict-from-prompt",{prompt:R.value});const H=await me(R.value,u.value);H&&(A.setValue(H),Ke.value=R.value)},Ae=async()=>{var le;te.value="repairFormulaAI",h("a:column:ai:formula:repair");const H=await Je(u.value,(le=C==null?void 0:C.formula_raw)==null?void 0:le.help.join(" | "));H&&A.setValue(H)},Me=async()=>{var H;h("c:column:ai:formula:enable"),((H=C==null?void 0:C.formula_raw)==null?void 0:H.validateStatus)==="error"?await Ae():re.value="prompt"};return(H,le)=>{var F,ie,Ie;const xe=Ye,Ee=Pt,ut=rt,tt=bn,ft=Ln,De=wn,je=ei,lt=Zs,gt=Qs;return l(),r(Y,null,[e(b)&&!e(b).unsupported&&e(b).type==="function"?(l(),r("div",{key:0,class:"w-84 fixed bg-white z-11 pl-3 pt-3 border-1 shadow-md rounded-xl",style:sl({left:e(He).left,top:e(He).top})},[a("div",Wi,[a("div",qi,[a("div",Gi,[(l(),d(_e(("iconMap"in H?H.iconMap:e(Re)).function),{class:"text-lg"})),E(" "+v(e(b).text),1)]),o(Ee,{type:"text",size:"small",class:"!h-7 !w-7 !min-w-0",onClick:le[0]||(le[0]=w=>b.value=void 0)},{default:n(()=>[o(xe,{icon:"close"})]),_:1})])]),a("div",Hi,[a("div",Ki,v(e(b).description),1),le[2]||(le[2]=a("div",{class:"text-gray-500 uppercase text-[11px] mt-3 mb-2"},"Syntax",-1)),a("div",Yi,v(e(b).syntax),1),le[3]||(le[3]=a("div",{class:"text-gray-500 uppercase text-[11px] mt-3 mb-2"},"Examples",-1)),(l(!0),r(Y,null,be(e(b).examples,(w,g)=>(l(),r("div",{key:w,class:ae(["bg-gray-100 mono-font text-[13px] leading-6 py-1 px-2",{"border-t-1  border-gray-200":g!==0,"rounded-b-md":g===e(b).examples.length-1&&e(b).examples.length!==1,"rounded-t-md":g===0&&e(b).examples.length!==1,"rounded-md":e(b).examples.length===1}])},v(w),3))),128))]),a("div",Xi,[e(b).docsUrl?(l(),r("a",{key:0,target:"_blank",rel:"noopener noreferrer",href:e(b).docsUrl},[o(Ee,{type:"text",size:"small",class:"!text-gray-400 !hover:text-gray-700 !text-xs"},{default:n(()=>[le[4]||(le[4]=E("View in Docs ")),o(xe,{icon:"openInNew",class:"ml-1"})]),_:1,__:[4]})],8,Ji)):_("",!0)])],4)):_("",!0),o(ut,st({label:H.label,required:""},e(C).formula_raw),{default:n(()=>[a("div",{ref_key:"monacoRoot",ref:N,style:sl({height:e(y)??"100px"}),class:ae([{"!border-red-500 formula-error":e(t),"!focus-within:border-brand-500 shadow-default hover:shadow-hover formula-success":!e(t),"bg-white":e(f)},"formula-monaco transition-colors duration-300"]),onKeydown:he(pt,["stop"])},null,38)]),_:1},16,["label"]),e(ze)?(l(),r(Y,{key:1},[e(re)==="none"?(l(),r("div",Qi,[o(Ee,{size:"small",type:"text",loading:e(Xe),onClick:Me},{icon:n(()=>[o(xe,{icon:"ncAutoAwesome",class:"text-nc-content-purple-medium h-4 w-4"})]),loadingIcon:n(()=>[o(tt,{class:"!text-nc-content-purple-medium",size:"regular"})]),default:n(()=>{var w,g;return[a("div",Zi,[((g=(w=e(C))==null?void 0:w.formula_raw)==null?void 0:g.validateStatus)==="error"?(l(),r("span",er,"Fix Formula")):(l(),r("span",tr,"Formula Helper"))])]}),_:1},8,["loading"])])):e(re)==="prompt"?(l(),r(Y,{key:1},[e(et)?(l(),r("div",lr,[le[9]||(le[9]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"9",viewBox:"0 0 18 9",fill:"none",class:"nc-polygon-2"},[a("path",{d:"M1.51476 8.5L9 0.721111L16.4852 8.5H1.51476Z",fill:"white",stroke:"#e5d4f5"})],-1)),a("div",nr,[le[8]||(le[8]=a("div",{class:"nc-triangle-bottom-bar"},null,-1)),a("div",or,[le[7]||(le[7]=a("div",{class:"flex-1 text-small leading-[18px] font-bold text-nc-content-gray-subtle2"},"Prompt",-1)),a("div",ar,[((ie=(F=e(C))==null?void 0:F.formula_raw)==null?void 0:ie.validateStatus)==="error"?(l(),d(Ee,{key:0,type:"secondary",size:"xs",theme:"ai",bordered:!1,class:"nc-formula-helper-ai-btn !px-2",disabled:e(Xe)&&e(te)==="repairFormulaAI",loading:e(Xe)&&e(te)==="repairFormulaAI",onClick:Ae},{icon:n(()=>[o(xe,{icon:"ncAutoAwesome",class:"!text-current h-4 w-4"})]),loadingIcon:n(()=>[o(tt,{class:"!text-current",size:"regular"})]),default:n(()=>[le[5]||(le[5]=a("div",{class:"flex items-center gap-1"},[a("span",{class:"text-[13px] font-semibold text-purple-400"},"Repair")],-1))]),_:1,__:[5]},8,["disabled","loading"])):_("",!0),o(Ee,{type:"secondary",size:"xs",theme:"ai",bordered:!1,class:"nc-formula-helper-ai-btn !px-2",loading:e(Xe)&&e(te)==="promptAI",disabled:!((Ie=e(R))!=null&&Ie.trim())||!!e(R).trim()&&e(R).trim()===e(Ke).trim()||e(Xe)&&e(te)==="promptAI",onClick:ue},{icon:n(()=>[o(xe,{icon:"ncAutoAwesome",class:"!text-current h-4 w-4"})]),loadingIcon:n(()=>[o(tt,{class:"!text-current",size:"regular"})]),default:n(()=>[le[6]||(le[6]=a("div",{class:"flex items-center gap-1"},"Generate",-1))]),_:1,__:[6]},8,["loading","disabled"])])]),o(De,{value:e(R),"onUpdate:value":le[1]||(le[1]=w=>se(R)?R.value=w:null),class:"nc-ai-formula-helper-input nc-input-shadow nc-ai-input nc-scrollbar-thin !min-h-[80px]",placeholder:`Enter prompt to ${e(u)?"modify":"generate"} formula`},null,8,["value","placeholder"])])])):(l(),d(ft,{key:0,class:"mt-4"}))],64)):_("",!0)],64)):_("",!0),a("div",{class:ae([{"h-[250px]":e(i)==="large","h-[150px]":e(i)==="medium","h-[125px]":e(i)==="small","bg-white":e(f)},"overflow-auto flex flex-col nc-suggestion-list nc-scrollbar-thin border-1 border-gray-200 rounded-lg mt-4"])},[e($e)&&e(k)?(l(),r("div",{key:0,style:sl({order:e(O)===-1?2:1})},[H.disableSuggestionHeaders?_("",!0):(l(),r("div",sr," Formulas ")),o(gt,{"data-source":e($e),locale:{emptyText:H.$t("msg.formula.noSuggestedFormulaFound")}},{renderItem:n(({item:w,index:g})=>[o(lt,{ref:G=>{e(X)[g]=G},class:ae(["cursor-pointer !overflow-hidden hover:bg-gray-50",{"!bg-gray-100":J(w),"cursor-not-allowed":w.unsupported}]),onClick:he(G=>!w.unsupported&&Oe(w),["prevent","stop"]),onMouseenter:G=>b.value=w},{default:n(()=>[o(je,null,{title:n(()=>[a("div",{class:ae(["flex items-center gap-x-1",{"text-gray-400":w.unsupported}])},[w.type==="function"?(l(),d(_e(("iconMap"in H?H.iconMap:e(Re)).function),{key:0,class:"w-4 h-4 !text-gray-600"})):_("",!0),w.type==="op"?(l(),d(_e(("iconMap"in H?H.iconMap:e(Re)).calculator),{key:1,class:"w-4 h-4 !text-gray-600"})):_("",!0),w.type==="column"?(l(),d(_e(w.icon),{key:2,class:"w-4 h-4 !text-gray-600"})):_("",!0),a("span",{class:ae(["text-small leading-[18px]",{"text-gray-800":!w.unsupported}])},v(w.text),3)],2),w.unsupported?(l(),r("div",ir,v(H.$t("msg.formulaNotSupported")),1)):_("",!0)]),_:2},1024)]),_:2},1032,["class","onClick","onMouseenter"])]),_:1},8,["data-source","locale"])],4)):_("",!0),e(pe)?(l(),r("div",{key:1,style:sl({order:e(O)===1?2:1})},[H.disableSuggestionHeaders?_("",!0):(l(),r("div",rr," Fields ")),o(gt,{ref_key:"variableListRef",ref:Q,"data-source":e(pe),locale:{emptyText:H.$t("msg.formula.noSuggestedFieldFound")},class:"!overflow-hidden"},{renderItem:n(({item:w,index:g})=>[o(lt,{ref:G=>{e(X)[g+e($e).length]=G},class:ae([{"!bg-gray-100":J(w)},"cursor-pointer hover:bg-gray-50"]),onClick:he(G=>Oe(w),["prevent","stop"])},{default:n(()=>[o(je,{class:"nc-variable-list-item"},{title:n(()=>[a("div",ur,[a("div",cr,[(l(),d(_e(w.icon),{class:"w-4 h-4 !text-gray-600"})),a("span",dr,v(w.text),1)]),o(Ee,{size:"small",type:"text",class:"nc-variable-list-item-use-field-btn !h-7 px-3 !text-small invisible"},{default:n(()=>[E(v(H.$t("general.use"))+" "+v(H.$t("objects.field").toLowerCase()),1)]),_:1})])]),_:2},1024)]),_:2},1032,["class","onClick"])]),_:1},8,["data-source","locale"])],4)):_("",!0)],2)],64)}}}),Lo=Object.assign(Ze(pr,[["__scopeId","data-v-91674bdc"]]),{__name:"SmartsheetColumnFormulaInputHelper"}),Rn=s=>({0:s("placeholder.decimal0"),1:s("placeholder.decimal1"),2:s("placeholder.decimal2"),3:s("placeholder.decimal3"),4:s("placeholder.decimal4"),5:s("placeholder.decimal5"),6:s("placeholder.decimal6"),7:s("placeholder.decimal7"),8:s("placeholder.decimal8")}),Eo=["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYR","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUP","CVE","CYP","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHC","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MTL","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","ROL","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDD","SEK","SGD","SHP","SIT","SKK","SLL","SOS","SRD","STD","SYP","SZL","THB","TJS","TMM","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","USS","UYU","UZS","VEB","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XFO","XFU","XOF","XPD","XPF","XPT","XTS","XXX","YER","ZAR","ZMK","ZWD"];function mr(s){return Eo.includes(s)}async function fr(){const{all:s}=await Ne(async()=>{const{all:$}=await import("./Dh4tf4Xa.js");return{all:$}},[],import.meta.url);return s.filter($=>Mo($.tag)).map($=>({text:`${$.name} (${$.tag})`,value:$.tag}))}function Mo(s){try{return Intl.NumberFormat.supportedLocalesOf(s).length>0}catch{return!1}}const vr={class:"flex gap-2 w-full truncate items-center"},_r={class:"flex gap-2 w-full justify-between items-center"},gr={class:"flex gap-2 w-full justify-between items-center"},yr={class:"text-[#FB8C00]"},hr=Ue({__name:"CurrencyOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:$}){const p=s,D=$,{t}=Et(),i=qe(p,"value",D),y=Rn(t),u={"meta.currency_locale":[{validator:(b,O)=>new Promise((k,Z)=>{if(!Mo(O))return Z(new Error(t("msg.invalidLocale")));k()})}],"meta.currency_code":[{validator:(b,O)=>new Promise((k,Z)=>{if(!mr(O))return Z(new Error(t("msg.invalidCurrencyCode")));k()})}]},{setAdditionalValidations:h,validateInfos:x,isPg:I}=_t();h({...u});const S=Eo||[],P=U([]),C=ee(()=>i.value.dt==="money"),f=ee(()=>C.value&&I.value?t("msg.postgresHasItsOwnCurrencySettings"):"");function c(b,O){return Vl([O.value,O.key],b)}i.value.meta={...Mt.getColumnDefaultMeta(B.Currency),...i.value.meta||{}},fr().then(b=>{P.value.push(...b)});const z=b=>{i.value.dtxs=Math.max(b,i.value.dtxs)};return(b,O)=>{const k=Ye,Z=dt,K=Ct,j=At,Q=rt,X=Gl,oe=ql;return l(),d(oe,{gutter:8},{default:n(()=>[o(X,{span:12},{default:n(()=>[o(Q,st(e(x)["meta.currency_locale"],{label:b.$t("title.currencyLocale")}),{default:n(()=>[o(j,{value:e(i).meta.currency_locale,"onUpdate:value":O[0]||(O[0]=W=>e(i).meta.currency_locale=W),class:"w-52","show-search":"","filter-option":c,disabled:e(C)&&e(I),"dropdown-class-name":"nc-dropdown-currency-cell-locale"},{suffixIcon:n(()=>[o(k,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be(e(P),W=>(l(),d(K,{key:W.text,value:W.value},{default:n(()=>[a("div",vr,[o(Z,{"show-on-truncate-only":"",class:"flex-1 truncate"},{title:n(()=>[E(v(W.text),1)]),default:n(()=>[E(" "+v(W.text),1)]),_:2},1024),e(i).meta.currency_locale===W.value?(l(),d(_e(("iconMap"in b?b.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16,["label"])]),_:1}),o(X,{span:12},{default:n(()=>[o(Q,st(e(x)["meta.currency_code"],{label:b.$t("title.currencyCode")}),{default:n(()=>[o(j,{value:e(i).meta.currency_code,"onUpdate:value":O[1]||(O[1]=W=>e(i).meta.currency_code=W),class:"w-52","show-search":"","filter-option":c,disabled:e(C)&&e(I),"dropdown-class-name":"nc-dropdown-currency-cell-code"},{suffixIcon:n(()=>[o(k,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be(e(S),(W,Te)=>(l(),d(K,{key:Te,value:W},{default:n(()=>[a("div",_r,[E(v(W)+" ",1),e(i).meta.currency_code===W?(l(),d(_e(("iconMap"in b?b.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16,["label"])]),_:1}),o(X,{span:24,class:"mt-4"},{default:n(()=>[o(Q,{label:b.$t("placeholder.precision")},{default:n(()=>{var W,Te;return[(W=e(i).meta)!=null&&W.precision||((Te=e(i).meta)==null?void 0:Te.precision)===0?(l(),d(j,{key:0,value:e(i).meta.precision,"onUpdate:value":O[2]||(O[2]=m=>e(i).meta.precision=m),disabled:e(C)&&e(I),"dropdown-class-name":"nc-dropdown-decimal-format",onChange:z},{suffixIcon:n(()=>[o(k,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be("precisionFormats"in b?b.precisionFormats:e(xn),(m,ge)=>(l(),d(K,{key:ge,value:m},{default:n(()=>[a("div",gr,[E(v(e(y)[m])+" ",1),e(i).meta.precision===m?(l(),d(_e(("iconMap"in b?b.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])):_("",!0)]}),_:1},8,["label"])]),_:1}),e(C)&&e(I)?(l(),d(X,{key:0},{default:n(()=>[a("span",yr,v(e(f)),1)]),_:1})):_("",!0)]),_:1})}}}),Do=Object.assign(hr,{__name:"SmartsheetColumnCurrencyOptions"}),br={class:"flex gap-2 w-full justify-between items-center"},wr={class:"flex items-center gap-1"},xr={class:"text-sm text-gray-800 select-none"},kr=Ue({__name:"DecimalOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:$}){const p=s,D=$,{t}=Et(),i=qe(p,"value",D),y=Rn(t);i.value.meta={...Mt.getColumnDefaultMeta(B.Decimal),...i.value.meta||{}};const u=x=>{i.value.dtxs=Math.max(x,i.value.dtxs)},{isMetaReadOnly:h}=jl();return(x,I)=>{const S=Ye,P=Ct,C=At,f=rt,c=Ft;return l(),r(Y,null,[o(f,{label:x.$t("placeholder.precision")},{default:n(()=>{var z,b;return[(z=e(i).meta)!=null&&z.precision||((b=e(i).meta)==null?void 0:b.precision)===0?(l(),d(C,{key:0,value:e(i).meta.precision,"onUpdate:value":I[0]||(I[0]=O=>e(i).meta.precision=O),disabled:e(h),"dropdown-class-name":"nc-dropdown-decimal-format",onChange:u},{suffixIcon:n(()=>[o(S,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be("precisionFormats"in x?x.precisionFormats:e(xn),(O,k)=>(l(),d(P,{key:k,value:O},{default:n(()=>[a("div",br,[E(v(e(y)[O])+" ",1),e(i).meta.precision===O?(l(),d(_e(("iconMap"in x?x.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])):_("",!0)]}),_:1},8,["label"]),o(f,null,{default:n(()=>[a("div",wr,[e(i).meta?(l(),d(c,{key:0,checked:e(i).meta.isLocaleString,"onUpdate:checked":I[1]||(I[1]=z=>e(i).meta.isLocaleString=z)},{default:n(()=>[a("div",xr,v(x.$t("labels.showThousandsSeparator")),1)]),_:1},8,["checked"])):_("",!0)])]),_:1})],64)}}}),Uo=Object.assign(kr,{__name:"SmartsheetColumnDecimalOptions"}),$r={class:"flex flex-col"},Cr={class:"flex items-center gap-1"},Tr={class:"text-sm text-gray-800 select-none"},Ir=Ue({__name:"PercentOptions",props:{value:{},isEdit:{type:Boolean}},emits:["update:value"],setup(s,{emit:$}){const t=qe(s,"value",$),i={},{setAdditionalValidations:y}=_t();return y({...i}),t.value.meta={...Mt.getColumnDefaultMeta(B.Percent),...t.value.meta||{}},(u,h)=>{const x=Ft,I=rt;return l(),r("div",$r,[o(I,null,{default:n(()=>[a("div",Cr,[e(t).meta?(l(),d(x,{key:0,checked:e(t).meta.is_progress,"onUpdate:checked":h[0]||(h[0]=S=>e(t).meta.is_progress=S)},{default:n(()=>[a("div",Tr,v(u.$t("labels.displayAsProgress")),1)]),_:1},8,["checked"])):_("",!0)])]),_:1})])}}}),Ro=Object.assign(Ir,{__name:"SmartsheetColumnPercentOptions"}),Sr=Ve(()=>Ne(()=>import("./Dl-U6wg9.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(s=>s.default||s)),Ar={class:"flex gap-2 w-full truncate items-center"},Or={class:"flex-1 flex items-center text-gray-700 gap-2 children:h-4 children:w-4"},Lr={class:"flex-1 flex items-center gap-2 children:h-4 children:w-4"},Er={class:"flex gap-2 w-full justify-between items-center nc-dropdown-rating-max-option"},Mr=Ue({__name:"RatingOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:$}){const t=qe(s,"value",$),i=ee({get:()=>t.value.meta.color,set:h=>{t.value.meta.color=h}}),y=U(!1);t.value.meta={...Mt.getColumnDefaultMeta(B.Rating),...t.value.meta||{},icon:Ea(t.value.meta||{})};const u=Dl.findIndex(h=>h.full===t.value.meta.icon.full&&h.empty===t.value.meta.icon.empty);return t.value.meta.iconIdx=u===-1?0:u,it(()=>t.value.meta.iconIdx,h=>{t.value.meta.icon=Dl[h]}),(h,x)=>{const I=Ye,S=Ct,P=At,C=rt,f=Gl,c=Sr,z=al,b=ql;return l(),d(b,{gutter:8},{default:n(()=>[o(f,{span:8},{default:n(()=>[o(C,{label:h.$t("labels.icon")},{default:n(()=>[o(P,{value:e(t).meta.iconIdx,"onUpdate:value":x[0]||(x[0]=O=>e(t).meta.iconIdx=O),class:"w-52","dropdown-class-name":"nc-dropdown-rating-icon"},{suffixIcon:n(()=>[o(I,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be("ratingIconList"in h?h.ratingIconList:e(Dl),(O,k)=>(l(),d(S,{key:k,value:k},{default:n(()=>[a("div",Ar,[a("div",Or,[(l(),d(_e(("getMdiIcon"in h?h.getMdiIcon:e(il))(O.full)))),(l(),d(_e(("getMdiIcon"in h?h.getMdiIcon:e(il))(O.empty))))]),e(t).meta.iconIdx===k?(l(),d(_e(("iconMap"in h?h.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),o(f,{span:8},{default:n(()=>[o(C,{label:h.$t("general.colour")},{default:n(()=>[o(z,{visible:e(y),"onUpdate:visible":x[3]||(x[3]=O=>se(y)?y.value=O:null),placement:"bottom","auto-close":!1,class:"nc-color-picker-dropdown-trigger"},{overlay:n(()=>[a("div",null,[o(c,{modelValue:e(i),"onUpdate:modelValue":x[1]||(x[1]=O=>se(i)?i.value=O:null),"is-open":e(y),onInput:x[2]||(x[2]=O=>e(t).meta.color=O)},null,8,["modelValue","is-open"])])]),default:n(()=>[a("div",{class:ae(["flex-1 border-1 border-gray-300 rounded-lg h-8 px-[11px] flex items-center justify-between transition-all cursor-pointer",{"border-brand-500 shadow-selected":e(y)}])},[a("div",Lr,[(l(),d(_e(("getMdiIcon"in h?h.getMdiIcon:e(il))(("ratingIconList"in h?h.ratingIconList:e(Dl))[e(t).meta.iconIdx].full)),{style:sl({color:e(t).meta.color})},null,8,["style"])),(l(),d(_e(("getMdiIcon"in h?h.getMdiIcon:e(il))(("ratingIconList"in h?h.ratingIconList:e(Dl))[e(t).meta.iconIdx].empty)),{style:sl({color:e(t).meta.color})},null,8,["style"]))]),o(I,{icon:"arrowDown",class:"text-gray-700 h-4 w-4"})],2)]),_:1},8,["visible"])]),_:1},8,["label"])]),_:1}),o(f,{span:8},{default:n(()=>[o(C,{label:h.$t("labels.max")},{default:n(()=>[o(P,{value:e(t).meta.max,"onUpdate:value":x[4]||(x[4]=O=>e(t).meta.max=O),"data-testid":"nc-dropdown-rating-max",class:"w-52","dropdown-class-name":"nc-dropdown-rating-color"},{suffixIcon:n(()=>[o(I,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(),r(Y,null,be([1,2,3,4,5,6,7,8,9,10],(O,k)=>o(S,{key:k,value:O},{default:n(()=>[a("div",Er,[E(v(O)+" ",1),e(t).meta.max===O?(l(),d(_e(("iconMap"in h?h.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1})}}}),Po=Object.assign(Ze(Mr,[["__scopeId","data-v-1d2776db"]]),{__name:"SmartsheetColumnRatingOptions"}),Dr={class:"flex flex-col gap-2"},Ur={class:"flex items-center gap-2 children:flex-1"},Rr=Ue({__name:"TimeOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:$}){const t=qe(s,"value",$);t.value.meta={...Mt.getColumnDefaultMeta(B.Time),...t.value.meta??{}};const{isSystem:i}=_t();return(y,u)=>{const h=Mn,x=En,I=rt;return l(),r("div",Dr,[a("div",Ur,[o(I,null,{default:n(()=>[e(t).meta?(l(),d(x,{key:0,value:e(t).meta.is12hrFormat,"onUpdate:value":u[0]||(u[0]=S=>e(t).meta.is12hrFormat=S),class:"nc-time-form-layout",disabled:e(i)},{default:n(()=>[o(h,{value:!0},{default:n(()=>u[1]||(u[1]=[E("12 Hrs")])),_:1,__:[1]}),o(h,{value:!1},{default:n(()=>u[2]||(u[2]=[E("24 Hrs")])),_:1,__:[2]})]),_:1},8,["value","disabled"])):_("",!0)]),_:1})])])}}}),Fo=Object.assign(Ze(Rr,[["__scopeId","data-v-60c801ce"]]),{__name:"SmartsheetColumnTimeOptions"}),Pr={class:"flex flex-col gap-4"},Fr={class:"flex items-center gap-2 children:flex-1"},Br={class:"flex gap-2 w-full justify-between items-center"},Nr=["data-testid"],Vr={class:"flex items-center gap-1"},zr={class:"text-sm text-gray-800 select-none font-semibold"},jr={class:"flex items-center gap-1"},Wr={class:"text-sm text-gray-800 select-none font-semibold"},qr={class:"flex gap-2 w-full justify-between items-center"},Gr={class:"text-nc-content-gray-muted text-[13px] mr-2"},Hr={class:"flex gap-2 w-full justify-between items-center"},Kr={class:"text-nc-content-gray-muted text-[13px] mr-2"},Yr=Ue({__name:"DateTimeOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:$}){const t=qe(s,"value",$),i=Ma({includeUtc:!0}).sort((f,c)=>f.name.localeCompare(c.name)),y=Intl.DateTimeFormat().resolvedOptions().timeZone,u=i.find(f=>Qn(f.name,y)),h=i.find(f=>f.name==="Etc/UTC"),x=[u,h].filter(f=>f),I=ee(()=>{const f=[];for(const c of i)(u==null?void 0:u.countryCode)===c.countryCode&&!x.find(z=>Qn(z==null?void 0:z.name,c.name))&&f.push(c);return[...x,...f]});t.value.meta={...Mt.getColumnDefaultMeta(B.DateTime),...t.value.meta||{}};const{isSystem:S}=_t(),P=ee({get:()=>{var f;return!!((f=t.value.meta)!=null&&f.isDisplayTimezone)},set:f=>{t.value.meta||(t.value.meta={}),t.value.meta.isDisplayTimezone=f}}),C=ee({get:()=>{var f;return!!((f=t.value.meta)!=null&&f.useSameTimezoneForAll)},set:f=>{var c;t.value.meta||(t.value.meta={}),t.value.meta.useSameTimezoneForAll=f,f?t.value.meta.timezone||(t.value.meta.timezone=(c=I.value[0])==null?void 0:c.name):t.value.meta.timezone=void 0}});return(f,c)=>{const z=Ye,b=Ct,O=At,k=rt,Z=Mn,K=En,j=Ft,Q=dt,X=Ua;return l(),r("div",Pr,[a("div",Fr,[o(k,null,{default:n(()=>[o(O,{value:e(t).meta.date_format,"onUpdate:value":c[0]||(c[0]=oe=>e(t).meta.date_format=oe),class:"nc-date-select","dropdown-class-name":"nc-dropdown-date-format",disabled:e(S)},{suffixIcon:n(()=>[o(z,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be(e(lo),(oe,W)=>(l(),d(b,{key:W,value:oe},{default:n(()=>[a("div",Br,[E(v(oe)+" ",1),e(t).meta.date_format===oe?(l(),d(_e(("iconMap"in f?f.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1}),o(k,null,{default:n(()=>[o(O,{value:e(t).meta.time_format,"onUpdate:value":c[1]||(c[1]=oe=>e(t).meta.time_format=oe),class:"nc-time-select","dropdown-class-name":"nc-dropdown-time-format",disabled:e(S)},{suffixIcon:n(()=>[o(z,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be(e(Da),(oe,W)=>(l(),d(b,{key:W,value:oe},{default:n(()=>[a("div",{class:"flex gap-2 w-full justify-between items-center","data-testid":`nc-time-${oe}`},[E(v(oe)+" ",1),e(t).meta.time_format===oe?(l(),d(_e(("iconMap"in f?f.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)],8,Nr)]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1})]),o(k,null,{default:n(()=>[e(t).meta?(l(),d(K,{key:0,value:e(t).meta.is12hrFormat,"onUpdate:value":c[2]||(c[2]=oe=>e(t).meta.is12hrFormat=oe),class:"nc-time-form-layout",disabled:e(S)},{default:n(()=>[o(Z,{value:!0},{default:n(()=>c[6]||(c[6]=[E("12 Hrs")])),_:1,__:[6]}),o(Z,{value:!1},{default:n(()=>c[7]||(c[7]=[E("24 Hrs")])),_:1,__:[7]})]),_:1},8,["value","disabled"])):_("",!0)]),_:1}),("isEeUI"in f?f.isEeUI:e(Gt))?(l(),r(Y,{key:0},[o(k,null,{default:n(()=>[o(Q,{disabled:!0},{default:n(()=>[a("div",Vr,[o(j,{checked:e(P),"onUpdate:checked":c[3]||(c[3]=oe=>se(P)?P.value=oe:null)},{default:n(()=>[a("div",zr,v(f.$t("labels.displayTimezone")),1)]),_:1},8,["checked"])])]),_:1})]),_:1}),o(k,null,{default:n(()=>[o(Q,{disabled:!0},{default:n(()=>[a("div",jr,[o(j,{checked:e(C),"onUpdate:checked":c[4]||(c[4]=oe=>se(C)?C.value=oe:null)},{default:n(()=>[a("div",Wr,v(f.$t("labels.useSameTimezoneForAllMembers")),1)]),_:1},8,["checked"])])]),_:1})]),_:1}),e(C)?(l(),d(k,{key:0},{default:n(()=>[o(O,{value:e(t).meta.timezone,"onUpdate:value":c[5]||(c[5]=oe=>e(t).meta.timezone=oe),"show-search":"","allow-clear":"","filter-option":(oe,W)=>("antSelectFilterOption"in f?f.antSelectFilterOption:e(kn))(oe,W,["key","data-abbreviation"]),"dropdown-class-name":"nc-dropdown-timezone",placeholder:"Use same timezone for all collaborator",class:"nc-search-timezone",disabled:e(S)},{suffixIcon:n(()=>[o(z,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[o(X,{label:"Suggested"},{default:n(()=>[(l(!0),r(Y,null,be(e(I),oe=>(l(),d(b,{key:oe.name,value:oe.name,"data-abbreviation":oe.abbreviation},{default:n(()=>[a("div",qr,[a("span",null,v(oe.name),1),a("div",null,[a("span",Gr,v(oe.abbreviation),1),(l(),d(_e(("iconMap"in f?f.iconMap:e(Re)).check),{id:"nc-selected-item-icon",class:ae(["text-primary w-4 h-4",{invisible:e(t).meta.timezone!==oe.name}])},null,8,["class"]))])])]),_:2},1032,["value","data-abbreviation"]))),128))]),_:1}),o(X,{label:"All"},{default:n(()=>[(l(!0),r(Y,null,be(e(i),oe=>(l(),d(b,{key:oe.name,value:oe.name,"data-abbreviation":oe.abbreviation},{default:n(()=>[a("div",Hr,[a("span",null,v(oe.name),1),a("div",null,[a("span",Kr,v(oe.abbreviation),1),(l(),d(_e(("iconMap"in f?f.iconMap:e(Re)).check),{id:"nc-selected-item-icon",class:ae(["text-primary w-4 h-4",{invisible:e(t).meta.timezone!==oe.name}])},null,8,["class"]))])])]),_:2},1032,["value","data-abbreviation"]))),128))]),_:1})]),_:1},8,["value","filter-option","disabled"])]),_:1})):_("",!0)],64)):_("",!0)])}}}),Bo=Object.assign(Ze(Yr,[["__scopeId","data-v-6e039a6c"]]),{__name:"SmartsheetColumnDateTimeOptions"}),Xr={class:"w-full flex gap-2 justify-between items-center"},Jr=Ue({__name:"DateOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:$}){const t=qe(s,"value",$);t.value.meta={...Mt.getColumnDefaultMeta(B.Date),...t.value.meta||{}};const{isSystem:i}=_t();return(y,u)=>{const h=Ye,x=Ct,I=At,S=rt;return l(),d(S,null,{default:n(()=>[o(I,{value:e(t).meta.date_format,"onUpdate:value":u[0]||(u[0]=P=>e(t).meta.date_format=P),disabled:e(i),"show-search":"",class:"nc-date-select","dropdown-class-name":"nc-dropdown-date-format"},{suffixIcon:n(()=>[o(h,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be([...e(lo),...e(Ra)],(P,C)=>(l(),d(x,{key:C,value:P},{default:n(()=>[a("div",Xr,[E(v(P)+" ",1),e(t).meta.date_format===P?(l(),d(_e(("iconMap"in y?y.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1})}}}),No=Object.assign(Jr,{__name:"SmartsheetColumnDateOptions"}),Qr=Ve(()=>Ne(()=>import("./Dl-U6wg9.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(s=>s.default||s)),Zr={class:"flex gap-2 w-full truncate items-center"},eu={class:"flex-1 flex items-center text-gray-700 gap-2 children:h-4 children:w-4"},tu={class:"flex-1 flex items-center gap-2 children:h-4 children:w-4"},lu=Ue({__name:"CheckboxOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:$}){const t=qe(s,"value",$),i=Fa,y=ee({get:()=>t.value.meta.color,set:x=>{t.value.meta.color=x}}),u=U(!1);t.value.meta={...Mt.getColumnDefaultMeta(B.Checkbox),...t.value.meta||{},icon:Pa(t.value.meta||{})};const h=i.findIndex(x=>x.checked===t.value.meta.icon.checked&&x.unchecked===t.value.meta.icon.unchecked);return t.value.meta.iconIdx=h===-1?0:h,it(()=>t.value.meta.iconIdx,x=>{t.value.meta.icon=i[x]}),(x,I)=>{const S=Ye,P=Ct,C=At,f=rt,c=Gl,z=Qr,b=al,O=ql;return l(),d(O,{gutter:8},{default:n(()=>[o(c,{span:12},{default:n(()=>[o(f,{label:x.$t("labels.icon")},{default:n(()=>[o(C,{value:e(t).meta.iconIdx,"onUpdate:value":I[0]||(I[0]=k=>e(t).meta.iconIdx=k),class:"w-52","dropdown-class-name":"nc-dropdown-checkbox-icon"},{suffixIcon:n(()=>[o(S,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be(e(i),(k,Z)=>(l(),d(P,{key:Z,value:Z},{default:n(()=>[a("div",Zr,[a("div",eu,[(l(),d(_e(("getMdiIcon"in x?x.getMdiIcon:e(il))(k.checked)))),(l(),d(_e(("getMdiIcon"in x?x.getMdiIcon:e(il))(k.unchecked))))]),e(t).meta.iconIdx===Z?(l(),d(_e(("iconMap"in x?x.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),o(c,{span:12},{default:n(()=>[o(f,{label:x.$t("general.colour")},{default:n(()=>[o(b,{visible:e(u),"onUpdate:visible":I[3]||(I[3]=k=>se(u)?u.value=k:null),placement:"bottomRight","auto-close":!1,class:"nc-color-picker-dropdown-trigger"},{overlay:n(()=>[a("div",null,[o(z,{modelValue:e(y),"onUpdate:modelValue":I[1]||(I[1]=k=>se(y)?y.value=k:null),"is-open":e(u),onInput:I[2]||(I[2]=k=>e(t).meta.color=k)},null,8,["modelValue","is-open"])])]),default:n(()=>[a("div",{class:ae(["flex-1 border-1 border-gray-300 rounded-lg h-8 px-[11px] flex items-center justify-between transition-all cursor-pointer",{"border-brand-500 shadow-selected":e(u)}])},[a("div",tu,[(l(),d(_e(("getMdiIcon"in x?x.getMdiIcon:e(il))(e(i)[e(t).meta.iconIdx].checked)),{style:sl({color:e(t).meta.color})},null,8,["style"])),(l(),d(_e(("getMdiIcon"in x?x.getMdiIcon:e(il))(e(i)[e(t).meta.iconIdx].unchecked)),{style:sl({color:e(t).meta.color})},null,8,["style"]))]),o(S,{icon:"arrowDown",class:"text-gray-700 h-4 w-4"})],2)]),_:1},8,["visible"])]),_:1},8,["label"])]),_:1})]),_:1})}}}),Vo=Object.assign(Ze(lu,[["__scopeId","data-v-d6020249"]]),{__name:"SmartsheetColumnCheckboxOptions"}),nu={class:"formula-wrapper relative"},ou={class:"tab"},au={class:"px-0.5"},su={class:"tab"},iu={class:"flex flex-col px-0.5 gap-4 pb-0.5"},ru={class:"flex w-full items-center gap-2 justify-between"},uu={class:"w-full"},cu=Ue({__name:"FormulaOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:$}){var oe,W,Te,m,ge,ve,$e;const p=s,D=$,t=[B.QrCode,B.Barcode,B.Button],i=qe(p,"value",D);i.value.meta={...Mt.getColumnDefaultMeta(B.Formula),...i.value.meta||{}};const{setAdditionalValidations:y,sqlUi:u,column:h,validateInfos:x}=_t(),{t:I}=Et(),S=It(Lt,U()),{base:P}=Ut(Ol()),C=ee(()=>{var pe,N;return((N=(pe=S==null?void 0:S.value)==null?void 0:pe.columns)==null?void 0:N.filter(A=>!(t.includes(A.uidt)||yn(A,S.value))))||[]}),{getMeta:f}=ul(),c={formula_raw:[{required:!0,validator:(pe,N)=>(async()=>{var A;if(!(N!=null&&N.trim()))throw new Error("Required");try{await vn({column:h.value,formula:N,columns:C.value,clientOrSqlUi:u.value,getMeta:f})}catch(q){throw q instanceof so&&((A=q.extra)!=null&&A.key)?new Error(I(q.extra.key,q.extra)):new Error(q.message)}})()}]};(W=(oe=h.value)==null?void 0:oe.colOptions)!=null&&W.formula_raw&&(i.value.formula_raw=no((m=(Te=h.value)==null?void 0:Te.colOptions)==null?void 0:m.formula,(ge=S==null?void 0:S.value)==null?void 0:ge.columns,($e=(ve=h.value)==null?void 0:ve.colOptions)==null?void 0:$e.formula_raw)||"");const z=ee(()=>{var pe,N;return(N=(pe=P.value)==null?void 0:pe.sources)==null?void 0:N.find(A=>{var q;return A.id===((q=S.value)==null?void 0:q.source_id)})}),b=U({dataType:fl.UNKNOWN}),O=U(),k=U(i.value.meta.display_type),Z=U(!1);let K=0;const j=zl(async()=>{var N,A,q,ye,fe,Oe;K+=1;const pe=K;try{const V=await vn({formula:i.value.formula||i.value.formula_raw,columns:((N=S.value)==null?void 0:N.columns)||[],column:h.value??void 0,clientOrSqlUi:(A=z.value)==null?void 0:A.type,getMeta:async J=>await f(J)});pe===K&&(b.value=V),Z.value&&O.value&&(i.value.meta.display_type=O.value),O.value=void 0,Z.value=!1}catch{pe===K&&(b.value={dataType:fl.UNKNOWN}),O.value=i.value.meta.display_type,Z.value=!0}finally{((fe=(ye=(q=i.value)==null?void 0:q.colOptions)==null?void 0:ye.parsed_tree)==null?void 0:fe.dataType)!==((Oe=b.value)==null?void 0:Oe.dataType)?i.value.meta.display_type=null:i.value.meta.display_type=k.value}},300);it(()=>i.value.formula||i.value.formula_raw,()=>{j()},{immediate:!0}),y({...c});const Q=U("formula"),X=ee(()=>{var pe,N;if(!((pe=b.value)!=null&&pe.dataType))return[];try{return Ba((N=b.value)==null?void 0:N.dataType).map(A=>({value:A,label:I(`datatype.${A}`),icon:ol(kt(A)?hl:bl,{columnMeta:{uidt:A}})}))}catch{return[]}});return it(()=>{var pe;return(pe=i.value.meta)==null?void 0:pe.display_type},(pe,N)=>{N===void 0&&!pe&&(i.value.meta.display_column_meta={meta:{},custom:{}})},{immediate:!0}),(pe,N)=>{const A=Lo,q=ao,ye=Ct,fe=on,Oe=rt,V=Do,J=Uo,ke=Ro,Pe=Po,Le=Fo,Ge=Bo,we=No,He=Vo,pt=oo;return l(),r("div",nu,[o(pt,{"active-key":e(Q),"onUpdate:activeKey":N[3]||(N[3]=ze=>se(Q)?Q.value=ze:null)},{default:n(()=>{var ze,et;return[o(q,{key:"formula"},{tab:n(()=>[a("div",ou,[a("div",null,v(pe.$t("datatype.Formula")),1)])]),default:n(()=>{var Xe;return[a("div",au,[o(A,{value:e(i).formula_raw,"onUpdate:value":N[0]||(N[0]=me=>e(i).formula_raw=me),error:((Xe=e(x).formula_raw)==null?void 0:Xe.validateStatus)==="error"},null,8,["value","error"])])]}),_:1}),o(q,{key:"format",disabled:!((ze=e(X))!=null&&ze.length)||!((et=e(b))!=null&&et.dataType)},{tab:n(()=>[a("div",su,[a("div",null,v(pe.$t("labels.formatting")),1)])]),default:n(()=>{var Xe;return[a("div",iu,[o(Oe,{class:"mt-4",label:pe.$t("general.format")},{default:n(()=>[o(fe,{value:e(i).meta.display_type,"onUpdate:value":N[1]||(N[1]=me=>e(i).meta.display_type=me),class:"w-full nc-select-shadow",placeholder:pe.$t("labels.selectAFormatType"),"allow-clear":"",onChange:N[2]||(N[2]=me=>{k.value=me})},{default:n(()=>[(l(!0),r(Y,null,be(e(X),me=>(l(),d(ye,{key:me.value,value:me.value},{default:n(()=>{var Je;return[a("div",ru,[a("div",uu,[(l(),d(_e(me.icon),{class:"w-4 h-4 !text-gray-600"})),E(" "+v(me.label),1)]),me.value===((Je=e(i).meta)==null?void 0:Je.display_type)?(l(),d(_e(("iconMap"in pe?pe.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]}),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label"]),[e(fl).NUMERIC,e(fl).DATE,e(fl).BOOLEAN,e(fl).STRING,e(fl).COND_EXP].includes((Xe=e(b))==null?void 0:Xe.dataType)?(l(),r(Y,{key:0},[e(i).meta.display_type===e(B).Currency?(l(),d(V,{key:0,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(B).Decimal?(l(),d(J,{key:1,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(B).Percent?(l(),d(ke,{key:2,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(B).Rating?(l(),d(Pe,{key:3,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(B).Time?(l(),d(Le,{key:4,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(B).DateTime?(l(),d(Ge,{key:5,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(B).Date?(l(),d(we,{key:6,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(B).Checkbox?(l(),d(He,{key:7,value:e(i).meta.display_column_meta},null,8,["value"])):_("",!0)],64)):_("",!0)])]}),_:1},8,["disabled"])]}),_:1},8,["active-key"])])}}}),du=Object.assign(Ze(cu,[["__scopeId","data-v-9d615652"]]),{__name:"SmartsheetColumnFormulaOptions"}),pu={class:"flex flex-col gap-2"},mu=["data-testid"],fu={class:"inline-flex items-center gap-2 flex-1 truncate"},vu=Ue({__name:"QrCodeOptions",props:{modelValue:{}},emits:["update:modelValue"],setup(s,{emit:$}){const p=s,D=$,{t}=Et(),{fields:i,metaColumnById:y}=$o(),u=qe(p,"modelValue",D),{setAdditionalValidations:h,validateInfos:x,column:I,isEdit:S}=_t(),P=ee(()=>{var f;return((f=i.value)==null?void 0:f.filter(c=>c.fk_column_id&&io.includes(y.value[c.fk_column_id].uidt)).map(c=>y.value[c.fk_column_id]))||[]});$t(()=>{var f,c,z,b;u.value.fk_qr_value_column_id=((c=(f=I==null?void 0:I.value)==null?void 0:f.colOptions)==null?void 0:c.fk_qr_value_column_id)||(S.value?null:(b=(z=P.value)==null?void 0:z[0])==null?void 0:b.id)}),h({fk_qr_value_column_id:[{required:!0,message:t("general.required")}]});const C=f=>ol(kt(f)?hl:bl,{columnMeta:f});return(f,c)=>{const z=Ye,b=dt,O=Ct,k=At,Z=rt;return l(),r("div",pu,[o(Z,st({class:"flex nc-qr-code-value-column-select",label:`${f.$t("placeholder.value")} ${e(t)("objects.field").toLowerCase()}`},e(x).fk_qr_value_column_id),{default:n(()=>[o(k,{value:e(u).fk_qr_value_column_id,"onUpdate:value":c[0]||(c[0]=K=>e(u).fk_qr_value_column_id=K),placeholder:f.$t("placeholder.selectAColumnForTheQRCodeValue"),onClick:c[1]||(c[1]=he(()=>{},["stop"]))},{suffixIcon:n(()=>[o(z,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be(e(P),(K,j)=>(l(),d(O,{key:j,value:K.id},{default:n(()=>[a("div",{class:"flex gap-2 w-full truncate items-center","data-testid":`nc-qr-${K.title}`},[a("div",fu,[(l(),d(_e(C(K)),{"column-meta":K,class:"!mx-0 flex-none w-4 h-4"},null,8,["column-meta"])),o(b,{"show-on-truncate-only":"",class:"flex-1 truncate"},{title:n(()=>[E(v(K.title),1)]),default:n(()=>[E(" "+v(K.title),1)]),_:2},1024)]),e(u).fk_qr_value_column_id===K.id?(l(),d(_e(("iconMap"in f?f.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)],8,mu)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},16,["label"])])}}}),_u=Object.assign(vu,{__name:"SmartsheetColumnQrCodeOptions"}),gu={class:"flex flex-col gap-4"},yu={class:"flex flex-row items-center"},hu=["data-testid"],bu={class:"inline-flex items-center gap-2 flex-1 truncate"},wu={class:"truncate flex-1"},xu={key:0,class:"pl-2"},ku=Ue({__name:"BarcodeOptions",props:{modelValue:{}},emits:["update:modelValue"],setup(s,{emit:$}){const p=s,D=$,{fields:t,metaColumnById:i}=$o(),y=qe(p,"modelValue",D),{setAdditionalValidations:u,validateInfos:h,column:x,isEdit:I}=_t(),{t:S}=Et(),P=ee(()=>{var c;return((c=t.value)==null?void 0:c.filter(z=>z.fk_column_id&&io.includes(i.value[z.fk_column_id].uidt)).map(z=>i.value[z.fk_column_id]))||[]});$t(()=>{var c,z,b,O;y.value.meta={...Mt.getColumnDefaultMeta(B.Barcode),...y.value.meta||{}},y.value.fk_barcode_value_column_id=((z=(c=x==null?void 0:x.value)==null?void 0:c.colOptions)==null?void 0:z.fk_barcode_value_column_id)||(I.value?null:(O=(b=P.value)==null?void 0:b[0])==null?void 0:O.id)}),it(P,c=>{var z;y.value.fk_barcode_value_column_id===null&&(y.value.fk_barcode_value_column_id=(z=c==null?void 0:c[0])==null?void 0:z.id)}),u({fk_barcode_value_column_id:[{required:!0,message:S("general.required")}],barcode_format:[{required:!0,message:S("general.required")}]});const C=ee(()=>{var c;return!((c=P.value)!=null&&c.length)}),f=c=>ol(kt(c)?hl:bl,{columnMeta:c});return(c,z)=>{const b=Ye,O=Ct,k=At,Z=ro,K=rt;return l(),r("div",gu,[o(K,st({class:"flex pb-2 nc-barcode-value-column-select flex-row",label:`${c.$t("placeholder.value")} ${e(S)("objects.field").toLowerCase()}`},e(h).fk_barcode_value_column_id),{default:n(()=>[a("div",yu,[o(k,{value:e(y).fk_barcode_value_column_id,"onUpdate:value":z[0]||(z[0]=j=>e(y).fk_barcode_value_column_id=j),placeholder:c.$t("placeholder.barcodeColumn"),"not-found-content":c.$t("placeholder.notFoundContent"),onClick:z[1]||(z[1]=he(()=>{},["stop"]))},{suffixIcon:n(()=>[o(b,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be(e(P),(j,Q)=>(l(),d(O,{key:Q,value:j.id},{default:n(()=>[a("div",{class:"w-full flex gap-2 truncate items-center justify-between","data-testid":`nc-barcode-${j.title}`},[a("div",bu,[(l(),d(_e(f(j)),{"column-meta":j,class:"!mx-0"},null,8,["column-meta"])),a("div",wu,v(j.title),1)]),e(y).fk_barcode_value_column_id===j.id?(l(),d(_e(("iconMap"in c?c.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)],8,hu)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","not-found-content"]),e(C)?(l(),r("div",xu,[o(Z,{placement:"bottom"},{title:n(()=>[a("span",null,v(c.$t("msg.validColumnsForBarCode")),1)]),default:n(()=>[(l(),d(_e(("iconMap"in c?c.iconMap:e(Re)).info),{class:"cursor-pointer"}))]),_:1})])):_("",!0)])]),_:1},16,["label"]),o(K,st({class:"flexp nc-barcode-format-select",label:c.$t("general.format")},e(h).barcode_format),{default:n(()=>[o(k,{value:e(y).meta.barcodeFormat,"onUpdate:value":z[2]||(z[2]=j=>e(y).meta.barcodeFormat=j),options:e(Na),placeholder:c.$t("placeholder.selectBarcodeFormat"),onClick:z[3]||(z[3]=he(()=>{},["stop"]))},{suffixIcon:n(()=>[o(b,{icon:"arrowDown",class:"text-gray-700"})]),_:1},8,["value","options","placeholder"])]),_:1},16,["label"])])}}}),$u=Object.assign(ku,{__name:"SmartsheetColumnBarcodeOptions"}),Cu={class:"flex flex-col w-[320px] overflow-hidden"},Tu={class:"flex items-center justify-between w-full p-3 bg-purple-50"},Iu={target:"_blank",rel:"noopener noreferrer",class:"!no-underline !hover:underline !hover:text-nc-content-purple-dark text-nc-content-purple-dark"},Su={class:"flex flex-col p-3 text-sm gap-3"},Au={class:"flex items-center gap-2"},Ou={key:0,class:"w-1/6 flex justify-end"},Lu={class:"w-full flex gap-2 items-center"},Eu={class:"flex items-center gap-2"},Mu={key:0,class:"w-1/6 flex justify-end"},Du={class:"w-full flex gap-2 items-center"},Uu=Ue({__name:"Settings",props:{fkIntegrationId:{},model:{},randomness:{},workspaceId:{},scope:{},showTooltip:{type:Boolean,default:!0},isEditColumn:{type:Boolean,default:!1}},emits:["update:fkIntegrationId","update:model","update:randomness"],setup(s,{emit:$}){const p=s,D=$,t=qe(p,"fkIntegrationId",D),i=qe(p,"model",D),{isEditColumn:y}=Tt(p),{$api:u}=yl(),{aiIntegrations:h}=Al(),x=U(null),I=U(!1),S=U([]),P=U(!1),C=async f=>{if(!(!t.value&&!f)){f||(f=t.value),S.value=[],x.value!==f&&(i.value=void 0),P.value=!0;try{const c=await u.integrations.endpoint(f,"availableModels",{});S.value=c||[],!i.value&&S.value.length>0&&(i.value=S.value[0].value)}catch(c){console.error(c)}finally{P.value=!1}}};return $t(async()=>{!t.value&&!y.value?h.value.length>0&&h.value[0].id&&(t.value=h.value[0].id,nl(()=>{C()})):t.value&&(x.value=t.value,(!i.value||!S.value.length)&&C())}),(f,c)=>{const z=Ye,b=dt,O=ti,k=Ct,Z=on,K=rt,j=al;return l(),d(j,{visible:e(I),"onUpdate:visible":c[2]||(c[2]=Q=>se(I)?I.value=Q:null),trigger:["click"],placement:"bottomRight","overlay-class-name":"overflow-hidden"},{overlay:n(()=>[a("div",Cu,[a("div",Tu,[c[3]||(c[3]=a("span",{class:"text-sm font-bold text-nc-content-gray"},"Settings",-1)),a("a",Iu,v(f.$t("title.docs")),1)]),a("div",Su,[a("div",Au,[c[5]||(c[5]=a("span",{class:"text-nc-content-gray w-2/6"},"Integration",-1)),f.showTooltip?(l(),r("div",Ou,[o(b,{placement:"top"},{title:n(()=>c[4]||(c[4]=[a("span",null,"Integration to use for this operation",-1)])),default:n(()=>[o(z,{icon:"info",class:"text-sm text-gray-500"})]),_:1})])):_("",!0),o(K,{class:"flex-1 !my-0 min-w-0"},{default:n(()=>[o(Z,{value:e(t),"onUpdate:value":c[0]||(c[0]=Q=>se(t)?t.value=Q:null),class:"w-full nc-select-shadow nc-ai-input",size:"middle",placeholder:"- select integration -",onChange:C},{default:n(()=>[(l(!0),r(Y,null,be(e(h),Q=>(l(),d(k,{key:Q.id,value:Q.id},{default:n(()=>[a("div",Lu,[Q!=null&&Q.sub_type?(l(),d(O,{key:0,type:Q.sub_type},null,8,["type"])):_("",!0),o(b,{class:"flex-1 truncate","show-on-truncate-only":""},{title:n(()=>[E(v(Q.title),1)]),default:n(()=>[E(" "+v(Q.title),1)]),_:2},1024),e(t)===Q.id?(l(),d(_e(("iconMap"in f?f.iconMap:e(Re)).check),{key:1,id:"nc-selected-item-icon",class:"text-nc-content-purple-medium w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),a("div",Eu,[c[7]||(c[7]=a("span",{class:"text-nc-content-gray w-2/6"},"Model",-1)),f.showTooltip?(l(),r("div",Mu,[o(b,{placement:"top"},{title:n(()=>c[6]||(c[6]=[a("span",null,"Model to use for this operation",-1)])),default:n(()=>[o(z,{icon:"info",class:"text-sm text-gray-500"})]),_:1})])):_("",!0),o(K,{class:"flex-1 !my-0 min-w-0"},{default:n(()=>[o(Z,{value:e(i),"onUpdate:value":c[1]||(c[1]=Q=>se(i)?i.value=Q:null),class:"w-full nc-select-shadow nc-ai-input",size:"middle",placeholder:"- select model -",disabled:!e(t)||e(S).length===0,loading:e(P)},{default:n(()=>[(l(!0),r(Y,null,be(e(S),Q=>(l(),d(k,{key:Q.label,value:Q.value},{default:n(()=>[a("div",Du,[o(b,{class:"flex-1 truncate","show-on-truncate-only":""},{title:n(()=>[E(v(Q.label),1)]),default:n(()=>[E(" "+v(Q.label),1)]),_:2},1024),e(i)===Q.value?(l(),d(_e(("iconMap"in f?f.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-nc-content-purple-medium w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","loading"])]),_:1})])])])]),default:n(()=>[Il(f.$slots,"default",{},()=>[o(z,{icon:"ncSettings",class:"text-gray-500 cursor-pointer"})],!0)]),_:3},8,["visible"])}}}),zo=Object.assign(Ze(Uu,[["__scopeId","data-v-80af4ca1"]]),{__name:"AiSettings"}),Ru={class:"nc-ai-prompt-with-fields w-full"},Pu=Ue({__name:"PromptWithFields",props:{modelValue:{},options:{default:()=>[]},autoFocus:{type:Boolean,default:!0},promptFieldTagClassName:{default:""},suggestionIconClassName:{default:""},placeholder:{default:"Write your prompt here..."},readOnly:{type:Boolean,default:!1},markdown:{type:Boolean,default:!0}},emits:["update:modelValue","keydown"],setup(s,{emit:$}){const p=s,D=$,t=ee({get:()=>p.modelValue,set:C=>{D("update:modelValue",C)}}),{autoFocus:i,readOnly:y}=Tt(p),u=zl(S,1e3),h=li({content:t.value,enableInputRules:p.markdown,extensions:[ni.configure({heading:!1}),oi.configure({emptyEditorClass:"is-editor-empty",placeholder:p.placeholder}),Va.configure({suggestion:{...ii(ki),items:({query:C})=>{var f;return C.length===0?p.options??[]:((f=p.options)==null?void 0:f.filter(c=>{var z,b,O;return((b=(z=c.title)==null?void 0:z.toLowerCase())==null?void 0:b.includes(C.toLowerCase()))||`${(O=c.title)==null?void 0:O.toLowerCase()}}`===C.toLowerCase()}))??[]},char:"{",allowSpaces:!0},renderHTML:({node:C})=>{var z;const f=(z=p.options)==null?void 0:z.find(b=>b.title===C.attrs.id);return["span",{class:`prompt-field-tag ${(f==null?void 0:f.uidt)===B.Attachment?"!bg-green-200":""} ${p.promptFieldTagClassName}`,style:"max-width: 200px; white-space: nowrap; overflow: hidden; display: inline-block; text-overflow: ellipsis;","data-tooltip":C.attrs.id},`${C.attrs.id}`]}})],onUpdate:({editor:C})=>{let f="";C.state.doc.descendants(c=>{c.type.name==="mention"?f+=`{${c.attrs.id}}`:c.text?f+=c.text:(c.type.name==="paragraph"||c.type.name==="hardBreak")&&(f+=`
`)}),f=f.trim(),t.value=f,u()},editable:!y.value,autofocus:i.value,editorProps:{scrollThreshold:100}}),x=()=>{var b,O,k,Z;if(!h.value)return;const{$from:C}=h.value.state.selection,f=h.value.state.doc.textBetween(C.pos-1,C.pos,`
`,`
`),c=h.value.state.doc.textBetween(C.pos-1,C.pos),z=f.includes(`
`);c==="{"?h.value.chain().deleteRange({from:C.pos-1,to:C.pos}).run():c!==" "&&C.pos!==1&&!z?((b=h.value)==null||b.commands.insertContent(" {"),(O=h.value)==null||O.chain().focus().run()):((k=h.value)==null||k.commands.insertContent("{"),(Z=h.value)==null||Z.chain().focus().run())};$t(async()=>{var f;await hn(()=>t.value!==null&&t.value!==void 0).toBeTruthy();const C=t.value.replace(/\{(.*?)\}/g,'<span data-type="mention" data-id="$1"></span>').trim().replace(/\n/g,"<br>");(f=h.value)==null||f.commands.setContent(C),i.value&&setTimeout(()=>{var c;(c=h.value)==null||c.chain().focus().setTextSelection(t.value.length).run()},100)});const I=[];function S(){document.querySelectorAll(".nc-ai-prompt-with-fields .prompt-field-tag").forEach(C=>{const f=Object.values(C.attributes).find(z=>z.name==="data-tooltip");if(!f||C.scrollWidth<=C.clientWidth)return;const c=si(C,{content:`<div class="tooltip text-xs">${f.value}</div>`,placement:"top",allowHTML:!0,arrow:!0,animation:"fade",duration:0,maxWidth:"200px"});I.push(c)})}$t(()=>{u()}),uo(()=>{I.forEach(C=>C==null?void 0:C.destroy()),I.length=0});const P=za();return ja(P,"focusPromptWithFields",()=>{setTimeout(()=>{var C;(C=h.value)==null||C.chain().focus().setTextSelection(t.value.length*2).run()},100)}),(C,f)=>{const c=Ye,z=Pt;return l(),r("div",Ru,[o(e(ai),{ref:"editorDom",editor:e(h),onKeydown:[f[0]||(f[0]=b=>C.$emit("keydown",b)),f[1]||(f[1]=xt(he(()=>{},["alt","stop"]),["enter"])),f[2]||(f[2]=xt(he(()=>{},["shift","stop"]),["enter"])),xt("handleOnEscRichTextEditor"in C?C.handleOnEscRichTextEditor:e(Wa),["esc"])]},null,8,["editor","onKeydown"]),o(z,{size:"xs",type:"text",class:"nc-prompt-with-field-suggestion-btn !px-1",disabled:e(y),onClick:he(x,["stop"])},{default:n(()=>[Il(C.$slots,"triggerIcon",{},()=>[o(c,{icon:"ncPlusSquareSolid",class:ae(["text-nc-content-brand",[`${C.suggestionIconClassName}`,{"opacity-75":e(y)}]])},null,8,["class"])])]),_:3},8,["disabled"])])}}}),jo=Object.assign(Pu,{__name:"AiPromptWithFields"}),Fu=Ve(()=>Ne(()=>import("./CkXo2doe.js").then(s=>s.C),__vite__mapDeps([4,1,2,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url).then(s=>s.default||s)),Bu=Ve(()=>Ne(()=>import("./0c4tmWST.js").then(s=>s.R),__vite__mapDeps([16,1,2,17,11,10,12,13,14,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,4,5,6,7,8,9,15,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94]),import.meta.url).then(s=>s.default||s)),Nu={class:"flex flex-col gap-4"},Vu={class:"flex items-center gap-1"},zu={class:"text-sm text-gray-800 select-none font-semibold"},ju={key:0,class:"relative"},Wu={class:"absolute right-0"},qu={class:"nc-prompt-input-wrapper bg-nc-bg-gray-light rounded-lg w-full"},Gu={class:"rounded-b-lg flex items-center gap-1.5 p-1"},Hu={key:0,class:"nc-ai-options-preview overflow-hidden"},Ku={class:"flex flex-col flex-1 gap-1"},Yu={class:"flex items-center gap-2"},Xu={key:0,class:"text-[11px] leading-[18px] text-nc-content-gray-muted"},Ju={key:0},Qu={class:"relative"},Zu=Ue({__name:"LongTextOptions",props:{modelValue:{}},emits:["update:modelValue","navigateToIntegrations"],setup(s,{emit:$}){var pe,N;const p=s,D=$,{t}=Et(),i=It(Lt),y=$n(),{activeWorkspaceId:u}=Ut(y),h=ee(()=>{var A;return(A=i.value)!=null&&A.columns?i.value.columns.filter(q=>q.title&&!q.system&&q.uidt!==B.ID):[]}),x=qe(p,"modelValue",D),{isEdit:I,setAdditionalValidations:S,column:P,formattedData:C,loadData:f,disableSubmitBtn:c}=_t(),{isAiBetaFeaturesEnabled:z,aiIntegrationAvailable:b,generateRows:O}=Al(),k=U({row:{},oldRow:{},rowMeta:{new:!0}}),Z=U(x.value.title||"temp_title"),K=U(!1),j=U(!1),Q=ee(()=>h.value.some(q=>{var ye;return(ye=x.value.prompt_raw)==null?void 0:ye.includes(`{${q.title}}`)})),X=ee({get:()=>{var A;return(A=x.value.meta)==null?void 0:A[_n]},set:A=>{x.value.meta[_n]=A,x.value.prompt_raw="",k.value.row={},j.value=!1}}),oe=ee(()=>{var A;return I.value?!!((A=P.value)!=null&&A.pv):!1}),W=async()=>{C.value.length||await f(void 0,!1)},Te=async()=>{var ye,fe,Oe,V;K.value=!0,await W();const A=C.value.length?Co(e(C.value[0].row),((ye=i.value)==null?void 0:ye.columns)||[]):"";if(!C.value.length||!A){Rt.error("Include at least 1 sample record in table to generate"),K.value=!1;return}Z.value=((fe=x.value)==null?void 0:fe.title)||"temp_title";const q=await O(i.value.id,{title:Z.value,prompt_raw:x.value.prompt_raw,fk_integration_id:x.value.fk_integration_id,uidt:B.LongText},[A]);q!=null&&q.length&&((Oe=q[0])!=null&&Oe[Z.value])&&(k.value.row={...q[0],[Z.value]:{value:(V=q[0])==null?void 0:V[Z.value]}},j.value=!0),K.value=!1},m=ee(()=>I.value&&co(P.value)||z.value);$t(()=>{var A,q;x.value.prompt_raw=((q=(A=P==null?void 0:P.value)==null?void 0:A.colOptions)==null?void 0:q.prompt_raw)||""});const ge={fk_integration_id:[{validator:(A,q)=>new Promise((ye,fe)=>{X.value&&!q&&fe(new Error(t("title.aiIntegrationMissing"))),ye()})}]};I.value&&(x.value.fk_integration_id=(N=(pe=x.value)==null?void 0:pe.colOptions)==null?void 0:N.fk_integration_id),S({...ge}),qt(qa,U(!0));const ve=ee({get:()=>{var A;return!!((A=x.value.meta)!=null&&A.richMode)},set:A=>{x.value.meta||(x.value.meta={}),x.value.meta.richMode=A}}),$e=()=>{if(!X.value){c.value&&(c.value=!1);return}Q.value?c.value=!1:c.value=!0};return it(ve,()=>{x.value.cdf=null}),it(Q,$e,{immediate:!0}),(A,q)=>{var He,pt;const ye=Ft,fe=dt,Oe=rt,V=Ye,J=Pt,ke=zo,Pe=jo,Le=Fu,Ge=Bu,we=Ln;return l(),r("div",Nu,[o(Oe,null,{default:n(()=>[o(fe,{disabled:!(e(X)||e(oe)&&!e(ve))},{title:n(()=>[E(v(e(oe)&&!e(ve)?`${e(Wt).RichText} field cannot be used as display value field`:"Rich text formatting is not supported when generate text using AI is enabled"),1)]),default:n(()=>[a("div",Vu,[o(ye,{checked:e(ve),"onUpdate:checked":q[0]||(q[0]=ze=>se(ve)?ve.value=ze:null),disabled:e(X)||e(oe)&&!e(ve)},{default:n(()=>[a("div",zu,v(A.$t("labels.enableRichText")),1)]),_:1},8,["checked","disabled"])])]),_:1},8,["disabled"])]),_:1}),e(m)?(l(),r("div",ju,[o(Oe,{class:"flex items-center"},{default:n(()=>[o(fe,{disabled:!(e(ve)||e(oe)&&!e(X)),class:"flex items-center"},{title:n(()=>[E(v(e(oe)&&!e(X)?`${e(Wt).AIPrompt} field cannot be used as display value field`:"Generate text using AI is not supported when rich text formatting is enabled"),1)]),default:n(()=>[o(ye,{checked:e(X),"onUpdate:checked":q[1]||(q[1]=ze=>se(X)?X.value=ze:null),disabled:e(ve)||e(oe)&&!e(X),class:"nc-ai-field-generate-text nc-ai-input",onChange:$e},{default:n(()=>[a("span",{class:ae(["text-sm font-semibold pl-1",{"text-nc-content-purple-dark":e(X),"text-nc-content-gray":!e(X)}])}," Generate text using AI ",2)]),_:1},8,["checked","disabled"])]),_:1},8,["disabled"]),o(fe,{class:"ml-2 mr-[40px] flex cursor-pointer"},{title:n(()=>q[6]||(q[6]=[E(" Use AI to generate content based on record data. ")])),default:n(()=>[o(V,{icon:"info",class:"text-nc-content-gray-muted hover:text-nc-content-gray-subtle opacity-70 w-3.5 h-3.5"})]),_:1}),q[7]||(q[7]=a("div",{class:"flex-1"},null,-1)),a("div",Wu,[o(ke,{"fk-integration-id":e(x).fk_integration_id,"onUpdate:fkIntegrationId":q[2]||(q[2]=ze=>e(x).fk_integration_id=ze),model:e(x).model,"onUpdate:model":q[3]||(q[3]=ze=>e(x).model=ze),randomness:e(x).randomness,"onUpdate:randomness":q[4]||(q[4]=ze=>e(x).randomness=ze),"workspace-id":e(u),"show-tooltip":!1,"is-edit-column":e(I),placement:"bottomRight"},{default:n(()=>[o(J,{size:"xs",theme:"ai",class:"!px-1",type:"text"},{default:n(()=>[o(V,{icon:"settings"})]),_:1})]),_:1},8,["fk-integration-id","model","randomness","workspace-id","is-edit-column"])])]),_:1,__:[7]})])):_("",!0),e(m)&&(e(I)?e(X):e(b)&&e(X))?(l(),r(Y,{key:1},[o(Oe,{class:"flex"},{default:n(()=>[a("div",qu,[o(Pe,{modelValue:e(x).prompt_raw,"onUpdate:modelValue":q[5]||(q[5]=ze=>e(x).prompt_raw=ze),options:e(h),"read-only":!e(b),placeholder:"Write custom AI Prompt instruction here","prompt-field-tag-class-name":"!text-nc-content-purple-dark font-weight-500","suggestion-icon-class-name":"!text-nc-content-purple-medium"},null,8,["modelValue","options","read-only"]),a("div",Gu,[o(V,{icon:"info",class:"!text-nc-content-purple-medium w-3.5 h-3.5"}),q[8]||(q[8]=a("span",{class:"text-xs text-nc-content-gray-subtle2"},[E("Mention fields using curly braces, e.g. "),a("span",{class:"text-nc-content-purple-dark"},"{Field name}"),E(".")],-1))])])]),_:1}),e(b)&&e(X)?(l(),r("div",Hu,[a("div",null,[a("div",{class:ae(["flex items-center gap-2 transition-all duration-300",{"pl-3 py-2 pr-2":!e(j),"pl-3 py-1 pr-1 border-b-1 border-nc-border-gray-medium":e(j)}])},[a("div",Ku,[a("div",Yu,[q[10]||(q[10]=a("span",{class:"text-sm font-bold text-nc-content-gray-subtle"},"Preview",-1)),o(fe,{class:"flex cursor-pointer"},{title:n(()=>q[9]||(q[9]=[E(" Preview is generated using the first record in this table")])),default:n(()=>[o(V,{icon:"info",class:"text-nc-content-gray-muted hover:text-nc-content-gray-subtle opacity-70 w-3.5 h-3.5"})]),_:1})]),e(j)?_("",!0):(l(),r("span",Xu," Include at least 1 field in prompt. "))]),o(fe,{disabled:e(Q)},{title:n(()=>q[11]||(q[11]=[E(" Include at least 1 field in prompt to generate ")])),default:n(()=>[o(J,{class:ae(["nc-aioptions-preview-generate-btn",{"nc-is-already-generated":e(j),"nc-preview-enabled":e(Q)}]),size:"xs",type:e(j)?"text":"secondary",theme:e(Q)?"ai":"default",disabled:!e(Q),loading:e(K),onClick:he(Te,["stop"])},{default:n(()=>[a("div",{class:ae({"nc-animate-dots min-w-[91px] text-left":e(K),"min-w-[102px]":e(j)&&e(K),"min-w-[80px]":!e(j)&&e(K)})},v(e(j)?e(K)?"Re-generating":"Re-generate":e(K)?"Generating":"Generate preview"),3)]),_:1},8,["class","type","theme","disabled","loading"])]),_:1},8,["disabled"])],2),(pt=(He=e(k).row)==null?void 0:He[e(Z)])!=null&&pt.value?(l(),r("div",Ju,[a("div",Qu,[o(Ge,{row:e(k)},{default:n(()=>[o(Le,{"edit-enabled":!0,"model-value":e(k).row[e(Z)],column:e(x),class:"!border-none h-auto my-auto pl-1"},null,8,["model-value","column"])]),_:1},8,["row"])])])):_("",!0)])])):_("",!0)],64)):_("",!0),!e(b)&&e(X)&&e(m)?(l(),d(we,{key:2})):_("",!0)])}}}),ec=Object.assign(Ze(Zu,[["__scopeId","data-v-3462002f"]]),{__name:"SmartsheetColumnLongTextOptions"}),tc=["data-testid"],lc=Ue({__name:"DurationOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:$}){const t=qe(s,"value",$),i=Ga.map(y=>({...y,title:`${y.title}`}))||[];return t.value.meta={...Mt.getColumnDefaultMeta(B.Duration),...t.value.meta||{}},(y,u)=>{const h=Ye,x=dt,I=Ct,S=At,P=rt,C=Gl,f=ql;return l(),d(f,null,{default:n(()=>[o(C,{span:24},{default:n(()=>[o(P,{label:y.$t("general.format")},{default:n(()=>[o(S,{value:e(t).meta.duration,"onUpdate:value":u[0]||(u[0]=c=>e(t).meta.duration=c),class:"w-52","dropdown-class-name":"nc-dropdown-duration-option"},{suffixIcon:n(()=>[o(h,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be(e(i),(c,z)=>(l(),d(I,{key:z,value:c.id},{default:n(()=>[a("div",{class:"flex gap-2 w-full truncate items-center","data-testid":c.title},[o(x,{"show-on-truncate-only":"",class:"flex-1 truncate"},{title:n(()=>[E(v(c.title),1)]),default:n(()=>[E(" "+v(c.title),1)]),_:2},1024),e(t).meta.duration===c.id?(l(),d(_e(("iconMap"in y?y.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)],8,tc)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1})}}}),nc=Object.assign(lc,{__name:"SmartsheetColumnDurationOptions"}),oc=Ve(()=>Ne(()=>import("./2EkCyFsn.js"),__vite__mapDeps([95,79,1,2]),import.meta.url).then(s=>s.default||s)),ac=Ve(()=>Ne(()=>import("./BcG6Ieku.js").then(s=>s.C),__vite__mapDeps([96,1,2,24,25,26,27,97,21,11,98,61,62,63,64,5,6,65,66,67,68,69,99,58,59,86,17,100]),import.meta.url).then(s=>s.default||s)),sc={key:0,class:"w-full flex flex-col gap-4"},ic={class:"w-full flex flex-row space-x-2"},rc={class:"flex gap-2 w-full justify-between truncate items-center"},uc={class:"min-w-1/2 flex items-center gap-2"},cc={class:"inline-flex items-center truncate gap-2"},dc={class:"text-[0.65rem] leading-4 flex-1 truncate text-gray-600 nc-relation-details"},pc={class:"w-full flex gap-2 truncate items-center justify-between"},mc={class:"inline-flex items-center gap-2 flex-1 truncate"},fc={class:"truncate flex-1"},vc={key:0,class:"w-full flex flex-row space-x-2"},_c={class:"flex items-center gap-2"},gc={key:1,class:"w-full flex flex-col gap-4"},yc={class:"flex flex-col gap-2"},hc={class:"flex gap-1 items-center whitespace-nowrap"},bc={key:0,class:"overflow-auto nc-scrollbar-thin"},wc={key:1},xc=Ue({__name:"LookupOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:$}){const t=qe(s,"value",$),i=It(Lt,U()),{t:y}=Et(),{$e:u}=yl(),{getPlanTitle:h}=an(),{setAdditionalValidations:x,validateInfos:I,onDataTypeChange:S,isEdit:P,disableSubmitBtn:C,updateFieldName:f,setPostSaveOrUpdateCbk:c}=_t(),z=Ol(),{tables:b}=Ut(z),{metas:O,getMeta:k}=ul(),Z=U();x({fk_relation_column_id:[{required:!0,message:y("general.required")}],fk_lookup_column_id:[{required:!0,message:y("general.required")}]}),t.value.fk_relation_column_id||(t.value.fk_relation_column_id=null),t.value.fk_lookup_column_id||(t.value.fk_lookup_column_id=null);const K=ee(()=>!b.value||!b.value.length||!i.value||!i.value.columns?[]:i.value.columns.filter(A=>{var q;return gl(A)&&(!A.system||[Yt.MANY_TO_MANY,Yt.ONE_TO_ONE,Yt.BELONGS_TO].includes(A.colOptions.type))&&A.source_id===((q=i.value)==null?void 0:q.source_id)}).map(A=>({col:A.colOptions,column:A,...b.value.find(q=>q.id===A.colOptions.fk_related_model_id)||O.value[A.colOptions.fk_related_model_id]||{}})).filter(A=>{var q;return((q=A.col)==null?void 0:q.fk_related_model_id)===A.id&&!A.mm})),j=ee(()=>K.value.find(N=>N.column.id===t.value.fk_relation_column_id)),Q=[B.Button,B.Links],X=ee(()=>!1),oe=ee({get:()=>{var N;return((N=t.value.meta)==null?void 0:N.useRecursiveEvaluation)??!1},set:N=>{t.value.meta=t.value.meta??{},t.value.meta.useRecursiveEvaluation=N}}),W=ee(()=>{var N,A;return(N=j.value)!=null&&N.id?(A=O.value[j.value.id])==null?void 0:A.columns.filter(q=>t.value.fk_lookup_column_id===q.id||!Hl(q)&&q.id!==t.value.id&&!Q.includes(q.uidt)):[]}),Te=ee({get(){var N;return!!((N=t.value.meta)!=null&&N.enableConditions)},set(N){t.value.meta=t.value.meta||{},t.value.meta.enableConditions=N,u("c:lookup:limit-record-by-filter",{status:N})}});qt(Lt,ee(()=>j.value?O.value[j.value.id]||{}:{})),$t(()=>{var N,A;P.value&&(t.value.fk_lookup_column_id=(N=t.value.colOptions)==null?void 0:N.fk_lookup_column_id,t.value.fk_relation_column_id=(A=t.value.colOptions)==null?void 0:A.fk_relation_column_id),c(async({colId:q,column:ye})=>{var fe;await((fe=Z.value)==null?void 0:fe.applyChanges(q||(ye==null?void 0:ye.id),!1))})}),Cn(()=>{c(null)});const m=()=>{var A,q;const N=(((A=i.value)==null?void 0:A.columns)||[]).filter(ye=>ye.uidt===B.Lookup).map(ye=>{var fe;return(fe=ye.colOptions)==null?void 0:fe.fk_lookup_column_id});return(q=W.value.find(ye=>!N.includes(ye.id)))==null?void 0:q.id},ge=async()=>{var N,A;j.value&&await k(j.value.id),t.value.fk_lookup_column_id=m()||((A=(N=W.value)==null?void 0:N[0])==null?void 0:A.id),S()};Tn(()=>{K.value.length?K.value.length&&C.value&&(C.value=!1):C.value=!0});const ve=N=>ol(kt(N)?hl:bl,{columnMeta:N});it(()=>t.value.fk_relation_column_id,N=>{if(!N)return;const A=K.value.find(q=>q.col.fk_column_id===N);A&&(t.value.lookupTableTitle=(A==null?void 0:A.title)||A.table_name)}),it(()=>t.value.fk_lookup_column_id,N=>{if(!N)return;const A=W.value.find(q=>q.id===N);A&&(t.value.lookupColumnTitle=(A==null?void 0:A.title)||A.column_name,f())});const $e=()=>{j.value&&(Te.value=!Te.value)},pe=()=>{var N,A;(A=(N=Z.value)==null?void 0:N.$el)==null||A.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})};return(N,A)=>{const q=Ye,ye=dt,fe=Ct,Oe=At,V=rt,J=Ft,ke=oc,Pe=Dn,Le=ac,Ge=Un;return e(K).length?(l(),r("div",sc,[a("div",ic,[o(V,st({class:"flex w-1/2 !max-w-[calc(50%_-_4px)]",label:`${N.$t("general.link")} ${N.$t("objects.field")}`},e(I).fk_relation_column_id),{default:n(()=>[o(Oe,{value:e(t).fk_relation_column_id,"onUpdate:value":A[0]||(A[0]=we=>e(t).fk_relation_column_id=we),placeholder:"-select-","dropdown-class-name":"!w-64 !rounded-md nc-dropdown-relation-table",onChange:ge},{suffixIcon:n(()=>[o(q,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be(e(K),(we,He)=>(l(),d(fe,{key:He,value:we.col.fk_column_id},{default:n(()=>[a("div",rc,[a("div",uc,[(l(),d(_e(ve(we.column)),{"column-meta":we.column,class:"!mx-0"},null,8,["column-meta"])),o(ye,{class:"truncate min-w-[calc(100%_-_24px)]","show-on-truncate-only":""},{title:n(()=>[E(v(we.column.title),1)]),default:n(()=>[E(" "+v(we.column.title),1)]),_:2},1024)]),a("div",cc,[a("div",dc,[o(ye,{class:"truncate","show-on-truncate-only":""},{title:n(()=>[E(v(we.title||we.table_name),1)]),default:n(()=>[E(" "+v(we.title||we.table_name),1)]),_:2},1024)]),e(t).fk_relation_column_id===we.col.fk_column_id?(l(),d(_e(("iconMap"in N?N.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},16,["label"]),o(V,st({class:"flex w-1/2",label:`${N.$t("datatype.Lookup")} ${N.$t("objects.field")}`},e(t).fk_relation_column_id?e(I).fk_lookup_column_id:void 0),{default:n(()=>[o(Oe,{value:e(t).fk_lookup_column_id,"onUpdate:value":A[1]||(A[1]=we=>e(t).fk_lookup_column_id=we),name:"fk_lookup_column_id",placeholder:"-select-",disabled:!e(t).fk_relation_column_id,"show-search":"","filter-option":"antSelectFilterOption"in N?N.antSelectFilterOption:e(kn),"dropdown-class-name":"nc-dropdown-relation-column !rounded-md",onChange:e(S)},{suffixIcon:n(()=>[o(q,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be(e(W),we=>(l(),d(fe,{key:we.title,value:we.id},{default:n(()=>[a("div",pc,[a("div",mc,[(l(),d(_e(ve(we)),{"column-meta":we,class:"!mx-0"},null,8,["column-meta"])),a("div",fc,v(we.title),1)]),e(t).fk_lookup_column_id===we.id?(l(),d(_e(("iconMap"in N?N.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","filter-option","onChange"])]),_:1},16,["label"])]),e(X)?(l(),r("div",vc,[o(V,{class:"w-full"},{default:n(()=>[a("div",_c,[o(J,{checked:e(oe),"onUpdate:checked":A[2]||(A[2]=we=>se(oe)?oe.value=we:null)},{default:n(()=>[o(ye,null,{title:n(()=>[E(v(N.$t("msg.evaluateRecursivelyTooltip")),1)]),default:n(()=>[E(" "+v(N.$t("msg.evaluateRecursively"))+" ",1),o(q,{icon:"info",class:"h-4 w-4 text-gray-400"})]),_:1})]),_:1},8,["checked"])])]),_:1})])):_("",!0),("isEeUI"in N?N.isEeUI:e(Gt))?(l(),r("div",gc,[a("div",yc,[o(Pe,{feature:e(Xt).FEATURE_LOOKUP_LIMIT_RECORDS_BY_FILTER},{default:n(({click:we})=>[a("div",hc,[o(J,{checked:e(Te),disabled:!e(j),size:"small","data-testid":"nc-lookup-limit-record-filters",onChange:He=>{He&&we(e(Xt).FEATURE_LOOKUP_LIMIT_RECORDS_BY_FILTER)||$e()}},{default:n(()=>[E(v(N.$t("labels.onlyIncludeLinkedRecordsThatMeetSpecificConditions")),1)]),_:2},1032,["checked","disabled","onChange"]),e(Te)?_("",!0):(l(),d(ke,{key:0,feature:e(Xt).FEATURE_LOOKUP_LIMIT_RECORDS_BY_FILTER,content:N.$t("upgrade.upgradeToIncludeLinkedRecordsThatMeetSpecificConditions",{plan:e(h)(e(In).PLUS)}),class:"ml-1"},null,8,["feature","content"]))])]),_:1},8,["feature"]),e(Te)?(l(),r("div",bc,[o(Le,{ref_key:"filterRef",ref:Z,modelValue:e(t).filters,"onUpdate:modelValue":A[3]||(A[3]=we=>e(t).filters=we),class:"!pl-10 !p-0 max-w-620px","auto-save":!1,"show-loading":!1,link:"","show-dynamic-condition":!1,"root-meta":e(i),"link-col-id":e(t).id,onAddFilter:pe,onAddFilterGroup:pe},null,8,["modelValue","root-meta","link-col-id"])])):_("",!0)])])):_("",!0)])):(l(),r("div",wc,[o(Ge,{type:"warning","show-icon":""},{icon:n(()=>[o(q,{icon:"alertTriangle",class:"h-6 w-6",width:"24",height:"24"})]),message:n(()=>A[4]||(A[4]=[E(" Alert ")])),description:n(()=>[E(v(N.$t("msg.linkColumnClearNotSupportedYet",{type:"Lookup"})),1)]),_:1})]))}}}),kc=Object.assign(Ze(xc,[["__scopeId","data-v-dd29a713"]]),{__name:"SmartsheetColumnLookupOptions"}),$c={class:"flex items-center gap-1"},Cc={class:"text-sm text-gray-800 select-none"},Tc=Ue({__name:"NumberOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:$}){const t=qe(s,"value",$);t.value.meta={...Mt.getColumnDefaultMeta(B.Number),...t.value.meta||{}};const{isSystem:i}=_t();return(y,u)=>{const h=Ft,x=rt;return l(),d(x,null,{default:n(()=>[a("div",$c,[e(t).meta?(l(),d(h,{key:0,checked:e(t).meta.isLocaleString,"onUpdate:checked":u[0]||(u[0]=I=>e(t).meta.isLocaleString=I),disabled:e(i)},{default:n(()=>[a("div",Cc,v(y.$t("labels.showThousandsSeparator")),1)]),_:1},8,["checked","disabled"])):_("",!0)])]),_:1})}}}),Ic=Object.assign(Tc,{__name:"SmartsheetColumnNumberOptions"}),Sc=Ve(()=>Ne(()=>import("./2EkCyFsn.js"),__vite__mapDeps([95,79,1,2]),import.meta.url).then(s=>s.default||s)),Ac=Ve(()=>Ne(()=>import("./BcG6Ieku.js").then(s=>s.C),__vite__mapDeps([96,1,2,24,25,26,27,97,21,11,98,61,62,63,64,5,6,65,66,67,68,69,99,58,59,86,17,100]),import.meta.url).then(s=>s.default||s)),Oc={key:0,class:"flex flex-col gap-4"},Lc={class:"w-full flex flex-row space-x-2"},Ec={class:"flex gap-2 w-full justify-between truncate items-center"},Mc={class:"min-w-1/2 flex items-center gap-2"},Dc={class:"inline-flex items-center truncate gap-2"},Uc={class:"text-[0.65rem] leading-4 flex-1 truncate text-gray-600 nc-relation-details"},Rc={class:"w-full flex gap-2 truncate items-center justify-between"},Pc={class:"flex items-center gap-2 flex-1 truncate"},Fc={class:"truncate flex-1"},Bc={class:"flex gap-2 justify-between items-center"},Nc={class:"flex gap-2 w-full justify-between items-center"},Vc={class:"flex items-center gap-1"},zc={class:"text-sm text-gray-800 select-none"},jc={key:2,class:"w-full flex flex-col gap-4"},Wc={class:"flex flex-col gap-2"},qc={class:"flex gap-1 items-center whitespace-nowrap"},Gc={key:0,class:"overflow-auto nc-scrollbar-thin"},Hc={key:1},Kc=Ue({__name:"RollupOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:$}){const t=qe(s,"value",$),i=It(Lt,U()),{setAdditionalValidations:y,validateInfos:u,onDataTypeChange:h,isEdit:x,disableSubmitBtn:I,updateFieldName:S,setPostSaveOrUpdateCbk:P}=_t(),C=Ol(),{tables:f}=Ut(C),{metas:c,getMeta:z}=ul(),{t:b}=Et(),{$e:O}=yl(),{getPlanTitle:k}=an(),Z=U();y({fk_relation_column_id:[{required:!0,message:b("general.required")}],fk_rollup_column_id:[{required:!0,message:b("general.required")}],rollup_function:[{required:!0,message:b("general.required")}]}),t.value.fk_relation_column_id||(t.value.fk_relation_column_id=null),t.value.fk_rollup_column_id||(t.value.fk_rollup_column_id=null),t.value.rollup_function||(t.value.rollup_function=null);const K=ee(()=>!f.value||!f.value.length||!i.value||!i.value.columns?[]:i.value.columns.filter(J=>gl(J)&&J.colOptions.type&&![Yt.BELONGS_TO,Yt.ONE_TO_ONE].includes(J.colOptions.type)&&(!J.system||[Yt.MANY_TO_MANY,Yt.ONE_TO_ONE,Yt.BELONGS_TO].includes(J.colOptions.type))).map(J=>{var Le;const ke=(Le=J.colOptions)==null?void 0:Le.fk_related_model_id,Pe=c.value[ke]??f.value.find(Ge=>Ge.id===ke);return{col:J.colOptions,column:J,...Pe}})),j=ee(()=>K.value.find(V=>V.column.id===t.value.fk_relation_column_id)),Q=ee(()=>{var V,J;return(V=j.value)!=null&&V.id?(J=c.value[j.value.id])==null?void 0:J.columns.filter(ke=>(!kt(ke.uidt)||[B.CreatedTime,B.CreatedBy,B.LastModifiedTime,B.LastModifiedBy,B.Formula].includes(ke.uidt))&&(!Hl(ke)||ke.pk)):[]}),X=ee({get(){var V;return!!((V=t.value.meta)!=null&&V.enableConditions)},set(V){t.value.meta=t.value.meta||{},t.value.meta.enableConditions=V,O("c:rollup:limit-record-by-filter",{status:V})}});qt(Lt,ee(()=>j.value?c.value[j.value.id]||{}:{})),$t(()=>{var V,J,ke;x.value&&(t.value.fk_relation_column_id=(V=t.value.colOptions)==null?void 0:V.fk_relation_column_id,t.value.fk_rollup_column_id=(J=t.value.colOptions)==null?void 0:J.fk_rollup_column_id,t.value.rollup_function=(ke=t.value.colOptions)==null?void 0:ke.rollup_function),P(async({colId:Pe,column:Le})=>{var Ge;await((Ge=Z.value)==null?void 0:Ge.applyChanges(Pe||(Le==null?void 0:Le.id),!1))})}),Cn(()=>{P(null)});const oe=()=>{var J,ke;const V=(((J=i.value)==null?void 0:J.columns)||[]).filter(Pe=>Pe.uidt===B.Rollup).map(Pe=>{var Le;return(Le=Pe.colOptions)==null?void 0:Le.fk_rollup_column_id});return(ke=Q.value.find(Pe=>!V.includes(Pe.id)))==null?void 0:ke.id},W=async()=>{var V,J;j.value&&await z(j.value.id),t.value.fk_rollup_column_id=oe()||((J=(V=Q.value)==null?void 0:V[0])==null?void 0:J.id),h()},Te=V=>ol(kt(V)?hl:bl,{columnMeta:V}),m=U([]),ge=[{text:b("datatype.Count"),value:"count"},{text:b("general.min"),value:"min"},{text:b("general.max"),value:"max"},{text:b("general.avg"),value:"avg"},{text:b("general.sum"),value:"sum"},{text:b("general.countDistinct"),value:"countDistinct"},{text:b("general.sumDistinct"),value:"sumDistinct"},{text:b("general.avgDistinct"),value:"avgDistinct"}],ve=ee(()=>{var J;const V={};return(J=Q.value)==null||J.forEach(ke=>{ke!=null&&ke.id&&(V[ke.id]=ge.filter(Pe=>Ha(ke).includes(Pe.value)))}),V}),$e=ee(()=>{var V;return(V=Q.value)==null?void 0:V.filter(J=>{var ke;return J.id&&((ke=ve.value[J.id])==null?void 0:ke.length)})}),pe=()=>{const V=m.value.find(J=>J.value===t.value.rollup_function);V&&(V!=null&&V.text)&&(t.value.rollup_function_name=V.text),h(),S()};it(()=>t.value.fk_rollup_column_id,()=>{var J;const V=(J=Q.value)==null?void 0:J.find(ke=>ke.id===t.value.fk_rollup_column_id);m.value=ve.value[V==null?void 0:V.id]||[],m.value.length&&!m.value.find(ke=>ke.value===t.value.rollup_function)&&(t.value.rollup_function=m.value[0].value,t.value.rollup_function_name=m.value[0].text),t.value.rollupColumnTitle=(V==null?void 0:V.title)||(V==null?void 0:V.column_name),S()}),Tn(()=>{K.value.length?K.value.length&&I.value&&(I.value=!1):I.value=!0}),it(()=>t.value.fk_relation_column_id,V=>{if(!V)return;const J=K.value.find(ke=>ke.col.fk_column_id===V);J&&(t.value.rollupTableTitle=(J==null?void 0:J.title)||J.table_name)});const N=V=>{t.value.dtxs=Math.max(V,t.value.dtxs)};t.value.meta={...Mt.getColumnDefaultMeta(B.Rollup),...t.value.meta||{}};const{isMetaReadOnly:A}=jl(),q=Rn(b),ye=ee(()=>{var Pe;const V=(Pe=$e.value)==null?void 0:Pe.find(Le=>Le.id===t.value.fk_rollup_column_id);if(!V)return!1;let J=V.uidt;if(V.uidt===B.Formula){const Le=Jt(V.meta);Le!=null&&Le.display_type&&(J=Le==null?void 0:Le.display_type)}return Ka(J).includes(t.value.rollup_function)}),fe=()=>{j.value&&(X.value=!X.value)},Oe=()=>{var V,J;(J=(V=Z.value)==null?void 0:V.$el)==null||J.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})};return(V,J)=>{const ke=Ye,Pe=dt,Le=Ct,Ge=At,we=rt,He=Ft,pt=Sc,ze=Dn,et=Ac,Xe=Un;return e(K).length?(l(),r("div",Oc,[a("div",Lc,[o(we,st({class:"flex w-1/2 !max-w-[calc(50%_-_4px)] pb-2",label:`${V.$t("general.link")} ${V.$t("objects.field")}`},e(u).fk_relation_column_id),{default:n(()=>[o(Ge,{value:e(t).fk_relation_column_id,"onUpdate:value":J[0]||(J[0]=me=>e(t).fk_relation_column_id=me),placeholder:"-select-","dropdown-class-name":"!w-64 nc-dropdown-relation-table !rounded-md",onChange:W},{suffixIcon:n(()=>[o(ke,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be(e(K),(me,Je)=>(l(),d(Le,{key:Je,value:me.col.fk_column_id},{default:n(()=>[a("div",Ec,[a("div",Mc,[(l(),d(_e(Te(me.column)),{"column-meta":me.column,class:"!mx-0"},null,8,["column-meta"])),o(Pe,{class:"truncate min-w-[calc(100%_-_24px)]","show-on-truncate-only":""},{title:n(()=>[E(v(me.column.title),1)]),default:n(()=>[E(" "+v(me.column.title),1)]),_:2},1024)]),a("div",Dc,[a("div",Uc,[o(Pe,{class:"truncate","show-on-truncate-only":""},{title:n(()=>[E(v(me.title||me.table_name),1)]),default:n(()=>[E(" "+v(me.title||me.table_name),1)]),_:2},1024)]),e(t).fk_relation_column_id===me.col.fk_column_id?(l(),d(_e(("iconMap"in V?V.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},16,["label"]),o(we,st({class:"flex w-1/2",label:`${V.$t("datatype.Rollup")} ${V.$t("objects.field")}`},e(t).fk_relation_column_id?e(u).fk_rollup_column_id:void 0),{default:n(()=>[o(Ge,{value:e(t).fk_rollup_column_id,"onUpdate:value":J[1]||(J[1]=me=>e(t).fk_rollup_column_id=me),name:"fk_rollup_column_id",placeholder:"-select-",disabled:!e(t).fk_relation_column_id,"show-search":"","filter-option":"antSelectFilterOption"in V?V.antSelectFilterOption:e(kn),"dropdown-class-name":"nc-dropdown-relation-column !rounded-xl",onChange:e(h)},{suffixIcon:n(()=>[o(ke,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be(e($e),me=>(l(),d(Le,{key:me.title,value:me.id},{default:n(()=>[a("div",Rc,[a("div",Pc,[(l(),d(_e(Te(me)),{"column-meta":me,class:"!mx-0"},null,8,["column-meta"])),a("div",Fc,v(me.title),1)]),e(t).fk_rollup_column_id===me.id?(l(),d(_e(("iconMap"in V?V.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","filter-option","onChange"])]),_:1},16,["label"])]),o(we,st({label:V.$t("labels.aggregateFunction")},e(t).fk_relation_column_id?e(u).rollup_function:void 0),{default:n(()=>[o(Ge,{value:e(t).rollup_function,"onUpdate:value":J[2]||(J[2]=me=>e(t).rollup_function=me),disabled:!e(t).fk_relation_column_id,placeholder:"-select-","dropdown-class-name":"nc-dropdown-rollup-function",class:"!mt-0.5",onChange:pe},{suffixIcon:n(()=>[o(ke,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be(e(m),(me,Je)=>(l(),d(Le,{key:Je,value:me.value},{default:n(()=>[a("div",Bc,[E(v(me.text)+" ",1),e(t).rollup_function===me.value?(l(),d(_e(("iconMap"in V?V.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16,["label"]),e(ye)?(l(),d(we,{key:0,label:V.$t("placeholder.precision")},{default:n(()=>{var me,Je;return[(me=e(t).meta)!=null&&me.precision||((Je=e(t).meta)==null?void 0:Je.precision)===0?(l(),d(Ge,{key:0,value:e(t).meta.precision,"onUpdate:value":J[3]||(J[3]=re=>e(t).meta.precision=re),disabled:e(A),"dropdown-class-name":"nc-dropdown-decimal-format",onChange:N},{suffixIcon:n(()=>[o(ke,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be("precisionFormats"in V?V.precisionFormats:e(xn),(re,R)=>(l(),d(Le,{key:R,value:re},{default:n(()=>[a("div",Nc,[E(v(e(q)[re])+" ",1),e(t).meta.precision===re?(l(),d(_e(("iconMap"in V?V.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])):_("",!0)]}),_:1},8,["label"])):_("",!0),e(ye)?(l(),d(we,{key:1},{default:n(()=>[a("div",Vc,[e(t).meta?(l(),d(He,{key:0,checked:e(t).meta.isLocaleString,"onUpdate:checked":J[4]||(J[4]=me=>e(t).meta.isLocaleString=me)},{default:n(()=>[a("div",zc,v(V.$t("labels.showThousandsSeparator")),1)]),_:1},8,["checked"])):_("",!0)])]),_:1})):_("",!0),("isEeUI"in V?V.isEeUI:e(Gt))?(l(),r("div",jc,[a("div",Wc,[o(ze,{feature:e(Xt).FEATURE_ROLLUP_LIMIT_RECORDS_BY_FILTER},{default:n(({click:me})=>[a("div",qc,[o(He,{checked:e(X),disabled:!e(j),size:"small","data-testid":"nc-rollup-limit-record-filters",onChange:Je=>{Je&&me(e(Xt).FEATURE_ROLLUP_LIMIT_RECORDS_BY_FILTER)||fe()}},{default:n(()=>[E(v(V.$t("labels.onlyIncludeLinkedRecordsThatMeetSpecificConditions")),1)]),_:2},1032,["checked","disabled","onChange"]),e(X)?_("",!0):(l(),d(pt,{key:0,feature:e(Xt).FEATURE_ROLLUP_LIMIT_RECORDS_BY_FILTER,content:V.$t("upgrade.upgradeToIncludeLinkedRecordsThatMeetSpecificConditions",{plan:e(k)(e(In).PLUS)}),class:"ml-1"},null,8,["feature","content"]))])]),_:1},8,["feature"]),e(X)?(l(),r("div",Gc,[o(et,{ref_key:"filterRef",ref:Z,modelValue:e(t).filters,"onUpdate:modelValue":J[5]||(J[5]=me=>e(t).filters=me),class:"!pl-10 !p-0 max-w-620px","auto-save":!1,"show-loading":!1,link:"","show-dynamic-condition":!1,"root-meta":e(i),"link-col-id":e(t).id,onAddFilter:Oe,onAddFilterGroup:Oe},null,8,["modelValue","root-meta","link-col-id"])])):_("",!0)])])):_("",!0)])):(l(),r("div",Hc,[o(Xe,{type:"warning","show-icon":""},{icon:n(()=>[o(ke,{icon:"alertTriangle",class:"h-6 w-6",width:"24",height:"24"})]),message:n(()=>J[6]||(J[6]=[E(" Alert ")])),description:n(()=>[E(v(V.$t("msg.linkColumnClearNotSupportedYet",{type:"Rollup"})),1)]),_:1})]))}}}),Yc=Object.assign(Ze(Kc,[["__scopeId","data-v-77bf63b2"]]),{__name:"SmartsheetColumnRollupOptions"}),Xc=Ve(()=>Ne(()=>import("./B69fapgU.js"),__vite__mapDeps([101,1,2]),import.meta.url).then(s=>s.default||s)),Jc=Ve(()=>Ne(()=>import("./2EkCyFsn.js"),__vite__mapDeps([95,79,1,2]),import.meta.url).then(s=>s.default||s)),Qc=Ve(()=>Ne(()=>import("./BcG6Ieku.js").then(s=>s.C),__vite__mapDeps([96,1,2,24,25,26,27,97,21,11,98,61,62,63,64,5,6,65,66,67,68,69,99,58,59,86,17,100]),import.meta.url).then(s=>s.default||s)),Zc=Ve(()=>Ne(()=>import("./Ctjf8h_Q.js"),__vite__mapDeps([102,87,1,2,88,89,90,17,11,20,12,91]),import.meta.url).then(s=>s.default||s)),ed={class:"w-full flex flex-col gap-4"},td={class:"flex flex-col gap-4"},ld={class:"nc-ltar-icon nc-mm-icon"},nd={class:"nc-ltar-icon nc-hm-icon"},od={class:"nc-ltar-icon nc-oo-icon"},ad={key:0},sd={key:1},id={class:"flex w-full items-center gap-2"},rd={class:"min-w-5 flex items-center justify-center"},ud={class:"flex gap-2 items-center"},cd={key:0,class:"text-nc-content-gray-muted leading-4.5 text-xs"},dd={class:"flex w-full items-center gap-2"},pd={class:"min-w-5 flex items-center justify-center"},md={class:"flex flex-col gap-2"},fd={class:"flex gap-2 items-center"},vd={class:"flex w-full items-center gap-2"},_d={class:"min-w-5 flex items-center justify-center"},gd={key:0},yd={key:3,class:"flex flex-col gap-2"},hd={class:"flex gap-2 items-center"},bd=["onClick"],wd={key:0,class:"overflow-auto nc-scrollbar-thin"},xd={class:"flex items-center gap-2"},kd={class:"first-letter:capitalize"},$d={key:0,class:"flex flex-col gap-4"},Cd={class:"flex flex-row space-x-2"},Td={class:"flex flex-row"},Id={class:"flex items-center gap-1"},Sd={class:"text-sm text-gray-800 select-none"},Ad=Ue({__name:"LinkedToAnotherRecordOptions",props:{value:{},isEdit:{type:Boolean}},emits:["update:value"],setup(s,{emit:$}){var Je,re,R,Ke,te,ue,Ae,Me,H,le,xe,Ee,ut,tt,ft,De,je,lt,gt;const p=s,t=qe(p,"value",$),i=Sn(p,"isEdit"),y=It(Lt,U()),u=U(),h=U(((re=(Je=t.value)==null?void 0:Je.colOptions)==null?void 0:re.fk_related_base_id)!==((R=t.value)==null?void 0:R.base_id)),{basesList:x}=Ut(po()),{setAdditionalValidations:I,setPostSaveOrUpdateCbk:S,validateInfos:P,onDataTypeChange:C,sqlUi:f,isXcdbBase:c,updateFieldName:z}=_t(),b=Ol(),{tables:O}=Ut(b),k=en(),{viewsByTable:Z}=Ut(k),{t:K}=Et(),{getPlanTitle:j}=an(),{metas:Q,getMeta:X}=ul();i.value||I({childId:[{required:!0,message:K("general.required")}]});const oe=["NO ACTION","CASCADE","RESTRICT","SET NULL","SET DEFAULT"];i.value?((Ae=t.value)==null||Ae.colOptions,(H=(Me=t.value)==null?void 0:Me.meta)!=null&&H.custom&&Gt,t.value.is_custom_link=(xe=(le=t.value)==null?void 0:le.meta)==null?void 0:xe.custom,t.value.childViewId||(t.value.childViewId=((ut=(Ee=t.value)==null?void 0:Ee.colOptions)==null?void 0:ut.fk_target_view_id)||null)):(t.value.parentId||(t.value.parentId=(Ke=y.value)==null?void 0:Ke.id),t.value.childColumn||(t.value.childColumn=`${(te=y.value)==null?void 0:te.table_name}_id`),t.value.childTable||(t.value.childTable=(ue=y.value)==null?void 0:ue.table_name),t.value.parentTable||(t.value.parentTable=t.value.rtn||""),t.value.parentColumn||(t.value.parentColumn=t.value.rcn||""),t.value.type||(t.value.type="mm"),t.value.onUpdate||(t.value.onUpdate=oe[0]),t.value.onDelete||(t.value.onDelete=oe[0]),t.value.virtual||(t.value.virtual=f instanceof Ya),t.value.alias||(t.value.alias=t.value.column_name)),t.value.childId||(t.value.childId=((ft=(tt=t.value)==null?void 0:tt.colOptions)==null?void 0:ft.fk_related_model_id)||null),t.value.childViewId||(t.value.childViewId=((je=(De=t.value)==null?void 0:De.colOptions)==null?void 0:je.fk_target_view_id)||null),t.value.type||(t.value.type=((gt=(lt=t.value)==null?void 0:lt.colOptions)==null?void 0:gt.type)||"mm");const W=U(!1),Te=An(),{baseTables:m}=Ut(Te),{isFeatureEnabled:ge}=mo(),ve=ee(()=>{if(i.value){const F=fe.value;return Q.value[F]||X(F),[Q.value[F]]}return h.value?m.value.get(t.value.ref_base_id)?[...m.value.get(t.value.ref_base_id).filter(F=>F.type===Gn.TABLE)]:[]:!O.value||!O.value.length?[]:O.value.filter(F=>{var ie;return F.type===Gn.TABLE&&F.source_id===((ie=y.value)==null?void 0:ie.source_id)})}),$e=ee(()=>{var Ie,w,g,G;const F=(Ie=t.value)!=null&&Ie.is_custom_link?(g=(w=t.value)==null?void 0:w.custom)==null?void 0:g.ref_model_id:(G=t.value)==null?void 0:G.childId;return F?(Z.value.get(F)||[]).filter(Ce=>Ce.type!==Xa.FORM):[]}),pe=(F,ie)=>ie.key.toLowerCase().includes(F.toLowerCase()),N=ee(()=>t.value.uidt===B.Links&&t.value.type!==Yt.ONE_TO_ONE);it(()=>{var F,ie,Ie,w;return(F=t.value)!=null&&F.is_custom_link?(Ie=(ie=t.value)==null?void 0:ie.custom)==null?void 0:Ie.ref_model_id:(w=t.value)==null?void 0:w.childId},async F=>{F&&(X(F).catch(()=>{}),k.loadViews({ignoreLoading:!0,tableId:F}).catch(()=>{}))},{immediate:!0}),t.value.meta=t.value.meta||{};const A=U(!!t.value.childViewId),q=ee({get(){var F;return!!((F=t.value.meta)!=null&&F.enableConditions)},set(F){t.value.meta=t.value.meta||{},t.value.meta.enableConditions=F}}),ye=F=>{F||(t.value.childViewId=null)};qt(Lt,ee(()=>{var ie,Ie,w,g;const F=(ie=t.value)!=null&&ie.is_custom_link?(w=(Ie=t.value)==null?void 0:Ie.custom)==null?void 0:w.ref_model_id:(g=t.value)==null?void 0:g.childId;return Q.value[F]||{}})),$t(()=>{S(async({colId:F,column:ie})=>{var Ie;await((Ie=u.value)==null?void 0:Ie.applyChanges(F||ie.id,!1))})}),Cn(()=>{S(null)});const fe=ee({get:()=>{var F,ie,Ie;return(i.value?(ie=(F=t.value)==null?void 0:F.colOptions)==null?void 0:ie.fk_related_model_id:(Ie=t.value)==null?void 0:Ie.childId)??null},set:F=>{var ie;!i.value&&F&&(t.value.childId=F,t.value.childTableTitle=(ie=ve.value.find(Ie=>Ie.id===F))==null?void 0:ie.title)}}),Oe=ee({get:()=>{var F,ie,Ie;return(i.value?(ie=(F=t.value)==null?void 0:F.colOptions)==null?void 0:ie.type:(Ie=t.value)==null?void 0:Ie.type)??null},set:F=>{!i.value&&F&&(t.value.type=F,z())}}),V=ee({get:()=>{var F,ie,Ie;return((F=t.value)==null?void 0:F.ref_base_id)??((Ie=(ie=t.value)==null?void 0:ie.colOptions)==null?void 0:Ie.fk_related_base_id)},set:F=>{!i.value&&F&&(t.value.ref_base_id=F)}}),J=()=>{C(),nl(()=>{z()})},ke=async F=>{await Te.loadProjectTables(F),fe.value&&(fe.value=null)},Pe={"custom.column_id":[{required:!0,message:K("general.required")}],"custom.ref_model_id":[{required:!0,message:K("general.required")}],"custom.ref_column_id":[{required:!0,message:K("general.required")}]},Le={"custom.junc_model_id":[{required:!0,message:K("general.required")}],"custom.junc_column_id":[{required:!0,message:K("general.required")}],"custom.junc_ref_column_id":[{required:!0,message:K("general.required")}]},Ge=()=>{var F;(F=t.value)!=null&&F.is_custom_link?(I({childId:[],...Pe,...t.value.type===Yt.MANY_TO_MANY?Le:{}}),t.value.virtual=!0):I({childId:[{required:!0,message:K("general.required")}]})},we=()=>{i.value||(t.value.is_custom_link=!t.value.is_custom_link,Ge())},He=()=>{var F;if(!(!t.value.childId&&!(t.value.is_custom_link&&((F=t.value.custom)!=null&&F.ref_model_id))))return A.value=!A.value,ye()},pt=()=>{var F;!t.value.childId&&!(t.value.is_custom_link&&((F=t.value.custom)!=null&&F.ref_model_id))||(q.value=!q.value)},ze=()=>{h.value||(V.value=null,ve.value.every(F=>F.id!==fe)&&(fe.value=null))},et=F=>{if(F.project_role){if([Hn.CREATOR,Hn.OWNER].includes(F.project_role))return!0}else if(F.workspace_role&&[Kn.CREATOR,Kn.OWNER].includes(F.workspace_role))return!0;return!1},Xe=()=>{i.value||(h.value=!h.value,ze())},me=()=>{var F,ie;(ie=(F=u.value)==null?void 0:F.$el)==null||ie.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})};return(F,ie)=>{var el;const Ie=Ye,w=Mn,g=En,G=rt,Ce=Ja,M=Xc,Se=ro,Be=Qa,yt=dt,vt=Ct,ht=At,Dt=ui,Ht=Za,Qt=on,at=Jc,Zt=Dn,wl=Qc,cl=Pt,Bt=Zc,wt=Ft,Nt=Kl("e");return l(),r("div",ed,[a("div",td,[o(G,{label:F.$t("labels.relationType"),class:"nc-ltar-relation-type"},{default:n(()=>[o(g,{value:e(Oe),"onUpdate:value":ie[0]||(ie[0]=ce=>se(Oe)?Oe.value=ce:null),name:"type",disabled:e(i)},{default:n(()=>[o(w,{value:"mm","data-testid":"Many to Many"},{default:n(()=>[a("span",ld,[o(Ie,{icon:"mm_solid"})]),E(" "+v(F.$t("title.manyToMany")),1)]),_:1}),o(w,{value:"hm","data-testid":"Has Many"},{default:n(()=>[a("span",nd,[o(Ie,{icon:"hm_solid"})]),E(" "+v(F.$t("title.hasMany")),1)]),_:1}),o(w,{value:"oo","data-testid":"One to One"},{default:n(()=>[a("span",od,[o(Ie,{icon:"oneToOneSolid"})]),E(" "+v(F.$t("title.oneToOne")),1)]),_:1})]),_:1},8,["value","disabled"])]),_:1},8,["label"])]),e(ge)(("FEATURE_FLAG"in F?F.FEATURE_FLAG:e(tn)).CUSTOM_LINK)&&("isEeUI"in F?F.isEeUI:e(Gt))?(l(),r("div",ad,[o(Ce,{checked:e(t).is_custom_link,"onUpdate:checked":ie[1]||(ie[1]=ce=>e(t).is_custom_link=ce),disabled:e(i),"is-edit":e(i),size:"small",name:"Custom",onChange:Ge},null,8,["checked","disabled","is-edit"]),a("span",{class:ae(["ml-3",{"cursor-pointer":!e(i)}]),onClick:we},"Advanced Link",2)])):_("",!0),("isEeUI"in F?F.isEeUI:e(Gt))&&e(t).is_custom_link?(l(),r("div",sd,[o(M,{value:e(t),"onUpdate:value":ie[2]||(ie[2]=ce=>se(t)?t.value=ce:null),"is-edit":e(i),meta:e(y)},null,8,["value","is-edit","meta"])])):(l(),r(Y,{key:2},[e(ge)(("FEATURE_FLAG"in F?F.FEATURE_FLAG:e(tn)).CROSS_BASE_LINK)?(l(),r(Y,{key:0},[a("div",null,[o(Ce,{checked:e(h),"onUpdate:checked":ie[3]||(ie[3]=ce=>se(h)?h.value=ce:null),disabled:e(i),"is-edit":e(i),size:"small",name:"crossBase",onChange:ze},null,8,["checked","disabled","is-edit"]),o(Se,null,_l({default:n(()=>[a("span",{class:ae(["ml-3",{"cursor-pointer":!e(i)}]),onClick:Xe,onDblclick:we},v(F.$t("labels.crossBase")),35)]),_:2},[e(i)?void 0:{name:"title",fn:n(()=>[E(v(F.$t("tooltip.crossBase")),1)]),key:"0"}]),1024)]),e(h)?(l(),d(G,st({key:0,class:"flex w-full pb-2 nc-ltar-child-table"},e(P).childBaseId),{default:n(()=>[o(ht,{value:e(V),"onUpdate:value":ie[4]||(ie[4]=ce=>se(V)?V.value=ce:null),"show-search":"",disabled:e(i),"filter-option":pe,placeholder:"Select base","dropdown-class-name":"nc-dropdown-ltar-child-table",onChange:ie[5]||(ie[5]=ce=>ke(e(V)))},{suffixIcon:n(()=>[o(Ie,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be(e(x),ce=>(l(),d(vt,{key:ce.title,disabled:!et(ce),value:ce.id},{default:n(()=>[o(Se,null,_l({default:n(()=>{var Ot;return[a("div",id,[a("div",rd,[o(Be,{color:("parseProp"in F?F.parseProp:e(Jt))(ce.meta).iconColor,type:ce.type,class:"nc-project-icon"},null,8,["color","type"])]),o(yt,{class:"flex-1 truncate","show-on-truncate-only":""},{title:n(()=>[E(v(ce.title),1)]),default:n(()=>[a("span",null,v(ce.title),1)]),_:2},1024),a("div",ud,[(ce==null?void 0:ce.id)===((Ot=e(y))==null?void 0:Ot.base_id)?(l(),r("div",cd,v(F.$t("labels.currentBase")),1)):_("",!0)])])]}),_:2},[et(ce)?void 0:{name:"title",fn:n(()=>[ie[15]||(ie[15]=E(" You can only link to tables in bases where you have creator access or above. "))]),key:"0"}]),1024)]),_:2},1032,["disabled","value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16)):_("",!0)],64)):_("",!0),o(G,st({class:"flex w-full pb-2 nc-ltar-child-table"},e(P).childId),{default:n(()=>[o(ht,{value:e(fe),"onUpdate:value":ie[6]||(ie[6]=ce=>se(fe)?fe.value=ce:null),"show-search":"",disabled:e(i),"filter-option":pe,placeholder:"select table to link","dropdown-class-name":"nc-dropdown-ltar-child-table",onChange:J},{suffixIcon:n(()=>[o(Ie,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be(e(ve),ce=>(l(),d(vt,{key:ce.title,value:ce.id},{default:n(()=>[a("div",dd,[a("div",pd,[o(Dt,{meta:ce,class:"text-gray-500"},null,8,["meta"])]),o(yt,{class:"flex-1 truncate","show-on-truncate-only":""},{title:n(()=>[E(v(ce.title),1)]),default:n(()=>[a("span",null,v(ce.title),1)]),_:2},1024)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16)],64)),a("div",md,[a("div",fd,[St(o(Ce,{checked:e(A),"onUpdate:checked":ie[7]||(ie[7]=ce=>se(A)?A.value=ce:null),size:"small",disabled:!e(t).childId&&!(e(t).is_custom_link&&((el=e(t).custom)!=null&&el.ref_model_id)),onChange:ye},null,8,["checked","disabled"]),[[Nt,["c:link:limit-record-by-view",{status:e(A)}]]]),St((l(),r("span",{class:"text-s cursor-pointer","data-testid":"nc-limit-record-view",onClick:He},[E(v(F.$t("labels.limitRecordSelectionToView")),1)])),[[Nt,["c:link:limit-record-by-view",{status:e(A)}]]])]),e(A)?(l(),d(G,{key:0,class:"!pl-8 flex w-full pb-2 mt-4 space-y-2 nc-ltar-child-view"},{default:n(()=>[o(Qt,{value:e(t).childViewId,"onUpdate:value":ie[8]||(ie[8]=ce=>e(t).childViewId=ce),placeholder:F.$t("labels.selectView"),"show-search":"","filter-option":pe,"dropdown-class-name":"nc-dropdown-ltar-child-view"},{default:n(()=>[(l(!0),r(Y,null,be(e($e),ce=>(l(),d(vt,{key:ce.title,value:ce.id},{default:n(()=>[a("div",vd,[a("div",_d,[o(Ht,{meta:ce,class:"text-gray-500"},null,8,["meta"])]),ce.is_default?(l(),r("span",gd,v(F.$t("labels.defaultView")),1)):(l(),d(yt,{key:1,class:"flex-1 truncate","show-on-truncate-only":""},{title:n(()=>[E(v(ce.title),1)]),default:n(()=>[a("span",null,v(ce.title),1)]),_:2},1024))])]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1})):_("",!0)]),("isEeUI"in F?F.isEeUI:e(Gt))?(l(),r("div",yd,[o(Zt,{feature:e(Xt).FEATURE_LTAR_LIMIT_SELECTION_BY_FILTER},{default:n(({click:ce})=>{var Ot;return[a("div",hd,[St(o(Ce,{checked:e(q),disabled:!e(t).childId&&!(e(t).is_custom_link&&((Ot=e(t).custom)!=null&&Ot.ref_model_id)),size:"small",onChange:tl=>{tl&&ce(e(Xt).FEATURE_LTAR_LIMIT_SELECTION_BY_FILTER)||pt()}},null,8,["checked","disabled","onChange"]),[[Nt,["c:link:limit-record-by-filter",{status:e(q)}]]]),St((l(),r("span",{"data-testid":"nc-limit-record-filters",class:"cursor-pointer",onClick:tl=>ce(e(Xt).FEATURE_LTAR_LIMIT_SELECTION_BY_FILTER,()=>pt())},[E(v(F.$t("labels.limitRecordSelectionToFilters")),1)],8,bd)),[[Nt,["c:link:limit-record-by-filter",{status:e(q)}]]]),e(q)?_("",!0):(l(),d(at,{key:0,feature:e(Xt).FEATURE_LTAR_LIMIT_SELECTION_BY_FILTER,content:F.$t("upgrade.upgradeToAddLimitRecordSelection",{plan:e(j)(e(In).PLUS)})},null,8,["feature","content"]))])]}),_:1},8,["feature"]),e(q)?(l(),r("div",wd,[o(wl,{ref_key:"filterRef",ref:u,modelValue:e(t).filters,"onUpdate:modelValue":ie[9]||(ie[9]=ce=>e(t).filters=ce),class:"!pl-8 !p-0 max-w-620px","auto-save":!1,"show-loading":!1,link:!0,"root-meta":e(y),"link-col-id":e(t).id,onAddFilter:me,onAddFilterGroup:me},null,8,["modelValue","root-meta","link-col-id"])])):_("",!0)])):_("",!0),!e(c)&&!e(i)||e(N)?(l(),r(Y,{key:4},[a("div",null,[o(cl,{size:"small",type:"text",class:"!text-gray-500 !hover:text-gray-700",onClick:ie[10]||(ie[10]=he(ce=>W.value=!e(W),["stop"]))},{default:n(()=>[a("div",xd,[a("span",kd,v(F.$t("title.advancedSettings").toLowerCase()),1),o(Ie,{icon:e(W)?"arrowUp":"arrowDown",class:"h-4 w-4"},null,8,["icon"])])]),_:1})]),e(W)?(l(),r("div",$d,[e(N)?(l(),d(Bt,{key:0,value:e(t),"onUpdate:value":ie[11]||(ie[11]=ce=>se(t)?t.value=ce:null)},null,8,["value"])):_("",!0),!e(c)&&!e(i)?(l(),r(Y,{key:1},[a("div",Cd,[o(G,{class:"flex w-1/2",label:F.$t("labels.onUpdate")},{default:n(()=>[o(ht,{value:e(t).onUpdate,"onUpdate:value":ie[12]||(ie[12]=ce=>e(t).onUpdate=ce),disabled:e(t).virtual,name:"onUpdate","dropdown-class-name":"nc-dropdown-on-update",onChange:e(C)},{suffixIcon:n(()=>[o(Ie,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(),r(Y,null,be(oe,(ce,Ot)=>o(vt,{key:Ot,value:ce},{default:n(()=>[ce==="NO ACTION"?(l(),r(Y,{key:0},[E(v(F.$t("title.links.noAction")),1)],64)):ce==="CASCADE"?(l(),r(Y,{key:1},[E(v(F.$t("title.links.cascade")),1)],64)):ce==="RESTRICT"?(l(),r(Y,{key:2},[E(v(F.$t("title.links.restrict")),1)],64)):ce==="SET NULL"?(l(),r(Y,{key:3},[E(v(F.$t("title.links.setNull")),1)],64)):ce==="SET DEFAULT"?(l(),r(Y,{key:4},[E(v(F.$t("title.links.setDefault")),1)],64)):(l(),r(Y,{key:5},[E(v(ce),1)],64))]),_:2},1032,["value"])),64))]),_:1},8,["value","disabled","onChange"])]),_:1},8,["label"]),o(G,{class:"flex w-1/2",label:F.$t("labels.onDelete")},{default:n(()=>[o(ht,{value:e(t).onDelete,"onUpdate:value":ie[13]||(ie[13]=ce=>e(t).onDelete=ce),disabled:e(t).virtual,name:"onDelete","dropdown-class-name":"nc-dropdown-on-delete",onChange:e(C)},{suffixIcon:n(()=>[o(Ie,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(),r(Y,null,be(oe,(ce,Ot)=>o(vt,{key:Ot,value:ce},{default:n(()=>[ce==="NO ACTION"?(l(),r(Y,{key:0},[E(v(F.$t("title.links.noAction")),1)],64)):ce==="CASCADE"?(l(),r(Y,{key:1},[E(v(F.$t("title.links.cascade")),1)],64)):ce==="RESTRICT"?(l(),r(Y,{key:2},[E(v(F.$t("title.links.restrict")),1)],64)):ce==="SET NULL"?(l(),r(Y,{key:3},[E(v(F.$t("title.links.setNull")),1)],64)):ce==="SET DEFAULT"?(l(),r(Y,{key:4},[E(v(F.$t("title.links.setDefault")),1)],64)):(l(),r(Y,{key:5},[E(v(ce),1)],64))]),_:2},1032,["value"])),64))]),_:1},8,["value","disabled","onChange"])]),_:1},8,["label"])]),a("div",Td,[o(G,null,{default:n(()=>[a("div",Id,[o(wt,{checked:e(t).virtual,"onUpdate:checked":ie[14]||(ie[14]=ce=>e(t).virtual=ce),disabled:e(t).is_custom_link,onChange:e(C)},{default:n(()=>[a("div",Sd,v(F.$t("title.virtualRelation")),1)]),_:1},8,["checked","disabled","onChange"])])]),_:1})])],64)):_("",!0)])):_("",!0)],64)):_("",!0)])}}}),Od=Object.assign(Ze(Ad,[["__scopeId","data-v-f10b40c8"]]),{__name:"SmartsheetColumnLinkedToAnotherRecordOptions"}),Ld={},Ed={class:"hidden"};function Md(s,$){return l(),r("div",Ed)}const Dd=Object.assign(Ze(Ld,[["render",Md]]),{__name:"SmartsheetColumnSpecificDBTypeOptions"}),Ud={class:"flex flex-col gap-4"},Rd={key:0,class:"flex items-center gap-1"},Pd={key:0,class:"flex items-center gap-1"},Fd=Ue({__name:"UserOptions",props:{value:{},isEdit:{type:Boolean}},emits:["update:value"],setup(s,{emit:$}){const t=qe(s,"value",$),i=U(!1),y=U(),u={},{setAdditionalValidations:h,updateFieldName:x}=_t();h({...u}),t.value.meta={...Mt.getColumnDefaultMeta(B.User),...t.value.meta||{}},$t(()=>{y.value=t.value.meta.is_multi});const I=S=>{var P;t.value.meta.is_multi=S,t.value.meta.is_multi||(t.value.cdf=((P=t.value.cdf)==null?void 0:P.split(",")[0])||null),x()};return(S,P)=>{const C=Ft,f=rt,c=Ye,z=Un;return l(),r("div",Ud,[o(f,null,{default:n(()=>[e(t).meta?(l(),r("div",Rd,[o(C,{checked:e(t).meta.is_multi,"data-testid":"user-column-allow-multiple",onChange:I},{default:n(()=>P[1]||(P[1]=[a("div",{class:"text-sm text-gray-800 select-none"},"Allow adding multiple users",-1)])),_:1,__:[1]},8,["checked"])])):_("",!0)]),_:1}),e(i)?(l(),d(f,{key:0},{default:n(()=>[e(t).meta?(l(),r("div",Pd,[o(C,{checked:e(t).meta.notify,"onUpdate:checked":P[0]||(P[0]=b=>e(t).meta.notify=b),"data-testid":"user-column-notify-user"},{default:n(()=>P[2]||(P[2]=[a("div",{class:"text-sm text-gray-800 select-none"},"Notify users with base access when they're added",-1)])),_:1,__:[2]},8,["checked"])])):_("",!0)]),_:1})):_("",!0),e(y)&&S.isEdit&&!e(t).meta.is_multi?(l(),d(z,{key:1,type:"warning","show-icon":""},{icon:n(()=>[o(c,{icon:"alertTriangle",class:"h-6 w-6",width:"24",height:"24"})]),message:n(()=>P[3]||(P[3]=[E(" Alert ")])),description:n(()=>P[4]||(P[4]=[E(" Changing from multiple mode to single will retain only first user in each cell! ")])),_:1})):_("",!0)])}}}),Bd=Object.assign(Fd,{__name:"SmartsheetColumnUserOptions"}),Nd=["onKeydown"],Vd={class:"nc-unified-search-list-wrapper flex-col w-full max-h-100 nc-scrollbar-thin !overflow-y-auto px-2 pb-2"},zd={key:0,class:"px-2 py-6 text-center text-gray-500 flex flex-col items-center gap-6"},jd={key:0,src:to,class:"!w-[164px] flex-none",alt:"No search results found"},Wd=["onClick"],qd=Ue({__name:"ListWithSearch",props:{isParentOpen:{type:Boolean},searchInputPlaceholder:{},optionConfig:{},options:{},disableMascot:{type:Boolean},selectedOptionId:{},uniqueIdentifier:{default:"id"},filterField:{},showSelectedOption:{type:Boolean}},emits:["selected"],setup(s,{emit:$}){const p=s,D=$,{isParentOpen:t,searchInputPlaceholder:i,selectedOptionId:y,showSelectedOption:u,filterField:h,options:x,optionConfig:I,disableMascot:S,uniqueIdentifier:P}=Tt(p),C=U(),f=U(-1),c=U(""),{t:z}=Et(),b=U(),O=()=>{const X=document.querySelector(".nc-unified-list-option-active");X&&setTimeout(()=>{X==null||X.scrollIntoView({behavior:"smooth",block:"center"})},50)},k=ee(()=>{var X;return((X=x.value)==null?void 0:X.filter(oe=>{var W;return(W=oe[h.value])==null?void 0:W.toLowerCase().includes(c.value.toLowerCase())}))??[]}),Z=()=>{f.value=Math.min(f.value+1,k.value.length-1),O()},K=()=>{f.value=Math.max(f.value-1,0),O()},j=X=>{X&&D("selected",X)},Q=()=>{(k.value[f.value]||k.value[0])&&j(k.value[f.value])};return $t(()=>{c.value="",f.value=-1}),it(t,()=>{t.value&&(c.value="",setTimeout(()=>{var X;(X=C.value)==null||X.focus()},100))},{immediate:!0}),(X,oe)=>{const W=Ye,Te=Wl,m=dt,ge=Kl("e");return l(),r("div",{ref_key:"wrapperRef",ref:b,class:"flex flex-col pt-2 nc-list-with-search w-64",onKeydown:[xt(he(Z,["prevent"]),["arrow-down"]),xt(he(K,["prevent"]),["arrow-up"]),oe[3]||(oe[3]=xt(he(ve=>j(e(k)[e(f)]),["prevent"]),["enter"]))]},[a("div",{class:"w-full pb-2 px-2",onClick:oe[2]||(oe[2]=he(()=>{},["stop"]))},[o(Te,{ref_key:"inputRef",ref:C,value:e(c),"onUpdate:value":oe[0]||(oe[0]=ve=>se(c)?c.value=ve:null),placeholder:e(i)||e(z)("placeholder.search"),class:"nc-dropdown-search-unified-input",onKeydown:xt(he(Q,["stop"]),["enter"]),onChange:oe[1]||(oe[1]=ve=>f.value=0)},{prefix:n(()=>[o(W,{icon:"search",class:"nc-search-icon h-3.5 w-3.5 mr-1"})]),_:1},8,["value","placeholder","onKeydown"])]),a("div",Vd,[e(k).length?_("",!0):(l(),r("div",zd,[e(S)?_("",!0):(l(),r("img",jd)),E(" "+v(e(x).length?e(z)("title.noResultsMatchedYourSearch"):"The list is empty"),1)])),(l(!0),r(Y,null,be(e(k),(ve,$e)=>St((l(),r("div",{key:$e,class:ae(["flex w-full py-[5px] items-center justify-between px-2 hover:bg-gray-100 cursor-pointer rounded-md",[`${e(I).optionClassName}`,`nc-unified-list-option-${$e}`,{"bg-gray-100 nc-unified-list-option-active":e(f)===$e}]]),onClick:pe=>j(ve)},[a("div",{class:ae(["flex items-center gap-x-1.5",{"max-w-[calc(100%_-_28px)]":e(u),"max-w-full":!e(u)}])},[Il(X.$slots,"default",{option:ve},void 0,!0),o(m,{class:"truncate","show-on-truncate-only":""},{title:n(()=>[E(v(ve.title),1)]),default:n(()=>[a("span",null,v(ve.title),1)]),_:2},1024)],2),e(u)&&ve[e(P)]===e(y)?(l(),d(W,{key:0,icon:"check",class:"flex-none text-primary w-4 h-4"})):_("",!0)],10,Wd)),[[ge,e(I).selectOptionEvent]])),128)),Il(X.$slots,"bottom",{},void 0,!0)])],40,Nd)}}}),Gd=Object.assign(Ze(qd,[["__scopeId","data-v-3df0ba79"]]),{__name:"NcListWithSearch"}),Hd={class:"w-full flex items-center justify-between h-[28px]"},Kd={class:"flex items-center justify-center gap-2"},Yd={class:"flex items-center w-full truncate gap-3 text-nc-content-gray-subtle hover:text-black transition-colors"},Xd={class:"flex-1 font-550 leading-5 text-small"},Jd={key:0},Qd={key:0,class:"mt-2 gap-2 flex flex-wrap min-h-5.5"},Zd={class:"text-[13px] font-default leading-4.5"},ep={key:1,class:"flex flex-row text-gray-400 mt-2"},tp=Ue({__name:"TriggerByField",props:{columns:{},triggerField:{type:Boolean},triggerFields:{}},emits:["update:triggerFields","update:triggerField"],setup(s,{emit:$}){const p=s,D=$,t=Sn(p,"columns"),i=qe(p,"triggerFields",D,{defaultValue:[]}),y=qe(p,"triggerField",D),u=U(!1),h=ee(()=>{var I;return(I=i.value)==null?void 0:I.map(S=>t.value.find(P=>P.id===S))}),x=I=>{var S;i.value=(S=i.value)==null?void 0:S.filter(P=>P!==I)};return(I,S)=>{var j;const P=Ft,C=Ye,f=Pt,c=So,z=hl,b=bl,O=dt,k=sn,Z=fo,K=al;return l(),r(Y,null,[a("div",Hd,[a("label",{class:"cursor-pointer flex items-center",onClick:S[0]||(S[0]=he(Q=>y.value=!e(y),["prevent"]))},[o(P,{checked:e(y),class:"nc-check-box-trigger-field"},{default:n(()=>S[4]||(S[4]=[a("span",{class:"!text-gray-700 font-semibold"}," Trigger only when specific fields change ",-1)])),_:1,__:[4]},8,["checked"])]),e(y)?(l(),d(K,{key:0,visible:e(u),"onUpdate:visible":S[3]||(S[3]=Q=>se(u)?u.value=Q:null),"overlay-class-name":"!pt-0"},{overlay:n(()=>[o(Z,{value:e(i),"onUpdate:value":S[1]||(S[1]=Q=>se(i)?i.value=Q:null),open:e(u),"onUpdate:open":S[2]||(S[2]=Q=>se(u)?u.value=Q:null),class:"nc-list-field","is-multi-select":"","close-on-select":!1,list:e(t),variant:"small","option-value-key":"id","option-label-key":"title"},{headerExtraRight:n(()=>[o(c,{border:!1,color:"brand",class:"mr-2"},{default:n(()=>[E(v(e(i).length)+" fields ",1)]),_:1})]),listItem:n(({option:Q})=>[a("div",Yd,[e(kt)(Q)?(l(),d(z,{key:0,"column-meta":Q},null,8,["column-meta"])):(l(),d(b,{key:1,"column-meta":Q},null,8,["column-meta"])),o(O,{class:"flex-1 truncate","show-on-truncate-only":""},{title:n(()=>[E(v(Q==null?void 0:Q.title),1)]),default:n(()=>[a("div",Xd,v(Q==null?void 0:Q.title),1)]),_:2},1024),o(k,{checked:!!e(i).includes(Q.id)},null,8,["checked"])])]),_:1},8,["value","open","list"])]),default:n(()=>[o(f,{size:"xs",type:"secondary",class:ae({"!shadow-selected !border-brand-500":e(u)})},{default:n(()=>[a("div",Kd,[o(C,{icon:"plus"}),E(" "+v(I.$t("activity.addFieldFromFormView")),1)])]),_:1},8,["class"])]),_:1},8,["visible"])):_("",!0)]),e(y)?(l(),r("div",Jd,[(j=e(i))!=null&&j.length?(l(),r("div",Qd,[(l(!0),r(Y,null,be(e(h),Q=>(l(),r("div",{key:Q.id,class:"bg-nc-bg-gray-medium text-nc-content-gray-subtle2 px-1 py-0.5 rounded-md flex gap-1 items-center"},[e(kt)(Q)?(l(),d(z,{key:0,"column-meta":Q},null,8,["column-meta"])):(l(),d(b,{key:1,"column-meta":Q},null,8,["column-meta"])),a("div",Zd,v(Q.title),1),S[5]||(S[5]=a("div",{class:"w-0.25 h-4 bg-nc-border-gray-dark"},null,-1)),o(C,{class:"cursor-pointer opacity-70 hover:opacity-100",icon:"close",onClick:X=>x(Q.id)},null,8,["onClick"])]))),128))])):(l(),r("div",ep,v(I.$t("title.noFieldsSelected")),1))])):_("",!0)],64)}}}),lp=Object.assign(Ze(tp,[["__scopeId","data-v-820c39aa"]]),{__name:"WebhookTriggerByField"});function np(s){var $;const p=Fl(s);return($=p==null?void 0:p.$el)!=null?$:p}const op=os?window:void 0;function ap(...s){let $,p,D,t;if(typeof s[0]=="string"||Array.isArray(s[0])?([p,D,t]=s,$=op):[$,p,D,t]=s,!$)return ls;Array.isArray(p)||(p=[p]),Array.isArray(D)||(D=[D]);const i=[],y=()=>{i.forEach(I=>I()),i.length=0},u=(I,S,P,C)=>(I.addEventListener(S,P,C),()=>I.removeEventListener(S,P,C)),h=it(()=>[np($),Fl(t)],([I,S])=>{if(y(),!I)return;const P=ns(S)?{...S}:S;i.push(...p.flatMap(C=>D.map(f=>u(I,C,f,P))))},{immediate:!0,flush:"post"}),x=()=>{h(),y()};return vo(x),x}function mn(s){return typeof Window<"u"&&s instanceof Window?s.document.documentElement:typeof Document<"u"&&s instanceof Document?s.documentElement:s}function Wo(s){const $=window.getComputedStyle(s);if($.overflowX==="scroll"||$.overflowY==="scroll"||$.overflowX==="auto"&&s.clientWidth<s.scrollWidth||$.overflowY==="auto"&&s.clientHeight<s.scrollHeight)return!0;{const p=s.parentNode;return!p||p.tagName==="BODY"?!1:Wo(p)}}function sp(s){const $=s||window.event,p=$.target;return Wo(p)?!1:$.touches.length>1?!0:($.preventDefault&&$.preventDefault(),!1)}const fn=new WeakMap;function ip(s,$=!1){const p=U($);let D=null,t="";it(ts(s),u=>{const h=mn(Fl(u));if(h){const x=h;if(fn.get(x)||fn.set(x,x.style.overflow),x.style.overflow!=="hidden"&&(t=x.style.overflow),x.style.overflow==="hidden")return p.value=!0;if(p.value)return x.style.overflow="hidden"}},{immediate:!0});const i=()=>{const u=mn(Fl(s));!u||p.value||(Yn&&(D=ap(u,"touchmove",h=>{sp(h)},{passive:!1})),u.style.overflow="hidden",p.value=!0)},y=()=>{const u=mn(Fl(s));!u||!p.value||(Yn&&(D==null||D()),u.style.overflow=t,fn.delete(u),p.value=!1)};return vo(y),ee({get(){return p.value},set(u){u?i():y()}})}function rp(){let s=!1;const $=U(!1);return(p,D)=>{if($.value=D.value,s)return;s=!0;const t=ip(p,D.value);it($,i=>t.value=i)}}rp();const up=Ue({name:"UseVirtualList",props:["list","options","height"],setup(s,{slots:$,expose:p}){const{list:D}=Tt(s),{list:t,containerProps:i,wrapperProps:y,scrollTo:u}=es(D,s.options);return p({scrollTo:u}),i.style&&typeof i.style=="object"&&!Array.isArray(i.style)&&(i.style.height=s.height||"300px"),()=>ol("div",{...i},[ol("div",{...y.value},t.value.map(h=>ol("div",{style:{overflow:"hidden",height:h.height}},$.default?$.default(h):"Please set content!")))])}}),cp={class:"nc-pagition-btns-wrapper"},dp={key:1,class:"nc-pagition-v2-border"},pp={key:0,class:"nc-pagination-selector-wrapper text-gray-500"},mp={class:"flex items-center gap-2"},fp={class:"nc-current-page"},vp={key:0,class:"text-small1 font-500 text-nc-content-gray-subtle"},_p={class:"rounded-lg text-[13px] font-medium w-full"},gp={class:"nc-pagition-btns-wrapper"},yp={key:0,class:"nc-pagition-v2-border"},hp={key:1,class:"text-gray-500"},bp=Ue({__name:"PaginationV2",props:{current:{},total:{},pageSize:{},entityName:{},mode:{},variant:{default:"default"},prevPageTooltip:{},nextPageTooltip:{},firstPageTooltip:{},lastPageTooltip:{},showSizeChanger:{type:Boolean}},emits:["update:current","update:pageSize"],setup(s,{emit:$}){const p=s,D=$,{total:t,showSizeChanger:i}=Tt(p),y=qe(p,"current",D),u=qe(p,"pageSize",D),{gridViewPageSize:h,setGridViewPageSize:x}=Sl(),I=ee({get:()=>{if(!i.value)return u.value;const K=h.value||25;return u.value!==K&&(u.value=K),u.value},set:K=>{x(K),u.value=K}}),S=ee(()=>p.entityName||"item"),P=ee(()=>Math.max(Math.ceil(t.value/I.value),1)),{isMobileMode:C}=Sl(),f=ee(()=>p.mode||(C.value?"simple":"full")),c=ee(()=>p.variant==="default"?"xsmall":"xs"),z=({increase:K,set:j})=>{j?y.value=j:K&&y.value<P.value?y.value=y.value+1:y.value>0&&(y.value=y.value-1)},b=()=>{y.value=P.value},O=()=>{y.value=1},k=ee(()=>Array.from({length:P.value},(K,j)=>({value:j+1,label:j+1}))),Z=[{value:25,label:"25 / page"},{value:50,label:"50 / page"},{value:75,label:"75 / page"},{value:100,label:"100 / page"}];return(K,j)=>{const Q=Ye,X=Pt,oe=To,W=Js,Te=Io,m=al,ge=Kl("e");return l(),r("div",{class:ae(["nc-pagination flex flex-row items-center gap-x-0.25",`nc-variant-${K.variant}`])},[a("div",cp,[e(f)==="full"?(l(),d(_e(p.firstPageTooltip&&e(f)==="full"?dt:"div"),{key:0},_l({default:n(()=>[St((l(),d(X,{class:"first-page !border-0",type:"text",size:e(c),disabled:e(y)===1,onClick:O},{default:n(()=>[o(Q,{icon:"doubleLeftArrow",class:"nc-pagination-icon"})]),_:1},8,["size","disabled"])),[[ge,[`a:pagination:${e(S)}:first-page`]]])]),_:2},[p.firstPageTooltip?{name:"title",fn:n(()=>[E(v(p.firstPageTooltip),1)]),key:"0"}:void 0]),1024)):_("",!0),K.variant==="v2"?(l(),r("div",dp)):_("",!0),(l(),d(_e(p.prevPageTooltip&&e(f)==="full"?dt:"div"),null,_l({default:n(()=>[St((l(),d(X,{class:"prev-page",type:"text",size:e(c),disabled:e(y)===1,onClick:j[0]||(j[0]=ve=>z({increase:!1}))},{default:n(()=>[o(Q,{icon:"arrowLeft",class:"nc-pagination-icon"})]),_:1},8,["size","disabled"])),[[ge,[`a:pagination:${e(S)}:prev-page`]]])]),_:2},[p.prevPageTooltip?{name:"title",fn:n(()=>[E(v(p.prevPageTooltip),1)]),key:"0"}:void 0]),1024))]),e(C)?_("",!0):(l(),r("div",pp,[o(m,{placement:"top","overlay-class-name":"!shadow-none"},{overlay:n(()=>[o(Te,{class:"nc-pagination-menu overflow-hidden",variant:"small"},{default:n(()=>[e(i)?(l(),d(W,{key:`${e(I)}page`,class:"bg-gray-100 z-20 top-0 !sticky",variant:"small"},{title:n(()=>[a("div",_p,v(e(I))+" / page",1)]),default:n(()=>[(l(),r(Y,null,be(Z,ve=>o(oe,{key:ve.value,onClick:$e=>I.value=ve.value},{default:n(()=>[a("span",{class:ae(["text-[13px]",{"!text-brand-500":ve.value===e(I)}])},v(ve.value)+" / page ",3)]),_:2},1032,["onClick"])),64))]),_:1})):_("",!0),(l(),d(e(up),{key:e(I),list:e(k),height:"auto",options:{itemHeight:28},class:"mt-1 max-h-46 nc-scrollbar-thin"},{default:n(({data:ve})=>[(l(),d(oe,{key:`${e(I)}${ve.value}`,style:{height:"28px"},onClick:he($e=>z({set:ve.value}),["stop"])},{default:n(()=>[a("div",{class:ae([{"text-brand-500":ve.value===e(y)},"flex text-[13px] !w-full text-gray-800 items-center justify-between"])},v(ve.label),3)]),_:2},1032,["onClick"]))]),_:1},8,["list"]))]),_:1})]),default:n(()=>[a("div",mp,[o(X,{class:"nc-select-page",type:K.variant==="default"?"text":"secondary",size:e(c)},{default:n(()=>[a("div",{class:ae(["flex items-center",{"gap-1 px-2":K.variant==="default","gap-2":K.variant!=="default"}])},[a("span",fp,v(e(y)),1),o(Q,{icon:"arrowDown",class:"text-gray-800 mt-0.5 nc-select-expand-btn"})],2)]),_:1},8,["type","size"]),K.variant==="v2"?(l(),r("div",vp,"/"+v(e(k).length),1)):_("",!0)])]),_:1})])),a("div",gp,[(l(),d(_e(p.nextPageTooltip&&e(f)==="full"?dt:"div"),null,_l({default:n(()=>[St((l(),d(X,{class:"next-page",type:"text",size:e(c),disabled:e(y)===e(P),onClick:j[1]||(j[1]=ve=>z({increase:!0}))},{default:n(()=>[o(Q,{icon:"arrowRight",class:"nc-pagination-icon"})]),_:1},8,["size","disabled"])),[[ge,[`a:pagination:${e(S)}:next-page`]]])]),_:2},[p.nextPageTooltip?{name:"title",fn:n(()=>[E(v(p.nextPageTooltip),1)]),key:"0"}:void 0]),1024)),K.variant==="v2"?(l(),r("div",yp)):_("",!0),e(f)==="full"?(l(),d(_e(p.lastPageTooltip&&e(f)==="full"?dt:"div"),{key:1},_l({default:n(()=>[St((l(),d(X,{class:"last-page",type:"text",size:e(c),disabled:e(y)===e(P),onClick:b},{default:n(()=>[o(Q,{icon:"doubleRightArrow",class:"nc-pagination-icon"})]),_:1},8,["size","disabled"])),[[ge,[`a:pagination:${e(S)}:last-page`]]])]),_:2},[p.lastPageTooltip?{name:"title",fn:n(()=>[E(v(p.lastPageTooltip),1)]),key:"0"}:void 0]),1024)):_("",!0)]),e(i)&&!e(C)?(l(),r("div",hp)):_("",!0)],2)}}}),wp=Object.assign(Ze(bp,[["__scopeId","data-v-61a2e2cb"]]),{__name:"NcPaginationV2"}),xp={class:"container"},kp=["onClick"],$p={class:"icon-wrapper flex children:flex-none"},Cp={class:"flex flex-col"},Tp={class:"font-bold"},Ip={class:"text-nc-content-gray-subtle2 text-small1"},Sp={class:"flex flex-col items-center gap-2 flex-1 justify-end pt-2"},Ap=Ue({__name:"List",props:{hookLogs:{},activeItem:{},logPaginationData:{}},emits:["update:activeItem","reload","pageSizeChange","pageChange"],setup(s,{emit:$}){const p=$;return(D,t)=>{const i=Ye,y=go,u=wp;return l(),r("div",xp,[(l(!0),r(Y,null,be(D.hookLogs,(h,x)=>(l(),r(Y,{key:h.id},[a("div",{class:ae(["item",{active:D.activeItem===h}]),onClick:I=>p("update:activeItem",h)},[a("div",$p,[h.error?(l(),d(i,{key:0,icon:"alertTriangleSolid",class:"h-5 w-5 text-nc-content-red-dark"})):(l(),d(i,{key:1,icon:"checkFill",class:"text-white h-5 w-5"}))]),a("div",Cp,[a("h4",Tp,v(e(_o)(h.created_at)),1),a("span",Ip,[h.error?(l(),r(Y,{key:0},[E(" Error occurred "+v(h.error_code??""),1)],64)):(l(),r(Y,{key:1},[E(" Executed in "+v(h.execution_time)+" ms ",1)],64))])])],10,kp),o(y,{class:ae(["!my-0",{invisible:D.activeItem===h||x<D.hookLogs.length-1&&D.hookLogs[x+1]===D.activeItem}])},null,8,["class"])],64))),128)),a("div",Sp,[o(u,{current:D.logPaginationData.page,"page-size":D.logPaginationData.pageSize,total:+D.logPaginationData.totalRows,variant:"v2","onUpdate:pageSize":t[0]||(t[0]=h=>p("pageSizeChange",h)),"onUpdate:current":t[1]||(t[1]=h=>p("pageChange",h))},null,8,["current","page-size","total"])])])}}}),Op=Object.assign(Ze(Ap,[["__scopeId","data-v-03ee528d"]]),{__name:"WebhookCallLogList"}),Lp={class:"detail-card"},Ep={class:"detail-title"},Mp={class:"content"},Dp={class:"detail-headers"},Up={class:"log-details"},Rp={class:"detail-payload -mt-1"},Pp={class:"text-sm text-gray-500 font-weight-bold pb-2 flex justify-between items-center"},Fp={class:"log-details"},Bp=Ue({__name:"ReqResDetailCardSkeleton",props:{title:{}},setup(s){return($,p)=>{const D=Oo,t=Ao;return l(),r("div",Lp,[a("div",Ep,v($.title),1),a("div",Mp,[a("div",Dp,[p[0]||(p[0]=a("span",{class:"text-gray-500 font-weight-bold text-small1"},"Header",-1)),a("div",Up,[(l(),r(Y,null,be(2,i=>o(D,{key:i,active:"",paragraph:{rows:1,width:"90%"},title:!1})),64))])]),a("div",Rp,[a("div",Pp,[p[1]||(p[1]=a("span",{class:"text-xs leading-[18px]"},"Payload",-1)),o(t,{content:"",size:"xs",class:"!px-1",disabled:""})]),a("div",Fp,[(l(),r(Y,null,be(5,i=>o(D,{key:i,active:"",paragraph:{rows:1,width:"90%"},title:!1})),64))])])])])}}}),Np=Object.assign(Ze(Bp,[["__scopeId","data-v-993e3dc5"]]),{__name:"WebhookCallLogReqResDetailCardSkeleton"}),Vp=Ve(()=>Ne(()=>import("./BjlRxDgN.js"),__vite__mapDeps([103,1,2,14,104]),import.meta.url).then(s=>s.default||s)),zp={class:"detail-card"},jp={class:"detail-title font-weight-bold"},Wp={class:"content"},qp={key:0,class:"detail-headers"},Gp={class:"log-details"},Hp={class:"label"},Kp={class:"value"},Yp={key:1,class:"detail-params"},Xp={class:"log-details"},Jp={class:"label"},Qp={class:"value"},Zp={key:2,class:"detail-payload -mt-1"},em={class:"text-sm text-gray-500 font-weight-bold pb-2 flex justify-between items-center"},tm=Ue({__name:"ReqResDetailCard",props:{title:{},headers:{},payload:{},params:{}},setup(s){const $=s,p=ee(()=>{var t;return typeof $.payload=="object"?JSON.stringify($.payload,null,2):(t=$.payload)==null?void 0:t.toString()}),D=ee(()=>{try{return typeof $.payload=="object"?JSON.stringify($.payload,null,2):JSON.stringify(JSON.parse($.payload),null,2)}catch{return $.payload}});return(t,i)=>{const y=dt,u=Ao,h=Vp;return l(),r("div",zp,[a("div",jp,v(t.title),1),a("div",Wp,[t.headers?(l(),r("div",qp,[i[2]||(i[2]=a("span",{class:"text-gray-500 font-weight-bold text-small1"},"Header",-1)),a("div",Gp,[(l(!0),r(Y,null,be(t.headers,(x,I)=>(l(),r("div",{key:I,class:"log-detail-item"},[o(y,{class:"text-small1 min-w-40","show-on-truncate-only":""},{title:n(()=>[E(v(I),1)]),default:n(()=>[a("span",Hp,v(I),1)]),_:2},1024),o(y,{class:"text-small1 max-w-[calc(100%_-_160px)] truncate","show-on-truncate-only":""},{title:n(()=>[E(v(x),1)]),default:n(()=>[a("span",Kp,v(x),1)]),_:2},1024)]))),128))])])):_("",!0),t.params&&Object.keys(t.params).length?(l(),r("div",Yp,[i[3]||(i[3]=a("span",{class:"text-gray-500 font-weight-bold text-small1"},"Parameter",-1)),a("div",Xp,[(l(!0),r(Y,null,be(t.params,(x,I)=>(l(),r("div",{key:I,class:"log-detail-item"},[o(y,{class:"text-small1 min-w-40","show-on-truncate-only":""},{title:n(()=>[E(v(I),1)]),default:n(()=>[a("span",Jp,v(I),1)]),_:2},1024),o(y,{class:"text-small1 max-w-[calc(100%_-_160px)]","show-on-truncate-only":""},{title:n(()=>[E(v(x),1)]),default:n(()=>[a("span",Qp,v(x),1)]),_:2},1024)]))),128))])])):_("",!0),t.payload&&Object.keys(t.payload).length?(l(),r("div",Zp,[a("div",em,[i[4]||(i[4]=a("span",{class:"text-xs leading-[18px]"},"Payload",-1)),o(u,{content:e(p),size:"xs",class:"!px-1"},null,8,["content"])]),o(h,{"model-value":e(D),class:"min-w-full w-full flex-1 min-h-50 resize-y overflow-auto expanded-editor","hide-minimap":"","disable-deep-compare":"","read-only":"","monaco-config":{lineNumbers:"on",scrollbar:{verticalScrollbarSize:6,horizontalScrollbarSize:6}},"monaco-custom-theme":{base:"vs",inherit:!0,rules:[],colors:{"editor.background":"#f9f9fa"}},onKeydown:[i[0]||(i[0]=xt(he(()=>{},["stop"]),["enter"])),i[1]||(i[1]=he(()=>{},["alt","stop"]))]},null,8,["model-value"])])):_("",!0)])])}}}),lm=Object.assign(Ze(tm,[["__scopeId","data-v-c101b5cb"]]),{__name:"WebhookCallLogReqResDetailCard"}),nm={class:"container"},om={key:0,class:"log-url-wrapper"},am={class:"log-method"},sm={class:"log-url"},im={class:"log-details"},rm={class:"log-detail-item"},um={class:"value"},cm={class:"log-detail-item"},dm={class:"value"},pm={class:"log-detail-item"},mm={class:"value"},fm={class:"log-detail-item"},vm={class:"value"},_m={class:"log-detail-item"},gm={class:"value"},ym={key:0,class:"log-detail-item"},hm={class:"value"},bm={key:1,class:"log-detail-item"},wm={class:"value"},xm={class:"log-detail-item"},km={class:"value"},$m={class:"request-response-wrapper"},Cm={class:"request-wrapper"},Tm={class:"response-wrapper"},Im=Ue({__name:"Details",props:{item:{}},setup(s){const $=s,p=ee(()=>{try{return(typeof $.item.payload=="object"?$.item.payload:JSON.stringify($.item.payload,null,2))||{}}catch{return{}}}),D=ee(()=>{try{return(typeof $.item.response=="object"?$.item.response:JSON.stringify($.item.response,null,2))||{}}catch{return{}}}),t=i=>i.operation==="update"?"On Record Update":i.operation==="insert"?"On Record Insert":i.operation==="delete"?"On Record Delete":i.operation==="bulkDelete"||i.operation==="bulkDeleteAll"?"On Bulk Record Delete":i.operation==="bulkInsert"?"On Bulk Record Insert":i.operation==="bulkUpdate"||i.operation==="bulkUpdateAll"?"On Bulk Record Update":"On Record Insert";return(i,y)=>{const u=lm;return l(),r("div",nm,[i.item?(l(),r(Y,{key:0},[e(p).method&&e(p).url?(l(),r("div",om,[a("div",am,v(e(p).method),1),a("div",sm,v(e(p).url),1)])):_("",!0),a("div",im,[a("div",rm,[y[0]||(y[0]=a("span",{class:"label"},"Execution Time",-1)),a("span",um,v(i.item.execution_time)+" ms",1)]),a("div",cm,[y[1]||(y[1]=a("span",{class:"label"},"Trigger type",-1)),a("span",dm,v(t(i.item)),1)]),a("div",pm,[y[2]||(y[2]=a("span",{class:"label"},"Request Time",-1)),a("span",mm,v(e(_o)(i.item.created_at)),1)]),a("div",fm,[y[3]||(y[3]=a("span",{class:"label"},"Test call",-1)),a("span",vm,v(!!i.item.test_call),1)]),a("div",_m,[y[4]||(y[4]=a("span",{class:"label"},"ID",-1)),a("span",gm,v(i.item.id),1)]),i.item.error_code?(l(),r("div",ym,[y[5]||(y[5]=a("span",{class:"label"},"Error code",-1)),a("span",hm,v(i.item.error_code),1)])):_("",!0),i.item.error_message?(l(),r("div",bm,[y[6]||(y[6]=a("span",{class:"label"},"Error message",-1)),a("span",wm,v(i.item.error_message),1)])):_("",!0),a("div",xm,[y[7]||(y[7]=a("span",{class:"label"},"Triggered By",-1)),a("span",km,v(i.item.triggered_by),1)])]),a("div",$m,[a("div",Cm,[o(u,{title:"Request",headers:e(p).headers,payload:e(p).data,params:e(p).params},null,8,["headers","payload","params"])]),a("div",Tm,[o(u,{title:"Response",headers:e(D).headers,payload:e(D).data},null,8,["headers","payload"])])])],64)):_("",!0)])}}}),Sm=Object.assign(Ze(Im,[["__scopeId","data-v-b1fdc554"]]),{__name:"WebhookCallLogDetails"}),Am={key:1,class:"flex h-full"},Om={class:"min-w-80 border-r-1 h-full"},Lm={key:0,class:"p-3 h-full flex flex-col gap-3 children:border-b-1 children:border-nc-border-medium overflow-auto nc-scrollbar-thin"},Em={class:"flex-grow min-w-100"},Mm={key:0,class:"h-full p-3 overflow-auto nc-scrollbar-thin flex flex-col gap-6"},Dm={class:"flex gap-x-5"},Um={class:"min-w-80 flex-1"},Rm={class:"min-w-80 flex-1"},Pm={class:"flex-1 flex items-stretch gap-4"},Fm=Ue({__name:"index",props:{hook:{}},setup(s){const $=s,{api:p,isLoading:D}=yo(),t=U([]),{appInfo:i}=Sl(),y=U({page:1,pageSize:10,totalRows:0}),u=U(),h=ee({get:()=>{var P;return u.value?u.value:(P=t.value)==null?void 0:P[0]},set:P=>{u.value=P}}),x=ee(()=>!0);async function I(P=y.value.page,C=y.value.pageSize){try{y.value.page=P||1,y.value.pageSize=C||10;const{list:f,pageInfo:c}=await p.dbTableWebhookLogs.list($.hook.id,{offset:y.value.pageSize*(y.value.page-1),limit:C});t.value=S(f),y.value.totalRows=c.totalRows??0}catch(f){Rt.error(await rl(f))}}function S(P){var C,f;for(const c of P)c!=null&&c.response&&(c.response=Jt(c.response)),(f=(C=c==null?void 0:c.response)==null?void 0:C.config)!=null&&f.data&&(c.response.config.data=Jt(c.response.config.data)),c!=null&&c.payload&&(c.payload=Jt(c.payload)),c!=null&&c.notification&&(c.notification=Jt(c.notification));return P}return ho(async()=>{x.value&&await I()}),(P,C)=>{const f=as,c=Oo,z=Op,b=Np,O=Sm;return l(),r("div",{class:ae(["h-full",{"flex items-center justify-center":!e(t).length&&!e(D)}])},[e(x)?(l(),r(Y,{key:0},[!e(t).length&&!e(D)?(l(),d(f,{key:0})):(l(),r("div",Am,[a("div",Om,[e(D)?(l(),r("div",Lm,[(l(),r(Y,null,be(7,k=>o(c,{key:k,loading:e(D),active:"",avatar:{size:"small"},paragraph:{rows:2},title:!1},null,8,["loading"])),64))])):(l(),d(z,{key:1,"active-item":e(h),"onUpdate:activeItem":C[0]||(C[0]=k=>se(h)?h.value=k:null),"hook-logs":e(t),"log-pagination-data":e(y),onPageSizeChange:C[1]||(C[1]=k=>I(void 0,k)),onPageChange:C[2]||(C[2]=k=>I(k))},null,8,["active-item","hook-logs","log-pagination-data"]))]),a("div",Em,[e(D)?(l(),r("div",Mm,[o(c,{active:"",paragraph:!1,class:"!children:children:mt-0",title:{width:"50%"}}),a("div",Dm,[a("div",Um,[(l(),r(Y,null,be(3,k=>o(c,{key:k,loading:e(D),active:"",paragraph:{rows:1,width:"90%"},title:!1,class:"min-w-80"},null,8,["loading"])),64))]),a("div",Rm,[(l(),r(Y,null,be(2,k=>o(c,{key:k,loading:e(D),active:"",paragraph:{rows:1,width:"90%"},title:!1,class:"min-w-80"},null,8,["loading"])),64))])]),a("div",Pm,[o(b,{title:"Request"}),o(b,{title:"Response"})])])):(l(),d(O,{key:1,item:e(h)},null,8,["item"]))])]))],64)):_("",!0)],2)}}}),Bm=Object.assign(Ze(Fm,[["__scopeId","data-v-bafd0700"]]),{__name:"WebhookCallLog"}),Pn=ss("webhooksStore",()=>{const s=U([]),$=U(!0),{$api:p,$e:D}=yl(),t=is(),i=t.currentRoute,{getMeta:y}=ul(),{activeTable:u}=Tt(An()),h=ee(()=>s.value.some(b=>b.version==="v2")),x=ee(()=>c({openCreatePage:!0})),I=ee(()=>c({openMainPage:!0}));async function S(){var b;$.value=!0;try{const O=(await p.dbTableWebhook.list((b=u.value)==null?void 0:b.id)).list;s.value=O.map(k=>(k.notification=Jt(k.notification),k))}catch(O){Rt.error(await rl(O))}finally{$.value=!1}}async function P(b){const O=s.value.findIndex(k=>k.id===b);try{b&&await p.dbTableWebhook.delete(b),s.value.splice(O,1),s.value.length||(s.value=[])}catch(k){Rt.error(await rl(k))}finally{await y(u.value.id,!0)}}async function C(b){try{const O=await p.dbTableWebhook.create(b.fk_model_id,{...b,trigger_field:!!b.trigger_field,title:rs(`${b.title} copy`,s.value,"title","_",!0),active:b.event==="manual"});if(O){D("a:webhook:copy");const k=(await p.dbTableWebhookFilter.read(b.id,{})).list;for(const Z of k)await p.dbTableWebhookFilter.create(O.id,{comparison_op:Z.comparison_op,comparison_sub_op:Z.comparison_sub_op,fk_column_id:Z.fk_column_id,fk_parent_id:Z.fk_parent_id,is_group:Z.is_group,logical_op:Z.logical_op,value:Z.value});O.notification=Jt(O.notification),s.value=[O,...s.value]}}catch(O){Rt.error(await rl(O))}finally{await y(u.value.id,!0)}}async function f({hook:b,ogHook:O}){if(!u.value)throw new Error("activeTable is not defined");b.trigger_field=!!b.trigger_field,typeof b.notification=="string"&&(b.notification=JSON.parse(b.notification));let k=b;try{let Z;k.id?Z=await p.dbTableWebhook.update(k.id,{...k,notification:{...k.notification,payload:k.notification.payload}}):(Z=await p.dbTableWebhook.create(u.value.id,{...k,notification:{...k.notification,payload:k.notification.payload}}),s.value.push(Z)),Z&&typeof Z.notification=="string"&&(Z.notification=JSON.parse(Z.notification)),!k.id&&Z&&(k={...k,...Z}),s.value=s.value.map(K=>K.id===k.id?k:K)}catch(Z){Rt.error(await rl(Z)),console.error(Z),O&&(s.value=s.value.map(K=>K.id===O.id?O:K))}finally{await y(u.value.id,!0)}return D("a:webhook:add",{operation:k.operation,condition:k.condition,notification:k.notification.type}),k}function c({hookId:b,openCreatePage:O,openMainPage:k}){const{activeView:Z}=en();if(!Z)throw new Error("activeView is not defined");if(!k&&!O&&!b)throw new Error("hook id is not defined");return{name:"index-typeOrId-baseId-index-index-viewId-viewTitle-slugs",params:{typeOrId:i.value.params.typeOrId,baseId:i.value.params.baseId,viewId:i.value.params.viewId,viewTitle:Z.id,slugs:k?["webhook"]:["webhook",O?"create":b]}}}return{hooks:s,loadHooksList:S,deleteHook:P,copyHook:C,saveHooks:f,navigateToWebhook:async({hookId:b,openCreatePage:O,openMainPage:k})=>{const{activeView:Z}=en();Z&&await t.push(c({hookId:b,openCreatePage:O,openMainPage:k}))},createWebhookUrl:x,webhookMainUrl:I,isHooksLoading:$,navigateToWebhookRoute:c,hasV2Webhooks:h}}),Nm=Ve(()=>Ne(()=>import("./BjlRxDgN.js"),__vite__mapDeps([103,1,2,14,104]),import.meta.url).then(s=>s.default||s)),Vm=Ve(()=>Ne(()=>import("./BcG6Ieku.js").then(s=>s.C),__vite__mapDeps([96,1,2,24,25,26,27,97,21,11,98,61,62,63,64,5,6,65,66,67,68,69,99,58,59,86,17,100]),import.meta.url).then(s=>s.default||s)),zm=Ve(()=>Ne(()=>import("./DhizJgOH.js"),__vite__mapDeps([105,1,2,106]),import.meta.url).then(s=>s.default||s)),jm=Ve(()=>Ne(()=>import("./CiiU4J3J.js"),__vite__mapDeps([107,1,2,108]),import.meta.url).then(s=>s.default||s)),Wm=Ve(()=>Ne(()=>import("./CWRHUTRI.js"),__vite__mapDeps([109,1,2]),import.meta.url).then(s=>s.default||s)),qm={class:"flex w-full items-center pl-4 pr-3 py-3 justify-between"},Gm={class:"flex items-center gap-3 flex-1"},Hm={class:"text-gray-900 font-semibold text-xl"},Km={key:0,class:"flex flex-row p-1 bg-gray-200 rounded-lg gap-x-0.5 nc-view-sidebar-tab"},Ym={class:"tab-title nc-tab"},Xm={class:"tab-title nc-tab"},Jm={class:"flex justify-end items-center gap-3 flex-1"},Qm={key:0,class:"flex bg-white rounded-b-2xl h-[calc(100%_-_56px)]"},Zm={key:0,class:"h-full w-full overflow-auto nc-scrollbar-thin"},ef={class:"h-full w-full max-w-[1040] min-w-[640px] px-6 md:px-12 py-6 flex flex-col"},tf={class:"nc-webhook-version-diff"},lf={class:"nc-item-title"},nf={class:"nc-item-response"},of={class:"max-w-[640px] min-w-[564px] w-full mx-auto gap-8 flex flex-col"},af=["placeholder"],sf={class:"flex flex-col"},rf={class:"text-nc-content-gray text-base font-bold leading-6"},uf={class:"w-full flex gap-3"},cf={class:"text-nc-content-gray flex-1"},df={class:"flex-1 w-full text-sm"},pf={class:"flex-1 w-full text-sm"},mf={key:0,class:"border-1 border-nc-border-gray-medium rounded-b-2xl px-4 pt-4"},ff={class:"w-full flex items-center justify-between h-[28px]"},vf={key:0,class:"flex gap-2"},_f={class:"flex items-center gap-1"},gf={class:"flex items-center gap-1"},yf={key:0,class:"mb-4"},hf={class:"text-nc-content-gray text-base mt-6 font-bold leading-6"},bf={class:"mt-3 border-1 custom-select border-nc-border-gray-medium p-4 border-b-0 rounded-t-2xl"},wf={key:0,class:"flex gap-3"},xf={class:"flex items-center gap-2 justify-between w-full"},kf={class:"flex flex-col gap-2"},$f={key:0,class:"text-xs text-warning pl-2"},Cf={key:1,class:"border-1 border-nc-border-gray-medium rounded-b-2xl pt-4 px-4 pb-2"},Tf={style:{"box-shadow":"0px 0px 4px 0px rgba(0, 0, 0, 0.08), 0px 0px 4px 0px rgba(0, 0, 0, 0.08)"},class:"my-3 mx-1 rounded-lg overflow-hidden"},If={key:0,class:"flex flex-col gap-4"},Sf={key:0,class:"flex flex-col w-full gap-3"},Af={key:1,class:"flex flex-col w-full gap-3"},Of={key:2,class:"flex flex-col w-full gap-3"},Lf={key:3,class:"flex flex-col w-full gap-3"},Ef={key:1},Mf={class:"!text-gray-700 font-semibold"},Df={class:"flex flex-col gap-4"},Uf={class:"flex items-center justify-between -ml-1.5 !mt-[32px]"},Rf={class:"flex items-center gap-3"},Pf={class:"h-full bg-gray-50 border-l-1 w-80 p-5 rounded-br-2xl border-gray-200"},Ff={class:"w-full flex flex-col gap-3"},Bf={class:"text-sm text-gray-700 font-semibold !my-0"},Nf={class:"h-7 w-7 flex items-center justify-center"},Vf={key:1,class:"h-[calc(100%_-_57px)]"},zf=Ue({__name:"index",props:{value:{type:Boolean},eventList:{},hook:{},showUpgradeModal:{type:Boolean},sampleDataV2:{},stickyScroll:{type:Boolean}},emits:["close","update:value","cancel"],setup(s,{emit:$}){const p=s,D=$,{eventList:t,showUpgradeModal:i,sampleDataV2:y}=Tt(p),{t:u}=Et(),{$e:h,$api:x}=yl(),{api:I,isLoading:S}=yo(),P=qe(p,"value"),{hooks:C}=Ut(Pn()),{base:f}=Ut(Ol()),c=It(Lt,U()),{getMeta:z}=ul(),{appInfo:b}=Sl(),{activeTable:O}=Tt(An()),{updateStatLimit:k,showWebhookLogsFeatureAccessModal:Z}=an(),K=u("labels.webhook"),j=U(),Q=U(""),X=ln.useForm,oe=ee(()=>{var w;return(w=c.value)!=null&&w.columns?c.value.columns.filter(g=>[B.ID].includes(g.uidt)||gl(g)||!Hl(g)&&!kt(g)):[]}),W=ee(()=>{const w={};for(const g of t.value)w[g.value[0]]||(w[g.value[0]]={}),w[g.value[0]][g.value[1]]=g;return w}),Te=ee(()=>{const w=[];for(const g of t.value)w.some(G=>G.value===g.value[0])||w.push({text:g.text[0],value:g.value[0]});return w});let m=us({id:"",title:K,event:void 0,operation:["insert","update","delete"],eventOperation:void 0,notification:{type:"URL",include_user:!1,payload:{method:"POST",body:"{{ json event }}",headers:[{enabled:!1,name:"",value:""}],parameters:[{enabled:!1,name:"",value:""}],path:""}},condition:!1,trigger_field:!1,trigger_fields:[],active:!0,version:"v3"});const ge=ee(()=>m.event?t.value.filter(g=>g.value[0]===m.event).map(g=>({text:g.text[1],value:g.value[1]})):[]),ve=U(m.version==="v1"||Gt),$e=U("params"),pe=U(),N=U([]),A=U([]),q=U([]),ye=U([]),fe=U(!0),Oe=U(),V=U(),J=U(),ke=w=>{var Ce;const g=[...m.operation],G=(g==null?void 0:g.indexOf(w))??-1;G>=0?g==null||g.splice(G,1):g==null||g.push(w),g.includes("update")||(m.trigger_field=!1,m.trigger_fields=[]),m.operation=g,fe.value=m.event==="after"&&(g==null?void 0:g.length)===((Ce=ge.value)==null?void 0:Ce.length)},Pe=w=>{fe.value=!fe.value,m.operation=fe.value?[...ge.value.map(g=>g.value)]:[],fe.value||(m.trigger_field=!1,m.trigger_fields=[])},Le=w=>{fe.value=!1,m.operation=[],m.event=w,w!=="after"&&(m.operation=["trigger"],m.trigger_field=!1,m.trigger_fields=[]),m.event==="manual"&&(m.active=!0)},Ge=U({Email:[{key:"to",label:u("labels.toAddress"),placeholder:u("labels.toAddress"),type:"SingleLineText",required:!0},{key:"subject",label:u("labels.subject"),placeholder:u("labels.subject"),type:"SingleLineText",required:!0},{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0}],Slack:[{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0}],"Microsoft Teams":[{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0}],Discord:[{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0}],Mattermost:[{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0}],Twilio:[{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0},{key:"to",label:u("labels.commaSeparatedMobileNumber"),placeholder:u("labels.commaSeparatedMobileNumber"),type:"LongText",required:!0}],"Whatsapp Twilio":[{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0},{key:"to",label:u("labels.commaSeparatedMobileNumber"),placeholder:u("labels.commaSeparatedMobileNumber"),type:"LongText",required:!0}]});ee(()=>[{type:"URL",text:u("datatype.URL")},{type:"Email",text:u("datatype.Email")},{type:"Slack",text:u("general.slack")},{type:"Microsoft Teams",text:u("general.microsoftTeams")},{type:"Discord",text:u("general.discord")},{type:"Mattermost",text:u("general.matterMost")},{type:"Twilio",text:u("general.twilio")},{type:"Whatsapp Twilio",text:u("general.whatsappTwilio")}]);const we=[{title:"GET"},{title:"POST"},{title:"DELETE"},{title:"PUT"},{title:"HEAD"},{title:"PATCH"}],He=U(!1),pt=ee(()=>({title:[jt()],"notification.type":[jt()],...m.notification.type==="URL"&&{"notification.payload.method":[jt()],"notification.payload.path":[jt(),{validator:(w,g)=>new Promise((G,Ce)=>{var Be,yt;He.value=!1;const M=(Be=b.value)==null?void 0:Be.ncSiteUrl;if(!g||!M){G();return}let Se=!1;try{const vt=new URL(m.notification.payload.path),ht=new URL(M);Se=vt.hostname===ht.hostname}catch{Se=g.includes(M)}Se&&((yt=b.value)!=null&&yt.isCloud?Ce(new Error(u("msg.internalUrlsNotAllowed"))):He.value=!0),G()})}]},...m.notification.type==="Email"&&{"notification.payload.to":[jt()],"notification.payload.subject":[jt()],"notification.payload.body":[jt()]},...["Slack","Microsoft Teams","Discord","Mattermost"].includes(m.notification.type)&&{"notification.payload.channels":[jt()],"notification.payload.body":[jt()]},...(m.notification.type==="Twilio"||m.notification.type==="Whatsapp Twilio")&&{"notification.payload.body":[jt()],"notification.payload.to":[jt()]}})),{validate:ze,validateInfos:et}=X(m,pt),Xe=w=>{if(w){if(Array.isArray(w))return w;if(typeof w=="object"&&Object.keys(w).length>0)return[w]}return[]};function me(w=!1){var g,G,Ce,M,Se,Be,yt,vt;if(w&&(m.notification.payload={},["Slack","Microsoft Teams","Discord","Mattermost"].includes(m.notification.type)&&(m.notification.payload.channels=[],m.notification.payload.body="")),m.notification.type==="Slack"&&(N.value=Xe((G=(g=pe==null?void 0:pe.value)==null?void 0:g.Slack)==null?void 0:G.parsedInput)),m.notification.type==="Microsoft Teams"&&(A.value=Xe((M=(Ce=pe==null?void 0:pe.value)==null?void 0:Ce["Microsoft Teams"])==null?void 0:M.parsedInput)),m.notification.type==="Discord"&&(q.value=Xe((Be=(Se=pe==null?void 0:pe.value)==null?void 0:Se.Discord)==null?void 0:Be.parsedInput)),m.notification.type==="Mattermost"&&(ye.value=Xe((vt=(yt=pe==null?void 0:pe.value)==null?void 0:yt.Mattermost)==null?void 0:vt.parsedInput)),m.notification.type==="URL"){const ht=m.notification.payload.body;m.notification.payload.body=ht?ht==="{{ json data }}"?"{{ json event }}":ht:"{{ json event }}",m.notification.payload.parameters=m.notification.payload.parameters||[{}],m.notification.payload.headers=m.notification.payload.headers||[{}],m.notification.payload.method=m.notification.payload.method||"POST",m.notification.payload.auth=m.notification.payload.auth??""}}function Je(w){const g={...w};w.version==="v2"&&(g.version="v3",g.operation=typeof w.operation=="string"?[w.operation.replace("bulk","").toLowerCase()]:w.operation);const G=w.notification;Object.assign(m,{...g,notification:{...G,include_user:(G==null?void 0:G.include_user)??!1,payload:G.payload}}),g.event==="after"&&g.operation&&g.operation.length===t.value.filter(Ce=>Ce.value[0]==="after").length?fe.value=!0:fe.value=!1,m.trigger_field=!!(m!=null&&m.trigger_field),De()}function re(){const{notification:{payload:w={},type:g={}}={}}=m;Object.assign(m,{...m,notification:{...m.notification,type:g,payload:w}}),m.notification.payload=w;const G=U(null);switch(m.notification.type){case"Slack":G.value=N.value;break;case"Microsoft Teams":G.value=A.value;break;case"Discord":G.value=q.value;break;case"Mattermost":G.value=ye.value;break}G&&(m.notification.payload.webhook_url=m.notification.payload.webhook_url&&m.notification.payload.webhook_url.map(Ce=>{var M;return(M=G.value)==null?void 0:M.find(Se=>Ce.webhook_url===Se.webhook_url)})),m.notification.type==="URL"&&(m.notification.payload=m.notification.payload||{},m.notification.payload.parameters=m.notification.payload.parameters||[{}],m.notification.payload.headers=m.notification.payload.headers||[{}],m.notification.payload.method=m.notification.payload.method||"POST")}async function R(){try{const w=(await I.plugin.webhookList({query:{base_id:f.value.id}})).list;pe.value=w.reduce((g,G)=>{const Ce={title:"",tags:[],parsedInput:{},...G};return Ce.tags=G.tags?G.tags.split(","):[],Ce.parsedInput=Jt(G.input),g[Ce.title]=Ce,g},{})}catch(w){Rt.error(await rl(w))}}const Ke=ee(()=>m.event&&m.event!=="manual");async function te(){var g;S.value=!0;try{if(await ze(),((g=m.operation)==null?void 0:g.length)===0&&fe.value===!1)throw Rt.error("At least one operation need to be selected"),new Error("At least one operation need to be selected")}catch(G){console.error("validation error",G),S.value=!1;return}let w=[...m.operation??[]];fe.value===!0&&(w=t.value.filter(G=>G.value[0]===m.event).map(G=>G.value[1]));try{let G;m.id?G=await I.dbTableWebhook.update(m.id,{...m,operation:w,notification:{...m.notification,payload:m.notification.payload}}):(G=await I.dbTableWebhook.create(c.value.id,{...m,operation:w,notification:{...m.notification,payload:m.notification.payload}}),C.value.push(G),k(fs.LIMIT_WEBHOOK_PER_WORKSPACE,1)),G&&typeof G.notification=="string"&&(G.notification=JSON.parse(G.notification)),!m.id&&G&&(m={...m,...G}),Oe.value&&await Oe.value.applyChanges(m.id,!1,Ke.value),C.value=C.value.map(Ce=>Ce.id===m.id?m:Ce),h("a:webhook:add",{operation:m.operation,condition:m.condition,notification:m.notification.type}),D("close",m),i.value&&Rt.success("Webhook upgraded to v3 successfully!")}catch(G){Rt.error(await rl(G))}finally{z(O.value.id,!0),S.value=!1}}const ue=()=>{D("close",m)},Ae=U(!1),Me=U(),H=U(),le=U("configuration"),[xe,Ee]=cs(),ut=()=>{Ee(),nl(()=>{xe.value&&(H.value.scrollTop=H.value.scrollHeight)})};async function tt(){var w;try{Q.value="",j.value=!1,Ae.value=!0,await x.dbTableWebhook.test((w=c.value)==null?void 0:w.id,{hook:m,payload:Me.value}),j.value=!0}catch(g){Q.value=await rl(g)}finally{Ae.value=!1}}const ft=[{title:"Getting started",href:"https://nocodb.com/docs/product-docs/automation/webhook/create-webhook"},{title:"Create webhook",href:"https://nocodb.com/docs/product-docs/automation/webhook"},{title:"Custom payload",href:"https://nocodb.com/docs/product-docs/automation/webhook/create-webhook#webhook-with-custom-payload-"},{title:"Trigger on condition",href:"https://nocodb.com/docs/product-docs/automation/webhook/create-webhook#webhook-with-conditions"}];it(()=>m==null?void 0:m.operation,async()=>{await De()},{immediate:!0});async function De(){var g,G,Ce,M;const w=await x.dbTableWebhook.samplePayloadGet((g=c==null?void 0:c.value)==null?void 0:g.id,(m==null?void 0:m.operation)&&(m==null?void 0:m.operation[0])||"insert",m.version,{query:{includeUser:(!!((G=m.notification)!=null&&G.include_user)).toString()}});m.notification.type!=="URL"&&["v2","v3"].includes(m.version)?Me.value={event:(M=(Ce=Me.value)==null?void 0:Ce.data)==null?void 0:M.rows}:Me.value=w}const je=w=>vs([...w.map(g=>(g==null?void 0:g.title)||"")],K),lt=w=>{w==="log"&&Z()||(le.value=w)};ds("Escape",()=>{P.value=!1}),it(()=>m.eventOperation,()=>{if(!m.eventOperation)return;const[w,g]=m.eventOperation.split(" ");m.event=w,m.operation=g}),it(()=>p.hook,()=>{var w,g;p.hook?(Je(p.hook),re()):(m.title=je(C.value),m.event=(g=(w=t.value)==null?void 0:w[0])==null?void 0:g.value[0])},{immediate:!0}),$t(async()=>{await R(),me(),i.value||hn(()=>J.value).toBeTruthy().then(()=>{var w,g;(w=J.value)==null||w.focus(),(g=J.value)==null||g.select()})});const gt=async()=>{m.notification.include_user=!m.notification.include_user,await De()},F=ee(()=>{var G;if(fe.value)return u("labels.sendAllEvents");if(!((G=m.operation)!=null&&G.length))return"Select operation";const w=m.operation.map(Ce=>{var M,Se;return(Se=(M=W.value[m.event])==null?void 0:M[Ce])==null?void 0:Se.text[1]});if(w.length===1)return`${m.event==="after"?`${u("general.after")} `:""}${w[0]}`;const g=w.pop();return`${m.event==="after"?`${u("general.after")} `:""}${w.join(", ")} ${u("general.or").toLowerCase()} ${g}`}),ie=w=>{try{return JSON.stringify(typeof w=="object"?w:JSON.parse(w),null,2)}catch{return w}},Ie=ee(()=>[{title:"Webhook v2 response",response:ie(y.value??"")},{title:"Webhook v3 response",response:ie(Me.value)}]);return(w,g)=>{const G=Ye,Ce=Pt,M=dt,Se=Nm,Be=rt,yt=Ct,vt=on,ht=sn,Dt=To,Ht=ps,Qt=Io,at=al,Zt=Ft,wl=Vm,cl=lp,Bt=At,wt=Wl,Nt=zm,el=ao,ce=jm,Ot=oo,tl=Wm,Ll=wn,Vt=ln,dl=ci,rn=Bm,Yl=gn,pl=Kl("e");return l(),d(Yl,{visible:e(P),"onUpdate:visible":g[29]||(g[29]=bt=>se(P)?P.value=bt:null),"show-separator":!0,size:"large","wrap-class-name":"nc-modal-webhook-create-edit"},{header:n(()=>[a("div",qm,[a("div",Gm,[o(G,{class:"text-gray-900 h-5 w-5",icon:"ncWebhook"}),a("span",Hm,[e(le)==="configuration"?(l(),r(Y,{key:0},[E(v(e(i)?e(m).title:w.hook?"Webhook Settings":w.$t("activity.newWebhook")),1)],64)):(l(),r(Y,{key:1},[E(v(w.$t("activity.webhookLogs")),1)],64))])]),w.hook&&("isEeUI"in w?w.isEeUI:e(Gt))&&!e(i)?(l(),r("div",Km,[St((l(),r("div",{class:ae(["tab",{active:e(le)==="configuration"}]),onClick:g[0]||(g[0]=bt=>lt("configuration"))},[a("div",Ym,v(w.$t("general.details")),1)],2)),[[pl,["c:webhook:edit"]]]),St((l(),r("div",{class:ae(["tab",{active:e(le)==="log"}]),onClick:g[1]||(g[1]=bt=>lt("log"))},[a("div",Xm,v(w.$t("general.logs")),1)],2)),[[pl,["c:webhook:log"]]])])):_("",!0),a("div",Jm,[e(le)==="configuration"?(l(),r(Y,{key:0},[e(i)?(l(),d(Ce,{key:1,type:"secondary",size:"small",onClick:g[2]||(g[2]=he(bt=>D("cancel"),["stop"]))},{default:n(()=>[E(v(w.$t("general.cancel")),1)]),_:1})):(l(),d(M,{key:0,disabled:!e(Q)},{title:n(()=>[E(v(e(Q)),1)]),default:n(()=>[o(Ce,{loading:e(Ae),type:"secondary",size:"small","icon-position":"right",onClick:tt},{icon:n(()=>[e(j)?(l(),d(G,{key:0,icon:"circleCheckSolid",class:"!text-green-700 w-4 h-4 flex-none"})):e(Q)?(l(),d(G,{key:1,icon:"alertTriangleSolid",class:"!text-red-700 w-4 h-4 flex-none"})):_("",!0)]),default:n(()=>[a("span",null,v(e(j)?"Test Successful":w.$t("activity.testWebhook")),1)]),_:1},8,["loading"])]),_:1},8,["disabled"])),o(Ce,{loading:e(S),type:"primary",size:"small","data-testid":"nc-save-webhook",onClick:he(te,["stop"])},{default:n(()=>[E(v(e(i)?w.$t("general.upgrade"):w.hook?w.$t("labels.multiField.saveChanges"):w.$t("activity.createWebhook")),1)]),_:1},8,["loading"])],64)):_("",!0),o(Ce,{type:"text",size:"small","data-testid":"nc-close-webhook-modal",onClick:he(ue,["stop"])},{default:n(()=>[o(G,{icon:"close"})]),_:1})])])]),default:n(()=>[e(le)==="configuration"?(l(),r("div",Qm,[e(i)?(l(),r("div",Zm,[a("div",ef,[g[30]||(g[30]=a("div",{class:"flex flex-col gap-2 mb-8"},[a("div",{class:"text-base font-bold text-nc-content-gray-emphasis"},"Change in webhook response"),a("div",{class:"text-sm font-normal text-nc-content-gray-subtle2"},[E(" For more information on webhooks v3 visit "),a("a",{href:"https://nocodb.com/docs/product-docs/automation/webhook/webhook-v2-vs-v3#upgrade-to-webhook-v3",class:"nc-link",target:"_blank"}," NocoDB Docs. ")])],-1)),a("div",tf,[(l(!0),r(Y,null,be(e(Ie),(bt,de)=>(l(),r("div",{key:de,class:"nc-item"},[a("div",lf,v(bt.title),1),a("div",nf,[o(Se,{"model-value":bt.response,class:"flex-1 min-h-50 resize-y overflow-auto expanded-editor","hide-minimap":"","disable-deep-compare":"","read-only":"","monaco-config":{lineNumbers:"on",scrollbar:{verticalScrollbarSize:6,horizontalScrollbarSize:6},padding:{top:12,bottom:12},scrollBeyondLastLine:!1},"monaco-custom-theme":{base:"vs",inherit:!0,rules:[],colors:{"editor.background":"#f9f9fa"}},onKeydown:[g[3]||(g[3]=xt(he(()=>{},["stop"]),["enter"])),g[4]||(g[4]=he(()=>{},["alt","stop"]))]},null,8,["model-value"])])]))),128))]),g[31]||(g[31]=a("div",null,"  ",-1))])])):(l(),r(Y,{key:1},[a("div",{ref_key:"containerElem",ref:H,class:"h-full flex-1 flex flex-col overflow-y-auto scroll-smooth nc-scrollbar-thin px-6 md:px-12 py-6 mx-auto"},[a("div",of,[o(Be,Ul(Rl(e(et).title)),{default:n(()=>[a("div",{class:"flex flex-grow px-2 py-1 title-input items-center border-b-1 rounded-t-md border-gray-200 bg-gray-100",onClick:g[8]||(g[8]=he(bt=>{var de;return(de=e(J))==null?void 0:de.focus()},["prevent"]))},[St(a("input",{ref_key:"titleDomRef",ref:J,"onUpdate:modelValue":g[5]||(g[5]=bt=>e(m).title=bt),class:"flex flex-grow text-lg px-2 font-medium capitalize outline-none bg-inherit nc-text-field-hook-title",placeholder:w.$t("placeholder.webhookTitle"),contenteditable:!0,onKeydown:g[6]||(g[6]=xt(bt=>{var de;return(de=e(J))==null?void 0:de.blur()},["enter"]))},null,40,af),[[bo,e(m).title]]),o(G,{icon:"rename",class:"cursor-text",onClick:g[7]||(g[7]=bt=>{var de;return(de=e(J))==null?void 0:de.focus()})})])]),_:1},16),o(Vt,{class:"flex flex-col gap-8",model:e(m),name:"create-or-edit-webhook"},{default:n(()=>{var bt;return[a("div",sf,[a("div",rf,v(w.$t("general.trigger")),1),a("div",{class:ae(["mt-3 p-4 border-1 border-nc-border-gray-medium",{"border-b-0 rounded-t-2xl":e(Ke),"rounded-2xl":!e(Ke)}])},[a("div",uf,[o(Be,{class:"w-full !my-0"},{default:n(()=>[o(vt,{value:e(m).event,"onUpdate:value":g[9]||(g[9]=de=>e(m).event=de),class:"w-full webhook-event-select nc-select-shadow","data-testid":"nc-dropdown-hook-event","dropdown-class-name":"nc-modal-hook-event",onChange:Le},{default:n(()=>[(l(!0),r(Y,null,be(e(Te),de=>(l(),d(yt,{key:de.value},{default:n(()=>[E(v(de.text),1)]),_:2},1024))),128))]),_:1},8,["value"])]),_:1}),e(m).event==="after"?(l(),d(at,{key:0,visible:e(V),"onUpdate:visible":g[10]||(g[10]=de=>se(V)?V.value=de:null)},{overlay:n(()=>[o(Qt,{class:"webhook-trigger-selection",variant:"medium","data-testid":"nc-dropdown-hook-operation-modal","data-testvalue":"send_everything"},{default:n(()=>[e(m).event==="after"?(l(),r(Y,{key:0},[o(Dt,{"data-testid":"nc-dropdown-hook-operation-option","data-testvalue":"sendMeEverything",onClick:he(Pe,["stop"])},{default:n(()=>[a("div",df,v(w.$t("labels.sendAllEvents")),1),o(ht,{checked:e(fe)},null,8,["checked"])]),_:1}),o(Ht)],64)):_("",!0),(l(!0),r(Y,null,be(e(ge),de=>(l(),d(Dt,{key:de.value,"data-testid":"nc-dropdown-hook-operation-option","data-testvalue":de.value,onClick:he(ll=>ke(de.value),["prevent"])},{default:n(()=>[a("div",pf,[e(m).event==="after"?(l(),r(Y,{key:0},[E(v(w.$t("general.after")),1)],64)):_("",!0),E(" "+v(de.text),1)]),o(ht,{checked:e(m).operation.includes(de.value)},null,8,["checked"])]),_:2},1032,["data-testvalue","onClick"]))),128))]),_:1})]),default:n(()=>[a("div",{class:ae(["rounded-lg border-1 w-full transition-all cursor-pointer flex items-center border-nc-border-grey-medium h-8 py-1 gap-2 px-4 py-2 h-[36px] shadow-default",{"!border-brand-500 !shadow-selected":e(V),"!hover:shadow-hover":!e(V)}]),"data-testid":"nc-dropdown-hook-operation"},[a("div",cf,v(e(F)),1),o(G,{class:ae([{"transform rotate-180":e(V)},"transition-all"]),style:{width:"12.5px",height:"12.5px","margin-right":"-6px"},icon:"ncChevronDown"},null,8,["class"])],2)]),_:1},8,["visible"])):_("",!0)])],2),e(Ke)?(l(),r("div",mf,[a("div",ff,[a("label",{class:"cursor-pointer flex items-center",onClick:g[11]||(g[11]=he(de=>e(m).condition=!e(m).condition,["prevent"]))},[o(Zt,{checked:!!e(m).condition,class:"nc-check-box-hook-condition"},{default:n(()=>g[32]||(g[32]=[a("span",{class:"!text-gray-700 font-semibold"}," Trigger only when conditions match ",-1)])),_:1,__:[32]},8,["checked"])]),e(m).condition?(l(),r("div",vf,[o(Ce,{size:"xs",type:"secondary",class:"nc-btn-focus","data-testid":"add-filter",onClick:g[12]||(g[12]=he(de=>e(Oe).addFilter(),["stop"]))},{default:n(()=>[a("div",_f,[(l(),d(_e(("iconMap"in w?w.iconMap:e(Re)).plus))),E(" "+v(w.$t("activity.addFilter")),1)])]),_:1}),o(Ce,{class:"nc-btn-focus",type:"secondary",size:"xs","data-testid":"add-filter-group",onClick:g[13]||(g[13]=he(de=>e(Oe).addFilterGroup(),["stop"]))},{default:n(()=>[a("div",gf,[(l(),d(_e(("iconMap"in w?w.iconMap:e(Re)).plus))),E(" "+v(w.$t("activity.addFilterGroup")),1)])]),_:1})])):_("",!0)]),a("div",{class:ae(["mb-4",{"nc-filter-ref-wrapper":e(m).condition}])},[e(m).condition?(l(),d(wl,{key:0,ref_key:"filterRef",ref:Oe,"hidden-add-new-filter":!0,class:"w-full !py-0","auto-save":!1,"show-loading":!1,"hook-id":e(m).id,"web-hook":!0,"action-btn-type":"secondary","onUpdate:filtersLength":g[14]||(g[14]=de=>e(m).condition=de>0)},null,8,["hook-id"])):_("",!0)],2),("isEeUI"in w?w.isEeUI:e(Gt))&&e(m).event==="after"&&((bt=e(m).operation)!=null&&bt.includes("update"))?(l(),r("div",yf,[o(cl,{"trigger-fields":e(m).trigger_fields,"onUpdate:triggerFields":g[15]||(g[15]=de=>e(m).trigger_fields=de),"trigger-field":e(m).trigger_field,"onUpdate:triggerField":g[16]||(g[16]=de=>e(m).trigger_field=de),columns:e(oe)},null,8,["trigger-fields","trigger-field","columns"])])):_("",!0)])):_("",!0),a("div",hf,v(w.$t("general.action")),1),a("div",bf,[e(m).notification.type==="URL"?(l(),r("div",wf,[o(Be,{class:"w-1/3"},{default:n(()=>[o(Bt,{value:e(m).notification.payload.method,"onUpdate:value":g[17]||(g[17]=de=>e(m).notification.payload.method=de),size:"medium",class:"nc-select-hook-url-method","dropdown-class-name":"nc-dropdown-hook-notification-url-method"},{suffixIcon:n(()=>[o(G,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(),r(Y,null,be(we,(de,ll)=>o(yt,{key:ll,value:de.title},{default:n(()=>[a("div",xf,[a("div",null,v(de.title),1),e(m).notification.payload.method===de.title?(l(),d(_e(("iconMap"in w?w.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4 flex-none"})):_("",!0)])]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1}),o(Be,st({class:"w-2/3"},e(et)["notification.payload.path"]),{default:n(()=>[a("div",kf,[o(wt,{value:e(m).notification.payload.path,"onUpdate:value":g[18]||(g[18]=de=>e(m).notification.payload.path=de),size:"medium",placeholder:"http://example.com",class:"nc-text-field-hook-url-path nc-input-shadow h-9 !rounded-lg"},null,8,["value"]),e(He)?(l(),r("div",$f,v(w.$t("msg.cyclicCallsWarning")),1)):_("",!0)])]),_:1},16)])):_("",!0)]),e(m).notification.type==="URL"?(l(),r("div",Cf,[o(Ot,{"active-key":e($e),"onUpdate:activeKey":g[22]||(g[22]=de=>se($e)?$e.value=de:null)},{default:n(()=>[o(el,{key:"params",tab:w.$t("title.parameter"),"force-render":""},{default:n(()=>[o(Nt,{modelValue:e(m).notification.payload.parameters,"onUpdate:modelValue":g[19]||(g[19]=de=>e(m).notification.payload.parameters=de)},null,8,["modelValue"])]),_:1},8,["tab"]),o(el,{key:"headers",tab:w.$t("title.headers"),class:"nc-tab-headers"},{default:n(()=>[o(ce,{modelValue:e(m).notification.payload.headers,"onUpdate:modelValue":g[20]||(g[20]=de=>e(m).notification.payload.headers=de)},null,8,["modelValue"])]),_:1},8,["tab"]),e(ve)?(l(),d(el,{key:"body",tab:"Body"},{default:n(()=>[a("div",Tf,[o(Se,{modelValue:e(m).notification.payload.body,"onUpdate:modelValue":g[21]||(g[21]=de=>e(m).notification.payload.body=de),lang:"handlebars","disable-deep-compare":"",validate:!1,class:"min-h-60 max-h-80 !rounded-lg","monaco-config":{minimap:{enabled:!1},padding:{top:8,bottom:8},fontSize:14.5,overviewRulerBorder:!1,overviewRulerLanes:0,hideCursorInOverviewRuler:!0,lineDecorationsWidth:8,lineNumbersMinChars:0,roundedSelection:!1,selectOnLineNumbers:!1,scrollBeyondLastLine:!1,contextmenu:!1,glyphMargin:!1,folding:!1,bracketPairColorization:{enabled:!1},wordWrap:"on",scrollbar:{horizontal:"hidden",verticalScrollbarSize:6},wrappingStrategy:"advanced",renderLineHighlight:"none",tabSize:4,stickyScroll:{enabled:p.stickyScroll}}},null,8,["modelValue","monaco-config"])])]),_:1})):_("",!0)]),_:1},8,["active-key"])])):_("",!0)]),["Slack","Microsoft Teams","Discord","Mattermost"].includes(e(m).notification.type)?(l(),r("div",If,[e(m).notification.type==="Slack"?(l(),r("div",Sf,[o(Be,Ul(Rl(e(et)["notification.payload.channels"])),{default:n(()=>[o(tl,{modelValue:e(m).notification.payload.channels,"onUpdate:modelValue":g[23]||(g[23]=de=>e(m).notification.payload.channels=de),"selected-channel-list":e(m).notification.payload.channels,"available-channel-list":e(N),placeholder:w.$t("placeholder.selectSlackChannels")},null,8,["modelValue","selected-channel-list","available-channel-list","placeholder"])]),_:1},16)])):_("",!0),e(m).notification.type==="Microsoft Teams"?(l(),r("div",Af,[o(Be,Ul(Rl(e(et)["notification.payload.channels"])),{default:n(()=>[o(tl,{modelValue:e(m).notification.payload.channels,"onUpdate:modelValue":g[24]||(g[24]=de=>e(m).notification.payload.channels=de),"selected-channel-list":e(m).notification.payload.channels,"available-channel-list":e(A),placeholder:w.$t("placeholder.selectTeamsChannels")},null,8,["modelValue","selected-channel-list","available-channel-list","placeholder"])]),_:1},16)])):_("",!0),e(m).notification.type==="Discord"?(l(),r("div",Of,[o(Be,Ul(Rl(e(et)["notification.payload.channels"])),{default:n(()=>[o(tl,{modelValue:e(m).notification.payload.channels,"onUpdate:modelValue":g[25]||(g[25]=de=>e(m).notification.payload.channels=de),"selected-channel-list":e(m).notification.payload.channels,"available-channel-list":e(q),placeholder:w.$t("placeholder.selectDiscordChannels")},null,8,["modelValue","selected-channel-list","available-channel-list","placeholder"])]),_:1},16)])):_("",!0),e(m).notification.type==="Mattermost"?(l(),r("div",Lf,[o(Be,Ul(Rl(e(et)["notification.payload.channels"])),{default:n(()=>[o(tl,{modelValue:e(m).notification.payload.channels,"onUpdate:modelValue":g[26]||(g[26]=de=>e(m).notification.payload.channels=de),"selected-channel-list":e(m).notification.payload.channels,"available-channel-list":e(ye),placeholder:w.$t("placeholder.selectMattermostChannels")},null,8,["modelValue","selected-channel-list","available-channel-list","placeholder"])]),_:1},16)])):_("",!0)])):_("",!0),("isEeUI"in w?w.isEeUI:e(Gt))?(l(),r("div",Ef,[a("div",null,[a("div",{class:"w-full cursor-pointer flex items-center",onClick:he(gt,["prevent"])},[o(Zt,{checked:!!e(m).notification.include_user,class:"nc-check-box-include-user"},{default:n(()=>[a("span",Mf,v(w.$t("labels.includeUser")),1)]),_:1},8,["checked"]),o(M,{class:"flex"},{title:n(()=>[E(v(w.$t("tooltip.includeUserHint")),1)]),default:n(()=>[o(G,{icon:"info",class:"text-gray-400 ml-1"})]),_:1})])])])):_("",!0),e(Ge)[e(m).notification.type]&&e(m).notification.payload?(l(),d(Be,{key:2},{default:n(()=>[a("div",Df,[(l(!0),r(Y,null,be(e(Ge)[e(m).notification.type],(de,ll)=>(l(),r("div",{key:ll},[de.type==="LongText"?(l(),d(Be,st({key:0,ref_for:!0},e(et)[`notification.payload.${de.key}`]),{default:n(()=>[o(Ll,{value:e(m).notification.payload[de.key],"onUpdate:value":El=>e(m).notification.payload[de.key]=El,class:"!rounded-lg !min-h-[120px] nc-scrollbar-thin nc-input-shadow",placeholder:de.label},null,8,["value","onUpdate:value","placeholder"])]),_:2},1040)):(l(),d(Be,st({key:1,ref_for:!0},e(et)[`notification.payload.${de.key}`]),{default:n(()=>[o(wt,{value:e(m).notification.payload[de.key],"onUpdate:value":El=>e(m).notification.payload[de.key]=El,class:"!rounded-lg nc-input-shadow !h-9",placeholder:de.label},null,8,["value","onUpdate:value","placeholder"])]),_:2},1040))]))),128))])]),_:1})):_("",!0),a("div",null,[o(Ht),a("div",Uf,[o(Ce,{type:"text",class:"mb-3",size:"small",onClick:g[27]||(g[27]=de=>ut())},{default:n(()=>[a("div",Rf,[g[33]||(g[33]=E(" Sample Payload ")),o(G,{class:ae(["transition-transform",{"transform rotate-180":e(xe)}]),icon:"arrowDown"},null,8,["class"])])]),_:1})]),St(a("div",null,[o(Se,{modelValue:e(Me),"onUpdate:modelValue":g[28]||(g[28]=de=>se(Me)?Me.value=de:null),"read-only":"","monaco-config":{minimap:{enabled:!1},fontSize:14.5,overviewRulerBorder:!1,overviewRulerLanes:0,hideCursorInOverviewRuler:!0,lineDecorationsWidth:12,lineNumbersMinChars:0,scrollBeyondLastLine:!1,renderLineHighlight:"none",lineNumbers:"off",glyphMargin:!1,folding:!1,bracketPairColorization:{enabled:!1},wordWrap:"on",scrollbar:{horizontal:"hidden",verticalScrollbarSize:6},wrappingStrategy:"advanced",tabSize:4,readOnly:!0},"monaco-custom-theme":{base:"vs",inherit:!0,rules:[{token:"key",foreground:"#B33771",fontStyle:"bold"},{token:"string",foreground:"#2B99CC",fontStyle:"semibold"},{token:"number",foreground:"#1FAB51",fontStyle:"semibold"},{token:"boolean",foreground:"#1FAB51",fontStyle:"semibold"},{token:"delimiter",foreground:"#15171A",fontStyle:"semibold"}],colors:{}},class:ae(["transition-all border-1 rounded-lg",{"w-0 min-w-0":!e(xe),"min-h-60 max-h-80":e(xe)}]),style:{"box-shadow":"0px 0px 4px 0px rgba(0, 0, 0, 0.08), 0px 0px 4px 0px rgba(0, 0, 0, 0.08)"}},null,8,["modelValue","class"])],512),[[ms,e(xe)]])])]}),_:1},8,["model"])])],512),a("div",Pf,[a("div",Ff,[a("h2",Bf,v(w.$t("labels.supportDocs")),1),a("div",null,[(l(),r(Y,null,be(ft,(bt,de)=>a("div",{key:de,class:"flex items-center gap-1"},[a("div",Nf,[o(G,{icon:"bookOpen",class:"flex-none w-4 h-4 text-gray-500"})]),o(dl,{href:bt.href,target:"_blank",rel:"noopener noreferrer",class:"!text-gray-500 text-sm !no-underline !hover:underline"},{default:n(()=>[E(v(bt.title),1)]),_:2},1032,["href"])])),64))])])])],64))])):e(le)==="log"?(l(),r("div",Vf,[o(rn,{hook:w.hook},null,8,["hook"])])):_("",!0)]),_:1},8,["visible"])}}}),jf=Object.assign(Ze(zf,[["__scopeId","data-v-673ae93c"]]),{__name:"Webhook"}),Wf={class:"mb-2 text-gray-800 text-[13px] flex justify-between"},qf={class:"flex rounded-lg"},Gf={class:"w-full flex justify-between items-center gap-2 px-2 py-2 rounded-md hover:bg-gray-100"},Hf={class:"flex w-full items-center gap-2"},Kf=Ue({__name:"Webhook",props:{modelValue:{},selectedWebhook:{}},emits:["update:modelValue","update:selectedWebhook"],setup(s,{emit:$}){const p=s,D=$,t=qe(p,"selectedWebhook",D),i=qe(p,"modelValue",D),{t:y}=Et(),{isUIAllowed:u}=jl(),h=U(!1),x=Pn(),{hooks:I}=Tt(x),S=ee(()=>I.value.filter(k=>{var Z;return k.version==="v3"?(Z=k.operation)==null?void 0:Z.includes("trigger"):k.event==="manual"&&k.active})),P=U([{text:[`${y("general.manual")} ${y("general.trigger")}`,`${y("general.manual")} ${y("general.trigger")}`],value:["manual","trigger"]}]),{isWebhookCreateModalOpen:C}=_t(),f=U(!1),c=k=>{t.value=k.id?k:void 0,i.value.fk_webhook_id=k.id,f.value=!1,setTimeout(()=>{C.value=!1},500)},z=()=>{t.value=void 0,f.value=!0,C.value=!0},b=()=>{t.value&&(C.value=!0,f.value=!0)},O=k=>{i.value.fk_webhook_id=k.id,t.value=k,h.value=!1,f.value=!1};return it(f,k=>{k||setTimeout(()=>{C.value=!1},500)}),(k,Z)=>{const K=go,j=Ye,Q=Gd,X=dt,oe=al,W=Pt,Te=rt,m=jf;return l(),r(Y,null,[o(Te,null,{default:n(()=>[a("div",Wf,[E(v(k.$t("labels.webhook"))+" ",1),Z[2]||(Z[2]=a("a",{class:"font-medium",href:"https://nocodb.com/docs/product-docs/fields/field-types/custom-types/button#create-a-button-field",target:"_blank"}," Docs ",-1))]),a("div",qf,[o(oe,{visible:e(h),"onUpdate:visible":Z[0]||(Z[0]=ge=>se(h)?h.value=ge:null),trigger:["click"]},{overlay:n(()=>{var ge;return[e(h)?(l(),d(Q,{key:0,"is-parent-open":e(h),"search-input-placeholder":k.$t("placeholder.searchFields"),"option-config":{selectOptionEvent:["c:actions:webhook"],optionClassName:""},options:e(S),"selected-option-id":(ge=e(t))==null?void 0:ge.id,"disable-mascot":"",class:"max-h-72 max-w-85","filter-field":"title","show-selected-option":"",onSelected:O},_l({_:2},[e(u)("hookCreate")?{name:"bottom",fn:n(()=>[o(K,{style:{margin:"4px 0"}}),a("div",{class:"flex items-center text-brand-500 text-sm cursor-pointer",onClick:z},[a("div",Gf,[E(v(k.$t("general.create"))+" "+v(k.$t("objects.webhook").toLowerCase())+" ",1),o(j,{icon:"plus",class:"flex-none"})])])]),key:"0"}:void 0]),1032,["is-parent-open","search-input-placeholder","options","selected-option-id"])):_("",!0)]}),default:n(()=>{var ge,ve;return[a("div",{class:ae([{"nc-button-style-dropdown shadow-dropdown-open remove-right-shadow":e(h)},"nc-button-webhook-select border-r-0 flex items-center justify-center border-1 h-8 px-[8px] border-gray-300 !w-full transition-all cursor-pointer !rounded-l-lg"])},[a("div",Hf,[(l(),r("div",{key:(ge=e(t))==null?void 0:ge.id,class:"flex items-center overflow-x-clip truncate text-ellipsis w-full gap-1 text-gray-800"},[o(X,{class:ae([{"text-gray-500":!((ve=e(t))!=null&&ve.title)},"truncate max-w-full"]),"show-on-truncate-only":""},{title:n(()=>{var $e,pe;return[E(v(($e=e(t))!=null&&$e.title?(pe=e(t))==null?void 0:pe.title:k.$t("labels.selectAWebhook")),1)]}),default:n(()=>{var $e,pe;return[E(" "+v(($e=e(t))!=null&&$e.title?(pe=e(t))==null?void 0:pe.title:k.$t("labels.selectAWebhook")),1)]}),_:1},8,["class"])])),o(j,{icon:"arrowDown",class:ae([{"transform rotate-180":e(h)},"text-gray-500 transition-all transition-transform"])},null,8,["class"])])],2)]}),_:1},8,["visible"]),o(W,{size:"small",type:"secondary",class:ae(["!rounded-l-none border-l-[#d9d9d9] !hover:bg-white nc-button-style-dropdown",{"nc-button-style-dropdown shadow-dropdown-open remove-left-shadow":e(h)}]),onClick:b},{default:n(()=>[o(j,{class:ae({"text-gray-400":!e(t),"text-gray-700":e(t)}),icon:"ncEdit"},null,8,["class"])]),_:1},8,["class"])])]),_:1}),e(f)?(l(),d(m,{key:0,value:e(f),"onUpdate:value":Z[1]||(Z[1]=ge=>se(f)?f.value=ge:null),hook:e(t),"event-list":e(P),onClose:c},null,8,["value","hook","event-list"])):_("",!0)],64)}}}),Yf=Object.assign(Ze(Kf,[["__scopeId","data-v-2fef53a8"]]),{__name:"SmartsheetColumnButtonOptionsWebhook"}),Xf={};function Jf(s,$){return l(),r("div")}const Qf=Object.assign(Ze(Xf,[["render",Jf]]),{__name:"SmartsheetColumnButtonOptionsScript"}),Zf={class:"relative flex flex-col gap-4"},ev={class:"bg-white space-y-2 p-2 rounded-lg"},tv=["onClick"],lv={class:"flex w-full items-center leading-5 justify-between gap-1"},nv={key:1,class:"text-sm flex items-center leading-5 text-gray-500"},ov={class:"bg-white w-80 space-y-3 h-70 overflow-y-auto rounded-lg"},av={class:"!sticky top-0 flex gap-2 bg-white px-2 py-2"},sv={class:"text-[13px]"},iv={class:"grid px-3 auto-rows-max pb-2 nc-scrollbar-md gap-3 grid-cols-10"},rv={class:"flex gap-2 w-full capitalize text-gray-800 truncate items-center"},uv={class:"flex-1"},cv={key:0},dv=Ue({__name:"index",props:{value:{},fromTableExplorer:{type:Boolean}},emits:["update:value"],async setup(s,{emit:$}){var Pe,Le,Ge,we,He,pt,ze,et,Xe,me,Je,re,R,Ke;let p,D;const t=s,i=$,y={...mt},u=qe(t,"value",i),h=It(Lt,U()),{t:x}=Et(),{getMeta:I}=ul(),{isAiBetaFeaturesEnabled:S}=Al(),{isEdit:P,setAdditionalValidations:C,validateInfos:f,sqlUi:c,column:z,isAiMode:b}=_t(),O=[B.QrCode,B.Barcode,B.Button],k=Pn(),{loadHooksList:Z}=k,{hooks:K}=Tt(k),j=di(),{loadAutomations:Q}=j,X=po(),{openedProject:oe}=Ut(X);[p,D]=_s(()=>Promise.all([Z(),Q({baseId:oe.value.id,force:!0})])),await p,D();const{activeBaseAutomations:W}=Tt(j),Te=U(),m=U(),ge=ee(()=>P.value?!0:S.value);ee(()=>P.value?!0:S.value);const ve=ee(()=>[{label:x("labels.openUrl"),value:mt.Url},{label:x("labels.runWebHook"),value:mt.Webhook},...ge.value?[{label:x("labels.generateFieldDataUsingAi"),value:mt.Ai,tooltip:x("tooltip.generateFieldDataUsingAiButtonOption")}]:[]]),$e=ee(()=>{var te,ue;return((ue=(te=h==null?void 0:h.value)==null?void 0:te.columns)==null?void 0:ue.filter(Ae=>!(O.includes(Ae.uidt)||yn(Ae,h.value))))||[]}),pe={formula_raw:[{required:[mt.Url,mt.Ai].includes(u.value.type),validator:(te,ue)=>(async()=>{var Ae;if(u.value.type===mt.Url){if(!(ue!=null&&ue.trim()))throw new Error("Formula is required for URL Button");try{await vn({column:z.value,formula:ue,columns:$e.value,clientOrSqlUi:c.value,getMeta:I})}catch(Me){throw Me instanceof so&&((Ae=Me.extra)!=null&&Ae.key)?new Error(x(Me.extra.key,Me.extra)):new Error(Me.message)}}else if(u.value.type===mt.Ai&&!(ue!=null&&ue.trim()))throw new Error("Prompt required for AI Button")})()}],fk_webhook_id:[{required:u.value.type===mt.Webhook,validator:(te,ue)=>new Promise((Ae,Me)=>{u.value.type===mt.Webhook&&!ue&&Me(new Error(x("general.required"))),Ae()})}],fk_script_id:[{required:u.value.type===mt.Script,validator:(te,ue)=>new Promise((Ae,Me)=>{u.value.type===mt.Script&&!ue&&Me(new Error(x("general.required"))),Ae()})}],color:[{validator:(te,ue)=>new Promise((Ae,Me)=>{["brand","red","green","maroon","blue","orange","pink","purple","yellow","gray"].includes(ue)||Me(new Error(x("msg.invalidColor"))),Ae()})}],theme:[{validator:(te,ue)=>new Promise((Ae,Me)=>{["solid","light","text"].includes(ue)||Me(new Error(x("msg.invalidTheme"))),Ae()})}],type:[{validator:(te,ue)=>new Promise((Ae,Me)=>{Object.values(mt).includes(ue)||Me(new Error(x("msg.invalidType"))),Ae()})}],label:[{validator:(te,ue)=>new Promise((Ae,Me)=>{!(ue.length>0)&&!u.value.icon&&Me(new Error(x("msg.invalidLabel"))),Ae()})}],output_column_ids:[{validator:(te,ue)=>new Promise((Ae,Me)=>{u.value.type===mt.Ai&&!ue&&Me(new Error("At least one output field is required for AI Button")),Ae()})}],fk_integration_id:[{validator:(te,ue)=>new Promise((Ae,Me)=>{u.value.type===mt.Ai&&!ue&&Me(new Error(x("title.aiIntegrationMissing"))),Ae()})}]};if(P.value){const te=u.value.colOptions;u.value.type=te==null?void 0:te.type,u.value.theme=te==null?void 0:te.theme,u.value.label=te==null?void 0:te.label,u.value.color=te==null?void 0:te.color,u.value.fk_webhook_id=te==null?void 0:te.fk_webhook_id,u.value.fk_script_id=te==null?void 0:te.fk_script_id,u.value.icon=te==null?void 0:te.icon,Te.value=K.value.find(ue=>{var Ae;return ue.id===((Ae=u.value)==null?void 0:Ae.fk_webhook_id)}),m.value=W.value.find(ue=>{var Ae;return ue.id===((Ae=u.value)==null?void 0:Ae.fk_script_id)}),u.value.type===mt.Ai&&(u.value.formula_raw=(te==null?void 0:te.formula_raw)||"",u.value.output_column_ids=(te==null?void 0:te.output_column_ids)||"",u.value.fk_integration_id=te==null?void 0:te.fk_integration_id)}else u.value.type=((Pe=u.value)==null?void 0:Pe.type)||((Le=ve.value[0])==null?void 0:Le.value),u.value.type===mt.Ai?(u.value.theme="light",u.value.label="Generate data",u.value.color="purple",u.value.icon="ncAutoAwesome",u.value.output_column_ids=((Ge=u.value)==null?void 0:Ge.output_column_ids)||""):(u.value.theme="solid",u.value.label="Button",u.value.color="brand"),u.value.formula_raw=((we=u.value)==null?void 0:we.formula_raw)||"";C({...pe}),(((He=u.value)==null?void 0:He.type)===mt.Url||((ze=(pt=z.value)==null?void 0:pt.colOptions)==null?void 0:ze.type)===mt.Url)&&((Xe=(et=z.value)==null?void 0:et.colOptions)!=null&&Xe.formula_raw?u.value.formula_raw=no((Je=(me=z.value)==null?void 0:me.colOptions)==null?void 0:Je.formula,(re=h==null?void 0:h.value)==null?void 0:re.columns,(Ke=(R=z.value)==null?void 0:R.colOptions)==null?void 0:Ke.formula_raw)||"":u.value.formula_raw="");const N={solid:{brand:"bg-brand-500 text-white",red:"bg-red-600 text-white",green:"bg-green-600 text-white",maroon:"bg-maroon-600 text-white",blue:"bg-blue-600 text-white",orange:"bg-orange-600 text-white",pink:"bg-pink-600 text-white",purple:"bg-purple-500 text-white",yellow:"bg-yellow-600 text-white",gray:"bg-gray-600 text-white"},light:{brand:"bg-brand-200 text-gray-800",red:"bg-red-200 text-gray-800",green:"bg-green-200 text-gray-800",maroon:"bg-maroon-200 text-gray-800",blue:"bg-blue-200 text-gray-800",orange:"bg-orange-200 text-gray-800",pink:"bg-pink-200 text-gray-800",purple:"bg-purple-200 text-gray-800",yellow:"bg-yellow-200 text-gray-800",gray:"bg-gray-200"},text:{brand:"text-brand-500",red:"text-red-600",green:"text-green-600",maroon:"text-maroon-600",blue:"text-blue-600",orange:"text-orange-600",pink:"text-pink-600",purple:"text-purple-500",yellow:"text-yellow-600",gray:"text-gray-600"}},A=U(!1),q=(te,ue)=>{u.value.theme=te,u.value.color=ue,A.value=!1},ye=U(!1),fe=U(""),Oe=ee(()=>gs(fe.value)),V=()=>{u.value.icon=null,ye.value=!1},J=te=>{u.value.icon=te,ye.value=!1},ke=()=>{u.value.formula_raw=""};return(te,ue)=>{var F,ie,Ie,w;const Ae=Wl,Me=rt,H=Gl,le=Ye,xe=al,Ee=Pt,ut=ql,tt=dt,ft=Ct,De=At,je=Lo,lt=Yf,gt=Qf;return l(),r("div",Zf,[o(ut,{gutter:8},{default:n(()=>[o(H,{span:12},{default:n(()=>[o(Me,st(e(f).label,{class:"mt-4",label:te.$t("general.label")}),{default:n(()=>[o(Ae,{value:e(u).label,"onUpdate:value":ue[0]||(ue[0]=g=>e(u).label=g),class:ae(["nc-column-label-input nc-input-shadow !rounded-lg",{"nc-ai-input":e(b)}]),placeholder:"Button"},null,8,["value","class"])]),_:1},16,["label"])]),_:1}),o(H,{span:6},{default:n(()=>[o(Me,st({label:te.$t("general.style")},e(f).theme),{default:n(()=>[o(xe,{visible:e(A),"onUpdate:visible":ue[1]||(ue[1]=g=>se(A)?A.value=g:null),class:"nc-color-picker-dropdown-trigger"},{overlay:n(()=>[a("div",ev,[(l(!0),r(Y,null,be(Object.entries(N),([g,G])=>(l(),r("div",{key:g,class:"flex gap-2"},[(l(!0),r(Y,null,be(Object.entries(G),([Ce,M])=>(l(),r("div",{key:Ce},[a("button",{class:ae([{[M]:!0,"!border-transparent":g!=="text"},"border-1 border-gray-200 flex items-center justify-center rounded h-6 w-6"]),onClick:Se=>q(g,Ce)},[(l(),d(_e(("iconMap"in te?te.iconMap:e(Re)).cellText),{class:"w-3.5 h-3.5"}))],10,tv)]))),128))]))),128))])]),default:n(()=>[a("div",{class:ae([{"nc-button-style-dropdown":e(A),"!border-nc-border-purple !shadow-selected-ai":e(A)&&e(b),"!border-brand-500 !shadow-selected":e(A)&&!e(b)},"flex items-center justify-between border-1 h-8 px-[11px] border-gray-300 !w-full transition-all cursor-pointer !rounded-lg"])},[a("div",{class:ae([`${e(u).color??"brand"} ${e(u).theme??"solid"}`,"flex items-center justify-center nc-cell-button rounded-md h-6 w-6 gap-2"])},[(l(),d(_e(("iconMap"in te?te.iconMap:e(Re)).cellText),{class:"w-4 h-4"}))],2),o(le,{icon:"arrowDown",class:"text-gray-500 !w-4 !h-4"})],2)]),_:1},8,["visible"])]),_:1},16,["label"])]),_:1}),o(H,{span:6},{default:n(()=>[o(Me,st({label:te.$t("labels.icon")},e(f).icon),{default:n(()=>[o(xe,{visible:e(ye),"onUpdate:visible":ue[3]||(ue[3]=g=>se(ye)?ye.value=g:null),class:"nc-color-picker-dropdown-trigger"},{overlay:n(()=>[a("div",ov,[a("div",av,[o(Ae,{ref:"inputRef",value:e(fe),"onUpdate:value":ue[2]||(ue[2]=g=>se(fe)?fe.value=g:null),placeholder:te.$t("placeholder.searchIcons"),class:ae(["nc-dropdown-search-unified-input z-10 nc-input-shadow",{"nc-ai-input":e(b)}])},{prefix:n(()=>[o(le,{icon:"search",class:"nc-search-icon h-3.5 w-3.5 mr-1"})]),_:1},8,["value","placeholder","class"]),o(Ee,{size:"small",class:"!px-4",type:"text",onClick:V},{default:n(()=>[a("span",sv,v(te.$t("general.remove")),1)]),_:1})]),a("div",iv,[(l(!0),r(Y,null,be(e(Oe),({icon:g,name:G},Ce)=>(l(),d(_e(g),{key:Ce,icon:g,class:"w-6 hover:bg-gray-100 cursor-pointer rounded p-1 text-gray-700 h-6",onClick:M=>J(G)},null,8,["icon","onClick"]))),128))])])]),default:n(()=>[a("div",{class:ae([{"nc-button-style-dropdown ":e(ye),"!border-nc-border-purple !shadow-selected-ai":e(ye)&&e(b),"!border-brand-500 !shadow-selected":e(ye)&&!e(b)},"flex items-center justify-center border-1 h-8 px-[11px] border-gray-300 !w-full transition-all cursor-pointer !rounded-lg"])},[a("div",lv,[e(u).icon?(l(),d(le,{key:0,icon:e(u).icon,class:"w-4 h-4 text-gray-700"},null,8,["icon"])):(l(),r("div",nv,v(te.$t("labels.selectIcon")),1)),o(le,{icon:"arrowDown",class:"text-gray-500 !w-4 !h-4"})])],2)]),_:1},8,["visible"])]),_:1},16,["label"])]),_:1})]),_:1}),o(ut,{gutter:8},{default:n(()=>[o(H,{span:24},{default:n(()=>[o(Me,st({label:te.$t("labels.onClick")},e(f).type),{default:n(()=>[o(De,{value:e(u).type,"onUpdate:value":ue[4]||(ue[4]=g=>e(u).type=g),class:ae(["w-52 nc-button-type-select nc-select-shadow",{"nc-ai-input":e(b)}]),"dropdown-class-name":"nc-dropdown-button-cell-type",onChange:ke},{suffixIcon:n(()=>[o(le,{icon:"arrowDown",class:"text-gray-500"})]),default:n(()=>[(l(!0),r(Y,null,be(e(ve),(g,G)=>(l(),d(ft,{key:G,value:g.value},{default:n(()=>[o(tt,{disabled:!g.tooltip,placement:"right",class:"w-full",title:g.tooltip},{default:n(()=>[a("div",rv,[a("div",uv,v(g.label),1),e(u).type===g.value?(l(),d(_e(("iconMap"in te?te.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["disabled","title"])]),_:2},1032,["value"]))),128))]),_:1},8,["value","class"])]),_:1},16,["label"])]),_:1})]),_:1}),((F=e(u))==null?void 0:F.type)===y.Url?(l(),r("div",cv,[o(je,{value:e(u).formula_raw,"onUpdate:value":ue[5]||(ue[5]=g=>e(u).formula_raw=g),"suggestion-height":"medium","editor-height":"50px","disabled-formulas":["URL()","URLENCODE()"],"disable-suggestion-headers":"",label:te.$t("labels.urlFormula"),error:((ie=e(f).formula_raw)==null?void 0:ie.validateStatus)==="error"},null,8,["value","label","error"])])):_("",!0),((Ie=e(u))==null?void 0:Ie.type)===y.Webhook?(l(),d(lt,{key:1,"model-value":e(u),"onUpdate:modelValue":ue[6]||(ue[6]=g=>se(u)?u.value=g:null),"selected-webhook":e(Te),"onUpdate:selectedWebhook":ue[7]||(ue[7]=g=>se(Te)?Te.value=g:null)},null,8,["model-value","selected-webhook"])):_("",!0),((w=e(u))==null?void 0:w.type)===y.Script?(l(),d(gt,{key:2,"model-value":e(u),"onUpdate:modelValue":ue[8]||(ue[8]=g=>se(u)?u.value=g:null),"selected-script":e(m),"onUpdate:selectedScript":ue[9]||(ue[9]=g=>se(m)?m.value=g:null)},null,8,["model-value","selected-script"])):_("",!0)])}}}),pv=Object.assign(Ze(dv,[["__scopeId","data-v-96b624cb"]]),{__name:"SmartsheetColumnButtonOptions"}),mv=Ve(()=>Ne(()=>import("./DOFFjK0_.js").then(s=>s.oO),__vite__mapDeps([1,2]),import.meta.url).then(s=>s.default||s)),fv=Ve(()=>Ne(()=>import("./DRQrXP7Q.js"),__vite__mapDeps([110,1,2,12,111]),import.meta.url).then(s=>s.default||s)),vv=Ve(()=>Ne(()=>import("./B2f1fstS.js"),__vite__mapDeps([112,1,2,20,113]),import.meta.url).then(s=>s.default||s)),_v=Ve(()=>Ne(()=>import("./CxSafZTa.js"),__vite__mapDeps([114,1,2,20,115]),import.meta.url).then(s=>s.default||s)),gv=Ve(()=>Ne(()=>import("./CMyFGii6.js").then(s=>s.V),__vite__mapDeps([60,1,2,61,62,63,64,5,6,65,66,67,68,69,23,70,71,12,11,17,72,20,13,14,10,48,53,31,52,30,54,73,74]),import.meta.url).then(s=>s.default||s)),yv=Ve(()=>Ne(()=>import("./CkXo2doe.js").then(s=>s.C),__vite__mapDeps([4,1,2,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url).then(s=>s.default||s)),hv={class:"nc-list-item-wrapper group px-[1px] hover:bg-gray-50 border-y-1 border-gray-200 border-t-transparent w-full"},bv={class:"flex items-center gap-3"},wv={key:0},xv={key:1,class:"h-11 w-11 !min-h-11 !min-w-11 !max-h-11 !max-w-11 !flex flex-row items-center !rounded-l-xl justify-center"},kv={class:"flex-1 flex flex-col gap-1 justify-center overflow-hidden"},$v={key:1,class:"flex ml-[-0.25rem] sm:flex-row xs:flex-col xs:mt-2 gap-4 min-h-5"},Cv={key:0,class:"flex flex-col gap-[-1]"},Tv={class:"nc-link-record-cell flex w-full max-w-full"},Iv={key:1,class:"flex flex-row w-full max-w-72 h-5 pl-1 items-center justify-start"},Sv={class:"min-w-5 flex-none"},Av=Ue({__name:"RecordItem",props:{row:{},columns:{},attachmentColumn:{},displayValueColumn:{},isLoading:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1},displayValueClassName:{default:""}},setup(s){const $=s;qt(ys,U(!0)),qt(hs,U(1)),qt(On,U(!1)),qt(bs,U(!0)),qt(ws,U(!0));const{row:p,columns:D,isSelected:t,isLoading:i}=Tt($);mi(p);const y=It(xs,U(!1)),{isMobileMode:u}=Sl(),{getPossibleAttachmentSrc:h}=ks(),x=ee(()=>{var f;return $.displayValueColumn||(D.value||[]).find(c=>(c==null?void 0:c.pv)??null)||((f=D.value||[])==null?void 0:f[0])}),I=ee(()=>{var f,c;return(f=x.value)!=null&&f.title?p.value.row[(c=x.value)==null?void 0:c.title]:null}),S=ee(()=>$.attachmentColumn||(D.value||[]).find(f=>Bl(f))),P=ee(()=>{var f;try{return(f=S.value)!=null&&f.title&&p.value.row[S.value.title]?typeof p.value.row[S.value.title]=="string"?JSON.parse(p.value.row[S.value.title]):p.value.row[S.value.title]:[]}catch{return[]}}),C=ee(()=>D.value.filter(f=>{var z;return!(f.id===((z=x.value)==null?void 0:z.id))&&!Hl(f)&&!$s(f)&&!gl(f)&&!Cs(f)&&!Bl(f)}).sort((f,c)=>{var z,b;return(((z=f.meta)==null?void 0:z.defaultViewColOrder)??1/0)-(((b=c.meta)==null?void 0:b.defaultViewColOrder)??1/0)}).slice(0,u.value?1:3));return(f,c)=>{const z=mv,b=fi,O=Ye,k=fv,Z=dt,K=vv,j=_v,Q=gv,X=yv,oe=Ts;return l(),r("div",hv,[o(oe,{tabindex:"0",class:ae(["nc-list-item !outline-none transition-all relative group-hover:bg-gray-50 cursor-auto",{"!bg-white":e(i),"!hover:bg-white":e(y)}]),"body-style":{padding:"6px 10px !important",borderRadius:0},hoverable:!1},{default:n(()=>[a("div",bv,[e(S)?(l(),r(Y,{key:0},[e(P)&&e(P).length?(l(),r("div",wv,[o(b,{autoplay:"",class:"!w-11 !h-11 !max-h-11 !max-w-11"},{customPaging:n(()=>c[2]||(c[2]=[])),default:n(()=>[(l(!0),r(Y,null,be(e(P),(W,Te)=>(l(),r(Y,null,[("isImage"in f?f.isImage:e(pi))(W.title,W.mimetype??W.type)?(l(),d(z,{key:`carousel-${W.title}-${Te}`,class:"!w-11 !h-11 !max-h-11 !max-w-11 object-cover !rounded-l-xl",srcs:e(h)(W,"tiny")},null,8,["srcs"])):_("",!0)],64))),256))]),_:1})])):(l(),r("div",xv,[o(O,{class:"w-full h-full !text-6xl !leading-10 !text-transparent rounded-lg",icon:"fileImage"})]))],64)):_("",!0),a("div",kv,[e(x)&&e(I)?(l(),r("div",{key:0,class:ae(["flex justify-start font-semibold text-brand-500 nc-display-value",f.displayValueClassName])},[o(Z,{class:"truncate leading-[20px]","show-on-truncate-only":""},{title:n(()=>[o(k,{modelValue:e(I),"onUpdate:modelValue":c[0]||(c[0]=W=>se(I)?I.value=W:null),column:e(x),class:"field-config-plain-cell-value"},null,8,["modelValue","column"])]),default:n(()=>[o(k,{modelValue:e(I),"onUpdate:modelValue":c[1]||(c[1]=W=>se(I)?I.value=W:null),column:e(x),class:"field-config-plain-cell-value"},null,8,["modelValue","column"])]),_:1})],2)):_("",!0),e(C).length>0?(l(),r("div",$v,[(l(!0),r(Y,null,be(e(C),W=>(l(),r("div",{key:W.id,class:"sm:w-1/3 sm:max-w-1/3 sm:overflow-hidden"},[("isRowEmpty"in f?f.isRowEmpty:e(ri))(e(p),W)?(l(),r("div",Iv,"-")):(l(),r("div",Cv,[o(Z,{class:"z-10 flex",placement:"bottomLeft","arrow-point-at-center":!1},{title:n(()=>[e(kt)(W)?(l(),d(K,{key:0,class:"text-gray-100 !text-sm nc-link-record-cell-tooltip",column:W,"hide-menu":""},null,8,["column"])):(l(),d(j,{key:1,class:"text-gray-100 !text-sm nc-link-record-cell-tooltip",column:W,"hide-menu":""},null,8,["column"]))]),default:n(()=>[a("div",Tv,[e(kt)(W)?(l(),d(Q,{key:0,"model-value":e(p).row[W.title],row:e(p),column:W,class:"!h-auto"},null,8,["model-value","row","column"])):(l(),d(X,{key:1,"model-value":e(p).row[W.title],column:W,"edit-enabled":!1,"read-only":"",class:"!h-auto"},null,8,["model-value","column"]))])]),_:2},1024)]))]))),128))])):_("",!0)]),Il(f.$slots,"extraRight",{},()=>[a("div",Sv,[o(wo,null,{default:n(()=>[e(t)?(l(),d(O,{key:0,icon:"circleCheckSolid",class:"flex-none text-primary w-5 h-5"})):_("",!0)]),_:1})])],!0)])]),_:3},8,["class"])])}}}),Ov=Object.assign(Ze(Av,[["__scopeId","data-v-22af77b4"]]),{__name:"NcListRecordItem"}),Lv=Ve(()=>Ne(()=>import("./DRQrXP7Q.js"),__vite__mapDeps([110,1,2,12,111]),import.meta.url).then(s=>s.default||s)),Ev=Ve(()=>Ne(()=>import("./CMyFGii6.js").then(s=>s.V),__vite__mapDeps([60,1,2,61,62,63,64,5,6,65,66,67,68,69,23,70,71,12,11,17,72,20,13,14,10,48,53,31,52,30,54,73,74]),import.meta.url).then(s=>s.default||s)),Mv=Ve(()=>Ne(()=>import("./CkXo2doe.js").then(s=>s.C),__vite__mapDeps([4,1,2,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url).then(s=>s.default||s)),Dv=Ve(()=>Ne(()=>import("./DunK-51v.js"),__vite__mapDeps([28,1,2,29]),import.meta.url).then(s=>s.default||s)),Uv=Ve(()=>Ne(()=>import("./0c4tmWST.js").then(s=>s.R),__vite__mapDeps([16,1,2,17,11,10,12,13,14,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,4,5,6,7,8,9,15,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94]),import.meta.url).then(s=>s.default||s)),Rv={key:0,class:"relative flex flex-col gap-4"},Pv={class:"flex items-center justify-center gap-2"},Fv={class:"h-full flex flex-col"},Bv={class:"w-full px-4 py-3 flex gap-2 border-b-1 border-nc-border-gray-medium"},Nv={class:"flex-1 flex items-center gap-3 text-xl font-semibold"},Vv={class:"h-[calc(100%_-_58px)]"},zv={class:"h-full flex"},jv={class:"h-full w-1/2 border-r-1 border-r-nc-border-gray-medium"},Wv={class:"border-b-1 border-b-nc-border-gray-medium py-2.5 w-full"},qv={class:"flex items-center mx-auto px-6 w-full max-w-[568px]"},Gv={class:"text-base text-nc-content-gray font-bold flex-1"},Hv={class:"-my-1.5"},Kv={class:"nc-prompt-input-wrapper bg-nc-bg-gray-light rounded-lg w-full mt-2"},Yv={class:"rounded-b-lg flex items-center gap-2 p-1"},Xv={class:"flex flex-col gap-2"},Jv={class:"flex items-center gap-2"},Qv={class:"inline-flex items-center gap-2 flex-1 truncate"},Zv={key:0,class:"flex flex-wrap gap-3 mt-3"},e_={class:"flex flex-row items-center gap-1 py-[2px] text-sm"},t_={class:"flex items-center p-0.5 mt-0.5"},l_={class:"flex flex-col gap-6 h-[calc(100%_-_45px)] nc-scrollbar-thin py-6"},n_={key:0,class:"nc-ai-button-config-right-section"},o_={class:"py-3 pl-3 pr-2 flex items-center gap-3 bg-nc-bg-red-light rounded-lg w-full"},a_={class:"text-sm text-nc-content-gray-subtle flex-1 max-w-[calc(100%_-_24px)]"},s_={class:"nc-ai-button-config-right-section"},i_={class:"flex-1 flex border-1 bg-white border-nc-border-gray-medium rounded-xl mt-2 w-full"},r_={class:"w-full text-sm text-nc-content-gray-subtle2 font-bold flex items-center gap-2.5 min-h-7"},u_={key:1,class:"flex-1 flex items-center gap-2"},c_={key:0,class:"min-w-[500px] max-w-[576px] min-h-[296px] relative flex flex-col items-center justify-center gap-2 min-h-25 text-nc-content-brand"},d_={key:0,class:"flex-1 flex text-nc-content-gray-muted text-small leading-[18px]"},p_={key:1,class:"flex flex-col gap-4 w-full"},m_={class:"flex items-center gap-2 text-nc-content-gray-subtle2 mb-2"},f_={class:"flex flex-col gap-2 py-1 px-0.5"},v_={class:"flex gap-2"},__={class:"flex gap-2"},g_={class:"flex gap-2"},y_={class:"flex items-center gap-2"},h_={class:"nc-ai-button-config-right-section"},b_={key:0,class:"flex-1 flex text-nc-content-gray-muted text-small leading-[18px]"},w_={key:1,class:"flex flex-col gap-4 w-full"},x_={class:"flex items-center gap-2 text-nc-content-gray-subtle2 mb-2"},k_={key:1},$_=`Enter prompt here...

 eg : Categorise this {Notes}`,C_=Ue({__name:"AiButtonOptions",props:{value:{},submitBtnLabel:{},saving:{type:Boolean}},emits:["update:value","navigateToIntegrations","onSubmit"],setup(s,{emit:$}){const p=s,D=$,t=qe(p,"value",D),{submitBtnLabel:i,saving:y}=Tt(p),u=It(Lt,U()),h=$n(),{activeWorkspaceId:x}=Ut(h),{isAiButtonConfigModalOpen:I,isEdit:S,validateInfos:P,column:C,loadData:f,formattedData:c,disableSubmitBtn:z,tableExplorerColumns:b,fromTableExplorer:O}=_t(),{isAiBetaFeaturesEnabled:k,aiIntegrationAvailable:Z,aiLoading:K,aiError:j,generateRows:Q}=Al(),X=U(!1),oe=U(!1),W=U(!1),Te=ee(()=>{var re;return t.value.title||Is({formState:t.value,tableExplorerColumns:b==null?void 0:b.value,metaColumns:((re=u.value)==null?void 0:re.columns)||[]})}),ge=U({row:{},oldRow:{},rowMeta:{}}),ve=U(!1),$e=U(!1),pe=U(!1),N=ee(()=>{var re,R,Ke,te;return((R=(re=u.value)==null?void 0:re.columns)==null?void 0:R.find(ue=>ue==null?void 0:ue.pv))||((te=(Ke=u.value)==null?void 0:Ke.columns)==null?void 0:te[0])||null}),A=ee(()=>(c.value||[]).map(re=>{var te,ue,Ae;const R=Co(e(re.row),((te=u.value)==null?void 0:te.columns)||[]);return{label:(Ae=re.row)==null?void 0:Ae[(ue=N.value)==null?void 0:ue.title],value:R,row:re}}).filter(re=>!!(re.label&&re.value))),q=U(""),ye=ee(()=>A.value.find(re=>re.value===q.value)||{row:{row:{},oldRow:{},rowMeta:{new:!0}},label:"",value:""}),fe=ee(()=>{var re;return(re=u.value)!=null&&re.columns?u.value.columns.filter(R=>{var Ke;return R.title&&!R.system&&![B.ID,B.Button,B.Links].includes(R.uidt)&&(S.value?((Ke=C.value)==null?void 0:Ke.id)!==R.id:!0)}):[]}),Oe=ee(()=>fe.value.filter(re=>{var R;return(R=t.value.formula_raw)==null?void 0:R.includes(`{${re.title}}`)})),V=ee(()=>{var re;return(re=u.value)!=null&&re.columns?u.value.columns.filter(R=>{var Ke;return!R.system&&!R.pk&&R.id!==((Ke=C.value)==null?void 0:Ke.id)&&![B.Attachment,B.Button,B.Links].includes(R.uidt)&&!Pl(R)}):[]}),J=ee({get:()=>{var R,Ke,te;return(Ke=(R=t.value)==null?void 0:R.output_column_ids)!=null&&Ke.length?((te=t.value.output_column_ids)==null?void 0:te.split(","))||[]:[]},set:re=>{t.value.output_column_ids=re.join(",")}}),ke=async(re=!1)=>{!c.value.length&&!pe.value&&(pe.value=!0,await f(void 0,!1),await Ls(250),pe.value=!1),re&&A.value.length&&(q.value=A.value[0].value)},Pe=re=>{J.value=J.value.filter(R=>R!==re)},Le=re=>ol(kt(re)?hl:bl,{columnMeta:re}),Ge=async()=>{var R;if(!q.value||!J.value.length)return;ve.value=!0;const re=await Q(u.value.id,{title:(R=t.value)==null?void 0:R.title,prompt_raw:t.value.formula_raw,fk_integration_id:t.value.fk_integration_id,uidt:B.Button,output_column_ids:J.value.join(",")},[q.value],!1);re!=null&&re.length&&(ge.value.row=re[0],$e.value=!0),ve.value=!1},we=U([]),He=()=>{we.value.includes("input")?we.value=[]:we.value=["input"]},pt=U(["output"]);qt(Ss,U(!0)),qt(On,U(!0)),it(X,re=>{re?(I.value=!0,ke(!0)):(setTimeout(()=>{I.value=!1},500),oe.value=!1,W.value=!1)}),it(W,re=>{re&&ke()});const ze=ee(()=>S.value?!0:k.value),et=U(),Xe=U(!1),me=()=>(et.value&&(et.value.scrollTop>0?Xe.value=!0:Xe.value=!1),!1),Je=()=>{$e.value=!1,ge.value={row:{},oldRow:{},rowMeta:{}}};return it([()=>J.value.length,()=>{var re;return(re=t.value.formula_raw)==null?void 0:re.length}],()=>{!t.value.formula_raw||!J.value.length?z.value=!0:z.value=!1},{immediate:!0}),$t(()=>{j.value="",!t.value.formula_raw||!J.value.length?z.value=!0:z.value=!1}),uo(()=>{z.value=!1,j.value=""}),(re,R)=>{const Ke=Ln,te=Ye,ue=Pt,Ae=zo,Me=jo,H=rt,le=sn,xe=dt,Ee=So,ut=fo,tt=al,ft=xo,De=ln,je=Lv,lt=bn,gt=Ov,F=Ev,ie=Mv,Ie=Dv,w=Uv,g=_i,G=vi,Ce=gn;return e(ze)?(l(),r("div",Rv,[e(Z)?e(j)?(l(),r(Y,{key:1},[],64)):(l(),d(ue,{key:2,type:"secondary",size:"small",theme:"ai",onClick:R[0]||(R[0]=he(M=>X.value=!0,["stop"]))},{default:n(()=>[a("div",Pv,[o(te,{icon:"ncSettings",class:"text-[14px] !text-current"}),E(" "+v(re.$t("labels.configureAiButton")),1)])]),_:1})):(l(),d(Ke,{key:0})),o(Ce,{visible:e(X),"onUpdate:visible":R[23]||(R[23]=M=>se(X)?X.value=M:null),class:"nc-ai-button-config-modal","show-separator":!1,size:"lg","wrap-class-name":"nc-ai-button-config-modal-wrapper","nc-modal-class-name":"!p-0"},{default:n(()=>[a("div",Fv,[a("div",Bv,[a("div",Nv,[o(te,{icon:"cellAiButton",class:"flex-none h-6 w-6"}),E(" "+v(e(Te)),1)]),o(ue,{size:"small",type:"secondary",onClick:R[1]||(R[1]=he(M=>("navigateTo"in re?re.navigateTo:e(As))("/",{open:"navigateToBlankTargetOpenOption"in re?re.navigateToBlankTargetOpenOption:e(Os)}),["stop"]))},{icon:n(()=>[o(te,{icon:"externalLink",class:"text-gray-600"})]),default:n(()=>[E(" "+v(re.$t("activity.goToDocs")),1)]),_:1}),e(O)?_("",!0):(l(),d(ue,{key:0,size:"small",type:"primary",disabled:e(z)||e(y),label:e(i).label,"loading-label":e(i).loadingLabel,loading:e(y),onClick:R[2]||(R[2]=he(M=>D("onSubmit"),["stop"]))},{loading:n(()=>[E(v(e(i).loadingLabel),1)]),default:n(()=>[E(v(e(i).label)+" ",1)]),_:1},8,["disabled","label","loading-label","loading"])),o(ue,{size:"small",type:"text",onClick:R[3]||(R[3]=he(M=>X.value=!1,["stop"]))},{default:n(()=>[o(te,{icon:"close",class:"text-gray-600"})]),_:1})]),a("div",Vv,[a("div",zv,[a("div",jv,[a("div",Wv,[a("div",qv,[a("div",Gv,v(re.$t("general.configure")),1),a("div",Hv,[o(Ae,{"fk-integration-id":e(t).fk_integration_id,"onUpdate:fkIntegrationId":R[4]||(R[4]=M=>e(t).fk_integration_id=M),model:e(t).model,"onUpdate:model":R[5]||(R[5]=M=>e(t).model=M),randomness:e(t).randomness,"onUpdate:randomness":R[6]||(R[6]=M=>e(t).randomness=M),"workspace-id":e(x),"show-tooltip":!1,"is-edit-column":e(S),placement:"bottomRight"},{default:n(()=>[o(ue,{size:"xs",theme:"ai",class:"!px-1",type:"text"},{default:n(()=>[o(te,{icon:"settings"})]),_:1})]),_:1},8,["fk-integration-id","model","randomness","workspace-id","is-edit-column"])])])]),o(De,{modelValue:e(t),"onUpdate:modelValue":R[12]||(R[12]=M=>se(t)?t.value=M:null),"no-style":"",layout:"vertical",class:"nc-ai-button-config-left-section flex flex-col h-[calc(100%_-_45px)] nc-scrollbar-thin",onSubmit:R[13]||(R[13]=he(()=>{},["prevent"]))},{default:n(()=>[o(H,st({class:"!my-0"},e(P).formula_raw),{default:n(()=>[R[25]||(R[25]=a("div",{class:"flex flex-col gap-2"},[a("div",{class:"font-bold"},"Input Prompt"),a("div",{class:"text-small leading-[18px] text-nc-content-gray-subtle2"}," Include at least one field in your prompt. Optionally, specify how the field's data should guide the AI's response and the format for the output. ")],-1)),a("div",Kv,[o(Me,{modelValue:e(t).formula_raw,"onUpdate:modelValue":R[7]||(R[7]=M=>e(t).formula_raw=M),options:e(fe),placeholder:$_,"prompt-field-tag-class-name":"!bg-nc-bg-gray-medium !text-nc-content-gray"},null,8,["modelValue","options"]),a("div",Yv,[o(te,{icon:"info",class:"!text-nc-content-purple-medium h-4 w-4"}),R[24]||(R[24]=a("span",{class:"text-xs text-nc-content-gray-subtle2"},[E("Mention fields using curly braces, e.g. "),a("span",{class:"text-nc-content-purple-dark"},"{Field name}"),E(".")],-1))])])]),_:1,__:[25]},16),o(H,st(e(P).output_column_ids,{class:"!mb-0 !mt-7"}),{default:n(()=>[a("div",Xv,[R[27]||(R[27]=a("div",{class:"font-bold"},"Choose Output Fields To Be Generated by AI",-1)),R[28]||(R[28]=a("div",{class:"text-small leading-[18px] text-nc-content-gray-subtle2"}," Choose the fields where the AI-generated data will be applied. ",-1)),o(tt,{visible:e(oe),"onUpdate:visible":R[11]||(R[11]=M=>se(oe)?oe.value=M:null),placement:"bottomRight","overlay-class-name":"overflow-hidden"},{overlay:n(()=>[o(ut,{value:e(J),"onUpdate:value":R[9]||(R[9]=M=>se(J)?J.value=M:null),open:e(oe),"onUpdate:open":R[10]||(R[10]=M=>se(oe)?oe.value=M:null),list:e(V),"search-input-placeholder":"Search","option-label-key":"title","option-value-key":"id","close-on-select":!1,class:"!w-auto","is-multi-select":"","show-search-always":"","container-class-name":"!max-h-[171px]"},{listItem:n(({option:M,isSelected:Se})=>[o(le,{checked:Se},null,8,["checked"]),a("div",Qv,[(l(),d(_e(Le(M)),{class:"!mx-0"})),o(xe,{class:"truncate flex-1","show-on-truncate-only":""},{title:n(()=>[E(v(M==null?void 0:M.title),1)]),default:n(()=>[E(" "+v(M==null?void 0:M.title),1)]),_:2},1024)])]),headerExtraRight:n(()=>[o(Ee,{border:!1,color:"brand"},{default:n(()=>{var M;return[E(v(e(J).length)+" "+v(re.$t(`objects.${((M=e(J))==null?void 0:M.length)===1?"field":"fields"}`)),1)]}),_:1})]),_:1},8,["value","open","list"])]),default:n(()=>[o(ue,{size:"small",type:"secondary",onClick:R[8]||(R[8]=he(()=>{},["stop"]))},{default:n(()=>[a("div",Jv,[o(te,{icon:"plus",class:"!text-current"}),R[26]||(R[26]=E(" Select fields "))])]),_:1})]),_:1},8,["visible"])]),e(V).length?(l(),r("div",Zv,[(l(!0),r(Y,null,be(e(V),M=>(l(),r(Y,null,[e(J).includes(M.id)?(l(),d(ft,{key:M.id,class:"nc-ai-button-output-field"},{default:n(()=>[a("div",e_,[(l(),d(_e(Le(M)),{class:"!mx-0 !mr-1 opacity-80"})),o(xe,{"show-on-truncate-only":"",class:"truncate max-w-[150px]"},{title:n(()=>[E(v(M.title),1)]),default:n(()=>[E(" "+v(M.title),1)]),_:2},1024),a("div",t_,[o(te,{icon:"close",class:"h-4 w-4 cursor-pointer opacity-60",onClick:Se=>Pe(M.id)},null,8,["onClick"])])])]),_:2},1024)):_("",!0)],64))),256))])):_("",!0)]),_:1},16)]),_:1},8,["modelValue"])]),a("div",{ref_key:"previewPanelDom",ref:et,class:"h-full w-1/2 bg-[#FCF8FF] flex flex-col relative",onScrollPassive:me},[R[40]||(R[40]=a("div",{class:"border-b-1 border-b-nc-border-gray-medium py-2.5 w-full"},[a("div",{class:"flex items-center mx-auto px-6 w-full max-w-[568px]"},[a("div",{class:"text-base text-nc-content-gray font-bold flex-1"},"Test Data Generation")])],-1)),a("div",l_,[e(j)?(l(),r("div",n_,[a("div",o_,[o(te,{icon:"ncInfoSolid",class:"flex-none !text-nc-content-red-dark w-4 h-4"}),a("div",a_,[o(xe,{class:"truncate","show-on-truncate-only":""},{title:n(()=>[E(v(e(j)),1)]),default:n(()=>[E(" "+v(e(j)),1)]),_:1})])])])):_("",!0),a("div",s_,[R[31]||(R[31]=a("div",{class:"px-3 py-1 text-nc-content-gray-subtle2 text-sm"},"Input fields",-1)),a("div",i_,[o(G,{"active-key":e(we),"onUpdate:activeKey":R[21]||(R[21]=M=>se(we)?we.value=M:null),ghost:"",class:"flex-1 nc-ai-button-config-right-collapse nc-collapse-input w-full"},{expandIcon:n(()=>R[29]||(R[29]=[])),default:n(()=>[(l(),d(g,{key:"input",collapsible:"disabled"},{header:n(()=>[a("div",{class:ae(["flex w-full p-2",{"border-b-1 border-nc-border-gray-medium":e(we).includes("input")}])},[a("div",r_,[o(ue,{"icon-only":"",type:"text",size:"xs",class:"!px-1",onClick:R[14]||(R[14]=he(M=>He(),["stop"]))},{icon:n(()=>[o(te,{icon:e(we).includes("input")?"eye":"eyeSlash"},null,8,["icon"])]),_:1}),o(tt,{visible:e(W),"onUpdate:visible":R[20]||(R[20]=M=>se(W)?W.value=M:null),placement:"bottom","overlay-class-name":"overflow-hidden"},{overlay:n(()=>[e(pe)?(l(),r("div",c_,[o(lt,{size:"large",class:"flex-none"}),R[30]||(R[30]=E(" Loading records "))])):(l(),d(ut,{key:1,value:e(q),"onUpdate:value":[R[18]||(R[18]=M=>se(q)?q.value=M:null),Je],open:e(W),"onUpdate:open":R[19]||(R[19]=M=>se(W)?W.value=M:null),list:e(A),"show-search-always":"","search-input-placeholder":"Search records","item-height":60,class:"!w-auto min-w-[550px] max-w-[550px]","container-class-name":"!px-0 !pb-0","item-class-name":"!rounded-none !p-0 !bg-none !hover:bg-none"},{listItem:n(({option:M,isSelected:Se})=>{var Be;return[o(gt,{row:M.row||{},columns:((Be=e(u))==null?void 0:Be.columns)||[],"is-selected":Se,class:"!cursor-pointer","display-value-class-name":"!text-nc-content-gray"},null,8,["row","columns","is-selected"])]}),_:1},8,["value","open","list"]))]),default:n(()=>[o(ue,{size:"xs",type:"text",class:ae(["flex-1 children:children:w-full !font-bold !text-sm",{"!text-gray-900 !bg-gray-100":e(W)}]),onClick:R[17]||(R[17]=he(()=>{},["stop"]))},{default:n(()=>[e(q)&&e(N)?(l(),d(xe,{key:0,class:"w-full text-left truncate !leading-6","show-on-truncate-only":""},{title:n(()=>[o(je,{modelValue:e(ye).row.row[e(N).title],"onUpdate:modelValue":R[15]||(R[15]=M=>e(ye).row.row[e(N).title]=M),column:e(N),class:"!leading-6"},null,8,["modelValue","column"])]),default:n(()=>[o(je,{modelValue:e(ye).row.row[e(N).title],"onUpdate:modelValue":R[16]||(R[16]=M=>e(ye).row.row[e(N).title]=M),column:e(N),class:"!leading-6"},null,8,["modelValue","column"])]),_:1})):(l(),r("div",u_,"- Select Record -")),e(pe)&&!e(W)?(l(),d(lt,{key:2,size:"regular"})):(l(),d(te,{key:3,icon:"chevronDown",class:ae(["!text-current opacity-70 flex-none transform transition-transform duration-250 w-4 h-4 ml-1",{"!rotate-180":e(W)}])},null,8,["class"]))]),_:1},8,["class"])]),_:1},8,["visible"])])],2)]),default:n(()=>[e(Oe).length?(l(),r("div",p_,[(l(),d(w,{key:e(q),row:e(ye).row},{default:n(()=>[(l(!0),r(Y,null,be(e(Oe),M=>(l(),r(Y,null,[M.title?(l(),d(H,{key:`${M.id}-${e(ve)}`,name:M.title,class:"!my-0 nc-input-required-error"},{default:n(()=>[a("div",m_,[(l(),d(_e(Le(M)),{class:"!mx-0"})),o(xe,{class:"truncate flex-1","show-on-truncate-only":""},{title:n(()=>[E(v(M==null?void 0:M.title),1)]),default:n(()=>[E(" "+v(M==null?void 0:M.title),1)]),_:2},1024)]),o(Ie,{class:ae(["relative flex items-center min-h-8 children:h-full bg-nc-bg-gray-extralight max-w-full",{"!select-text nc-system-field":("isReadOnlyVirtualCell"in re?re.isReadOnlyVirtualCell:e(Pl))(M),"!select-text nc-readonly-div-data-cell":!("isReadOnlyVirtualCell"in re?re.isReadOnlyVirtualCell:e(Pl))(M)}])},{default:n(()=>{var Se,Be,yt,vt,ht,Dt,Ht,Qt;return[e(kt)(M)?(l(),d(F,{key:0,"model-value":(yt=(Be=(Se=e(ye))==null?void 0:Se.row)==null?void 0:Be.row)==null?void 0:yt[M.title],class:ae(["mt-0 nc-input nc-cell",[`nc-form-input-${(vt=M.title)==null?void 0:vt.replaceAll(" ","")}`,{readonly:M==null?void 0:M.read_only}]]),column:M,"read-only":!0},null,8,["model-value","class","column"])):(l(),d(ie,{key:1,"model-value":(Ht=(Dt=(ht=e(ye))==null?void 0:ht.row)==null?void 0:Dt.row)==null?void 0:Ht[M.title],class:ae(["nc-input truncate",[`nc-form-input-${(Qt=M.title)==null?void 0:Qt.replaceAll(" ","")}`,{readonly:M==null?void 0:M.read_only}]]),column:M,"edit-enabled":!0,"read-only":!0},null,8,["model-value","class","column"]))]}),_:2},1032,["class"])]),_:2},1032,["name"])):_("",!0)],64))),256))]),_:1},8,["row"]))])):(l(),r("div",d_," No input fields selected "))]),_:1}))]),_:1},8,["active-key"])])]),a("div",{class:ae(["flex justify-center nc-ai-button-test-generate-wrapper",{"text-nc-border-gray-dark":!(e(q)&&e(J).length&&e(Oe).length),"text-nc-content-purple-dark":!!(e(q)&&e(J).length&&e(Oe).length)}])},[R[36]||(R[36]=a("div",{class:"h-2.5 w-2.5 flex-none absolute -top-[30px] border-1 border-current rounded-full bg-current"},null,-1)),o(xe,{disabled:!!(e(q)&&e(J).length&&e(Oe).length)},{title:n(()=>[a("div",f_,[R[35]||(R[35]=a("div",{class:"text-[10px] leading-[14px] text-gray-300 uppercase mb-1"},"Preview checklist",-1)),a("div",v_,[a("div",{class:ae(["h-4 w-4 rounded-full grid place-items-center children:h-3.5 children:w-3.5 children:flex-none",e(Oe).length?"bg-nc-bg-green-dark text-nc-content-green-dark":"bg-nc-bg-red-dark text-nc-content-red-dark"])},[o(te,{icon:e(Oe).length?"check":"ncX"},null,8,["icon"])],2),R[32]||(R[32]=a("div",null,"Use at least 1 Field in your Input prompt",-1))]),a("div",__,[a("div",{class:ae(["h-4 w-4 rounded-full grid place-items-center children:h-3.5 children:w-3.5 children:flex-none",e(J).length?"bg-nc-bg-green-dark text-nc-content-green-dark":"bg-nc-bg-red-dark text-nc-content-red-dark"])},[o(te,{icon:e(J).length?"check":"ncX"},null,8,["icon"])],2),R[33]||(R[33]=a("div",null,"Choose at least 1 Output Field",-1))]),a("div",g_,[a("div",{class:ae(["h-4 w-4 rounded-full grid place-items-center children:h-3.5 children:w-3.5 children:flex-none",e(q)?"bg-nc-bg-green-dark text-nc-content-green-dark":"bg-nc-bg-red-dark text-nc-content-red-dark"])},[o(te,{icon:e(q)?"check":"ncX"},null,8,["icon"])],2),R[34]||(R[34]=a("div",null,"Select sample record",-1))])])]),default:n(()=>[o(ue,{size:"small",theme:"ai",type:"primary",class:"nc-ai-button-test-generate",disabled:e(K)||!e(q)||!e(J).length||!e(Oe).length,loading:e(K)&&e(ve),onClick:he(Ge,["stop"])},{icon:n(()=>[o(te,{icon:"ncAutoAwesome",class:"h-4 w-4"})]),loadingIcon:n(()=>[o(lt,{class:"!text-current",size:"regular"})]),default:n(()=>[a("div",y_,v(e(K)&&e(ve)?e($e)?"Re-generating data":"Generating data":e($e)?"Re-generate data":"Generate data"),1)]),_:1},8,["disabled","loading"])]),_:1},8,["disabled"]),R[37]||(R[37]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",class:"absolute -bottom-[24px] z-10"},[a("path",{d:"M5.86603 7.5C5.48113 8.16667 4.51887 8.16667 4.13397 7.5L0.669873 1.5C0.284973 0.833334 0.766099 0 1.5359 0H8.4641C9.2339 0 9.71503 0.833333 9.33013 1.5L5.86603 7.5Z",fill:"currentColor"})],-1))],2),a("div",h_,[a("div",{class:ae(["flex-1 flex border-1 bg-white border-nc-border-gray-medium rounded-xl w-full",{"nc-is-already-generated":e($e)}])},[o(G,{"active-key":e(pt),"onUpdate:activeKey":R[22]||(R[22]=M=>se(pt)?pt.value=M:null),ghost:"",class:"flex-1 nc-ai-button-config-right-collapse nc-collapse-output w-full"},{expandIcon:n(()=>R[38]||(R[38]=[])),default:n(()=>[(l(),d(g,{key:"output",collapsible:"disabled"},{header:n(()=>R[39]||(R[39]=[])),default:n(()=>[e(J).length?(l(),r("div",w_,[o(w,{row:e(ge)},{default:n(()=>[(l(!0),r(Y,null,be(e(V),M=>(l(),r(Y,null,[M.title&&e(J).includes(M.id)?(l(),d(H,{key:M.id,name:M.title,class:"!my-0 nc-input-required-error"},{default:n(()=>[a("div",x_,[(l(),d(_e(Le(M)),{class:"!mx-0"})),o(xe,{class:"truncate flex-1","show-on-truncate-only":""},{title:n(()=>[E(v(M==null?void 0:M.title),1)]),default:n(()=>[E(" "+v(M==null?void 0:M.title),1)]),_:2},1024)]),o(Ie,{class:ae(["relative min-h-8 flex items-center children:h-full max-w-full",{"!select-text nc-system-field":("isReadOnlyVirtualCell"in re?re.isReadOnlyVirtualCell:e(Pl))(M),"!select-text nc-readonly-div-data-cell":!("isReadOnlyVirtualCell"in re?re.isReadOnlyVirtualCell:e(Pl))(M),"bg-nc-bg-gray-extralight":!e($e),"bg-nc-bg-purple-light":e($e)}])},{default:n(()=>{var Se,Be;return[e(kt)(M)?(l(),d(F,{key:0,"model-value":e(ge).row[M.title],class:ae(["mt-0 nc-input nc-cell",[`nc-form-input-${(Se=M.title)==null?void 0:Se.replaceAll(" ","")}`,{readonly:M==null?void 0:M.read_only}]]),column:M,"read-only":!0},null,8,["model-value","class","column"])):(l(),d(ie,{key:1,modelValue:e(ge).row[M.title],"onUpdate:modelValue":yt=>e(ge).row[M.title]=yt,class:ae(["nc-input truncate",[`nc-form-input-${(Be=M.title)==null?void 0:Be.replaceAll(" ","")}`,{readonly:M==null?void 0:M.read_only}]]),column:M,"edit-enabled":!0,"read-only":!0},null,8,["modelValue","onUpdate:modelValue","class","column"]))]}),_:2},1032,["class"])]),_:2},1032,["name"])):_("",!0)],64))),256))]),_:1},8,["row"])])):(l(),r("div",b_," No output fields selected "))]),_:1}))]),_:1},8,["active-key"])],2)])])],544)])])])]),_:1},8,["visible"])])):(l(),r("div",k_))}}}),T_=Object.assign(Ze(C_,[["__scopeId","data-v-91b395b6"]]),{__name:"SmartsheetColumnAiButtonOptions"}),I_={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function S_(s,$){return l(),r("svg",I_,$[0]||($[0]=[a("path",{fill:"currentColor",d:"M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2m1 5h-2v4H7v2h4v4h2v-4h4v-2h-4z"},null,-1)]))}const A_=nn({name:"mdi-plus-circle-outline",render:S_}),O_={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function L_(s,$){return l(),r("svg",O_,$[0]||($[0]=[a("path",{fill:"currentColor",d:"M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2M7 13h10v-2H7"},null,-1)]))}const E_=nn({name:"mdi-minus-circle-outline",render:L_}),M_={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function D_(s,$){return l(),r("svg",M_,$[0]||($[0]=[a("path",{fill:"currentColor",d:"M10 7v2H9v6h1v2H6v-2h1V9H6V7zm6 0a2 2 0 0 1 2 2v6c0 1.11-.89 2-2 2h-4V7m4 2h-2v6h2z"},null,-1)]))}const U_=nn({name:"mdi-identifier",render:D_}),R_=Ve(()=>Ne(()=>import("./gobHM9h5.js"),__vite__mapDeps([116,1,2,87,88,89,90,17,11,20,12,91,117]),import.meta.url).then(s=>s.default||s)),P_=Ve(()=>Ne(()=>import("./BmgElaBc.js"),__vite__mapDeps([118,1,2,34,35,10,11,12,13,14,87,88,89,90,17,20,91]),import.meta.url).then(s=>s.default||s)),F_=Ve(()=>Ne(()=>import("./CXk9dMSN.js"),__vite__mapDeps([119,1,2,87,88,89,90,17,11,20,12,91,120,121,122,123,124]),import.meta.url).then(s=>s.default||s)),B_=Ve(()=>Ne(()=>import("./BgWWyWb0.js"),__vite__mapDeps([125,1,2,87,88,89,90,17,11,20,12,91]),import.meta.url).then(s=>s.default||s)),N_={class:"flex items-center gap-3"},V_={class:"flex-1 text-base font-bold text-nc-content-gray"},z_={key:0,class:"flex items-center gap-3 py-2"},j_={class:"text-sm text-nc-content-gray-subtle flex-1"},W_={class:"px-5 pt-4 pb-2"},q_={key:0,class:"w-full flex items-center gap-3"},G_={key:1},H_={class:"text-nc-content-purple-light text-sm h-7 flex items-center gap-2"},K_={class:"nc-animate-dots"},Y_={key:2,class:"flex gap-3 items-start"},X_={class:"flex-1 flex gap-2 flex-wrap"},J_={class:"w-[150px]"},Q_={class:"flex flex-row items-center gap-2 py-[3px] text-small leading-[18px]"},Z_={key:1,class:"text-nc-content-gray-subtle2"},eg={class:"flex items-center gap-1"},tg={class:"px-5 pt-4 pb-2 flex flex-col gap-4"},lg={class:"relative"},ng={key:0,class:"w-full flex items-center gap-3"},og={key:1,class:"flex flex-col gap-3"},ag={class:"flex gap-2 flex-wrap"},sg={class:"w-[150px]"},ig={class:"flex flex-row items-center gap-2 py-[3px] text-small leading-[18px]"},rg={key:1,class:"text-nc-content-gray-subtle2"},ug={key:2,class:"w-full p-4 flex items-start gap-4 border-1 border-nc-border-gray-medium rounded-lg"},cg={class:"flex flex-col gap-1"},dg={class:"text-nc-content-gray-muted text-sm"},pg={class:"flex gap-x-2 justify-end"},mg={class:"flex flex-grow px-2 py-1 items-center rounded-md bg-gray-100 focus:bg-gray-100 outline-none",style:{"outline-style":"solid","outline-width":"thin"}},fg=["disabled","placeholder"],vg={class:"flex items-center gap-1 empty:hidden"},_g={class:"flex-1 flex gap-2 items-center max-w-[calc(100%_-_24px)]"},gg={key:0,class:"flex-1 flex"},yg={key:1,class:"!text-xs !text-gray-300"},hg={key:2,class:"nc-new-field-badge text-sm text-nc-content-purple-dark bg-purple-50 px-2 rounded-md font-normal"},bg={class:"flex gap-3 text-gray-800 h-7 mb-1 items-center justify-between"},wg={class:"text-[13px]"},xg={key:0,class:"flex items-center gap-1"},kg={class:"text-sm text-gray-800"},$g={class:"nc-column-options-wrapper flex flex-col gap-4"},Cg={key:2,class:"flex gap-1"},Tg={key:0,class:"text-xs text-gray-400 flex items-center justify-end"},Ig={key:0,class:"overflow-hidden"},Sg={class:"flex gap-3 text-gray-800 h-7 mb-1 items-center justify-between"},Ag={class:"text-[13px]"},Og={class:"flex !text-gray-700 items-center gap-2"},Lg={class:"first-letter:capitalize"},Eg={class:"flex !text-gray-700 items-center gap-2"},Mg={class:"first-letter:capitalize"},Dg={key:1},Ug=Ue({__name:"EditOrAdd",props:{preload:{},columnPosition:{},embedMode:{type:Boolean},columnLabel:{},hideTitle:{type:Boolean},hideType:{type:Boolean},hideAdditionalOptions:{type:Boolean},fromTableExplorer:{type:Boolean},editDescription:{type:Boolean},readonly:{type:Boolean},disableTitleFocus:{type:Boolean}},emits:["submit","cancel","mounted","add","update"],setup(s,{emit:$}){const p=s,D=$,{formState:t,isWebhookCreateModalOpen:i,generateNewColumnMeta:y,addOrUpdate:u,onAlter:h,onUidtOrIdTypeChange:x,validateInfos:I,isEdit:S,isSystem:P,disableSubmitBtn:C,column:f,isAiMode:c,defaultFormState:z}=_t(),{isAiFeaturesEnabled:b,isAiBetaFeaturesEnabled:O,aiIntegrationAvailable:k,aiLoading:Z,aiError:K}=Al(),{aiMode:j,aiModeStep:Q,predicted:X,activeTabPredictedFields:oe,selected:W,activeTabSelectedFields:Te,activeTabPredictHistory:m,calledFunction:ge,prompt:ve,oldPrompt:$e,isPromtAlreadyGenerated:pe,maxSelectionCount:N,activeAiTab:A,isPredictFromPromptLoading:q,isFormulaPredictionMode:ye,activeSelectedField:fe,failedToSaveFields:Oe,onInit:V,toggleAiMode:J,disableAiMode:ke,predictMore:Pe,predictRefresh:Le,predictFromPrompt:Ge,handleRefreshOnError:we,saveFields:He,onToggleTag:pt}=ko(U(!1)),{clone:ze}=Es();ho(()=>{p.fromTableExplorer||S.value||V()});const et=Sn(p,"editDescription"),{getMeta:Xe}=ul(),{t:me}=Et(),{isMetaReadOnly:Je}=jl(),{eventBus:re}=gi(),R=ee(()=>p.columnLabel||me("objects.field")),{$e:Ke}=yl(),{appInfo:te}=Sl(),{isFeatureEnabled:ue}=mo(),Ae=$n(),{openedViewsTab:Me}=Ut(en()),H=It(Lt,U()),le=It(On,U(!1)),xe=It(Ms,U(!1)),Ee=ee(()=>p.readonly),{isMysql:ut,isDatabricks:tt,isXcdbBase:ft}=Ol(),De=It(Ds),je=U(!1),lt=U(!1),gt=U(!1),F=U(!0),ie=ee({get:()=>(Xn(t.value.cdf)&&!gt.value&&(gt.value=!0),Xn(t.value.cdf)||gt.value),set:L=>{gt.value=L}}),Ie=[B.LinkToAnotherRecord,B.Lookup,B.Rollup,B.Links,B.CreatedTime,B.LastModifiedTime,B.CreatedBy,B.LastModifiedBy,B.QrCode,B.Barcode,B.Button],w=U(!1),g=L=>te.value.ee?ue(tn.GEODATA_COLUMN)||!L.name.includes(B.GeoData):!0,G=U(!1),Ce=L=>[B.CreatedBy,B.CreatedTime,B.LastModifiedBy,B.LastModifiedTime].includes(L.name),M=L=>{var kl,Ql,zt;if(L.name===((kl=f==null?void 0:f.value)==null?void 0:kl.uidt))return!0;const T=!Ce(L)||t.value.uidt===L.name||!S.value,nt=g(L)&&(!S.value||!L.virtual||L.name===t.value.uidt),Fe=L.name===B.SpecificDBType&&ft((Ql=H.value)==null?void 0:Ql.source_id),ot=!L.deprecated||G.value,Qe=[dn,pn].includes(L.name)?O.value&&!S.value:!0,Kt=le.value?!Ws.includes(L.name):!0,Jl=L.name===B.LinkToAnotherRecord?ue(tn.LINK_TO_ANOTHER_RECORD)&&!S.value:!0;let Ml=!0;return((zt=f==null?void 0:f.value)==null?void 0:zt.uidt)===B.Formula&&(Ml=[B.SingleLineText].includes(L.name)),T&&nt&&!Fe&&ot&&Kt&&Qe&&Jl&&Ml},Se=U({}),Be=U(null),yt=ee(()=>{var T,nt;const L=[...Us.filter(M),...!S.value&&((nt=(T=H==null?void 0:H.value)==null?void 0:T.columns)!=null&&nt.every(Fe=>!Fe.pk))?[{name:B.ID,icon:U_,virtual:0}]:[]];return Je.value&&L.sort((Fe,ot)=>{const Qe=Cl.includes(Fe.name),Kt=Cl.includes(ot.name);return Qe&&!Kt?-1:!Qe&&Kt?1:0}),Be.value&&(L.sort((Fe,ot)=>Fe.name===Be.value?-1:ot.name===Be.value?1:0),Be.value in Se.value||(Se.value[Be.value]="magic")),S.value?L.map(Fe=>{var Qe,Kt;if(!S.value)return Fe;const ot=!!((Qe=f.value)!=null&&Qe.pv)&&((Kt=f.value)==null?void 0:Kt.uidt)!==Fe.name&&!Rs({uidt:Fe.name});return{...Fe,disabled:ot,tooltip:ot&&Wt[Fe.name]?`${Wt[Fe.name]} field cannot be used as display value field`:""}}):L}),vt=U(),ht=U(!1),Dt=zl(()=>{p.fromTableExplorer||!vt.value||j.value||(vt.value.clientHeight<vt.value.scrollHeight?ht.value=!0:ht.value=!1)},500),Ht=(L,T=!1)=>{let nt;T&&!S.value&&j.value&&V(),L===pn?(t.value.uidt=B.Button,nt={type:mt.Ai}):L===dn?(t.value.uidt=B.LongText,nt={meta:{[_n]:!0}}):t.value.uidt=L,x(nt),nl(()=>{Dt()})},Qt=async()=>{var L;await Xe((L=H.value)==null?void 0:L.id,!0),re.emit(Hs.FIELD_RELOAD),xe.value||De==null||De.trigger({fieldAdd:!0})},at=U(!1),Zt=U(!1),wl=async()=>{if(Ee.value)return;let L,T;at.value=!0,j.value?(L=await He(Qt),!L&&!Gs(Te.value,fe.value,"ai_temp_id")&&xl()):L=await u(async nt=>{p.columnPosition&&(T=nt),Qt()},p.columnPosition),at.value=!1,L&&(setTimeout(()=>{je.value=!1},500),D("submit",T),le.value&&Ke("a:form-view:add-new-field"))};async function cl(){var L;if(!Ee.value)if(S.value&&t.value.uidt!==((L=f.value)==null?void 0:L.uidt)){Zt.value=!0;const{close:T}=qs(Ii,{visible:Zt,"onUpdate:visible":nt=>Zt.value=nt,saving:at,onSubmit:async()=>{T(),await wl()}})}else await wl()}const Bt=U();Tn(()=>{Bt.value&&t.value&&!Ee.value&&setTimeout(()=>{var L,T,nt;(document.activeElement===document.body||document.activeElement===null||["BUTTON","DIV"].includes((L=document.activeElement)==null?void 0:L.tagName))&&!p.disableTitleFocus&&((T=Bt.value)==null||T.focus(),(nt=Bt.value)==null||nt.select())},300),je.value=!1});const wt=U(!1),Nt=U(),el=()=>{t.value.description="",wt.value=!1};$t(()=>{var L,T,nt;if(((T=(L=f.value)==null?void 0:L.description)!=null&&T.length||et.value)&&(wt.value=!0),S.value?t.value.pk?(Rt.info(me("msg.info.editingPKnotSupported")),D("cancel")):Hl(t.value)&&!Ps(t.value)&&(Rt.info(me("msg.info.editingSystemKeyNotSupported")),D("cancel")):y(!0),p.preload){const{colOptions:Fe,...ot}=p.preload;if(t.value={...t.value,...ot},Fe){const Qe=t.value.meta||{};x(),t.value={...t.value,colOptions:{...Fe},meta:Qe}}}else t.value.filters=void 0;t.value&&!t.value.column_name&&!gl(t.value)&&(t.value.column_name=(nt=t.value)==null?void 0:nt.title),nl(()=>{var Fe;lt.value=!0,D("mounted"),Dt(),S.value||(Fe=t.value)!=null&&Fe.temp_id||D("add",t.value),le.value&&!p.fromTableExplorer&&!wt.value?setTimeout(()=>{var ot,Qe;(ot=Bt.value)==null||ot.focus(),(Qe=Bt.value)==null||Qe.select()},100):p.editDescription&&setTimeout(()=>{var ot;(ot=Nt.value)==null||ot.focus()},100)})});const ce=L=>{w.value||i.value||L.key==="Escape"&&D("cancel")},Ot=ee(()=>Me.value==="field"),tl=L=>{L?w.value=L:(F.value=!0,setTimeout(()=>{w.value=L},100))},Ll=()=>{F.value&&(F.value=!1)};it(t,()=>{if(lt.value){if(p.fromTableExplorer)D("update",t.value);else if(fe.value===t.value.ai_temp_id){const L=X.value.find(T=>T.ai_temp_id===fe.value);if(!L)return;L.formState=ze(t.value)}}},{deep:!0});const Vt=ee(()=>{const L=`${me("general.create")} ${Te.value.length>1?`${Te.value.length} ${me("objects.fields")}`:me("objects.field")}`;return{label:j.value?L:`${S.value&&!p.columnLabel?me("general.update"):me("general.save")} ${R.value}`,loadingLabel:j.value?L:`${S.value&&!p.columnLabel?me("general.updating"):me("general.saving")} ${R.value}`}}),dl=U({}),rn=(L,T)=>(delete dl.value[T.value],Vl([T.value,...Wt[T.value]?[Wt[T.value]]:[]],L)?!0:Vl([...eo[T.value]||[]],L,nt=>{nt&&(dl.value[T.value]=`Matched by keyword: ${nt}`)})),Yl=()=>{wt.value?wt.value=!1:(wt.value=!0,setTimeout(()=>{var L;(L=Nt.value)==null||L.focus()},100)),nl(()=>{Dt()})},pl=ee(()=>{var L;return!(Je.value&&!Cl.includes((L=t.value)==null?void 0:L.uidt)&&!kt(t.value))}),de=zl(async()=>{},500),ll=()=>{D("cancel"),Ae.navigateToIntegrations(void 0,void 0,{categories:"ai"})},El=()=>{t.value={...z},J(void 0,!0)},qo=()=>{fe.value=null,t.value={...z},wt.value=!1,ke()};function xl(L=void 0){var T,nt;if(!L&&Te.value.length&&(L=Te.value[Te.value.length-1]),!L){fe.value=null,t.value={title:"",description:""},wt.value=!1;return}fe.value=L.ai_temp_id,t.value.uidt=((T=L.formState)==null?void 0:T.uidt)||L.type,wt.value=!!((nt=L.formState)!=null&&nt.description),x(L.formState)}const Xl=(L,T=!1)=>{at.value||(T?(pt(L),xl(L.selected?L:void 0)):xl(L))},Fn=L=>L===B.Button&&t.value.uidt===B.Button&&t.value.type===mt.Ai,Go=L=>L===B.LongText&&co(t.value),Bn=U();it(A,L=>{L===Fs.PROMPT&&nl(()=>{var T;(T=Bn.value)==null||T.focus()}),xl()});const Nn=ee(()=>t.value.uidt===B.Lookup||t.value.uidt===B.Rollup),Ho=ee(()=>{var L,T;return Nn.value&&!!((T=Jt((L=t.value)==null?void 0:L.meta))!=null&&T.enableConditions)});return(L,T)=>{const nt=Bs,Fe=Ye,ot=dt,Qe=Pt,Kt=bn,Jl=sn,Ml=xo,kl=wn,Ql=Ns,zt=rt,Ko=Wl,Yo=Pi,Xo=Ct,Jo=At,Qo=du,Zo=_u,ea=$u,ta=Do,la=ec,na=nc,oa=Po,aa=Vo,sa=kc,ia=No,ra=Fo,ua=Ic,ca=Uo,da=Bo,pa=Yc,ma=Od,fa=Ro,va=Dd,_a=Bd,ga=Ys,ya=pv,ha=T_,Vn=Ft,ba=R_,wa=P_,xa=F_,ka=B_,$a=ln,Ca=Kl("e");return e(Zt)?_("",!0):(l(),r("div",{key:0,ref_key:"editOrAddRef",ref:vt,class:ae(["overflow-auto nc-scrollbar-md",{"bg-white max-h-[max(80vh,500px)]":!p.fromTableExplorer,"w-[416px]":!p.embedMode,"!w-[600px]":e(gl)(e(t).uidt),"!min-w-[560px]":e(Ho),"min-w-[500px] !w-full":e(gl)(e(t).uidt)||e(Nn),"shadow-lg shadow-gray-300 border-1 border-gray-200 rounded-2xl p-5":!L.embedMode,"nc-ai-mode":e(c),"h-full":p.fromTableExplorer,"!bg-nc-bg-gray-extralight":e(j)&&e(t).uidt&&!p.fromTableExplorer,"!pb-0":!L.embedMode&&!e(j)&&e(t).uidt}]),onKeydown:ce,onClick:T[52]||(T[52]=he(()=>{},["stop"])),onScroll:T[53]||(T[53]=(...$l)=>e(Dt)&&e(Dt)(...$l))},[o($a,{modelValue:e(t),"onUpdate:modelValue":T[51]||(T[51]=$l=>se(t)?t.value=$l:null),"no-style":"",name:"column-create-or-edit",layout:"vertical","data-testid":"add-or-edit-column",class:"flex flex-col gap-4 h-full"},{default:n(()=>{var $l,zn,jn;return[!e(S)&&!p.fromTableExplorer&&(e(j)||!e(t).uidt)?(l(),r(Y,{key:0},[a("div",{class:ae(["flex flex-col gap-4",{"bg-white -mx-5 -mt-5 px-5 pt-5":e(j)}])},[a("div",N_,[a("div",V_,v(L.$t("general.new"))+" "+v(L.$t("objects.field")),1),e(b)?(l(),d(nt,{key:0,"ai-mode":e(j),"ai-loading":e(Z),"off-tooltip":`Auto suggest fields for ${(($l=e(H))==null?void 0:$l.title)||"the current table"}`,onClick:T[0]||(T[0]=ne=>e(j)?qo():El())},null,8,["ai-mode","ai-loading","off-tooltip"])):_("",!0)]),e(j)?(l(),r(Y,{key:0},[e(k)?(l(),d(Ql,{key:1,"active-tab":e(A),"onUpdate:activeTab":T[5]||(T[5]=ne=>se(A)?A.value=ne:null),class:"!-mx-5"},{AutoSuggestedContent:n(()=>{var ne;return[a("div",W_,[e(K)?(l(),r("div",q_,[o(Fe,{icon:"ncInfoSolid",class:"flex-none !text-nc-content-red-dark w-4 h-4"}),o(ot,{class:"truncate flex-1 text-sm text-nc-content-gray-subtle","show-on-truncate-only":""},{title:n(()=>[E(v(e(K)),1)]),default:n(()=>[E(" "+v(e(K)),1)]),_:1}),o(Qe,{size:"small",type:"text",class:"!text-nc-content-brand",onClick:he(e(we),["stop"])},{default:n(()=>[E(v(L.$t("general.refresh")),1)]),_:1},8,["onClick"])])):e(Q)==="init"?(l(),r("div",G_,[a("div",H_,[o(Kt,{size:"regular",class:"!text-nc-content-purple-dark"}),a("div",K_,"Auto suggesting fields for "+v((ne=e(H))==null?void 0:ne.title),1)])])):e(Q)==="pick"?(l(),r("div",Y_,[a("div",X_,[e(oe).length?(l(!0),r(Y,{key:0},be(e(oe),ct=>(l(),d(ot,{key:ct.title,disabled:e(W).length<e(N)||ct.selected},{title:n(()=>[a("div",J_,"You can only select "+v(e(N))+" fields to create at a time.",1)]),default:n(()=>[o(Ml,{class:ae(["nc-ai-suggested-tag",{"nc-disabled":e(at)||!ct.selected&&e(W).length>=e(N),"nc-selected":ct.selected,"nc-bg-selected":e(fe)===ct.ai_temp_id}]),disabled:e(W).length>=e(N),onClick:ml=>Xl(ct)},{default:n(()=>{var ml;return[a("div",Q_,[o(Jl,{checked:ct.selected,theme:"ai",class:"!-mr-0.5",disabled:e(at)||!ct.selected&&e(W).length>=e(N),onClick:he(We=>Xl(ct,!0),["stop"])},null,8,["checked","disabled","onClick"]),e(ye)||ct!=null&&ct.type?(l(),d(_e(("getUIDTIcon"in L?L.getUIDTIcon:e(Nl))(e(ye)?e(B).Formula:ct.type)),{key:0,class:ae(["flex-none w-3.5 h-3.5",{"opacity-60":e(at)||!ct.selected&&e(W).length>=e(N)}])},null,8,["class"])):_("",!0),a("div",null,v(((ml=ct.formState)==null?void 0:ml.title)||ct.title),1)])]}),_:2},1032,["class","disabled","onClick"])]),_:2},1032,["disabled"]))),128)):(l(),r("div",Z_,v(L.$t("labels.noData")),1))]),a("div",eg,[(e(m).length<e(Te).length?e(m).length+e(Te).length<10:e(m).length<10)?(l(),d(ot,{key:0,title:"Suggest more",placement:"top"},{default:n(()=>[o(Qe,{size:"xs",class:"!px-1",type:"text",theme:"ai",loading:e(Z)&&e(ge)==="predictMore","icon-only":"",disabled:e(at),onClick:e(Pe)},{icon:n(()=>[o(Fe,{icon:"ncPlusAi",class:"!text-current"})]),_:1},8,["loading","disabled","onClick"])]),_:1})):_("",!0),o(ot,{title:"Clear all and Re-suggest",placement:"top"},{default:n(()=>[o(Qe,{size:"xs",class:"!px-1",type:"text",theme:"ai",disabled:e(at),loading:e(Z)&&e(ge)==="predictRefresh",onClick:T[1]||(T[1]=ct=>e(Le)(xl))},{loadingIcon:n(()=>T[54]||(T[54]=[a("template",null,null,-1)])),default:n(()=>[o(Fe,{icon:"refresh",class:ae(["!text-current",{"animate-infinite animate-spin":e(Z)&&e(ge)==="predictRefresh"}])},null,8,["class"])]),_:1},8,["disabled","loading"])]),_:1})])])):_("",!0)])]}),PromptContent:n(()=>[a("div",tg,[a("div",lg,[o(kl,{ref_key:"aiPromptInputRef",ref:Bn,value:e(ve),"onUpdate:value":T[2]||(T[2]=ne=>se(ve)?ve.value=ne:null),disabled:e(at),placeholder:"Enter your prompt to get field suggestions..",class:"nc-ai-input nc-input-shadow !px-3 !pt-2 !pb-3 !text-sm !min-h-[68px] !rounded-lg",onKeydown:T[3]||(T[3]=xt(he(()=>{},["stop"]),["enter"]))},null,8,["value","disabled"]),o(Qe,{size:"xs",type:"primary",theme:"ai",class:"!px-1 !absolute bottom-2 right-2",disabled:!e(ve).trim()||e(q)||!!e(ve).trim()&&e(ve).trim()===e($e).trim()||e(at),loading:e(q),"icon-only":"",onClick:T[4]||(T[4]=ne=>e(Ge)(xl))},{loadingIcon:n(()=>[o(Kt,{class:"!text-purple-700",size:"medium"})]),icon:n(()=>[o(Fe,{icon:"send",class:"flex-none h-4 w-4"})]),_:1},8,["disabled","loading"])]),e(K)?(l(),r("div",ng,[o(Fe,{icon:"ncInfoSolid",class:"flex-none !text-nc-content-red-dark w-4 h-4"}),o(ot,{class:"truncate flex-1 text-sm text-nc-content-gray-subtle","show-on-truncate-only":""},{title:n(()=>[E(v(e(K)),1)]),default:n(()=>[E(" "+v(e(K)),1)]),_:1}),o(Qe,{size:"small",type:"text",class:"!text-nc-content-brand",onClick:he(e(we),["stop"])},{default:n(()=>[E(v(L.$t("general.refresh")),1)]),_:1},8,["onClick"])])):e(pe)?(l(),r("div",og,[T[55]||(T[55]=a("div",{class:"text-nc-content-purple-dark font-semibold text-xs"},"Generated Field(s)",-1)),a("div",ag,[e(oe).length?(l(!0),r(Y,{key:0},be(e(oe),ne=>(l(),d(ot,{key:ne.title,disabled:e(W).length<e(N)||ne.selected},{title:n(()=>[a("div",sg,"You can only select "+v(e(N))+" fields to create at a time.",1)]),default:n(()=>[o(Ml,{class:ae(["nc-ai-suggested-tag",{"nc-disabled":e(at)||!ne.selected&&e(W).length>=e(N),"nc-selected":ne.selected,"nc-bg-selected":e(fe)===ne.ai_temp_id}]),disabled:e(W).length>=e(N),onClick:ct=>Xl(ne)},{default:n(()=>{var ct;return[a("div",ig,[o(Jl,{checked:ne.selected,theme:"ai",class:"!-mr-0.5",disabled:e(at)||!ne.selected&&e(W).length>=e(N),onClick:he(ml=>Xl(ne,!0),["stop"])},null,8,["checked","disabled","onClick"]),e(ye)||ne!=null&&ne.type?(l(),d(_e(("getUIDTIcon"in L?L.getUIDTIcon:e(Nl))(e(ye)?e(B).Formula:ne.type)),{key:0,class:ae(["flex-none w-3.5 h-3.5",{"opacity-60":e(at)||!ne.selected&&e(W).length>=e(N)}])},null,8,["class"])):_("",!0),a("div",null,v(((ct=ne.formState)==null?void 0:ct.title)||ne.title),1)])]}),_:2},1032,["class","disabled","onClick"])]),_:2},1032,["disabled"]))),128)):(l(),r("div",rg,v(L.$t("labels.noData")),1))])])):_("",!0)])]),_:1},8,["active-tab"])):(l(),r("div",z_,[o(Fe,{icon:"alertTriangleSolid",class:"!text-nc-content-orange-medium w-4 h-4"}),a("div",j_,v(L.$t("title.noAiIntegrationAvailable"))+" "+v(L.$t("objects.field")),1)])),e(Oe)?(l(),r("div",ug,[o(Fe,{icon:"ncInfoSolid",class:"flex-none text-nc-content-red-dark"}),a("div",cg,[T[56]||(T[56]=a("div",{class:"text-nc-content-gray text-base font-bold"},"Failed to add fields",-1)),a("div",dg," NocoDB was unable to add "+v(e(X).length)+" fields to the table. Please retry adding the fields. ",1)]),o(Qe,{size:"xsmall",type:"text",class:"!px-1",onClick:T[6]||(T[6]=he(ne=>Oe.value=!1,["stop"]))},{default:n(()=>[o(Fe,{icon:"close",class:"text-gray-600"})]),_:1})])):_("",!0)],64)):_("",!0)],2),e(j)?(l(),r("div",{key:0,class:ae(["sticky -top-5 z-100 bg-white -mx-5 -mt-5 pt-5 px-5",{"pb-5 border-b-1 border-b-nc-border-gray-medium":e(t).uidt}])},[o(zt,null,{default:n(()=>[a("div",pg,[o(Qe,{size:"small","html-type":"button",type:"secondary",disabled:e(at),onClick:T[7]||(T[7]=ne=>D("cancel"))},{default:n(()=>[E(v(L.$t("general.cancel")),1)]),_:1},8,["disabled"]),e(k)?St((l(),d(Qe,{key:0,"html-type":"submit",type:"primary",theme:"ai",loading:e(at),disabled:e(C)||e(at),size:"small",label:e(Vt).label,"loading-label":e(Vt).loadingLabel,"data-testid":"nc-field-modal-submit-btn",onClick:he(cl,["prevent"])},{icon:n(()=>[o(Fe,{icon:"ncAutoAwesome"})]),loading:n(()=>[E(v(e(Vt).loadingLabel),1)]),default:n(()=>[E(" "+v(e(Vt).label)+" ",1)]),_:1},8,["loading","disabled","label","loading-label"])),[[Ca,["a:column:ai:add"]]]):(l(),d(Qe,{key:1,type:"primary",size:"small",onClick:ll},{default:n(()=>T[57]||(T[57]=[E(" Add AI integration ")])),_:1,__:[57]}))])]),_:1})],2)):_("",!0)],64)):_("",!0),e(Ot)?(l(),d(zt,st({key:1},e(I).title,{class:"flex"}),{default:n(()=>[a("div",mg,[St(a("input",{ref_key:"antInput",ref:Bt,"onUpdate:modelValue":T[8]||(T[8]=ne=>e(t).title=ne),disabled:e(Ee)||!e(pl)||e(P),placeholder:`${L.$t("objects.field")} ${L.$t("general.name").toLowerCase()} ${e(S)?"":L.$t("labels.optional")}`,class:ae(["flex flex-grow nc-fields-input nc-input-shadow text-sm font-semibold outline-none bg-inherit min-h-6",{"nc-ai-input":e(c)}]),contenteditable:!0,onChange:T[9]||(T[9]=(...ne)=>e(de)&&e(de)(...ne)),onInput:T[10]||(T[10]=ne=>e(t).userHasChangedTitle=!0)},null,42,fg),[[bo,e(t).title]])])]),_:1},16)):_("",!0),!p.hideTitle&&!e(Ot)&&(!e(j)||e(t).uidt)?(l(),d(zt,st({key:2},e(I).title,{required:!1,class:"!mb-0"}),{default:n(()=>[o(Ko,{ref_key:"antInput",ref:Bt,value:e(t).title,"onUpdate:value":T[11]||(T[11]=ne=>e(t).title=ne),class:ae(["nc-column-name-input nc-input-shadow !rounded-lg",{"nc-ai-input":e(c)}]),placeholder:`${L.$t("objects.field")} ${L.$t("general.name").toLowerCase()} ${e(S)?"":L.$t("labels.optional")}`,disabled:e(xe)||e(Ee)||!e(pl),onChange:e(de),onInput:T[12]||(T[12]=ne=>e(h)(8))},null,8,["value","class","placeholder","disabled","onChange"])]),_:1},16)):_("",!0),a("div",vg,[!p.hideType&&!e(t).uidt?(l(),r(Y,{key:0},[e(j)&&!p.fromTableExplorer?_("",!0):(l(),d(Yo,{key:0,options:e(yt),"extra-icons":e(Se),onSelected:T[13]||(T[13]=ne=>Ht(ne,!0))},null,8,["options","extra-icons"]))],64)):p.hideType?_("",!0):(l(),d(zt,{key:1,class:"flex-1",onKeydown:[xt(he(Ll,["stop"]),["up"]),xt(he(Ll,["stop"]),["down"])]},{default:n(()=>{var ne;return[o(ot,{disabled:!(!e(S)&&e(t).uidt&&((ne=e(t))!=null&&ne.ai_temp_id))},{title:n(()=>T[58]||(T[58]=[E(" You cannot edit field types of AI-generated fields. Edits can be made after the field is created.")])),default:n(()=>{var ct,ml;return[o(Jo,{open:e(w),"onUpdate:open":T[14]||(T[14]=We=>se(w)?w.value=We:null),value:e(t).uidt,"onUpdate:value":T[15]||(T[15]=We=>e(t).uidt=We),"show-search":"",class:ae(["nc-column-type-input nc-select-shadow !rounded-lg",{"nc-ai-input":e(c),"!pointer-events-none !cursor-not-allowed":!e(S)&&e(t).uidt&&!!((ct=e(t))!=null&&ct.ai_temp_id)}]),disabled:e(S)&&e(Je)&&!e(Cl).includes(e(t).uidt)||e(xe)||e(Ee)||e(S)&&!!Ie.includes((ml=e(f))==null?void 0:ml.uidt)||e(S)&&!e(pl)||e(P),"dropdown-class-name":"nc-dropdown-column-type border-1 !rounded-lg border-gray-200","filter-option":rn,onDropdownVisibleChange:tl,onChange:T[16]||(T[16]=We=>Ht(We)),onDblclick:T[17]||(T[17]=We=>G.value=!e(G))},{suffixIcon:n(()=>[o(Fe,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(Y,null,be(e(yt),We=>(l(),d(Xo,st({key:We.name,value:We.name,disabled:e(Je)&&!e(Cl).includes(We.name)||We.disabled},{ref_for:!0},e(I).uidt,{class:{"ant-select-item-option-active-selected":e(F)&&e(t).uidt===We.name,"!text-nc-content-purple-dark":["AIPrompt"in L?L.AIPrompt:e(dn),"AIButton"in L?L.AIButton:e(pn)].includes(We.name)},onMouseover:Ll}),{default:n(()=>[o(ot,{class:"w-full flex gap-2 items-center justify-between",placement:"right",disabled:!(We!=null&&We.tooltip),attrs:{"data-testid":We.name}},{title:n(()=>[E(v(We==null?void 0:We.tooltip),1)]),default:n(()=>[a("div",_g,[(l(),d(_e(Fn(We.name)&&!e(w)?("iconMap"in L?L.iconMap:e(Re)).cellAiButton:Go(We.name)&&!e(w)?("iconMap"in L?L.iconMap:e(Re)).cellAi:We.icon),{class:"nc-field-type-icon w-4 h-4 !opacity-90 text-current"})),a("div",{class:ae({"flex-1":!e(dl)[We.name]})},v(e(Wt)[We.name]),3),e(dl)[We.name]?(l(),r("div",gg,[o(ot,{title:e(dl)[We.name],class:"flex cursor-help"},{default:n(()=>[o(Fe,{icon:"info",class:"flex-none h-3.5 w-3.5 text-nc-content-gray-muted"})]),_:2},1032,["title"])])):_("",!0),We.deprecated?(l(),r("span",yg,"("+v(L.$t("general.deprecated"))+")",1)):_("",!0),We.isNew||Fn(We.name)&&!e(w)?(l(),r("span",hg,v(L.$t("general.new")),1)):_("",!0)]),e(t).uidt===We.name?(l(),d(_e(("iconMap"in L?L.iconMap:e(Re)).check),{key:0,id:"nc-selected-item-icon",class:ae(["w-4 h-4",{"text-primary":!e(c),"text-nc-content-purple-medium":e(c)}])},null,8,["class"])):_("",!0)]),_:2},1032,["disabled","attrs"])]),_:2},1040,["value","disabled","class"]))),128))]),_:1},8,["open","value","class","disabled"])]}),_:1},8,["disabled"])]}),_:1},8,["onKeydown"]))]),e(wt)&&e(j)?(l(),d(zt,{key:3},{default:n(()=>[a("div",bg,[a("span",wg,v(L.$t("labels.description")),1),o(Qe,{type:"text",class:"!h-6 !w-5",size:"xsmall",onClick:el},{default:n(()=>[o(Fe,{icon:"delete",class:"text-gray-700 w-3.5 h-3.5"})]),_:1})]),o(kl,{ref_key:"descInputEl",ref:Nt,value:e(t).description,"onUpdate:value":T[18]||(T[18]=ne=>e(t).description=ne),class:ae([{"!min-h-[200px]":p.fromTableExplorer,"h-[150px] !min-h-[100px]":!p.fromTableExplorer,"nc-ai-input":e(c)},"nc-input-sm nc-input-text-area nc-input-shadow !text-gray-800 px-3 !max-h-[300px]"]),"hide-details":"","data-testid":"create-field-description-input",placeholder:L.$t("msg.info.enterFieldDescription")},null,8,["value","class","placeholder"])]),_:1})):_("",!0),!e(Ee)&&e(t).uidt?(l(),r(Y,{key:4},[e(t).uidt===e(B).Formula?(l(),d(Qo,{key:0,value:e(t),"onUpdate:value":T[19]||(T[19]=ne=>se(t)?t.value=ne:null)},null,8,["value"])):_("",!0),e(t).uidt===e(B).QrCode?(l(),d(Zo,{key:1,modelValue:e(t),"onUpdate:modelValue":T[20]||(T[20]=ne=>se(t)?t.value=ne:null)},null,8,["modelValue"])):_("",!0),e(t).uidt===e(B).Barcode?(l(),d(ea,{key:2,modelValue:e(t),"onUpdate:modelValue":T[21]||(T[21]=ne=>se(t)?t.value=ne:null)},null,8,["modelValue"])):_("",!0),e(t).uidt===e(B).Currency?(l(),d(ta,{key:3,value:e(t),"onUpdate:value":T[22]||(T[22]=ne=>se(t)?t.value=ne:null)},null,8,["value"])):_("",!0),e(t).uidt===e(B).LongText?(l(),d(la,{key:4,modelValue:e(t),"onUpdate:modelValue":T[23]||(T[23]=ne=>se(t)?t.value=ne:null),onNavigateToIntegrations:ll},null,8,["modelValue"])):_("",!0),e(t).uidt===e(B).Duration?(l(),d(na,{key:5,value:e(t),"onUpdate:value":T[24]||(T[24]=ne=>se(t)?t.value=ne:null)},null,8,["value"])):_("",!0),e(t).uidt===e(B).Rating?(l(),d(oa,{key:6,value:e(t),"onUpdate:value":T[25]||(T[25]=ne=>se(t)?t.value=ne:null)},null,8,["value"])):_("",!0),e(t).uidt===e(B).Checkbox?(l(),d(aa,{key:7,value:e(t),"onUpdate:value":T[26]||(T[26]=ne=>se(t)?t.value=ne:null)},null,8,["value"])):_("",!0),e(t).uidt===e(B).Lookup?(l(),d(sa,{key:8,value:e(t),"onUpdate:value":T[27]||(T[27]=ne=>se(t)?t.value=ne:null)},null,8,["value"])):_("",!0),e(t).uidt===e(B).Date?(l(),d(ia,{key:9,value:e(t),"onUpdate:value":T[28]||(T[28]=ne=>se(t)?t.value=ne:null)},null,8,["value"])):_("",!0),e(t).uidt===e(B).Time?(l(),d(ra,{key:10,value:e(t),"onUpdate:value":T[29]||(T[29]=ne=>se(t)?t.value=ne:null)},null,8,["value"])):_("",!0),e(t).uidt===e(B).Number?(l(),d(ua,{key:11,value:e(t),"onUpdate:value":T[30]||(T[30]=ne=>se(t)?t.value=ne:null)},null,8,["value"])):_("",!0),e(t).uidt===e(B).Decimal?(l(),d(ca,{key:12,value:e(t),"onUpdate:value":T[31]||(T[31]=ne=>se(t)?t.value=ne:null)},null,8,["value"])):_("",!0),[e(B).DateTime,e(B).CreatedTime,e(B).LastModifiedTime].includes(e(t).uidt)?(l(),d(da,{key:13,value:e(t),"onUpdate:value":T[32]||(T[32]=ne=>se(t)?t.value=ne:null)},null,8,["value"])):_("",!0),e(t).uidt===e(B).Rollup?(l(),d(pa,{key:14,value:e(t),"onUpdate:value":T[33]||(T[33]=ne=>se(t)?t.value=ne:null)},null,8,["value"])):_("",!0),e(t).uidt===e(B).LinkToAnotherRecord||e(t).uidt===e(B).Links?(l(),d(ma,{key:`${e(t).uidt}-${e(t).id||"new"}`,value:e(t),"onUpdate:value":T[34]||(T[34]=ne=>se(t)?t.value=ne:null),"is-edit":e(S)},null,8,["value","is-edit"])):_("",!0),e(t).uidt===e(B).Percent?(l(),d(fa,{key:16,value:e(t),"onUpdate:value":T[35]||(T[35]=ne=>se(t)?t.value=ne:null)},null,8,["value"])):_("",!0),e(t).uidt===e(B).SpecificDBType?(l(),d(va,{key:17})):_("",!0),e(t).uidt===e(B).User?(l(),d(_a,{key:18,value:e(t),"onUpdate:value":T[36]||(T[36]=ne=>se(t)?t.value=ne:null),"is-edit":e(S)},null,8,["value","is-edit"])):_("",!0),e(t).uidt===e(B).SingleSelect||e(t).uidt===e(B).MultiSelect?(l(),d(ga,{key:19,value:e(t),"onUpdate:value":T[37]||(T[37]=ne=>se(t)?t.value=ne:null),"from-table-explorer":p.fromTableExplorer||!1},null,8,["value","from-table-explorer"])):_("",!0),e(t).uidt===e(B).Button?(l(),d(ya,{key:20,value:e(t),"onUpdate:value":T[38]||(T[38]=ne=>se(t)?t.value=ne:null),"from-table-explorer":p.fromTableExplorer||!1,onNavigateToIntegrations:ll},null,8,["value","from-table-explorer"])):_("",!0),e(t).uidt===e(B).Button&&((zn=e(t))==null?void 0:zn.type)===e(mt).Ai?(l(),d(ha,{key:21,value:e(t),"onUpdate:value":T[39]||(T[39]=ne=>se(t)?t.value=ne:null),"submit-btn-label":e(Vt),saving:e(at),onNavigateToIntegrations:ll,onOnSubmit:cl},null,8,["value","submit-btn-label","saving"])):_("",!0)],64)):_("",!0),e(t).uidt?(l(),r(Y,{key:5},[e(t).meta&&("columnToValidate"in L?L.columnToValidate:e(Vs)).includes(e(t).uidt)?(l(),r("div",xg,[o(Vn,{checked:e(t).meta.validate,"onUpdate:checked":T[40]||(T[40]=ne=>e(t).meta.validate=ne),size:"small",class:"nc-switch"},{default:n(()=>[a("div",kg,v(`${L.$t("msg.acceptOnlyValid",{type:e(t).uidt===e(B).URL?`${e(Wt)[e(t).uidt]}s`:`${e(Wt)[e(t).uidt]}s`.toLowerCase()})}`),1)]),_:1},8,["checked"])])):_("",!0),!e(Ee)&&e(pl)?(l(),r(Y,{key:1},[a("div",$g,[("isTextArea"in L?L.isTextArea:e(Jn))(e(t))&&((jn=e(t).meta)!=null&&jn.richMode)?(l(),d(ba,{key:0,value:e(t),"onUpdate:value":T[41]||(T[41]=ne=>se(t)?t.value=ne:null),"is-visible-default-value-input":e(ie),"onUpdate:isVisibleDefaultValueInput":T[42]||(T[42]=ne=>se(ie)?ie.value=ne:null)},null,8,["value","is-visible-default-value-input"])):!e(kt)(e(t))&&!("isAttachment"in L?L.isAttachment:e(Bl))(e(t))&&!(e(ut)(e(H).source_id)&&(("isJSON"in L?L.isJSON:e(zs))(e(t))||("isTextArea"in L?L.isTextArea:e(Jn))(e(t))))&&!(e(tt)(e(H).source_id)&&e(t).unique)&&!("isAI"in L?L.isAI:e(js))(e(t))?(l(),d(wa,{key:1,value:e(t),"onUpdate:value":T[43]||(T[43]=ne=>se(t)?t.value=ne:null),"is-visible-default-value-input":e(ie),"onUpdate:isVisibleDefaultValueInput":T[44]||(T[44]=ne=>se(ie)?ie.value=ne:null)},null,8,["value","is-visible-default-value-input"])):_("",!0),e(tt)(e(H).source_id)&&!e(t).cdf&&![e(B).MultiSelect,e(B).Checkbox,e(B).Rating,e(B).Attachment,e(B).Lookup,e(B).Rollup,e(B).Formula,e(B).Barcode,e(B).QrCode,e(B).CreatedTime,e(B).LastModifiedTime,e(B).CreatedBy,e(B).LastModifiedBy].includes(e(t).uidt)?(l(),r("div",Cg,[o(Vn,{checked:e(t).unique,"onUpdate:checked":T[45]||(T[45]=ne=>e(t).unique=ne),size:"small",class:"nc-switch"},{default:n(()=>T[59]||(T[59]=[a("div",{class:"text-sm text-gray-800"},"Set as Unique",-1)])),_:1,__:[59]},8,["checked"])])):_("",!0)]),!p.hideAdditionalOptions&&!e(kt)(e(t).uidt)&&!(!e(te).ee&&("isAttachment"in L?L.isAttachment:e(Bl))(e(t)))&&(!e(te).ee||e(te).ee&&!e(ft)(e(H).source_id)&&e(t).uidt===e(B).SpecificDBType)?(l(),r("div",Tg,[a("div",{class:"nc-more-options flex items-center gap-1 cursor-pointer select-none",onClick:T[46]||(T[46]=ne=>je.value=!e(je))},[E(v(e(je)?L.$t("general.hideAll"):L.$t("general.showMore"))+" ",1),(l(),d(_e(e(je)?e(E_):e(A_))))])])):_("",!0),o(wo,{name:"layout",mode:"out-in"},{default:n(()=>[e(je)?(l(),r("div",Ig,[e(te).ee&&("isAttachment"in L?L.isAttachment:e(Bl))(e(t))?(l(),d(xa,{key:0,value:e(t),"onUpdate:value":T[47]||(T[47]=ne=>se(t)?t.value=ne:null)},null,8,["value"])):_("",!0),e(t).uidt!==e(B).Attachment?(l(),d(ka,{key:1,value:e(t),"onUpdate:value":T[48]||(T[48]=ne=>se(t)?t.value=ne:null),"advanced-db-options":e(je)||e(t).uidt===e(B).SpecificDBType},null,8,["value","advanced-db-options"])):_("",!0)])):_("",!0)]),_:1})],64)):_("",!0),e(wt)&&!e(j)?(l(),d(zt,{key:2,class:ae({"!pb-4":L.embedMode})},{default:n(()=>[a("div",Sg,[a("span",Ag,v(L.$t("labels.description")),1),o(Qe,{type:"text",class:"!h-6 !w-5",size:"xsmall",onClick:el},{default:n(()=>[o(Fe,{icon:"delete",class:"text-gray-700 w-3.5 h-3.5"})]),_:1})]),o(kl,{ref_key:"descInputEl",ref:Nt,value:e(t).description,"onUpdate:value":T[49]||(T[49]=ne=>e(t).description=ne),class:ae([{"!min-h-[200px]":p.fromTableExplorer,"h-[150px] !min-h-[100px]":!p.fromTableExplorer,"nc-ai-input":e(c)},"nc-input-sm nc-input-text-area nc-input-shadow !text-gray-800 px-3 !max-h-[300px]"]),"hide-details":"","data-testid":"create-field-description-input",placeholder:L.$t("msg.info.enterFieldDescription")},null,8,["value","class","placeholder"])]),_:1},8,["class"])):_("",!0),p.fromTableExplorer||e(j)?(l(),r(Y,{key:3},[e(wt)?_("",!0):(l(),d(zt,{key:0,class:ae({"!pb-4":L.embedMode})},{default:n(()=>[e(P)?_("",!0):(l(),d(Qe,{key:0,size:"small",type:"text",onClick:he(Yl,["stop"])},{default:n(()=>[a("div",Og,[o(Fe,{icon:"plus",class:"h-4 w-4"}),a("span",Lg,v(L.$t("labels.addDescription").toLowerCase()),1)])]),_:1}))]),_:1},8,["class"]))],64)):(l(),r("div",{key:4,class:ae(["flex items-center justify-between gap-2 empty:hidden sticky bottom-0 z-10 bg-white px-5 pb-5 -mx-5",{"border-t-1 border-nc-border-gray-medium pt-3":e(ht)}])},[!e(wt)&&!e(P)?(l(),d(Qe,{key:0,size:"small",type:"text",onClick:he(Yl,["stop"])},{default:n(()=>[a("div",Eg,[o(Fe,{icon:"plus",class:"h-4 w-4"}),a("span",Mg,v(L.$t("labels.addDescription").toLowerCase()),1)])]),_:1})):e(j)?_("",!0):(l(),r("div",Dg)),e(j)?_("",!0):(l(),d(zt,{key:2},{default:n(()=>[a("div",{class:ae(["flex gap-x-2 justify-end",{"justify-end":!p.embedMode}])},[o(Qe,{size:"small","html-type":"button",type:"secondary",disabled:e(at),onClick:T[50]||(T[50]=ne=>D("cancel"))},{default:n(()=>[E(v(L.$t("general.cancel")),1)]),_:1},8,["disabled"]),o(Qe,{"html-type":"submit",type:"primary",theme:e(c)?"ai":"default",loading:e(at),disabled:!e(t).uidt||e(C)||e(at),size:"small",label:e(Vt).label,"loading-label":e(Vt).loadingLabel,"data-testid":"nc-field-modal-submit-btn",onClick:he(cl,["prevent"])},{loading:n(()=>[E(v(e(Vt).loadingLabel),1)]),default:n(()=>[E(v(e(Vt).label)+" ",1)]),_:1},8,["theme","loading","disabled","label","loading-label"])],2)]),_:1}))],2))],64)):_("",!0)]}),_:1},8,["modelValue"])],34))}}}),Rg=Object.assign(Ze(Ug,[["__scopeId","data-v-8bc7a501"]]),{__name:"SmartsheetColumnEditOrAdd"}),Pg=Ue({__name:"EditOrAddProvider",props:{column:{},columnPosition:{},preload:{},tableExplorerColumns:{},editDescription:{type:Boolean},fromTableExplorer:{type:Boolean},isColumnValid:{type:Function},disableTitleFocus:{type:Boolean}},emits:["submit","cancel","mounted"],setup(s,{expose:$,emit:p}){const D=s,t=p,i=It(Lt,U()),{column:y,preload:u,tableExplorerColumns:h,fromTableExplorer:x,isColumnValid:I,editDescription:S}=Tt(D),{isSaving:P}=Xs(i,y,h,x,I),{isWebhookCreateModalOpen:C,isAiButtonConfigModalOpen:f}=_t();return $({shouldKeepModalOpen:()=>P.value||C.value||f.value}),(z,b)=>{const O=Rg;return l(),d(O,{preload:e(u),"column-position":D.columnPosition,"edit-description":e(S),"from-table-explorer":D.fromTableExplorer||!1,"disable-title-focus":z.disableTitleFocus,onSubmit:b[0]||(b[0]=k=>t("submit",k)),onCancel:b[1]||(b[1]=k=>t("cancel")),onMounted:b[2]||(b[2]=k=>t("mounted"))},null,8,["preload","column-position","edit-description","from-table-explorer","disable-title-focus"])}}}),Fg=Object.assign(Pg,{__name:"SmartsheetColumnEditOrAddProvider"}),py=Object.freeze(Object.defineProperty({__proto__:null,default:Fg},Symbol.toStringTag,{value:"Module"}));export{py as E,up as U,Fg as _,Bm as a,jf as b,wp as c,Pn as u};
