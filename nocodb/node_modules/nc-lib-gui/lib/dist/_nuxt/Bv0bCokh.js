const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DOFQqpEI.js","./DOFFjK0_.js","./entry.DDfSYhWa.css","./BUvWXnXR.js"])))=>i.map(i=>d[i]);
import{b3 as D,c as l,o as i,a as o,e as H,f as X,b5 as Y,J,a6 as K,a9 as Q,U as Z,al as ee,r as I,Y as te,hP as se,g as oe,b as n,w as g,K as m,aS as ne,L as t,t as a,gc as P,X as ae,an as $,by as re,a0 as le,ar as ie,d1 as ce,d,eX as ue,P as me,bH as de,y as R,aW as pe}from"./DOFFjK0_.js";import{_ as _e}from"./C6nWwNvX.js";import{_ as ge,a as fe}from"./C_LhG8nx.js";import{_ as he}from"./BPCu6jTH.js";import{v as ye}from"./BtEbFxXZ.js";const be={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ve(h,y){return i(),l("svg",be,y[0]||(y[0]=[o("path",{fill:"currentColor",d:"m5.65 10.025l1.95.825q.35-.7.725-1.35t.825-1.3l-1.4-.275zM9.2 12.1l2.85 2.825q1.05-.4 2.25-1.225t2.25-1.875q1.75-1.75 2.738-3.887T20.15 4q-1.8-.125-3.95.863T12.3 7.6q-1.05 1.05-1.875 2.25T9.2 12.1m4.45-1.625q-.575-.575-.575-1.412t.575-1.413t1.425-.575t1.425.575t.575 1.413t-.575 1.412t-1.425.575t-1.425-.575m.475 8.025l2.1-2.1l-.275-1.4q-.65.45-1.3.812t-1.35.713zM21.95 2.175q.475 3.025-.587 5.888T17.7 13.525L18.2 16q.1.5-.05.975t-.5.825l-4.2 4.2l-2.1-4.925L7.075 12.8L2.15 10.7l4.175-4.2q.35-.35.838-.5t.987-.05l2.475.5q2.6-2.6 5.45-3.675t5.875-.6m-18.025 13.8q.875-.875 2.138-.887t2.137.862t.863 2.138t-.888 2.137q-.625.625-2.087 1.075t-4.038.8q.35-2.575.8-4.038t1.075-2.087m1.425 1.4q-.25.25-.5.913t-.35 1.337q.675-.1 1.338-.337t.912-.488q.3-.3.325-.725T6.8 17.35t-.725-.288t-.725.313"},null,-1)]))}const we=D({name:"material-symbols-rocket-launch-outline",render:ve}),ke=ne(()=>pe(()=>import("./DOFQqpEI.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(h=>h.default||h)),qe={class:"md:bg-primary bg-opacity-5 signup h-full min-h-[600px] flex flex-col justify-center items-center"},xe={class:"bg-white mt-[60px] relative flex flex-col justify-center gap-2 w-full max-w-[500px] mx-auto p-8 md:rounded-lg md:border-1 md:border-gray-200 md:shadow-xl"},$e={class:"prose-2xl font-bold self-center my-4"},Ue={key:0,class:"prose !text-primary font-semibold self-center"},Ee={key:0,class:"self-center mb-4 bg-red-500 text-white rounded-lg w-3/4 mx-auto p-1","data-testid":"nc-signup-error"},Ie={class:"flex items-center gap-2 justify-center"},Pe={class:"break-words"},Re={class:"self-center flex flex-col flex-wrap gap-4 items-center mt-4"},Te={key:0,class:"scaling-btn bg-opacity-100",type:"submit"},Ae={class:"flex items-center gap-2"},Le=["href"],Se={class:"flex items-center gap-2"},Ne={key:2,class:"self-center flex flex-col flex-wrap gap-4 items-center mt-4 justify-center"},ze=["href"],Ce={type:"button",class:"scaling-btn bg-opacity-100"},Ve={class:"flex items-center gap-2"},We={key:3,class:"flex items-center gap-2"},Fe={class:"prose-xs text-gray-500"},Ge={class:"text-end prose-sm"},Me={class:"prose-sm mt-4 text-gray-500"},je={class:"prose-sm !text-gray-500 underline",target:"_blank",href:"https://nocodb.com/policy-nocodb",rel:"noopener"},Ye=H({__name:"[[token]]",setup(h){const{$e:y}=X(),k=Y(),{appInfo:c,signIn:T}=J(),{api:A,isLoading:L,error:b}=K({useGlobalInstance:!0}),{t:q}=Q(),{navigateToTable:S}=Z(),{clearWorkspaces:N}=ee(),U=I(),v=I(!1),p=te({email:"",password:""}),E={email:[{required:!0,message:q("msg.error.signUpRules.emailRequired")},{validator:(e,s)=>new Promise((u,r)=>{if(!(s!=null&&s.length)||se(s.trim()))return u();r(new Error(q("msg.error.signUpRules.emailInvalid")))}),message:q("msg.error.signUpRules.emailInvalid")}],password:[{validator:(e,s)=>new Promise((u,r)=>{const{error:_,valid:w}=ye(s);if(w)return u();r(new Error(_))})}]};async function z(){if(!U.value.validate())return;x();const e={...p,token:k.params.token};e.ignore_subscribe=!v.value,A.auth.signup(e).then(async s=>{var u;T(s.token),y("a:auth:sign-up");try{const r=s.createdProject,_=(u=r==null?void 0:r.tables)==null?void 0:u[0];if(r&&_)return await S({baseId:r.id,tableId:_.id,workspaceId:"nc"})}catch(r){console.error(r)}await R({path:"/",query:k.query})})}function x(){b.value&&(b.value=null)}function C(){R({path:"/signin",query:k.query})}return oe(async()=>{await N()}),(e,s)=>{const u=ke,r=he,_=ie,w=le,V=ce,W=we,F=ge,G=fe,M=ue,j=_e,B=ae,O=de;return i(),l("div",null,[n(O,null,{default:g(()=>[o("div",qe,[o("div",xe,[n(u,{class:"color-transition hover:ring hover:ring-accent hover:ring-opacity-100",animate:t(L)},null,8,["animate"]),o("h1",$e,a(e.$t("general.signUp"))+" "+a((e._.provides[P]||e.$route).query.redirect_to==="/referral"?"& REFER":"")+" "+a((e._.provides[P]||e.$route).query.redirect_to==="/pricing"?"& BUY":""),1),t(c).firstUser?(i(),l("h2",Ue,a(e.$t("msg.info.signUp.superAdmin")),1)):m("",!0),n(B,{ref_key:"formValidator",ref:U,model:t(p),layout:"vertical","no-style":"",onFinish:z},{default:g(()=>[t(c).disableEmailAuth?m("",!0):(i(),l($,{key:0},[n(re,{name:"layout"},{default:g(()=>[t(b)?(i(),l("div",Ee,[o("div",Ie,[n(r),o("div",Pe,a(t(b)),1)])])):m("",!0)]),_:1}),n(w,{label:e.$t("labels.email"),name:"email",rules:E.email},{default:g(()=>[n(_,{value:t(p).email,"onUpdate:value":s[0]||(s[0]=f=>t(p).email=f),type:"email",autocomplete:"email",size:"large",placeholder:e.$t("msg.info.signUp.workEmail"),onFocus:x},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),n(w,{label:e.$t("labels.password"),name:"password",rules:E.password},{default:g(()=>[n(V,{value:t(p).password,"onUpdate:value":s[1]||(s[1]=f=>t(p).password=f),autocomplete:"new-password",size:"large",class:"password",placeholder:e.$t("msg.info.signUp.enterPassword"),onFocus:x},null,8,["value","placeholder"])]),_:1},8,["label","rules"])],64)),o("div",Re,[t(c).disableEmailAuth?m("",!0):(i(),l("button",Te,[o("span",Ae,[n(W),d(" "+a(e.$t("general.signUp")),1)])])),t(c).googleAuthEnabled?(i(),l("a",{key:1,href:`${t(c).ncSiteUrl}/auth/google`,class:"scaling-btn bg-opacity-100 !after:bg-white !text-primary !no-underline"},[o("span",Se,[n(F),d(" "+a(e.$t("labels.signUpWithProvider",{provider:"Google"})),1)])],8,Le)):m("",!0),t(c).oidcAuthEnabled?(i(),l("div",Ne,[o("a",{href:`${t(c).ncSiteUrl}/auth/oidc`,class:"!text-primary !no-underline"},[o("button",Ce,[o("span",Ve,[n(G),t(c).disableEmailAuth?(i(),l($,{key:1},[d(a(e.$t("general.signUp")),1)],64)):(i(),l($,{key:0},[d(a(e.$t("labels.signUpWithProvider",{provider:t(c).oidcProviderName||"OpenID Connect"})),1)],64))])])],8,ze)])):m("",!0),t(c).disableEmailAuth?m("",!0):(i(),l("div",We,[n(M,{checked:t(v),"onUpdate:checked":s[2]||(s[2]=f=>me(v)?v.value=f:null),size:"small",class:"my-1 hover:ring hover:ring-accent hover:ring-opacity-100 !focus:ring !focus:ring-accent focus:ring-opacity-100"},null,8,["checked"]),o("div",Fe,a(e.$t("msg.subscribeToOurWeeklyNewsletter")),1)])),o("div",Ge,[d(a(e.$t("msg.info.signUp.alreadyHaveAccount"))+" ",1),n(j,{onClick:C},{default:g(()=>[d(a(e.$t("general.signIn")),1)]),_:1})])])]),_:1},8,["model"])]),o("div",Me,[d(a(e.$t("msg.bySigningUp"))+" ",1),o("a",je,a(e.$t("title.termsOfService")),1)])])]),_:1})])}}});export{Ye as default};
