import{e as O,a9 as ee,G as r,aZ as ae,fT as se,r as g,o1 as le,a7 as te,V as ne,a8 as M,n as c,em as oe,jf as ie,gy as re,g3 as ce,c as d,o as t,L as e,b0 as ue,I as T,w as o,an as k,aq as $,K as de,aT as E,bD as me,ag as u,b as p,bX as fe,a as m,cn as P,ig as z,c4 as ge,ap as pe,t as h,d as K,ok as ve,g$ as we,ia as ye,ol as v,om as G,_ as he}from"./DOFFjK0_.js";import{a as xe,g as _e}from"./DzBSAsxR.js";import{R as be,_ as Ce}from"./D4c215jk.js";const Ie={class:"nc-cell-field nc-user-select h-full w-full flex items-center read-only"},Te={key:0,class:"w-full max-w-full"},ke={class:"flex-none"},Pe=O({__name:"Readonly",props:{modelValue:{},rowIndex:{},location:{},forceMulti:{type:Boolean},options:{}},setup(x){const{t:Se}=ee(),S=r(ae),f=r(se),_=r(le,g(!1)),A=te(),q=ne(),{basesUser:X}=M(A),{idUserMap:Z}=M(q),J=c(()=>S.value.base_id?X.value.get(S.value.base_id)||[]:[]),U=r(oe,g(!1)),b=c(()=>{var a;return x.forceMulti||((a=f.value.meta)==null?void 0:a.is_multi)}),w=r(ie,g(_.value?1:void 0)),V=r(re,g(!1)),C=r(ce,g({isPageDesignerPreviewPanel:!1})),Q=c(()=>C.value.isPageDesignerPreviewPanel),j=c(()=>[...[],...x.options??xe(f.value,!1,U.value,J.value)]),W=c(()=>j.value.reduce((a,l)=>(l.id&&(a[l.id]=l),l.email&&(a[l.email.trim()]=l),a),{})),I=c(()=>_e(W.value,x.modelValue)),Y=c(()=>{var a,l;return b.value?(I.value||[]).map(i=>i.value):((l=(a=I.value||[])==null?void 0:a[0])==null?void 0:l.value)||""}),y=a=>{var l,i;return!((i=(l=Z.value)==null?void 0:l[a])!=null&&i.deleted)};return(a,l)=>{var B,H,F,N,D;const i=ge,L=pe,R=fe;return t(),d("div",Ie,[e(U)&&((B=("parseProp"in a?a.parseProp:e(ue))(e(f).meta))!=null&&B.isList)?(t(),d("div",Te,[(t(),T(E(e(b)?e(ve):e(Ce)),{value:e(Y),class:"nc-field-layout-list",disabled:""},{default:o(()=>[(t(!0),d(k,null,$(e(j),s=>(t(),d(k,{key:s.id||s.email},[s.deleted?de("",!0):(t(),T(E(e(b)?e(me):e(be)),{key:s.id||s.email,class:u(`nc-select-option-${e(f).title}-${s.email}`),"data-testid":`select-option-${e(f).title}-${a.location==="filter"?"filter":a.rowIndex}`,value:s.id},{default:o(()=>[p(R,{class:"rounded-tag max-w-full !pl-0",color:"'#ccc'"},{default:o(()=>[m("span",{style:P({color:("getSelectTypeOptionTextColor"in a?a.getSelectTypeOptionTextColor:e(z))("#ccc")}),class:"flex items-stretch gap-2 text-small"},[m("div",null,[p(i,{disabled:!y(s.id),user:s,class:"!text-[0.5rem] !h-[16.8px]",size:"auto"},null,8,["disabled","user"])]),p(L,{class:"truncate max-w-full","show-on-truncate-only":""},{title:o(()=>{var n;return[K(h(((n=s.display_name)==null?void 0:n.trim())||s.email),1)]}),default:o(()=>{var n;return[m("span",{class:u([{"text-gray-600":!y(s.id||s.email)},"text-ellipsis overflow-hidden"]),style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},h(((n=s.display_name)==null?void 0:n.trim())||s.email),3)]}),_:2},1024)],4)]),_:2},1024)]),_:2},1032,["class","data-testid","value"]))],64))),128))]),_:1},8,["value"]))])):(t(),d("div",{key:1,class:u(["flex overflow-hidden",{"gap-y-1":!e(Q),"flex-wrap flex-col items-start gap-2":((F=(H=e(C))==null?void 0:H.widget)==null?void 0:F.displayAs)==="List"}]),style:P(((D=(N=e(C))==null?void 0:N.widget)==null?void 0:D.displayAs)!=="List"?{"flex-wrap":!e(_),"max-width":"100%","-webkit-line-clamp":("rowHeightTruncateLines"in a?a.rowHeightTruncateLines:e(ye))(e(w),!0),maxHeight:`${("rowHeightInPx"in a?a.rowHeightInPx:e(we))[e(w)]-12}px`}:{})},[(t(!0),d(k,null,$(e(I),s=>(t(),T(R,{key:s.value,class:u([{"!my-0":!e(w)||e(w)===1},"rounded-tag max-w-full !pl-0"]),color:s.value===e(v)?("themeV4Colors"in a?a.themeV4Colors:e(G)).brand[50]:a.location==="filter"?("themeV4Colors"in a?a.themeV4Colors:e(G)).gray[200]:"#ccc"},{default:o(()=>{var n;return[m("span",{class:u([{"text-sm":e(V),"text-small":!e(V)},"flex items-stretch gap-2"]),style:P({color:("getSelectTypeOptionTextColor"in a?a.getSelectTypeOptionTextColor:e(z))("#ccc")})},[m("div",ke,[p(i,{disabled:!y(s.value),size:"auto",user:{display_name:(n=s.label)!=null&&n.includes("@")?"":s.label.trim(),email:s.label,meta:s.meta},class:u(["!text-[0.5rem] !h-[16.8px]",{"!bg-white":s.value===e(v)}]),"show-placeholder-icon":s.value===e(v)},null,8,["disabled","user","class","show-placeholder-icon"])]),p(L,{class:"truncate max-w-full","show-on-truncate-only":""},{title:o(()=>[K(h(s.label),1)]),default:o(()=>[m("span",{class:u([{"text-gray-600":!y(s.value)&&s.value!==e(v),"text-nc-content-brand":s.value===e(v),"font-600":e(_)},"text-ellipsis overflow-hidden"]),style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},h(s.label),3)]),_:2},1024)],6)]}),_:2},1032,["class","color"]))),128))],6))])}}}),Le=Object.assign(he(Pe,[["__scopeId","data-v-de386e91"]]),{__name:"CellUserReadonly"});export{Le as default};
