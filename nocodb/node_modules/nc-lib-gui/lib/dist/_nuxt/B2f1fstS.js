const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DOFFjK0_.js","./entry.DDfSYhWa.css","./D3NQkx6S.js","./D0vnHTOx.js","./BRTCxTHu.js","./D_wq2ltS.js","./Item.C85DUSg3.css","./DDEVLD8O.js","./-rIuSlCu.js","./DiUleKVo.js","./JUJEmhCv.js","./Modal.CB1oWLel.css","./BrfakvRE.js","./DG2ZEhLK.js","./SJHyi9T4.js","./SpSJ8E4d.js","./9aYOtC5C.js","./index.CotXCNy2.css","./B3Wp9c04.js","./Dh5zKH8k.js","./D2QgEzTv.js","./BYGCxle3.js","./ColumnMenu.DQG9Y5_N.css","./Menu.t7sYKetr.css","./CiBV2ZED.js","./ZNRZafJ9.js","./BhfICdUA.js","./NRjd0XWG.js","./RfUK_fd6.js","./SelectOptions.DqNkMQ-A.css","./BNo10Mdm.js","./index.C8L8AhJa.css","./hehmy6V1.js","./BvG7Iv4q.js","./CyXz1Zkk.js","./CPChVVVr.js","./D4c215jk.js","./CFXGfO_A.js","./VKUQM8lk.js","./YaKnxhzO.js","./BqWeTF94.js","./sgaWLnOz.js","./CQugZrqw.js","./index._6B72PDH.css","./C6nWwNvX.js","./BpgQOThx.js","./CYkscC4Z.js","./CHgOe2F-.js","./ps5He39s.js","./DEAKw9Pl.js","./Cl-qOJW6.js","./DmoodaOn.js","./Bo7kLdUR.js","./4PLl4EP6.js","./DcFNOSET.js","./boyBAVNN.js","./B3tDgntu.js","./Db9kSA7A.js","./EditOrAddProvider.C2farLzy.css"])))=>i.map(i=>d[i]);
import{e as Ve,a9 as Be,av as pe,a8 as Fe,V as je,n as m,J as Pe,r as f,cg as Ne,cf as Se,S as Ue,as as qe,G as L,aZ as ze,jd as He,em as Ke,gD as Ge,o3 as We,aD as H,gW as ve,il as me,gU as fe,gV as Je,gs as _e,k0 as Qe,aj as ye,fU as Xe,j1 as K,h3 as Ze,aQ as Ye,c as _,o as s,a as G,K as I,b as W,I as C,L as e,an as J,w as D,aS as X,d as el,t as Q,ap as ll,ag as N,aq as tl,iI as ol,M as al,P as he,N as S,eJ as nl,j6 as sl,aW as Z,aX as il,fT as ul,_ as rl}from"./DOFFjK0_.js";import{u as dl}from"./BYGCxle3.js";const cl=X(()=>Z(()=>import("./DOFFjK0_.js").then(i=>i.oR),__vite__mapDeps([0,1]),import.meta.url).then(i=>i.default||i)),pl=X(()=>Z(()=>import("./D3NQkx6S.js"),__vite__mapDeps([2,0,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]),import.meta.url).then(i=>i.default||i)),vl=X(()=>Z(()=>import("./CiBV2ZED.js").then(i=>i.E),__vite__mapDeps([24,0,1,7,25,26,27,28,13,14,21,20,29,30,31,32,33,34,35,36,18,37,38,39,40,8,12,41,5,6,16,17,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58]),import.meta.url).then(i=>i.default||i)),ml=["data-test-id"],fl={key:1,class:"text-red-500"},_l={key:0,class:"flex-1"},yl={key:1},hl={class:"nc-edit-or-add-provider-wrapper"},kl=Ve({__name:"VirtualCell",props:{column:{},hideMenu:{type:Boolean},required:{type:[Boolean,Number]},hideIcon:{type:Boolean},hideIconTooltip:{type:Boolean},isHiddenCol:{type:Boolean},showLockIcon:{type:Boolean}},setup(i){const V=i,{t:B}=Be(),t=pe(V,"column"),{base:ke,tables:be}=Fe(je()),we=m(()=>{var l,o;return(o=(l=ke.value)==null?void 0:l.sources)==null?void 0:o.some(n=>{var p;return n.id===((p=t.value)==null?void 0:p.source_id)&&!n.is_meta&&!n.is_local})}),Y=pe(V,"hideMenu"),{isMobileMode:x}=Pe(),a=f(!1),c=f(!1),F=f(!1);il(ul,t);const{isAllowed:Ie}=dl(),Oe=m(()=>{var l;return!V.showLockIcon||!((l=t.value)!=null&&l.id)?!0:Ie(Ne.FIELD,t.value.id,Se.RECORD_FIELD_EDIT)}),{metas:U}=Ue(),{isUIAllowed:E,isMetaReadOnly:ge}=qe(),d=L(ze,f()),xe=L(He,f(!1)),q=L(Ke,f(!1)),u=L(Ge,f(!1)),v=L(We,f(!1)),Ee=m(()=>{var l;return((l=d.value)==null?void 0:l.type)==="view"}),z=m(()=>{var l;return(l=d==null?void 0:d.value)==null?void 0:l.title}),ee=m(()=>{var l,o,n,p,y,O;return H(t.value)?(l=t.value)==null?void 0:l.colOptions:(n=(o=t==null?void 0:t.value)==null?void 0:o.colOptions)!=null&&n.fk_relation_column_id?(O=(y=(p=d==null?void 0:d.value)==null?void 0:p.columns)==null?void 0:y.find(T=>{var g,h;return T.id===((h=(g=t==null?void 0:t.value)==null?void 0:g.colOptions)==null?void 0:h.fk_relation_column_id)}))==null?void 0:O.colOptions:null}),Te=m(()=>{var l,o,n;return((l=ee.value)==null?void 0:l.fk_related_model_id)&&((n=U.value)==null?void 0:n[(o=ee.value)==null?void 0:o.fk_related_model_id])}),$=m(()=>{var l;return(l=Te.value)==null?void 0:l.title}),Ce=m(()=>{var o,n,p,y,O,T,g,h,M,R,k,P,ae,ne,se,ie,ue,re,de,ce;if(!t.value)return"";let l="";if(H(t.value)&&$.value&&we.value){if(ve(t.value)){const r=((o=be.value)==null?void 0:o.find(A=>{var b,w;return A.id===((w=(b=t.value)==null?void 0:b.colOptions)==null?void 0:w.fk_mm_model_id)}))||((y=U.value)==null?void 0:y[(p=(n=t.value)==null?void 0:n.colOptions)==null?void 0:p.fk_mm_model_id]);l=r?`
Junction Table: ${r.title}`:""}else if(me(t.value)){const r=(M=(h=(g=U.value)==null?void 0:g[(T=(O=t.value)==null?void 0:O.colOptions)==null?void 0:T.fk_related_model_id])==null?void 0:h.columns)==null?void 0:M.find(A=>{var b,w;return A.id===((w=(b=t.value)==null?void 0:b.colOptions)==null?void 0:w.fk_child_column_id)});l=(R=r==null?void 0:r.title)!=null&&R.startsWith("nc_")?"":`
Foreign Key Column: ${r.title}`}else if(fe(t.value)){const r=(P=(k=d.value)==null?void 0:k.columns)==null?void 0:P.find(A=>{var b,w;return A.id===((w=(b=t.value)==null?void 0:b.colOptions)==null?void 0:w.fk_child_column_id)});l=(ae=r==null?void 0:r.title)!=null&&ae.startsWith("nc_")?"":`
Foreign Key Column: ${r.title}`}}return me(t.value)?`'${z.value}' ${B("labels.hasMany")} '${$.value}'${l}`:ve(t.value)?`'${z.value}' & '${$.value}' ${B("labels.manyToMany")}${l}`:fe(t.value)?`'${(ne=t==null?void 0:t.value)==null?void 0:ne.title}' ${B("labels.belongsTo")} '${$.value}'${l}`:Je(t.value)?`'${z.value}' & '${$.value}' ${B("labels.oneToOne")}${l}`:_e(t.value)?`Formula - ${Qe((ie=(se=t.value)==null?void 0:se.colOptions)==null?void 0:ie.formula,(ue=d==null?void 0:d.value)==null?void 0:ue.columns,(de=(re=t.value)==null?void 0:re.colOptions)==null?void 0:de.formula_raw)}`:((ce=t==null?void 0:t.value)==null?void 0:ce.title)||""}),De=m(()=>H(t.value)||_e(t.value)),j=f(null),$e=m(()=>{var l;return t.value.uidt===ye.LinkToAnotherRecord&&((l=t.value.colOptions)==null?void 0:l.type)===Xe.ONE_TO_ONE?K[ye.Links]:Ze(t.value)?K.AIButton:t.value.uidt?K[t.value.uidt]:""}),Me=async l=>{j.value=l,a.value=!0},le=f(),te=()=>{j.value=null,a.value=!1};Ye(a,l=>{l||(F.value=!1)});const oe=(l,o=!1)=>{u.value&&(l==null?void 0:l.type)==="dblclick"||v.value||Ee.value||!q.value&&E("fieldEdit")&&!x.value&&(!ge.value||sl.includes(t.value.uidt))&&(o&&(F.value=!0),a.value=!0)},Re=l=>{q.value||!E("fieldEdit")&&!x.value||(l.preventDefault(),l.stopPropagation(),c.value=!c.value)},Ae=()=>{var l;a.value=!0,(l=le.value)!=null&&l.shouldKeepModalOpen()||(a.value=!1,F.value=!1)},Le=l=>{if(!(x.value||!E("fieldEdit"))){if(c.value)l.preventDefault(),l.stopPropagation();else if(u.value&&!a.value&&!v.value){c.value=!0;return}c.value=!1}};return(l,o)=>{var h,M,R;const n=cl,p=ll,y=al,O=pl,T=vl,g=nl;return s(),_("div",{class:N(["flex items-center w-full h-full text-small text-gray-500 font-weight-medium group",{"flex-col !items-start justify-center pt-0.5":e(u)&&!e(x)&&!e(v),"bg-gray-100":e(u)&&!e(v)?e(a)||e(c):!1,"nc-cell-expanded-form-header cursor-pointer hover:bg-gray-100":e(u)&&!e(x)&&e(E)("fieldEdit")&&!e(v)}]),onDblclick:oe,onContextmenu:S(Re,["right"]),onClick:Le},[G("div",{class:N(["nc-virtual-cell-name-wrapper flex-1 flex items-center",{"max-w-[calc(100%_-_23px)]":!e(u)&&!((h=e(t).description)!=null&&h.length),"max-w-[calc(100%_-_44px)]":!e(u)&&((M=e(t).description)==null?void 0:M.length),"max-w-full":e(u)&&!e(v)}])},[e(t)&&!V.hideIcon?(s(),_(J,{key:0},[e(xe)?(s(),C(p,{key:0,disabled:l.hideIconTooltip,class:"flex items-center",placement:"bottom"},{title:D(()=>[el(Q(e($e)),1)]),default:D(()=>[W(n)]),_:1},8,["disabled"])):(s(),C(n,{key:1}))],64)):I("",!0),W(p,{placement:"bottom",class:"truncate name pl-1","show-on-truncate-only":!e(De)},{title:D(()=>[(s(!0),_(J,null,tl(e(Ce).split(`
`),(k,P)=>(s(),_("div",{key:P},Q(k),1))),128))]),default:D(()=>[G("span",{"data-test-id":e(t).title,class:N({"select-none":e(u)&&!e(v)})},Q(e(t).title),11,ml)]),_:1},8,["show-on-truncate-only"]),("isVirtualColRequired"in l?l.isVirtualColRequired:e(ol))(e(t),((R=e(d))==null?void 0:R.columns)||[])||l.required?(s(),_("span",fl," *")):I("",!0),e(Oe)?I("",!0):(s(),C(y,{key:2,icon:"ncLock",class:"nc-column-lock-icon flex-none !ml-1 w-3.5 h-3.5 opacity-90"})),e(u)&&!e(x)&&e(E)("fieldEdit")&&!e(v)&&!e(Y)?(s(),C(y,{key:3,icon:"arrowDown",class:N(["nc-column-context-menu flex-none cursor-pointer ml-1 group-hover:visible w-4 h-4",{visible:e(a)||e(c),invisible:!(e(a)||e(c))}])},null,8,["class"])):I("",!0)],2),e(Y)?I("",!0):(s(),_(J,{key:0},[e(u)?I("",!0):(s(),_("div",_l)),!e(q)&&e(E)("fieldEdit")?(s(),C(O,{key:1,"is-open":e(c),"onUpdate:isOpen":o[0]||(o[0]=k=>he(c)?c.value=k:null),"is-hidden-col":l.isHiddenCol,virtual:!0,onAddColumn:Me,onEdit:oe},null,8,["is-open","is-hidden-col"])):I("",!0)],64)),W(g,{visible:e(a),"onUpdate:visible":o[4]||(o[4]=k=>he(a)?a.value=k:null),class:"h-full",trigger:["click"],placement:e(u)&&!e(v)?"bottomLeft":"bottomRight","overlay-class-name":`nc-dropdown-edit-column ${e(a)?"active":""}`,onVisibleChange:Ae},{overlay:D(()=>[G("div",hl,[e(a)?(s(),C(T,{key:0,ref_key:"editOrAddProviderRef",ref:le,column:e(j)?null:e(t),"column-position":e(j),class:"w-full","edit-description":e(F),onSubmit:te,onCancel:te,onClick:o[2]||(o[2]=S(()=>{},["stop"])),onKeydown:o[3]||(o[3]=S(()=>{},["stop"]))},null,8,["column","column-position","edit-description"])):I("",!0)])]),default:D(()=>[e(u)&&!e(v)?(s(),_("div",{key:0,class:"h-[1px]",onDblclick:o[1]||(o[1]=S(()=>{},["stop"]))}," ",32)):(s(),_("div",yl))]),_:1},8,["visible","placement","overlay-class-name"])],34)}}}),Il=Object.assign(rl(kl,[["__scopeId","data-v-6fcec453"]]),{__name:"SmartsheetHeaderVirtualCell"});export{Il as default};
