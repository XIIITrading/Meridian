import{e as L,T as E,b5 as P,gj as U,r as g,n as D,aH as d,c as f,o as w,b as t,a as c,w as o,d as u,M as T,t as m,X as B,L as a,a0 as $,d1 as M,by as j,K as F,O as K,ag as O,P as z,Q as G,an as H,eV as W,eW as q,a4 as X}from"./DOFFjK0_.js";const v=""+new URL("grid.DUgR9AKo.png",import.meta.url).href,J=""+new URL("gallery.Cd9ckno3.png",import.meta.url).href,Q=""+new URL("kanban.C7eL09OH.png",import.meta.url).href,Y=""+new URL("calendar.XdsCSkJk.png",import.meta.url).href,Z={class:"flex flex-col gap-5"},ee={class:"flex flex-row items-center gap-x-2 text-base font-weight-700 text-gray-800"},se={key:0,class:"mb-2 text-sm text-red-500"},ae={class:"flex flex-row justify-end gap-x-2"},te=["src"],oe=L({__name:"AskPassword",props:{modelValue:{type:Boolean},viewType:{}},emits:["update:modelValue"],setup(b,{emit:h}){const p=b,n=E(p,"modelValue",h),y=P(),{loadSharedView:x}=U(),r=g({password:void 0}),l=g(null),_=async()=>{try{await x(y.params.viewId,r.value.password),n.value=!1}catch(e){const s=await W(e);console.error(s.message),s.error===q.INVALID_SHARED_VIEW_PASSWORD?l.value=s.message:X.error(s.message)}},k=e=>{var s;return e&&((s=e==null?void 0:e.focus)==null?void 0:s.call(e))},R=D(()=>{switch(p.viewType){case d.GRID:return v;case d.GALLERY:return J;case d.KANBAN:return Q;case d.CALENDAR:return Y;default:return v}});return(e,s)=>{const V=T,I=M,A=$,N=B,S=K,C=G;return w(),f(H,null,[t(C,{visible:a(n),"onUpdate:visible":s[2]||(s[2]=i=>z(n)?n.value=i:null),c:"",size:"small",class:O({active:a(n)}),"mask-closable":!1,"mask-style":{backgroundColor:"rgba(255, 255, 255, 0.64)",backdropFilter:"blur(8px)"}},{default:o(()=>[c("div",Z,[c("div",ee,[t(V,{icon:"ncKey",class:"!text-base w-5 h-5"}),u(" "+m(e.$t("msg.thisSharedViewIsProtected")),1)]),t(N,{ref:"formRef",model:a(r),name:"create-new-table-form",onFinish:_},{default:o(()=>[t(A,{name:"password",rules:[{required:!0,message:e.$t("msg.error.signUpRules.passwdRequired")}],class:"!mb-0"},{default:o(()=>[t(I,{ref:k,value:a(r).password,"onUpdate:value":s[0]||(s[0]=i=>a(r).password=i),class:"!rounded-lg !text-small","hide-details":"",placeholder:e.$t("msg.enterPassword"),onInput:s[1]||(s[1]=i=>l.value=null)},null,8,["value","placeholder"]),t(j,{name:"layout"},{default:o(()=>[a(l)?(w(),f("div",se,m(a(l)),1)):F("",!0)]),_:1})]),_:1},8,["rules"])]),_:1},8,["model"]),c("div",ae,[t(S,{disabled:!a(r).password,type:"primary",size:"small","html-type":"submit",class:"!px-2","data-testid":"nc-shared-view-password-submit-btn",onClick:_},{loading:o(()=>[u(m(e.$t("msg.verifyingPassword")),1)]),default:o(()=>[u(m(e.$t("objects.view"))+" ",1)]),_:1},8,["disabled"])])])]),_:1},8,["visible","class"]),c("img",{alt:"view image",src:a(R),class:"fixed inset-0 w-full h-full"},null,8,te)],64)}}}),le=Object.assign(oe,{__name:"SharedViewAskPassword"});export{le as default};
