import{e as Q,av as Z,r as d,aX as c,dI as ee,kX as ae,a8 as se,V as le,n as r,jw as w,iu as _,iv as x,iw as h,ju as j,aj as U,kr as ie,em as te,I as M,c as ne,L as i,ip as re,o as b,ez as oe,P,N as ue,ag as de,aT as ce,a1 as me,mn as fe,iK as ye,js as ve,l9 as be,mo as pe,ir as ge,iq as Fe,is as Re,jv as Se,it as Oe,jt as Te,l8 as De,fT as Ie,gb as ke,_ as we}from"./DOFFjK0_.js";import{S as _e}from"./Cb5B9eG-.js";import{M as C}from"./C_qz9woQ.js";import{I as B,F as xe,D as V,C as he,P as je,a as Ue,R as Me,T as Pe,Y as Ce,b as Be,c as Ve}from"./DA4KItu_.js";import{U as E}from"./DzBSAsxR.js";const Ee=Q({__name:"FilterInput",props:{column:{},filter:{},disabled:{type:Boolean}},emits:["updateFilterValue"],setup(L,{emit:A}){var g,F,R;const e=L,N=A,s=Z(e,"column"),Y=d(!0),q=d(e.filter.readOnly||e.disabled);c(Ie,s),c(ae,ee(Y)),c(ke,q);const $={isSingleSelect:De,isMultiSelect:Te,isDate:_,isYear:j,isDateTime:x,isTime:h,isRating:Oe,isDuration:Se,isPercent:Re,isCurrency:Fe,isDecimal:ge,isReadonlyDateTime:pe,isInt:w,isFloat:be,isTextArea:ve,isLinks:a=>a.uidt===U.Links,isUser:ye,isReadonlyUser:fe},{sqlUis:f}=se(le()),z=d((g=s.value)!=null&&g.source_id&&f.value[(F=s.value)==null?void 0:F.source_id]?f.value[(R=s.value)==null?void 0:R.source_id]:Object.values(f.value)[0]),n=r(()=>s.value&&z.value.getAbstractType(s.value)),X=a=>{const l=$[a];return!s.value||!l?!1:l(s.value,n.value)},o=r({get:()=>e.filter.value,set:a=>{N("updateFilterValue",a)}}),K=[{value:!0,label:"true"},{value:!1,label:"false"},{value:null,label:"unset"}],W=a=>["anyof","nanyof"].includes(a)?C:_e,y=a=>["daysAgo","daysFromNow","pastNumberOfDays","nextNumberOfDays"].includes(a)?V:Ve,p=r(()=>({isSingleSelect:W(e.filter.comparison_op),isMultiSelect:C,isDate:y(e.filter.comparison_sub_op),isYear:Ce,isDateTime:y(e.filter.comparison_sub_op),isReadonlyDateTime:y(e.filter.comparison_sub_op),isTime:Pe,isRating:Me,isDuration:Ue,isPercent:je,isCurrency:he,isDecimal:V,isInt:B,isFloat:xe,isLinks:B,isUser:E,isReadonlyUser:E})),u=r(()=>Object.keys(p.value).find(a=>X(a))),G=r(()=>{var a,l,m,t,S,O,T,D,I,k;switch(u.value){case"isSingleSelect":case"isMultiSelect":return{disableOptionCreation:!0,showReadonlyField:((a=e.filter)==null?void 0:a.readOnly)||(e==null?void 0:e.disabled)};case"isPercent":case"isDecimal":case"isFloat":case"isLinks":case"isInt":return{class:"h-32px",showReadonlyField:((l=e.filter)==null?void 0:l.readOnly)||(e==null?void 0:e.disabled)};case"isDuration":return{showValidationError:!1,showReadonlyField:((m=e.filter)==null?void 0:m.readOnly)||(e==null?void 0:e.disabled)};case"isUser":return{forceMulti:!0,showReadonlyField:((t=e.filter)==null?void 0:t.readOnly)||(e==null?void 0:e.disabled)};case"isReadonlyUser":return["anyof","nanyof"].includes(e.filter.comparison_op)?{forceMulti:!0,showReadonlyField:((S=e.filter)==null?void 0:S.readOnly)||(e==null?void 0:e.disabled)}:{};case"isCurrency":return{hidePrefix:!0,showReadonlyField:((O=e.filter)==null?void 0:O.readOnly)||(e==null?void 0:e.disabled)};case"isRating":return{style:{minWidth:`${(((D=(T=s.value)==null?void 0:T.meta)==null?void 0:D.max)||5)*19}px`},showReadonlyField:((I=e.filter)==null?void 0:I.readOnly)||(e==null?void 0:e.disabled)};default:return{showReadonlyField:((k=e.filter)==null?void 0:k.readOnly)||(e==null?void 0:e.disabled)}}}),H=r(()=>{var a;return s.value&&(((a=s.value)==null?void 0:a.uidt)===U.Links||w(s.value,n)||_(s.value,n)||x(s.value,n)||h(s.value,n)||j(s.value,n))}),v=d(!1);c(ie,d(!0)),c(te,d(!0));const J=r(()=>u.value==="isSingleSelect"||u.value==="isMultiSelect"||u.value==="isUser");return(a,l)=>{const m=oe;return i(s)&&("isBoolean"in a?a.isBoolean:i(re))(i(s),i(n))?(b(),M(m,{key:0,value:i(o),"onUpdate:value":l[0]||(l[0]=t=>P(o)?o.value=t:null),disabled:a.filter.readOnly||e.disabled,options:K},null,8,["value","disabled"])):(b(),ne("div",{key:1,class:de(["bg-white border-1 flex flex-grow min-h-4 h-full px-1 items-center nc-filter-input-wrapper !rounded-lg",{"px-2":i(H),"border-brand-500":i(v),"!max-w-100":i(J)}]),onMouseup:l[4]||(l[4]=ue(()=>{},["stop"]))},[(b(),M(ce(i(u)?i(p)[i(u)]:Be),me({modelValue:i(o),"onUpdate:modelValue":l[1]||(l[1]=t=>P(o)?o.value=t:null),disabled:a.filter.readOnly||e.disabled,placeholder:"Enter a value",column:i(s),class:["flex !rounded-lg",{"text-nc-content-gray-muted pointer-events-none":e.disabled}]},i(G),{location:"filter",onFocus:l[2]||(l[2]=t=>v.value=!0),onBlur:l[3]||(l[3]=t=>v.value=!1)}),null,16,["modelValue","disabled","column","class"]))],34))}}}),$e=Object.assign(we(Ee,[["__scopeId","data-v-7440c073"]]),{__name:"SmartsheetToolbarFilterInput"});export{$e as _};
